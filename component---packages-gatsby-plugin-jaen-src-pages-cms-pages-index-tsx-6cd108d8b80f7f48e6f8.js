/*! For license information please see component---packages-gatsby-plugin-jaen-src-pages-cms-pages-index-tsx-6cd108d8b80f7f48e6f8.js.LICENSE.txt */
(self.webpackChunkphotonq=self.webpackChunkphotonq||[]).push([[8],{768:function(e,t){"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=4,t.DefaultEventPriority=16,t.DiscreteEventPriority=1},2450:function(e,t,n){e.exports=function(e){var t={},r=n(7378),i=n(1194),o=Object.assign;function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var _=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var w=Symbol.iterator;function x(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=w&&e[w]||e["@@iterator"])?e:null}function S(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case c:return"Fragment";case u:return"Portal";case h:return"Profiler";case d:return"StrictMode";case m:return"Suspense";case v:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case p:return(e.displayName||"Context")+".Consumer";case f:return(e._context.displayName||"Context")+".Provider";case g:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case y:return null!==(t=e.displayName||null)?t:S(e.type)||"Memo";case b:t=e._payload,e=e._init;try{return S(e(t))}catch(n){}}return null}function E(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S(t);case 8:return t===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function k(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function T(e){if(k(e)!==e)throw Error(a(188))}function C(e){var t=e.alternate;if(!t){if(null===(t=k(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return T(i),e;if(o===r)return T(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}function M(e){return null!==(e=C(e))?A(e):null}function A(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=A(e);if(null!==t)return t;e=e.sibling}return null}function P(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=P(e);if(null!==t)return t}e=e.sibling}return null}var O,U=Array.isArray,z=e.getPublicInstance,D=e.getRootHostContext,L=e.getChildHostContext,N=e.prepareForCommit,I=e.resetAfterCommit,R=e.createInstance,F=e.appendInitialChild,G=e.finalizeInitialChildren,j=e.prepareUpdate,B=e.shouldSetTextContent,V=e.createTextInstance,H=e.scheduleTimeout,W=e.cancelTimeout,q=e.noTimeout,$=e.isPrimaryRenderer,Y=e.supportsMutation,X=e.supportsPersistence,Z=e.supportsHydration,K=e.getInstanceFromNode,Q=e.preparePortalMount,J=e.getCurrentEventPriority,ee=e.detachDeletedInstance,te=e.supportsMicrotasks,ne=e.scheduleMicrotask,re=e.supportsTestSelectors,ie=e.findFiberRoot,oe=e.getBoundingRect,ae=e.getTextContent,se=e.isHiddenSubtree,le=e.matchAccessibilityRole,ue=e.setFocusIfFocusable,ce=e.setupIntersectionObserver,de=e.appendChild,he=e.appendChildToContainer,fe=e.commitTextUpdate,pe=e.commitMount,ge=e.commitUpdate,me=e.insertBefore,ve=e.insertInContainerBefore,ye=e.removeChild,be=e.removeChildFromContainer,_e=e.resetTextContent,we=e.hideInstance,xe=e.hideTextInstance,Se=e.unhideInstance,Ee=e.unhideTextInstance,ke=e.clearContainer,Te=e.cloneInstance,Ce=e.createContainerChildSet,Me=e.appendChildToContainerChildSet,Ae=e.finalizeContainerChildren,Pe=e.replaceContainerChildren,Oe=e.cloneHiddenInstance,Ue=e.cloneHiddenTextInstance,ze=e.canHydrateInstance,De=e.canHydrateTextInstance,Le=e.canHydrateSuspenseInstance,Ne=e.isSuspenseInstancePending,Ie=e.isSuspenseInstanceFallback,Re=e.registerSuspenseInstanceRetry,Fe=e.getNextHydratableSibling,Ge=e.getFirstHydratableChild,je=e.getFirstHydratableChildWithinContainer,Be=e.getFirstHydratableChildWithinSuspenseInstance,Ve=e.hydrateInstance,He=e.hydrateTextInstance,We=e.hydrateSuspenseInstance,qe=e.getNextHydratableInstanceAfterSuspenseInstance,$e=e.commitHydratedContainer,Ye=e.commitHydratedSuspenseInstance,Xe=e.clearSuspenseBoundary,Ze=e.clearSuspenseBoundaryFromContainer,Ke=e.shouldDeleteUnhydratedTailInstances,Qe=e.didNotMatchHydratedContainerTextInstance,Je=e.didNotMatchHydratedTextInstance;function et(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var tt=!1;function nt(e,t){if(!e||tt)return"";tt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"==typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{tt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?et(e):""}var rt=Object.prototype.hasOwnProperty,it=[],ot=-1;function at(e){return{current:e}}function st(e){0>ot||(e.current=it[ot],it[ot]=null,ot--)}function lt(e,t){ot++,it[ot]=e.current,e.current=t}var ut={},ct=at(ut),dt=at(!1),ht=ut;function ft(e,t){var n=e.type.contextTypes;if(!n)return ut;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function pt(e){return null!=(e=e.childContextTypes)}function gt(){st(dt),st(ct)}function mt(e,t,n){if(ct.current!==ut)throw Error(a(168));lt(ct,t),lt(dt,n)}function vt(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,E(e)||"Unknown",i));return o({},n,r)}function yt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ut,ht=ct.current,lt(ct,e),lt(dt,dt.current),!0}function bt(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=vt(e,t,ht),r.__reactInternalMemoizedMergedChildContext=e,st(dt),st(ct),lt(ct,e)):st(dt),lt(dt,n)}var _t=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(wt(e)/xt|0)|0},wt=Math.log,xt=Math.LN2;var St=64,Et=4194304;function kt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Tt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=kt(s):0!==(o&=a)&&(r=kt(o))}else 0!==(a=n&~i)?r=kt(a):0!==o&&(r=kt(o));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!=(4194240&o)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-_t(t)),r|=e[n],t&=~i;return r}function Ct(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function At(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-_t(t)]=n}function Ot(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-_t(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ut=0;function zt(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var Dt=i.unstable_scheduleCallback,Lt=i.unstable_cancelCallback,Nt=i.unstable_shouldYield,It=i.unstable_requestPaint,Rt=i.unstable_now,Ft=i.unstable_ImmediatePriority,Gt=i.unstable_UserBlockingPriority,jt=i.unstable_NormalPriority,Bt=i.unstable_IdlePriority,Vt=null,Ht=null;var Wt="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},qt=null,$t=!1,Yt=!1;function Xt(e){null===qt?qt=[e]:qt.push(e)}function Zt(){if(!Yt&&null!==qt){Yt=!0;var e=0,t=Ut;try{var n=qt;for(Ut=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}qt=null,$t=!1}catch(i){throw null!==qt&&(qt=qt.slice(e+1)),Dt(Ft,Zt),i}finally{Ut=t,Yt=!1}}return null}var Kt=s.ReactCurrentBatchConfig;function Qt(e,t){if(Wt(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rt.call(t,i)||!Wt(e[i],t[i]))return!1}return!0}function Jt(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return e=nt(e.type,!1);case 11:return e=nt(e.type.render,!1);case 1:return e=nt(e.type,!0);default:return""}}function en(e,t){if(e&&e.defaultProps){for(var n in t=o({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var tn=at(null),nn=null,rn=null,on=null;function an(){on=rn=nn=null}function sn(e,t,n){$?(lt(tn,t._currentValue),t._currentValue=n):(lt(tn,t._currentValue2),t._currentValue2=n)}function ln(e){var t=tn.current;st(tn),$?e._currentValue=t:e._currentValue2=t}function un(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function cn(e,t){nn=e,on=rn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Ni=!0),e.firstContext=null)}function dn(e){var t=$?e._currentValue:e._currentValue2;if(on!==e)if(e={context:e,memoizedValue:t,next:null},null===rn){if(null===nn)throw Error(a(308));rn=e,nn.dependencies={lanes:0,firstContext:e}}else rn=rn.next=e;return t}var hn=null,fn=!1;function pn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==Xo&&0!=(1&e.mode)&&0==(2&Yo)?(null===(e=n.interleaved)?(t.next=t,null===hn?hn=[n]:hn.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function yn(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ot(e,n)}}function bn(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function _n(e,t,n,r){var i=e.updateQueue;fn=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var u=l,c=u.next;u.next=null,null===s?a=c:s.next=c,s=u;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==s&&(null===l?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(s=0,d=c=u=null,l=a;;){var f=l.lane,p=l.eventTime;if((r&f)===f){null!==d&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,m=l;switch(f=t,p=n,m.tag){case 1:if("function"==typeof(g=m.payload)){h=g.call(p,h,f);break e}h=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null==(f="function"==typeof(g=m.payload)?g.call(p,h,f):g))break e;h=o({},h,f);break e;case 2:fn=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(c=d=p,u=h):d=d.next=p,s|=f;if(null===(l=l.next)){if(null===(l=i.shared.pending))break;l=(f=l).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===d&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);na|=s,e.lanes=s,e.memoizedState=h}}function wn(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(a(191,i));i.call(r)}}}var xn=(new r.Component).refs;function Sn(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:o({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var En={isMounted:function(e){return!!(e=e._reactInternals)&&k(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=wa(),i=xa(e),o=mn(r,i);o.payload=t,null!=n&&(o.callback=n),vn(e,o),null!==(t=Sa(e,i,r))&&yn(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=wa(),i=xa(e),o=mn(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),vn(e,o),null!==(t=Sa(e,i,r))&&yn(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=wa(),r=xa(e),i=mn(n,r);i.tag=2,null!=t&&(i.callback=t),vn(e,i),null!==(t=Sa(e,r,n))&&yn(t,e,r)}};function kn(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Qt(n,r)||!Qt(i,o))}function Tn(e,t,n){var r=!1,i=ut,o=t.contextType;return"object"==typeof o&&null!==o?o=dn(o):(i=pt(t)?ht:ct.current,o=(r=null!=(r=t.contextTypes))?ft(e,i):ut),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=En,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Cn(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&En.enqueueReplaceState(t,t.state,null)}function Mn(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=xn,pn(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=dn(o):(o=pt(t)?ht:ct.current,i.context=ft(e,o)),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(Sn(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&En.enqueueReplaceState(i,i.state,null),_n(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}var An=[],Pn=0,On=null,Un=0,zn=[],Dn=0,Ln=null,Nn=1,In="";function Rn(e,t){An[Pn++]=Un,An[Pn++]=On,On=e,Un=t}function Fn(e,t,n){zn[Dn++]=Nn,zn[Dn++]=In,zn[Dn++]=Ln,Ln=e;var r=Nn;e=In;var i=32-_t(r)-1;r&=~(1<<i),n+=1;var o=32-_t(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Nn=1<<32-_t(t)+i|n<<i|r,In=o+e}else Nn=1<<o|n<<i|r,In=e}function Gn(e){null!==e.return&&(Rn(e,1),Fn(e,1,0))}function jn(e){for(;e===On;)On=An[--Pn],An[Pn]=null,Un=An[--Pn],An[Pn]=null;for(;e===Ln;)Ln=zn[--Dn],zn[Dn]=null,In=zn[--Dn],zn[Dn]=null,Nn=zn[--Dn],zn[Dn]=null}var Bn=null,Vn=null,Hn=!1,Wn=!1,qn=null;function $n(e,t){var n=Qa(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Yn(e,t){switch(e.tag){case 5:return null!==(t=ze(t,e.type,e.pendingProps))&&(e.stateNode=t,Bn=e,Vn=Ge(t),!0);case 6:return null!==(t=De(t,e.pendingProps))&&(e.stateNode=t,Bn=e,Vn=null,!0);case 13:if(null!==(t=Le(t))){var n=null!==Ln?{id:Nn,overflow:In}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Qa(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Bn=e,Vn=null,!0}return!1;default:return!1}}function Xn(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function Zn(e){if(Hn){var t=Vn;if(t){var n=t;if(!Yn(e,t)){if(Xn(e))throw Error(a(418));t=Fe(n);var r=Bn;t&&Yn(e,t)?$n(r,n):(e.flags=-4097&e.flags|2,Hn=!1,Bn=e)}}else{if(Xn(e))throw Error(a(418));e.flags=-4097&e.flags|2,Hn=!1,Bn=e}}}function Kn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Bn=e}function Qn(e){if(!Z||e!==Bn)return!1;if(!Hn)return Kn(e),Hn=!0,!1;if(3!==e.tag&&(5!==e.tag||Ke(e.type)&&!B(e.type,e.memoizedProps))){var t=Vn;if(t){if(Xn(e)){for(e=Vn;e;)e=Fe(e);throw Error(a(418))}for(;t;)$n(e,t),t=Fe(t)}}if(Kn(e),13===e.tag){if(!Z)throw Error(a(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));Vn=qe(e)}else Vn=Bn?Fe(e.stateNode):null;return!0}function Jn(){Z&&(Vn=Bn=null,Wn=Hn=!1)}function er(e){null===qn?qn=[e]:qn.push(e)}function tr(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===xn&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function nr(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rr(e){return(0,e._init)(e._payload)}function ir(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=es(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function d(e,t,n,r){return null===t||6!==t.tag?((t=is(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n,r){var o=n.type;return o===c?p(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===b&&rr(o)===t.type)?((r=i(t,n.props)).ref=tr(e,t,n),r.return=e,r):((r=ts(n.type,n.key,n.props,null,e.mode,r)).ref=tr(e,t,n),r.return=e,r)}function f(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=os(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function p(e,t,n,r,o){return null===t||7!==t.tag?((t=ns(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function g(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=is(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case l:return(n=ts(t.type,t.key,t.props,null,e.mode,n)).ref=tr(e,null,t),n.return=e,n;case u:return(t=os(t,e.mode,n)).return=e,t;case b:return g(e,(0,t._init)(t._payload),n)}if(U(t)||x(t))return(t=ns(t,e.mode,n,null)).return=e,t;nr(e,t)}return null}function m(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:d(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===i?h(e,t,n,r):null;case u:return n.key===i?f(e,t,n,r):null;case b:return m(e,t,(i=n._init)(n._payload),r)}if(U(n)||x(n))return null!==i?null:p(e,t,n,r,null);nr(e,n)}return null}function v(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return d(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case l:return h(t,e=e.get(null===r.key?n:r.key)||null,r,i);case u:return f(t,e=e.get(null===r.key?n:r.key)||null,r,i);case b:return v(e,t,n,(0,r._init)(r._payload),i)}if(U(r)||x(r))return p(t,e=e.get(n)||null,r,i,null);nr(t,r)}return null}function y(i,a,s,l){for(var u=null,c=null,d=a,h=a=0,f=null;null!==d&&h<s.length;h++){d.index>h?(f=d,d=null):f=d.sibling;var p=m(i,d,s[h],l);if(null===p){null===d&&(d=f);break}e&&d&&null===p.alternate&&t(i,d),a=o(p,a,h),null===c?u=p:c.sibling=p,c=p,d=f}if(h===s.length)return n(i,d),Hn&&Rn(i,h),u;if(null===d){for(;h<s.length;h++)null!==(d=g(i,s[h],l))&&(a=o(d,a,h),null===c?u=d:c.sibling=d,c=d);return Hn&&Rn(i,h),u}for(d=r(i,d);h<s.length;h++)null!==(f=v(d,i,h,s[h],l))&&(e&&null!==f.alternate&&d.delete(null===f.key?h:f.key),a=o(f,a,h),null===c?u=f:c.sibling=f,c=f);return e&&d.forEach((function(e){return t(i,e)})),Hn&&Rn(i,h),u}function _(i,s,l,u){var c=x(l);if("function"!=typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var d=c=null,h=s,f=s=0,p=null,y=l.next();null!==h&&!y.done;f++,y=l.next()){h.index>f?(p=h,h=null):p=h.sibling;var b=m(i,h,y.value,u);if(null===b){null===h&&(h=p);break}e&&h&&null===b.alternate&&t(i,h),s=o(b,s,f),null===d?c=b:d.sibling=b,d=b,h=p}if(y.done)return n(i,h),Hn&&Rn(i,f),c;if(null===h){for(;!y.done;f++,y=l.next())null!==(y=g(i,y.value,u))&&(s=o(y,s,f),null===d?c=y:d.sibling=y,d=y);return Hn&&Rn(i,f),c}for(h=r(i,h);!y.done;f++,y=l.next())null!==(y=v(h,i,f,y.value,u))&&(e&&null!==y.alternate&&h.delete(null===y.key?f:y.key),s=o(y,s,f),null===d?c=y:d.sibling=y,d=y);return e&&h.forEach((function(e){return t(i,e)})),Hn&&Rn(i,f),c}return function e(r,o,a,d){if("object"==typeof a&&null!==a&&a.type===c&&null===a.key&&(a=a.props.children),"object"==typeof a&&null!==a){switch(a.$$typeof){case l:e:{for(var h=a.key,f=o;null!==f;){if(f.key===h){if((h=a.type)===c){if(7===f.tag){n(r,f.sibling),(o=i(f,a.props.children)).return=r,r=o;break e}}else if(f.elementType===h||"object"==typeof h&&null!==h&&h.$$typeof===b&&rr(h)===f.type){n(r,f.sibling),(o=i(f,a.props)).ref=tr(r,f,a),o.return=r,r=o;break e}n(r,f);break}t(r,f),f=f.sibling}a.type===c?((o=ns(a.props.children,r.mode,d,a.key)).return=r,r=o):((d=ts(a.type,a.key,a.props,null,r.mode,d)).ref=tr(r,o,a),d.return=r,r=d)}return s(r);case u:e:{for(f=a.key;null!==o;){if(o.key===f){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=os(a,r.mode,d)).return=r,r=o}return s(r);case b:return e(r,o,(f=a._init)(a._payload),d)}if(U(a))return y(r,o,a,d);if(x(a))return _(r,o,a,d);nr(r,a)}return"string"==typeof a&&""!==a||"number"==typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=is(a,r.mode,d)).return=r,r=o),s(r)):n(r,o)}}var or=ir(!0),ar=ir(!1),sr={},lr=at(sr),ur=at(sr),cr=at(sr);function dr(e){if(e===sr)throw Error(a(174));return e}function hr(e,t){lt(cr,t),lt(ur,e),lt(lr,sr),e=D(t),st(lr),lt(lr,e)}function fr(){st(lr),st(ur),st(cr)}function pr(e){var t=dr(cr.current),n=dr(lr.current);n!==(t=L(n,e.type,t))&&(lt(ur,e),lt(lr,t))}function gr(e){ur.current===e&&(st(lr),st(ur))}var mr=at(0);function vr(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Ne(n)||Ie(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yr=[];function br(){for(var e=0;e<yr.length;e++){var t=yr[e];$?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}yr.length=0}var _r=s.ReactCurrentDispatcher,wr=s.ReactCurrentBatchConfig,xr=0,Sr=null,Er=null,kr=null,Tr=!1,Cr=!1,Mr=0,Ar=0;function Pr(){throw Error(a(321))}function Or(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Wt(e[n],t[n]))return!1;return!0}function Ur(e,t,n,r,i,o){if(xr=o,Sr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_r.current=null===e||null===e.memoizedState?pi:gi,e=n(r,i),Cr){o=0;do{if(Cr=!1,Mr=0,25<=o)throw Error(a(301));o+=1,kr=Er=null,t.updateQueue=null,_r.current=mi,e=n(r,i)}while(Cr)}if(_r.current=fi,t=null!==Er&&null!==Er.next,xr=0,kr=Er=Sr=null,Tr=!1,t)throw Error(a(300));return e}function zr(){var e=0!==Mr;return Mr=0,e}function Dr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===kr?Sr.memoizedState=kr=e:kr=kr.next=e,kr}function Lr(){if(null===Er){var e=Sr.alternate;e=null!==e?e.memoizedState:null}else e=Er.next;var t=null===kr?Sr.memoizedState:kr.next;if(null!==t)kr=t,Er=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Er=e).memoizedState,baseState:Er.baseState,baseQueue:Er.baseQueue,queue:Er.queue,next:null},null===kr?Sr.memoizedState=kr=e:kr=kr.next=e}return kr}function Nr(e,t){return"function"==typeof t?t(e):t}function Ir(e){var t=Lr(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=Er,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,u=null,c=o;do{var d=c.lane;if((xr&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=h,s=r):u=u.next=h,Sr.lanes|=d,na|=d}c=c.next}while(null!==c&&c!==o);null===u?s=r:u.next=l,Wt(r,t.memoizedState)||(Ni=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,Sr.lanes|=o,na|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Rr(e){var t=Lr(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);Wt(o,t.memoizedState)||(Ni=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Fr(){}function Gr(e,t){var n=Sr,r=Lr(),i=t(),o=!Wt(r.memoizedState,i);if(o&&(r.memoizedState=i,Ni=!0),r=r.queue,Kr(Vr.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==kr&&1&kr.memoizedState.tag){if(n.flags|=2048,qr(9,Br.bind(null,n,r,i,t),void 0,null),null===Xo)throw Error(a(349));0!=(30&xr)||jr(n,t,i)}return i}function jr(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Sr.updateQueue)?(t={lastEffect:null,stores:null},Sr.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Br(e,t,n,r){t.value=n,t.getSnapshot=r,Hr(t)&&Sa(e,1,-1)}function Vr(e,t,n){return n((function(){Hr(t)&&Sa(e,1,-1)}))}function Hr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Wt(e,n)}catch(r){return!0}}function Wr(e){var t=Dr();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:e},t.queue=e,e=e.dispatch=li.bind(null,Sr,e),[t.memoizedState,e]}function qr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Sr.updateQueue)?(t={lastEffect:null,stores:null},Sr.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function $r(){return Lr().memoizedState}function Yr(e,t,n,r){var i=Dr();Sr.flags|=e,i.memoizedState=qr(1|t,n,void 0,void 0===r?null:r)}function Xr(e,t,n,r){var i=Lr();r=void 0===r?null:r;var o=void 0;if(null!==Er){var a=Er.memoizedState;if(o=a.destroy,null!==r&&Or(r,a.deps))return void(i.memoizedState=qr(t,n,o,r))}Sr.flags|=e,i.memoizedState=qr(1|t,n,o,r)}function Zr(e,t){return Yr(8390656,8,e,t)}function Kr(e,t){return Xr(2048,8,e,t)}function Qr(e,t){return Xr(4,2,e,t)}function Jr(e,t){return Xr(4,4,e,t)}function ei(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ti(e,t,n){return n=null!=n?n.concat([e]):null,Xr(4,4,ei.bind(null,t,e),n)}function ni(){}function ri(e,t){var n=Lr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Or(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ii(e,t){var n=Lr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Or(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function oi(e,t){var n=Ut;Ut=0!==n&&4>n?n:4,e(!0);var r=wr.transition;wr.transition={};try{e(!1),t()}finally{Ut=n,wr.transition=r}}function ai(){return Lr().memoizedState}function si(e,t,n){var r=xa(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ui(e)?ci(t,n):(di(e,t,n),null!==(e=Sa(e,r,n=wa()))&&hi(e,t,r))}function li(e,t,n){var r=xa(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ui(e))ci(t,i);else{di(e,t,i);var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Wt(s,a))return}catch(l){}null!==(e=Sa(e,r,n=wa()))&&hi(e,t,r)}}function ui(e){var t=e.alternate;return e===Sr||null!==t&&t===Sr}function ci(e,t){Cr=Tr=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function di(e,t,n){null!==Xo&&0!=(1&e.mode)&&0==(2&Yo)?(null===(e=t.interleaved)?(n.next=n,null===hn?hn=[t]:hn.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function hi(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ot(e,n)}}var fi={readContext:dn,useCallback:Pr,useContext:Pr,useEffect:Pr,useImperativeHandle:Pr,useInsertionEffect:Pr,useLayoutEffect:Pr,useMemo:Pr,useReducer:Pr,useRef:Pr,useState:Pr,useDebugValue:Pr,useDeferredValue:Pr,useTransition:Pr,useMutableSource:Pr,useSyncExternalStore:Pr,useId:Pr,unstable_isNewReconciler:!1},pi={readContext:dn,useCallback:function(e,t){return Dr().memoizedState=[e,void 0===t?null:t],e},useContext:dn,useEffect:Zr,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Yr(4194308,4,ei.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Yr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Yr(4,2,e,t)},useMemo:function(e,t){var n=Dr();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Dr();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=si.bind(null,Sr,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Dr().memoizedState=e},useState:Wr,useDebugValue:ni,useDeferredValue:function(e){var t=Wr(e),n=t[0],r=t[1];return Zr((function(){var t=wr.transition;wr.transition={};try{r(e)}finally{wr.transition=t}}),[e]),n},useTransition:function(){var e=Wr(!1),t=e[0];return e=oi.bind(null,e[1]),Dr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Sr,i=Dr();if(Hn){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Xo)throw Error(a(349));0!=(30&xr)||jr(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Zr(Vr.bind(null,r,o,e),[e]),r.flags|=2048,qr(9,Br.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Dr(),t=Xo.identifierPrefix;if(Hn){var n=In;t=":"+t+"R"+(n=(Nn&~(1<<32-_t(Nn)-1)).toString(32)+n),0<(n=Mr++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Ar++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},gi={readContext:dn,useCallback:ri,useContext:dn,useEffect:Kr,useImperativeHandle:ti,useInsertionEffect:Qr,useLayoutEffect:Jr,useMemo:ii,useReducer:Ir,useRef:$r,useState:function(){return Ir(Nr)},useDebugValue:ni,useDeferredValue:function(e){var t=Ir(Nr),n=t[0],r=t[1];return Kr((function(){var t=wr.transition;wr.transition={};try{r(e)}finally{wr.transition=t}}),[e]),n},useTransition:function(){return[Ir(Nr)[0],Lr().memoizedState]},useMutableSource:Fr,useSyncExternalStore:Gr,useId:ai,unstable_isNewReconciler:!1},mi={readContext:dn,useCallback:ri,useContext:dn,useEffect:Kr,useImperativeHandle:ti,useInsertionEffect:Qr,useLayoutEffect:Jr,useMemo:ii,useReducer:Rr,useRef:$r,useState:function(){return Rr(Nr)},useDebugValue:ni,useDeferredValue:function(e){var t=Rr(Nr),n=t[0],r=t[1];return Kr((function(){var t=wr.transition;wr.transition={};try{r(e)}finally{wr.transition=t}}),[e]),n},useTransition:function(){return[Rr(Nr)[0],Lr().memoizedState]},useMutableSource:Fr,useSyncExternalStore:Gr,useId:ai,unstable_isNewReconciler:!1};function vi(e,t){try{var n="",r=t;do{n+=Jt(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i}}function yi(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var bi,_i,wi,xi,Si="function"==typeof WeakMap?WeakMap:Map;function Ei(e,t,n){(n=mn(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){da||(da=!0,ha=r),yi(0,t)},n}function ki(e,t,n){(n=mn(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){yi(0,t)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){yi(0,t),"function"!=typeof r&&(null===fa?fa=new Set([this]):fa.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Ti(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Si;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=qa.bind(null,e,t,n),t.then(e,e))}function Ci(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Mi(e,t,n,r,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=mn(-1,1)).tag=2,vn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function Ai(e){e.flags|=4}function Pi(e,t){if(null!==e&&e.child===t.child)return!0;if(0!=(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!=(12854&e.flags)||0!=(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(Y)bi=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)F(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},_i=function(){},wi=function(e,t,n,r,i){if((e=e.memoizedProps)!==r){var o=t.stateNode,a=dr(lr.current);n=j(o,n,e,r,i,a),(t.updateQueue=n)&&Ai(t)}},xi=function(e,t,n,r){n!==r&&Ai(t)};else if(X){bi=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var o=i.stateNode;n&&r&&(o=Oe(o,i.type,i.memoizedProps,i)),F(e,o)}else if(6===i.tag)o=i.stateNode,n&&r&&(o=Ue(o,i.memoizedProps,i)),F(e,o);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(o=i.child)&&(o.return=i),bi(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var Oi=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var o=i.stateNode;n&&r&&(o=Oe(o,i.type,i.memoizedProps,i)),Me(e,o)}else if(6===i.tag)o=i.stateNode,n&&r&&(o=Ue(o,i.memoizedProps,i)),Me(e,o);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(o=i.child)&&(o.return=i),Oi(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};_i=function(e,t){var n=t.stateNode;if(!Pi(e,t)){e=n.containerInfo;var r=Ce(e);Oi(r,t,!1,!1),n.pendingChildren=r,Ai(t),Ae(e,r)}},wi=function(e,t,n,r,i){var o=e.stateNode,a=e.memoizedProps;if((e=Pi(e,t))&&a===r)t.stateNode=o;else{var s=t.stateNode,l=dr(lr.current),u=null;a!==r&&(u=j(s,n,a,r,i,l)),e&&null===u?t.stateNode=o:(o=Te(o,u,n,a,r,t,e,s),G(o,n,r,i,l)&&Ai(t),t.stateNode=o,e?Ai(t):bi(o,t,!1,!1))}},xi=function(e,t,n,r){n!==r?(e=dr(cr.current),n=dr(lr.current),t.stateNode=V(r,e,n,t),Ai(t)):t.stateNode=e.stateNode}}else _i=function(){},wi=function(){},xi=function(){};function Ui(e,t){if(!Hn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function zi(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Di(e,t,n){var r=t.pendingProps;switch(jn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zi(t),null;case 1:case 17:return pt(t.type)&&gt(),zi(t),null;case 3:return r=t.stateNode,fr(),st(dt),st(ct),br(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Qn(t)?Ai(t):null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==qn&&(Ma(qn),qn=null))),_i(e,t),zi(t),null;case 5:gr(t),n=dr(cr.current);var i=t.type;if(null!==e&&null!=t.stateNode)wi(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return zi(t),null}if(e=dr(lr.current),Qn(t)){if(!Z)throw Error(a(175));e=Ve(t.stateNode,t.type,t.memoizedProps,n,e,t,!Wn),t.updateQueue=e,null!==e&&Ai(t)}else{var o=R(i,r,n,e,t);bi(o,t,!1,!1),t.stateNode=o,G(o,i,r,n,e)&&Ai(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return zi(t),null;case 6:if(e&&null!=t.stateNode)xi(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));if(e=dr(cr.current),n=dr(lr.current),Qn(t)){if(!Z)throw Error(a(176));if(e=t.stateNode,r=t.memoizedProps,(n=He(e,r,t,!Wn))&&null!==(i=Bn))switch(o=0!=(1&i.mode),i.tag){case 3:Qe(i.stateNode.containerInfo,e,r,o);break;case 5:Je(i.type,i.memoizedProps,i.stateNode,e,r,o)}n&&Ai(t)}else t.stateNode=V(r,e,n,t)}return zi(t),null;case 13:if(st(mr),r=t.memoizedState,Hn&&null!==Vn&&0!=(1&t.mode)&&0==(128&t.flags)){for(e=Vn;e;)e=Fe(e);return Jn(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Qn(t),null===e){if(!r)throw Error(a(318));if(!Z)throw Error(a(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(a(317));We(e,t)}else Jn(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return zi(t),null}return null!==qn&&(Ma(qn),qn=null),0!=(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Qn(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&mr.current)?0===ea&&(ea=3):Na())),null!==t.updateQueue&&(t.flags|=4),zi(t),null);case 4:return fr(),_i(e,t),null===e&&Q(t.stateNode.containerInfo),zi(t),null;case 10:return ln(t.type._context),zi(t),null;case 19:if(st(mr),null===(i=t.memoizedState))return zi(t),null;if(r=0!=(128&t.flags),null===(o=i.rendering))if(r)Ui(i,!1);else{if(0!==ea||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=vr(e))){for(t.flags|=128,Ui(i,!1),null!==(e=o.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,r=t.child;null!==r;)i=e,(n=r).flags&=14680066,null===(o=n.alternate)?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=null===i?null:{lanes:i.lanes,firstContext:i.firstContext}),r=r.sibling;return lt(mr,1&mr.current|2),t.child}e=e.sibling}null!==i.tail&&Rt()>la&&(t.flags|=128,r=!0,Ui(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=vr(o))){if(t.flags|=128,r=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),Ui(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!Hn)return zi(t),null}else 2*Rt()-i.renderingStartTime>la&&1073741824!==n&&(t.flags|=128,r=!0,Ui(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=i.last)?e.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Rt(),t.sibling=null,e=mr.current,lt(mr,r?1&e|2:1&e),t):(zi(t),null);case 22:case 23:return Ua(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&Qo)&&(zi(t),Y&&6&t.subtreeFlags&&(t.flags|=8192)):zi(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}var Li=s.ReactCurrentOwner,Ni=!1;function Ii(e,t,n,r){t.child=null===e?ar(t,null,n,r):or(t,e.child,n,r)}function Ri(e,t,n,r,i){n=n.render;var o=t.ref;return cn(t,i),r=Ur(e,t,n,r,o,i),n=zr(),null===e||Ni?(Hn&&n&&Gn(t),t.flags|=1,Ii(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,io(e,t,i))}function Fi(e,t,n,r,i){if(null===e){var o=n.type;return"function"!=typeof o||Ja(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ts(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Gi(e,t,o,r,i))}if(o=e.child,0==(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:Qt)(a,r)&&e.ref===t.ref)return io(e,t,i)}return t.flags|=1,(e=es(o,r)).ref=t.ref,e.return=t,t.child=e}function Gi(e,t,n,r,i){if(null!==e&&Qt(e.memoizedProps,r)&&e.ref===t.ref){if(Ni=!1,0==(e.lanes&i))return t.lanes=e.lanes,io(e,t,i);0!=(131072&e.flags)&&(Ni=!0)}return Vi(e,t,n,r,i)}function ji(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},lt(Jo,Qo),Qo|=n;else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,lt(Jo,Qo),Qo|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==o?o.baseLanes:n,lt(Jo,Qo),Qo|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,lt(Jo,Qo),Qo|=r;return Ii(e,t,i,n),t.child}function Bi(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Vi(e,t,n,r,i){var o=pt(n)?ht:ct.current;return o=ft(t,o),cn(t,i),n=Ur(e,t,n,r,o,i),r=zr(),null===e||Ni?(Hn&&r&&Gn(t),t.flags|=1,Ii(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,io(e,t,i))}function Hi(e,t,n,r,i){if(pt(n)){var o=!0;yt(t)}else o=!1;if(cn(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Tn(t,n,r),Mn(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"==typeof u&&null!==u?u=dn(u):u=ft(t,u=pt(n)?ht:ct.current);var c=n.getDerivedStateFromProps,d="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;d||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&Cn(t,a,r,u),fn=!1;var h=t.memoizedState;a.state=h,_n(t,r,a,i),l=t.memoizedState,s!==r||h!==l||dt.current||fn?("function"==typeof c&&(Sn(t,n,c,r),l=t.memoizedState),(s=fn||kn(t,n,s,r,h,l,u))?(d||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,gn(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:en(t.type,s),a.props=u,d=t.pendingProps,h=a.context,"object"==typeof(l=n.contextType)&&null!==l?l=dn(l):l=ft(t,l=pt(n)?ht:ct.current);var f=n.getDerivedStateFromProps;(c="function"==typeof f||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==d||h!==l)&&Cn(t,a,r,l),fn=!1,h=t.memoizedState,a.state=h,_n(t,r,a,i);var p=t.memoizedState;s!==d||h!==p||dt.current||fn?("function"==typeof f&&(Sn(t,n,f,r),p=t.memoizedState),(u=fn||kn(t,n,u,r,h,p,l)||!1)?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Wi(e,t,n,r,o,i)}function Wi(e,t,n,r,i,o){Bi(e,t);var a=0!=(128&t.flags);if(!r&&!a)return i&&bt(t,n,!1),io(e,t,o);r=t.stateNode,Li.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=or(t,e.child,null,o),t.child=or(t,null,s,o)):Ii(e,t,s,o),t.memoizedState=r.state,i&&bt(t,n,!0),t.child}function qi(e){var t=e.stateNode;t.pendingContext?mt(0,t.pendingContext,t.pendingContext!==t.context):t.context&&mt(0,t.context,!1),hr(e,t.containerInfo)}function $i(e,t,n,r,i){return Jn(),er(i),t.flags|=256,Ii(e,t,n,r),t.child}var Yi={dehydrated:null,treeContext:null,retryLane:0};function Xi(e){return{baseLanes:e,cachePool:null}}function Zi(e,t,n){var r,i=t.pendingProps,o=mr.current,s=!1,l=0!=(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),lt(mr,1&o),null===e)return Zn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:Ie(e)?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},0==(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=o):s=rs(o,i,0,null),e=ns(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Xi(n),t.memoizedState=Yi,e):Ki(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,eo(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,o=t.mode,i=rs({mode:"visible",children:i.children},o,0,null),(s=ns(s,o,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!=(1&t.mode)&&or(t,e.child,null,n),t.child.memoizedState=Xi(n),t.memoizedState=Yi,s);if(0==(1&t.mode))t=eo(e,t,n,null);else if(Ie(r))t=eo(e,t,n,Error(a(419)));else if(i=0!=(n&e.childLanes),Ni||i){if(null!==(i=Xo)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(i=0!=(s&(i.suspendedLanes|n))?0:s)&&i!==o.retryLane&&(o.retryLane=i,Sa(e,i,-1))}Na(),t=eo(e,t,n,Error(a(421)))}else Ne(r)?(t.flags|=128,t.child=e.child,t=Ya.bind(null,e),Re(r,t),t=null):(n=o.treeContext,Z&&(Vn=Be(r),Bn=t,Hn=!0,qn=null,Wn=!1,null!==n&&(zn[Dn++]=Nn,zn[Dn++]=In,zn[Dn++]=Ln,Nn=n.id,In=n.overflow,Ln=t)),(t=Ki(t,t.pendingProps.children)).flags|=4096);return t}return s?(i=Ji(e,t,i.children,i.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Xi(n):{baseLanes:o.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=Yi,i):(n=Qi(e,t,i.children,n),t.memoizedState=null,n)}return s?(i=Ji(e,t,i.children,i.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Xi(n):{baseLanes:o.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=Yi,i):(n=Qi(e,t,i.children,n),t.memoizedState=null,n)}function Ki(e,t){return(t=rs({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Qi(e,t,n,r){var i=e.child;return e=i.sibling,n=es(i,{mode:"visible",children:n}),0==(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Ji(e,t,n,r,i){var o=t.mode,a=(e=e.child).sibling,s={mode:"hidden",children:n};return 0==(1&o)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=s,t.deletions=null):(n=es(e,s)).subtreeFlags=14680064&e.subtreeFlags,null!==a?r=es(a,r):(r=ns(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function eo(e,t,n,r){return null!==r&&er(r),or(t,e.child,null,n),(e=Ki(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function to(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),un(e.return,t,n)}function no(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function ro(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ii(e,t,r.children,n),0!=(2&(r=mr.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&to(e,n,t);else if(19===e.tag)to(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(lt(mr,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===vr(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),no(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===vr(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}no(t,!0,n,null,o);break;case"together":no(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function io(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),na|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=es(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=es(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function oo(e,t){switch(jn(t),t.tag){case 1:return pt(t.type)&&gt(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return fr(),st(dt),st(ct),br(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return gr(t),null;case 13:if(st(mr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Jn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return st(mr),null;case 4:return fr(),null;case 10:return ln(t.type._context),null;case 22:case 23:return Ua(),null;default:return null}}var ao=!1,so=!1,lo="function"==typeof WeakSet?WeakSet:Set,uo=null;function co(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){Wa(e,t,r)}else n.current=null}function ho(e,t,n){try{n()}catch(r){Wa(e,t,r)}}var fo=!1;function po(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&ho(t,n,o)}i=i.next}while(i!==r)}}function go(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function mo(e){var t=e.ref;if(null!==t){var n=e.stateNode;if(5===e.tag)e=z(n);else e=n;"function"==typeof t?t(e):t.current=e}}function vo(e,t,n){if(Ht&&"function"==typeof Ht.onCommitFiberUnmount)try{Ht.onCommitFiberUnmount(Vt,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,o=i.destroy;i=i.tag,void 0!==o&&(0!=(2&i)||0!=(4&i))&&ho(t,n,o),r=r.next}while(r!==e)}break;case 1:if(co(t,n),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Wa(t,n,a)}break;case 5:co(t,n);break;case 4:Y?ko(e,t,n):X&&X&&(t=t.stateNode.containerInfo,n=Ce(t),Pe(t,n))}}function yo(e,t,n){for(var r=t;;)if(vo(e,r,n),null===r.child||Y&&4===r.tag){if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function bo(e){var t=e.alternate;null!==t&&(e.alternate=null,bo(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ee(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _o(e){return 5===e.tag||3===e.tag||4===e.tag}function wo(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||_o(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function xo(e){if(Y){e:{for(var t=e.return;null!==t;){if(_o(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(_e(t),n.flags&=-33),Eo(e,n=wo(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,So(e,n=wo(e),t);break;default:throw Error(a(161))}}}function So(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?ve(n,e,t):he(n,e);else if(4!==r&&null!==(e=e.child))for(So(e,t,n),e=e.sibling;null!==e;)So(e,t,n),e=e.sibling}function Eo(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?me(n,e,t):de(n,e);else if(4!==r&&null!==(e=e.child))for(Eo(e,t,n),e=e.sibling;null!==e;)Eo(e,t,n),e=e.sibling}function ko(e,t,n){for(var r,i,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag)yo(e,o,n),i?be(r,o.stateNode):ye(r,o.stateNode);else if(18===o.tag)i?Ze(r,o.stateNode):Xe(r,o.stateNode);else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(vo(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function To(e,t){if(Y){switch(t.tag){case 0:case 11:case 14:case 15:return po(3,t,t.return),go(3,t),void po(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&ge(n,o,i,e,r,t)}return;case 6:if(null===t.stateNode)throw Error(a(162));return n=t.memoizedProps,void fe(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(Z&&null!==e&&e.memoizedState.isDehydrated&&$e(t.stateNode.containerInfo));case 13:case 19:return void Co(t)}throw Error(a(163))}switch(t.tag){case 0:case 11:case 14:case 15:return po(3,t,t.return),go(3,t),void po(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void Co(t);case 3:Z&&null!==e&&e.memoizedState.isDehydrated&&$e(t.stateNode.containerInfo)}e:if(X){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Pe(t.containerInfo,t.pendingChildren);break e}throw Error(a(163))}}function Co(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new lo),t.forEach((function(t){var r=Xa.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Mo(e,t,n){uo=e,Ao(e,t,n)}function Ao(e,t,n){for(var r=0!=(1&e.mode);null!==uo;){var i=uo,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||ao;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||so;s=ao;var u=so;if(ao=a,(so=l)&&!u)for(uo=i;null!==uo;)l=(a=uo).child,22===a.tag&&null!==a.memoizedState?Uo(i):null!==l?(l.return=a,uo=l):Uo(i);for(;null!==o;)uo=o,Ao(o,t,n),o=o.sibling;uo=i,ao=s,so=u}Po(e)}else 0!=(8772&i.subtreeFlags)&&null!==o?(o.return=i,uo=o):Po(e)}}function Po(e){for(;null!==uo;){var t=uo;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:so||go(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!so)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&wn(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=z(t.child.stateNode);break;case 1:n=t.child.stateNode}wn(t,s,n)}break;case 5:var l=t.stateNode;null===n&&4&t.flags&&pe(l,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(Z&&null===t.memoizedState){var u=t.alternate;if(null!==u){var c=u.memoizedState;if(null!==c){var d=c.dehydrated;null!==d&&Ye(d)}}}break;default:throw Error(a(163))}so||512&t.flags&&mo(t)}catch(h){Wa(t,t.return,h)}}if(t===e){uo=null;break}if(null!==(n=t.sibling)){n.return=t.return,uo=n;break}uo=t.return}}function Oo(e){for(;null!==uo;){var t=uo;if(t===e){uo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,uo=n;break}uo=t.return}}function Uo(e){for(;null!==uo;){var t=uo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{go(4,t)}catch(l){Wa(t,n,l)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Wa(t,i,l)}}var o=t.return;try{mo(t)}catch(l){Wa(t,o,l)}break;case 5:var a=t.return;try{mo(t)}catch(l){Wa(t,a,l)}}}catch(l){Wa(t,t.return,l)}if(t===e){uo=null;break}var s=t.sibling;if(null!==s){s.return=t.return,uo=s;break}uo=t.return}}var zo=0,Do=1,Lo=2,No=3,Io=4;if("function"==typeof Symbol&&Symbol.for){var Ro=Symbol.for;zo=Ro("selector.component"),Do=Ro("selector.has_pseudo_class"),Lo=Ro("selector.role"),No=Ro("selector.test_id"),Io=Ro("selector.text")}function Fo(e){var t=K(e);if(null!=t){if("string"!=typeof t.memoizedProps["data-testname"])throw Error(a(364));return t}if(null===(e=ie(e)))throw Error(a(362));return e.stateNode.current}function Go(e,t){switch(t.$$typeof){case zo:if(e.type===t.value)return!0;break;case Do:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],i=e[n++],o=t[i];if(5!==r.tag||!se(r)){for(;null!=o&&Go(r,o);)o=t[++i];if(i===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,i),r=r.sibling}}t=!1}return t;case Lo:if(5===e.tag&&le(e.stateNode,t.value))return!0;break;case Io:if((5===e.tag||6===e.tag)&&(null!==(e=ae(e))&&0<=e.indexOf(t.value)))return!0;break;case No:if(5===e.tag&&("string"==typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function jo(e){switch(e.$$typeof){case zo:return"<"+(S(e.value)||"Unknown")+">";case Do:return":has("+(jo(e)||"")+")";case Lo:return'[role="'+e.value+'"]';case Io:return'"'+e.value+'"';case No:return'[data-testname="'+e.value+'"]';default:throw Error(a(365))}}function Bo(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],o=e[r++],a=t[o];if(5!==i.tag||!se(i)){for(;null!=a&&Go(i,a);)a=t[++o];if(o===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,o),i=i.sibling}}return n}function Vo(e,t){if(!re)throw Error(a(363));e=Bo(e=Fo(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(5===r.tag)se(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}var Ho=Math.ceil,Wo=s.ReactCurrentDispatcher,qo=s.ReactCurrentOwner,$o=s.ReactCurrentBatchConfig,Yo=0,Xo=null,Zo=null,Ko=0,Qo=0,Jo=at(0),ea=0,ta=null,na=0,ra=0,ia=0,oa=null,aa=null,sa=0,la=1/0;function ua(){la=Rt()+500}var ca,da=!1,ha=null,fa=null,pa=!1,ga=null,ma=0,va=0,ya=null,ba=-1,_a=0;function wa(){return 0!=(6&Yo)?Rt():-1!==ba?ba:ba=Rt()}function xa(e){return 0==(1&e.mode)?1:0!=(2&Yo)&&0!==Ko?Ko&-Ko:null!==Kt.transition?(0===_a&&(e=St,0==(4194240&(St<<=1))&&(St=64),_a=e),_a):0!==(e=Ut)?e:J()}function Sa(e,t,n){if(50<va)throw va=0,ya=null,Error(a(185));var r=Ea(e,t);return null===r?null:(Pt(r,t,n),0!=(2&Yo)&&r===Xo||(r===Xo&&(0==(2&Yo)&&(ra|=t),4===ea&&Aa(r,Ko)),ka(r,n),1===t&&0===Yo&&0==(1&e.mode)&&(ua(),$t&&Zt())),r)}function Ea(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ka(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-_t(o),s=1<<a,l=i[a];-1===l?0!=(s&n)&&0==(s&r)||(i[a]=Ct(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=Tt(e,e===Xo?Ko:0);if(0===r)null!==n&&Lt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Lt(n),1===t)0===e.tag?function(e){$t=!0,Xt(e)}(Pa.bind(null,e)):Xt(Pa.bind(null,e)),te?ne((function(){0===Yo&&Zt()})):Dt(Ft,Zt),n=null;else{switch(zt(r)){case 1:n=Ft;break;case 4:n=Gt;break;case 16:default:n=jt;break;case 536870912:n=Bt}n=Za(n,Ta.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ta(e,t){if(ba=-1,_a=0,0!=(6&Yo))throw Error(a(327));var n=e.callbackNode;if(Va()&&e.callbackNode!==n)return null;var r=Tt(e,e===Xo?Ko:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=Ia(e,r);else{t=r;var i=Yo;Yo|=2;var o=La();for(Xo===e&&Ko===t||(ua(),za(e,t));;)try{Fa();break}catch(l){Da(e,l)}an(),Wo.current=o,Yo=i,null!==Zo?t=0:(Xo=null,Ko=0,t=ea)}if(0!==t){if(2===t&&(0!==(i=Mt(e))&&(r=i,t=Ca(e,i))),1===t)throw n=ta,za(e,0),Aa(e,r),ka(e,Rt()),n;if(6===t)Aa(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Wt(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=Ia(e,r))&&(0!==(o=Mt(e))&&(r=o,t=Ca(e,o))),1===t))throw n=ta,za(e,0),Aa(e,r),ka(e,Rt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:Ba(e,aa);break;case 3:if(Aa(e,r),(130023424&r)===r&&10<(t=sa+500-Rt())){if(0!==Tt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){wa(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=H(Ba.bind(null,e,aa),t);break}Ba(e,aa);break;case 4:if(Aa(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-_t(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Rt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ho(r/1960))-r)){e.timeoutHandle=H(Ba.bind(null,e,aa),r);break}Ba(e,aa);break;default:throw Error(a(329))}}}return ka(e,Rt()),e.callbackNode===n?Ta.bind(null,e):null}function Ca(e,t){var n=oa;return e.current.memoizedState.isDehydrated&&(za(e,t).flags|=256),2!==(e=Ia(e,t))&&(t=aa,aa=n,null!==t&&Ma(t)),e}function Ma(e){null===aa?aa=e:aa.push.apply(aa,e)}function Aa(e,t){for(t&=~ia,t&=~ra,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-_t(t),r=1<<n;e[n]=-1,t&=~r}}function Pa(e){if(0!=(6&Yo))throw Error(a(327));Va();var t=Tt(e,0);if(0==(1&t))return ka(e,Rt()),null;var n=Ia(e,t);if(0!==e.tag&&2===n){var r=Mt(e);0!==r&&(t=r,n=Ca(e,r))}if(1===n)throw n=ta,za(e,0),Aa(e,t),ka(e,Rt()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ba(e,aa),ka(e,Rt()),null}function Oa(e){null!==ga&&0===ga.tag&&0==(6&Yo)&&Va();var t=Yo;Yo|=1;var n=$o.transition,r=Ut;try{if($o.transition=null,Ut=1,e)return e()}finally{Ut=r,$o.transition=n,0==(6&(Yo=t))&&Zt()}}function Ua(){Qo=Jo.current,st(Jo)}function za(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==q&&(e.timeoutHandle=q,W(n)),null!==Zo)for(n=Zo.return;null!==n;){var r=n;switch(jn(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&gt();break;case 3:fr(),st(dt),st(ct),br();break;case 5:gr(r);break;case 4:fr();break;case 13:case 19:st(mr);break;case 10:ln(r.type._context);break;case 22:case 23:Ua()}n=n.return}if(Xo=e,Zo=e=es(e.current,null),Ko=Qo=t,ea=0,ta=null,ia=ra=na=0,aa=oa=null,null!==hn){for(t=0;t<hn.length;t++)if(null!==(r=(n=hn[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}hn=null}return e}function Da(e,t){for(;;){var n=Zo;try{if(an(),_r.current=fi,Tr){for(var r=Sr.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Tr=!1}if(xr=0,kr=Er=Sr=null,Cr=!1,Mr=0,qo.current=null,null===n||null===n.return){ea=1,ta=t,Zo=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=Ko,l.flags|=32768,null!==u&&"object"==typeof u&&"function"==typeof u.then){var c=u,d=l,h=d.tag;if(0==(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Ci(s);if(null!==p){p.flags&=-257,Mi(p,s,l,0,t),1&p.mode&&Ti(o,c,t),u=c;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(u),t.updateQueue=m}else g.add(u);break e}if(0==(1&t)){Ti(o,c,t),Na();break e}u=Error(a(426))}else if(Hn&&1&l.mode){var v=Ci(s);if(null!==v){0==(65536&v.flags)&&(v.flags|=256),Mi(v,s,l,0,t),er(u);break e}}o=u,4!==ea&&(ea=2),null===oa?oa=[o]:oa.push(o),u=vi(u,l),l=s;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,bn(l,Ei(0,u,t));break e;case 1:o=u;var y=l.type,b=l.stateNode;if(0==(128&l.flags)&&("function"==typeof y.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===fa||!fa.has(b)))){l.flags|=65536,t&=-t,l.lanes|=t,bn(l,ki(l,o,t));break e}}l=l.return}while(null!==l)}ja(n)}catch(_){t=_,Zo===n&&null!==n&&(Zo=n=n.return);continue}break}}function La(){var e=Wo.current;return Wo.current=fi,null===e?fi:e}function Na(){0!==ea&&3!==ea&&2!==ea||(ea=4),null===Xo||0==(268435455&na)&&0==(268435455&ra)||Aa(Xo,Ko)}function Ia(e,t){var n=Yo;Yo|=2;var r=La();for(Xo===e&&Ko===t||za(e,t);;)try{Ra();break}catch(i){Da(e,i)}if(an(),Yo=n,Wo.current=r,null!==Zo)throw Error(a(261));return Xo=null,Ko=0,ea}function Ra(){for(;null!==Zo;)Ga(Zo)}function Fa(){for(;null!==Zo&&!Nt();)Ga(Zo)}function Ga(e){var t=ca(e.alternate,e,Qo);e.memoizedProps=e.pendingProps,null===t?ja(e):Zo=t,qo.current=null}function ja(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=Di(n,t,Qo)))return void(Zo=n)}else{if(null!==(n=oo(n,t)))return n.flags&=32767,void(Zo=n);if(null===e)return ea=6,void(Zo=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Zo=t);Zo=t=e}while(null!==t);0===ea&&(ea=5)}function Ba(e,t){var n=Ut,r=$o.transition;try{$o.transition=null,Ut=1,function(e,t,n){do{Va()}while(null!==ga);if(0!=(6&Yo))throw Error(a(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-_t(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,o),e===Xo&&(Zo=Xo=null,Ko=0),0==(2064&r.subtreeFlags)&&0==(2064&r.flags)||pa||(pa=!0,Za(jt,(function(){return Va(),null}))),o=0!=(15990&r.flags),0!=(15990&r.subtreeFlags)||o){o=$o.transition,$o.transition=null;var s=Ut;Ut=1;var l=Yo;Yo|=4,qo.current=null,function(e,t){for(N(e.containerInfo),uo=t;null!==uo;)if(t=(e=uo).child,0!=(1028&e.subtreeFlags)&&null!==t)t.return=e,uo=t;else for(;null!==uo;){e=uo;try{var n=e.alternate;if(0!=(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var r=n.memoizedProps,i=n.memoizedState,o=e.stateNode,s=o.getSnapshotBeforeUpdate(e.elementType===e.type?r:en(e.type,r),i);o.__reactInternalSnapshotBeforeUpdate=s}break;case 3:Y&&ke(e.stateNode.containerInfo);break;default:throw Error(a(163))}}catch(l){Wa(e,e.return,l)}if(null!==(t=e.sibling)){t.return=e.return,uo=t;break}uo=e.return}n=fo,fo=!1}(e,r),function(e,t){for(uo=t;null!==uo;){var n=(t=uo).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e;Y?ko(o,i,t):yo(o,i,t);var a=i.alternate;null!==a&&(a.return=null),i.return=null}catch(w){Wa(i,t,w)}}if(n=t.child,0!=(12854&t.subtreeFlags)&&null!==n)n.return=t,uo=n;else for(;null!==uo;){t=uo;try{var s=t.flags;if(32&s&&Y&&_e(t.stateNode),512&s){var l=t.alternate;if(null!==l){var u=l.ref;null!==u&&("function"==typeof u?u(null):u.current=null)}}if(8192&s)switch(t.tag){case 13:if(null!==t.memoizedState){var c=t.alternate;null!==c&&null!==c.memoizedState||(sa=Rt())}break;case 22:var d=null!==t.memoizedState,h=t.alternate,f=null!==h&&null!==h.memoizedState;if(n=t,Y)e:if(r=n,i=d,o=null,Y)for(var p=r;;){if(5===p.tag){if(null===o){o=p;var g=p.stateNode;i?we(g):Se(p.stateNode,p.memoizedProps)}}else if(6===p.tag){if(null===o){var m=p.stateNode;i?xe(m):Ee(m,p.memoizedProps)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===r)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===r)break;for(;null===p.sibling;){if(null===p.return||p.return===r)break e;o===p&&(o=null),p=p.return}o===p&&(o=null),p.sibling.return=p.return,p=p.sibling}if(d&&!f&&0!=(1&n.mode)){uo=n;for(var v=n.child;null!==v;){for(n=uo=v;null!==uo;){var y=(r=uo).child;switch(r.tag){case 0:case 11:case 14:case 15:po(4,r,r.return);break;case 1:co(r,r.return);var b=r.stateNode;if("function"==typeof b.componentWillUnmount){var _=r.return;try{b.props=r.memoizedProps,b.state=r.memoizedState,b.componentWillUnmount()}catch(w){Wa(r,_,w)}}break;case 5:co(r,r.return);break;case 22:if(null!==r.memoizedState){Oo(n);continue}}null!==y?(y.return=r,uo=y):Oo(n)}v=v.sibling}}}switch(4102&s){case 2:xo(t),t.flags&=-3;break;case 6:xo(t),t.flags&=-3,To(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,To(t.alternate,t);break;case 4:To(t.alternate,t)}}catch(w){Wa(t,t.return,w)}if(null!==(n=t.sibling)){n.return=t.return,uo=n;break}uo=t.return}}}(e,r),I(e.containerInfo),e.current=r,Mo(r,e,i),It(),Yo=l,Ut=s,$o.transition=o}else e.current=r;if(pa&&(pa=!1,ga=e,ma=i),o=e.pendingLanes,0===o&&(fa=null),function(e){if(Ht&&"function"==typeof Ht.onCommitFiberRoot)try{Ht.onCommitFiberRoot(Vt,e,void 0,128==(128&e.current.flags))}catch(t){}}(r.stateNode),ka(e,Rt()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(da)throw da=!1,e=ha,ha=null,e;0!=(1&ma)&&0!==e.tag&&Va(),o=e.pendingLanes,0!=(1&o)?e===ya?va++:(va=0,ya=e):va=0,Zt()}(e,t,n)}finally{$o.transition=r,Ut=n}return null}function Va(){if(null!==ga){var e=zt(ma),t=$o.transition,n=Ut;try{if($o.transition=null,Ut=16>e?16:e,null===ga)var r=!1;else{if(e=ga,ga=null,ma=0,0!=(6&Yo))throw Error(a(331));var i=Yo;for(Yo|=4,uo=e.current;null!==uo;){var o=uo,s=o.child;if(0!=(16&uo.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(uo=c;null!==uo;){var d=uo;switch(d.tag){case 0:case 11:case 15:po(8,d,o)}var h=d.child;if(null!==h)h.return=d,uo=h;else for(;null!==uo;){var f=(d=uo).sibling,p=d.return;if(bo(d),d===c){uo=null;break}if(null!==f){f.return=p,uo=f;break}uo=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}uo=o}}if(0!=(2064&o.subtreeFlags)&&null!==s)s.return=o,uo=s;else e:for(;null!==uo;){if(0!=(2048&(o=uo).flags))switch(o.tag){case 0:case 11:case 15:po(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,uo=y;break e}uo=o.return}}var b=e.current;for(uo=b;null!==uo;){var _=(s=uo).child;if(0!=(2064&s.subtreeFlags)&&null!==_)_.return=s,uo=_;else e:for(s=b;null!==uo;){if(0!=(2048&(l=uo).flags))try{switch(l.tag){case 0:case 11:case 15:go(9,l)}}catch(x){Wa(l,l.return,x)}if(l===s){uo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,uo=w;break e}uo=l.return}}if(Yo=i,Zt(),Ht&&"function"==typeof Ht.onPostCommitFiberRoot)try{Ht.onPostCommitFiberRoot(Vt,e)}catch(x){}r=!0}return r}finally{Ut=n,$o.transition=t}}return!1}function Ha(e,t,n){vn(e,t=Ei(0,t=vi(n,t),1)),t=wa(),null!==(e=Ea(e,1))&&(Pt(e,1,t),ka(e,t))}function Wa(e,t,n){if(3===e.tag)Ha(e,e,n);else for(;null!==t;){if(3===t.tag){Ha(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===fa||!fa.has(r))){vn(t,e=ki(t,e=vi(n,e),1)),e=wa(),null!==(t=Ea(t,1))&&(Pt(t,1,e),ka(t,e));break}}t=t.return}}function qa(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=wa(),e.pingedLanes|=e.suspendedLanes&n,Xo===e&&(Ko&n)===n&&(4===ea||3===ea&&(130023424&Ko)===Ko&&500>Rt()-sa?za(e,0):ia|=n),ka(e,t)}function $a(e,t){0===t&&(0==(1&e.mode)?t=1:(t=Et,0==(130023424&(Et<<=1))&&(Et=4194304)));var n=wa();null!==(e=Ea(e,t))&&(Pt(e,t,n),ka(e,n))}function Ya(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),$a(e,n)}function Xa(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),$a(e,n)}function Za(e,t){return Dt(e,t)}function Ka(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qa(e,t,n,r){return new Ka(e,t,n,r)}function Ja(e){return!(!(e=e.prototype)||!e.isReactComponent)}function es(e,t){var n=e.alternate;return null===n?((n=Qa(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ts(e,t,n,r,i,o){var s=2;if(r=e,"function"==typeof e)Ja(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case c:return ns(n.children,i,o,t);case d:s=8,i|=8;break;case h:return(e=Qa(12,n,t,2|i)).elementType=h,e.lanes=o,e;case m:return(e=Qa(13,n,t,i)).elementType=m,e.lanes=o,e;case v:return(e=Qa(19,n,t,i)).elementType=v,e.lanes=o,e;case _:return rs(n,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case f:s=10;break e;case p:s=9;break e;case g:s=11;break e;case y:s=14;break e;case b:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Qa(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function ns(e,t,n,r){return(e=Qa(7,e,r,t)).lanes=n,e}function rs(e,t,n,r){return(e=Qa(22,e,r,t)).elementType=_,e.lanes=n,e.stateNode={},e}function is(e,t,n){return(e=Qa(6,e,null,t)).lanes=n,e}function os(e,t,n){return(t=Qa(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function as(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=q,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=At(0),this.expirationTimes=At(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=At(0),this.identifierPrefix=r,this.onRecoverableError=i,Z&&(this.mutableSourceEagerHydrationData=null)}function ss(e,t,n,r,i,o,a,s,l){return e=new as(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Qa(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},pn(o),e}function ls(e){if(!e)return ut;e:{if(k(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(pt(n))return vt(e,n,t)}return t}function us(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return null===(e=M(t))?null:e.stateNode}function cs(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ds(e,t){cs(e,t),(e=e.alternate)&&cs(e,t)}function hs(e){return null===(e=M(e))?null:e.stateNode}function fs(){return null}return ca=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||dt.current)Ni=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return Ni=!1,function(e,t,n){switch(t.tag){case 3:qi(t),Jn();break;case 5:pr(t);break;case 1:pt(t.type)&&yt(t);break;case 4:hr(t,t.stateNode.containerInfo);break;case 10:sn(0,t.type._context,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(lt(mr,1&mr.current),t.flags|=128,null):0!=(n&t.child.childLanes)?Zi(e,t,n):(lt(mr,1&mr.current),null!==(e=io(e,t,n))?e.sibling:null);lt(mr,1&mr.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return ro(e,t,n);t.flags|=128}var i=t.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),lt(mr,mr.current),r)break;return null;case 22:case 23:return t.lanes=0,ji(e,t,n)}return io(e,t,n)}(e,t,n);Ni=0!=(131072&e.flags)}else Ni=!1,Hn&&0!=(1048576&t.flags)&&Fn(t,Un,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=ft(t,ct.current);cn(t,n),i=Ur(null,t,r,e,i,n);var o=zr();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pt(r)?(o=!0,yt(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,pn(t),i.updater=En,t.stateNode=i,i._reactInternals=t,Mn(t,r,e,n),t=Wi(null,t,r,!0,o,n)):(t.tag=0,Hn&&o&&Gn(t),Ii(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Ja(e)?1:0;if(null!=e){if((e=e.$$typeof)===g)return 11;if(e===y)return 14}return 2}(r),e=en(r,e),i){case 0:t=Vi(null,t,r,e,n);break e;case 1:t=Hi(null,t,r,e,n);break e;case 11:t=Ri(null,t,r,e,n);break e;case 14:t=Fi(null,t,r,en(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Vi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 1:return r=t.type,i=t.pendingProps,Hi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 3:e:{if(qi(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,gn(e,t),_n(t,r,null,n);var s=t.memoizedState;if(r=s.element,Z&&o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=$i(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=$i(e,t,r,n,i=Error(a(424)));break e}for(Z&&(Vn=je(t.stateNode.containerInfo),Bn=t,Hn=!0,qn=null,Wn=!1),n=ar(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Jn(),r===i){t=io(e,t,n);break e}Ii(e,t,r,n)}t=t.child}return t;case 5:return pr(t),null===e&&Zn(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,B(r,i)?s=null:null!==o&&B(r,o)&&(t.flags|=32),Bi(e,t),Ii(e,t,s,n),t.child;case 6:return null===e&&Zn(t),null;case 13:return Zi(e,t,n);case 4:return hr(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=or(t,null,r,n):Ii(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ri(e,t,r,i=t.elementType===r?i:en(r,i),n);case 7:return Ii(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ii(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,sn(0,r,s=i.value),null!==o)if(Wt(o.value,s)){if(o.children===i.children&&!dt.current){t=io(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=mn(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),un(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),un(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}Ii(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,cn(t,n),r=r(i=dn(i)),t.flags|=1,Ii(e,t,r,n),t.child;case 14:return i=en(r=t.type,t.pendingProps),Fi(e,t,r,i=en(r.type,i),n);case 15:return Gi(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:en(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,pt(r)?(e=!0,yt(t)):e=!1,cn(t,n),Tn(t,r,i),Mn(t,r,i,n),Wi(null,t,r,!0,e,n);case 19:return ro(e,t,n);case 22:return ji(e,t,n)}throw Error(a(156,t.tag))},t.attemptContinuousHydration=function(e){13===e.tag&&(Sa(e,134217728,wa()),ds(e,134217728))},t.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=wa(),n=xa(e);Sa(e,n,t),ds(e,n)}},t.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=kt(t.pendingLanes);0!==n&&(Ot(t,1|n),ka(t,Rt()),0==(6&Yo)&&(ua(),Zt()))}break;case 13:var r=wa();Oa((function(){return Sa(e,1,r)})),ds(e,1)}},t.batchedUpdates=function(e,t){var n=Yo;Yo|=1;try{return e(t)}finally{0===(Yo=n)&&(ua(),$t&&Zt())}},t.createComponentSelector=function(e){return{$$typeof:zo,value:e}},t.createContainer=function(e,t,n,r,i,o,a){return ss(e,t,!1,null,0,r,0,o,a)},t.createHasPseudoClassSelector=function(e){return{$$typeof:Do,value:e}},t.createHydrationContainer=function(e,t,n,r,i,o,a,s,l){return(e=ss(n,r,!0,e,0,o,0,s,l)).context=ls(null),n=e.current,(o=mn(r=wa(),i=xa(n))).callback=null!=t?t:null,vn(n,o),e.current.lanes=i,Pt(e,i,r),ka(e,r),e},t.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:u,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},t.createRoleSelector=function(e){return{$$typeof:Lo,value:e}},t.createTestNameSelector=function(e){return{$$typeof:No,value:e}},t.createTextSelector=function(e){return{$$typeof:Io,value:e}},t.deferredUpdates=function(e){var t=Ut,n=$o.transition;try{return $o.transition=null,Ut=16,e()}finally{Ut=t,$o.transition=n}},t.discreteUpdates=function(e,t,n,r,i){var o=Ut,a=$o.transition;try{return $o.transition=null,Ut=1,e(t,n,r,i)}finally{Ut=o,$o.transition=a,0===Yo&&ua()}},t.findAllNodes=Vo,t.findBoundingRects=function(e,t){if(!re)throw Error(a(363));t=Vo(e,t),e=[];for(var n=0;n<t.length;n++)e.push(oe(t[n]));for(t=e.length-1;0<t;t--)for(var r=(n=e[t]).x,i=r+n.width,o=n.y,s=o+n.height,l=t-1;0<=l;l--)if(t!==l){var u=e[l],c=u.x,d=c+u.width,h=u.y,f=h+u.height;if(r>=c&&o>=h&&i<=d&&s<=f){e.splice(t,1);break}if(!(r!==c||n.width!==u.width||f<o||h>s)){h>o&&(u.height+=h-o,u.y=o),f<s&&(u.height=s-h),e.splice(t,1);break}if(!(o!==h||n.height!==u.height||d<r||c>i)){c>r&&(u.width+=c-r,u.x=r),d<i&&(u.width=i-c),e.splice(t,1);break}}return e},t.findHostInstance=us,t.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=C(e))?P(e):null)?null:e.stateNode},t.findHostInstanceWithWarning=function(e){return us(e)},t.flushControlled=function(e){var t=Yo;Yo|=1;var n=$o.transition,r=Ut;try{$o.transition=null,Ut=1,e()}finally{Ut=r,$o.transition=n,0===(Yo=t)&&(ua(),Zt())}},t.flushPassiveEffects=Va,t.flushSync=Oa,t.focusWithin=function(e,t){if(!re)throw Error(a(363));for(t=Bo(e=Fo(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!se(n)){if(5===n.tag&&ue(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Ut},t.getFindAllNodesFailureDescription=function(e,t){if(!re)throw Error(a(363));var n=0,r=[];e=[Fo(e),0];for(var i=0;i<e.length;){var o=e[i++],s=e[i++],l=t[s];if((5!==o.tag||!se(o))&&(Go(o,l)&&(r.push(jo(l)),++s>n&&(n=s)),s<t.length))for(o=o.child;null!==o;)e.push(o,s),o=o.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(jo(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},t.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?z(e.child.stateNode):e.child.stateNode:null},t.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:hs,findFiberByHostInstance:e.findFiberByHostInstance||fs,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Vt=t.inject(e),Ht=t}catch(n){}e=!!t.checkDCE}}return e},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(e,t,n,r){if(!re)throw Error(a(363));e=Vo(e,t);var i=ce(e,n,r).disconnect;return{disconnect:function(){i()}}},t.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},t.runWithPriority=function(e,t){var n=Ut;try{return Ut=e,t()}finally{Ut=n}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(e,t,n,r){var i=t.current,o=wa(),a=xa(i);return n=ls(n),null===t.context?t.context=n:t.pendingContext=n,(t=mn(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),vn(i,t),null!==(e=Sa(i,a,o))&&yn(e,i,a),a},t}},707:function(e,t,n){"use strict";e.exports=n(768)},4184:function(e,t,n){"use strict";e.exports=n(2450)},3014:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>o(l,n))u<i&&0>o(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>o(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,v="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function _(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(m=!1,_(e),!g)if(null!==r(u))g=!0,z(x);else{var t=r(c);null!==t&&D(w,t.startTime-e)}}function x(e,n){g=!1,m&&(m=!1,y(T),T=-1),p=!0;var o=f;try{for(_(n),h=r(u);null!==h&&(!(h.expirationTime>n)||e&&!A());){var a=h.callback;if("function"==typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?h.callback=s:h===r(u)&&i(u),_(n)}else i(u);h=r(u)}if(null!==h)var l=!0;else{var d=r(c);null!==d&&D(w,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,k=null,T=-1,C=5,M=-1;function A(){return!(t.unstable_now()-M<C)}function P(){if(null!==k){var e=t.unstable_now();M=e;var n=!0;try{n=k(!0,e)}finally{n?S():(E=!1,k=null)}}else E=!1}if("function"==typeof b)S=function(){b(P)};else if("undefined"!=typeof MessageChannel){var O=new MessageChannel,U=O.port2;O.port1.onmessage=P,S=function(){U.postMessage(null)}}else S=function(){v(P,0)};function z(e){k=e,E||(E=!0,S())}function D(e,n){T=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,z(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"==typeof o&&null!==o?o="number"==typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(c,e),null===r(u)&&e===r(c)&&(m?(y(T),T=-1):m=!0,D(w,o-a))):(e.sortIndex=s,n(u,e),g||p||(g=!0,z(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},1194:function(e,t,n){"use strict";e.exports=n(3014)},9239:function(e){e.exports=function(e,t){var n=t.length;if(0!==n){var r=e.length;e.length+=n;for(var i=0;i<n;i++)e[r+i]=t[i]}}},42:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},6415:function(e){function t(e,t,n){var r,i,o,a,s;function l(){var u=Date.now()-a;u<t&&u>=0?r=setTimeout(l,t-u):(r=null,n||(s=e.apply(o,i),o=i=null))}null==t&&(t=100);var u=function(){o=this,i=arguments,a=Date.now();var u=n&&!r;return r||(r=setTimeout(l,t)),u&&(s=e.apply(o,i),o=i=null),s};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(s=e.apply(o,i),o=i=null,clearTimeout(r),r=null)},u}t.debounce=t,e.exports=t},7922:function(e){"use strict";var t={ellipse:"…",chars:[" ","-"],max:140,truncate:!0};function n(e,t,n,r){if(e<=t)return e;if(t<2)return e.slice(0,t-n.length)+n;for(var i=t-n.length,o=Math.floor(i/2),a=o,s=e.length-o,l=0;l<o;l++){var u=e.charAt(l),c=e.length-l,d=e.charAt(c);-1!==r.indexOf(u)&&(a=l),-1!==r.indexOf(d)&&(s=c)}return e.slice(0,a)+n+e.slice(s)}function r(e,t,n,r,i){if(e.length<=t)return e;for(var o=t-n.length,a=o,s=0;s<=o;s++){var l=e.charAt(s);-1!==r.indexOf(l)&&(a=s)}return i||a!=o?e.slice(0,a)+n:""}e.exports=function(e,i,o){if("string"!=typeof e||0===e.length)return"";if(0===i)return"";for(var a in o=o||{},t)null!==o[a]&&void 0!==o[a]||(o[a]=t[a]);return o.max=i||o.max,"middle"==o.truncate?n(e,o.max,o.ellipse,o.chars):r(e,o.max,o.ellipse,o.chars,o.truncate)},e.exports.ellipsizeMiddle=n,e.exports.ellipsize=r},18:function(e,t,n){"use strict";n.r(t),n.d(t,{Head:function(){return o.Fb},default:function(){return np},pageConfig:function(){return rp}});var r=n(4954),i=n(2298),o=n(4482),a=n(7378),s=n(7228),l=n(2955),u=n(7704),c=n(3778),d=n(2605),h=n(5699),f=n(3793),p=n(4771),g=n(3242),m=n(9981),v=n(3177),y=n(3863),b=n(4416),_=n(7272),w=n(4825),x=n(8671),S=n(7800);const E=e=>{let{actions:t}=e;const n=(0,w.ff)("red.500","red.200");return(0,S.tZ)(x.aV,{spacing:"4",p:"4",border:"2px",borderRadius:"md",borderColor:n,children:t.map(((e,t)=>(0,S.tZ)(x.HC,{children:(0,S.BX)(c.U,{justifyContent:"space-between",children:[(0,S.BX)(l.K,{spacing:"1",children:[(0,S.tZ)(b.x,{fontWeight:"bold",children:e.title}),(0,S.tZ)(b.x,{fontSize:"sm",children:e.description})]}),(0,S.tZ)(_.r,{as:h.z,leftIcon:(0,S.tZ)(e.icon,{}),variant:"outline",colorScheme:"red",onClick:()=>e.onClick(t),isDisabled:e.isDisabled,children:e.buttonText})]})},t)))})};var k=n(8034),T=n(7155),C=n(4246),M=n(6173),A=n(707);function P(e){let t;const n=new Set,r=(e,r)=>{const i="function"==typeof e?e(t):e;if(i!==t){const e=t;t=r?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,o={setState:r,getState:i,subscribe:(e,r,o)=>r||o?((e,r=i,o=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let a=r(t);function s(){const n=r(t);if(!o(a,n)){const t=a;e(a=n,t)}}return n.add(s),()=>n.delete(s)})(e,r,o):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,i,o),o}const O="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?a.useEffect:a.useLayoutEffect;var U=n(4184),z=n.n(U),D=n(1194);const L=[];function N(e,t,n=((e,t)=>e===t)){if(e===t)return!0;if(!e||!t)return!1;const r=e.length;if(t.length!==r)return!1;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function I(e,t=null,n=!1,r={}){null===t&&(t=[e]);for(const a of L)if(N(t,a.keys,a.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return r.lifespan&&r.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,r.lifespan)),a.response;if(!n)throw a.promise}const i={keys:t,equal:r.equal,remove:()=>{const e=L.indexOf(i);-1!==e&&L.splice(e,1)},promise:(o=e,"object"==typeof o&&"function"==typeof o.then?e:e(...t)).then((e=>{i.response=e,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))})).catch((e=>i.error=e))};var o;if(L.push(i),!n)throw i.promise}const R=(e,t,n)=>I(e,t,!1,n);const F={},G=e=>{Object.assign(F,e)};var j,B;const V=e=>"colorSpace"in e||"outputColorSpace"in e,H=()=>{var e;return null!=(e=F.ColorManagement)?e:null},W=e=>e&&e.isOrthographicCamera,q="undefined"!=typeof window&&(null!=(j=window.document)&&j.createElement||"ReactNative"===(null==(B=window.navigator)?void 0:B.product))?a.useLayoutEffect:a.useEffect;function $(e){const t=a.useRef(e);return q((()=>{t.current=e}),[e]),t}function Y({set:e}){return q((()=>(e(new Promise((()=>null))),()=>e(!1))),[e]),null}class X extends a.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}X.getDerivedStateFromError=()=>({error:!0});const Z="__default",K=new Map,Q=e=>e&&!!e.memoized&&!!e.changes;function J(e){var t;const n="undefined"!=typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}const ee=e=>{var t;return null==(t=e.__r3f)?void 0:t.root.getState()},te={obj:e=>e===Object(e)&&!te.arr(e)&&"function"!=typeof e,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,boo:e=>"boolean"==typeof e,und:e=>void 0===e,arr:e=>Array.isArray(e),equ(e,t,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof e!=typeof t||!!e!=!!t)return!1;if(te.str(e)||te.num(e))return e===t;const o=te.obj(e);if(o&&"reference"===r)return e===t;const a=te.arr(e);if(a&&"reference"===n)return e===t;if((a||o)&&e===t)return!0;let s;for(s in e)if(!(s in t))return!1;if(o&&"shallow"===n&&"shallow"===r){for(s in i?t:e)if(!te.equ(e[s],t[s],{strict:i,objects:"reference"}))return!1}else for(s in i?t:e)if(e[s]!==t[s])return!1;if(te.und(s)){if(a&&0===e.length&&0===t.length)return!0;if(o&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function ne(e){const t={nodes:{},materials:{}};return e&&e.traverse((e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)})),t}function re(e,t){return e.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t},e}function ie(e,t){let n=e;if(t.includes("-")){const r=t.split("-"),i=r.pop();return n=r.reduce(((e,t)=>e[t]),e),{target:n,key:i}}return{target:n,key:t}}const oe=/-\d+$/;function ae(e,t,n){if(te.str(n)){if(oe.test(n)){const t=n.replace(oe,""),{target:r,key:i}=ie(e,t);Array.isArray(r[i])||(r[i]=[])}const{target:r,key:i}=ie(e,n);t.__r3f.previousAttach=r[i],r[i]=t}else t.__r3f.previousAttach=n(e,t)}function se(e,t,n){var r,i;if(te.str(n)){const{target:r,key:i}=ie(e,n),o=t.__r3f.previousAttach;void 0===o?delete r[i]:r[i]=o}else null==(r=t.__r3f)||null==r.previousAttach||r.previousAttach(e,t);null==(i=t.__r3f)||delete i.previousAttach}function le(e,{children:t,key:n,ref:r,...i},{children:o,key:a,ref:s,...l}={},u=!1){var c;const d=null!=(c=null==e?void 0:e.__r3f)?c:{},h=Object.entries(i),f=[];if(u){const e=Object.keys(l);for(let t=0;t<e.length;t++)i.hasOwnProperty(e[t])||h.unshift([e[t],Z+"remove"])}h.forEach((([t,n])=>{var r;if(null!=(r=e.__r3f)&&r.primitive&&"object"===t)return;if(te.equ(n,l[t]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(t))return f.push([t,n,!0,[]]);let o=[];t.includes("-")&&(o=t.split("-")),f.push([t,n,!1,o]);for(const e in i){const n=i[e];e.startsWith(`${t}-`)&&f.push([e,n,!1,e.split("-")])}}));const p={...i};return d.memoizedProps&&d.memoizedProps.args&&(p.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(p.attach=d.memoizedProps.attach),{memoized:p,changes:f}}function ue(e,t){var n,r,i;const o=null!=(n=e.__r3f)?n:{},a=o.root,s=null!=(r=null==a||null==a.getState?void 0:a.getState())?r:{},{memoized:l,changes:u}=Q(t)?t:le(e,t),c=o.eventCount;e.__r3f&&(e.__r3f.memoizedProps=l);for(let d=0;d<u.length;d++){let[t,n,r,i]=u[d];if(V(e)){const e=3001,r="srgb",i="srgb-linear";"encoding"===t?(t="colorSpace",n=n===e?r:i):"outputEncoding"===t&&(t="outputColorSpace",n=n===e?r:i)}let a=e,l=a[t];if(i.length&&(l=i.reduce(((e,t)=>e[t]),e),!l||!l.set)){const[n,...r]=i.reverse();a=r.reverse().reduce(((e,t)=>e[t]),e),t=n}if(n===Z+"remove")if(a.constructor){let e=K.get(a.constructor);e||(e=new a.constructor,K.set(a.constructor,e)),n=e[t]}else n=0;if(r)n?o.handlers[t]=n:delete o.handlers[t],o.eventCount=Object.keys(o.handlers).length;else if(l&&l.set&&(l.copy||l instanceof M.Layers)){if(Array.isArray(n))l.fromArray?l.fromArray(n):l.set(...n);else if(l.copy&&n&&n.constructor&&l.constructor===n.constructor)l.copy(n);else if(void 0!==n){const e=l instanceof M.Color;!e&&l.setScalar?l.setScalar(n):l instanceof M.Layers&&n instanceof M.Layers?l.mask=n.mask:l.set(n),H()||s.linear||!e||l.convertSRGBToLinear()}}else if(a[t]=n,a[t]instanceof M.Texture&&a[t].format===M.RGBAFormat&&a[t].type===M.UnsignedByteType){const e=a[t];V(e)&&V(s.gl)?e.colorSpace=s.gl.outputColorSpace:e.encoding=s.gl.outputEncoding}ce(e)}if(o.parent&&s.internal&&e.raycast&&c!==o.eventCount){const t=s.internal.interaction.indexOf(e);t>-1&&s.internal.interaction.splice(t,1),o.eventCount&&s.internal.interaction.push(e)}return!(1===u.length&&"onUpdate"===u[0][0])&&u.length&&null!=(i=e.__r3f)&&i.parent&&de(e),e}function ce(e){var t,n;const r=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function de(e){null==e.onUpdate||e.onUpdate(e)}function he(e,t){e.manual||(W(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function fe(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function pe(e,t,n,r){const i=n.get(t);i&&(n.delete(t),0===n.size&&(e.delete(r),i.target.releasePointerCapture(r)))}function ge(e){function t(e){return e.filter((e=>["Move","Over","Enter","Out","Leave"].some((t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))))}function n(t){const{internal:n}=e.getState();for(const e of n.hovered.values())if(!t.length||!t.find((t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId))){const r=e.eventObject.__r3f,i=null==r?void 0:r.handlers;if(n.hovered.delete(fe(e)),null!=r&&r.eventCount){const n={...e,intersections:t};null==i.onPointerOut||i.onPointerOut(n),null==i.onPointerLeave||i.onPointerLeave(n)}}}function r(e,t){for(let n=0;n<t.length;n++){const r=t[n].__r3f;null==r||null==r.handlers.onPointerMissed||r.handlers.onPointerMissed(e)}}return{handlePointer:function(i){switch(i){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{const{internal:r}=e.getState();"pointerId"in t&&r.capturedMap.has(t.pointerId)&&requestAnimationFrame((()=>{r.capturedMap.has(t.pointerId)&&(r.capturedMap.delete(t.pointerId),n([]))}))}}return function(o){const{onPointerMissed:a,internal:s}=e.getState();s.lastEvent.current=o;const l="onPointerMove"===i,u="onClick"===i||"onContextMenu"===i||"onDoubleClick"===i,c=function(t,n){const r=e.getState(),i=new Set,o=[],a=n?n(r.internal.interaction):r.internal.interaction;for(let e=0;e<a.length;e++){const t=ee(a[e]);t&&(t.raycaster.camera=void 0)}r.previousRoot||null==r.events.compute||r.events.compute(t,r);let s=a.flatMap((function(e){const n=ee(e);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(t,n,null==(r=n.previousRoot)?void 0:r.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]):[];var r})).sort(((e,t)=>{const n=ee(e.object),r=ee(t.object);return n&&r&&r.events.priority-n.events.priority||e.distance-t.distance})).filter((e=>{const t=fe(e);return!i.has(t)&&(i.add(t),!0)}));r.events.filter&&(s=r.events.filter(s,r));for(const e of s){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&o.push({...e,eventObject:t}),t=t.parent}}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId))for(let e of r.internal.capturedMap.get(t.pointerId).values())i.has(fe(e.intersection))||o.push(e.intersection);return o}(o,l?t:void 0),d=u?function(t){const{internal:n}=e.getState(),r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(o):0;"onPointerDown"===i&&(s.initialClick=[o.offsetX,o.offsetY],s.initialHits=c.map((e=>e.eventObject))),u&&!c.length&&d<=2&&(r(o,s.interaction),a&&a(o)),l&&n(c),function(t,r,i,o){const a=e.getState();if(t.length){const e={stopped:!1};for(const s of t){const l=ee(s.object)||a,{raycaster:u,pointer:c,camera:d,internal:h}=l,f=new M.Vector3(c.x,c.y,0).unproject(d),p=e=>{var t,n;return null!=(t=null==(n=h.capturedMap.get(e))?void 0:n.has(s.eventObject))&&t},g=e=>{const t={intersection:s,target:r.target};h.capturedMap.has(e)?h.capturedMap.get(e).set(s.eventObject,t):h.capturedMap.set(e,new Map([[s.eventObject,t]])),r.target.setPointerCapture(e)},m=e=>{const t=h.capturedMap.get(e);t&&pe(h.capturedMap,s.eventObject,t,e)};let v={};for(let e in r){let t=r[e];"function"!=typeof t&&(v[e]=t)}let y={...s,...v,pointer:c,intersections:t,stopped:e.stopped,delta:i,unprojectedPoint:f,ray:u.ray,camera:d,stopPropagation(){const i="pointerId"in r&&h.capturedMap.get(r.pointerId);(!i||i.has(s.eventObject))&&(y.stopped=e.stopped=!0,h.hovered.size&&Array.from(h.hovered.values()).find((e=>e.eventObject===s.eventObject)))&&n([...t.slice(0,t.indexOf(s)),s])},target:{hasPointerCapture:p,setPointerCapture:g,releasePointerCapture:m},currentTarget:{hasPointerCapture:p,setPointerCapture:g,releasePointerCapture:m},nativeEvent:r};if(o(y),!0===e.stopped)break}}}(c,o,d,(function(e){const t=e.eventObject,n=t.__r3f,a=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(l){if(a.onPointerOver||a.onPointerEnter||a.onPointerOut||a.onPointerLeave){const t=fe(e),n=s.hovered.get(t);n?n.stopped&&e.stopPropagation():(s.hovered.set(t,e),null==a.onPointerOver||a.onPointerOver(e),null==a.onPointerEnter||a.onPointerEnter(e))}null==a.onPointerMove||a.onPointerMove(e)}else{const n=a[i];n?u&&!s.initialHits.includes(t)||(r(o,s.interaction.filter((e=>!s.initialHits.includes(e)))),n(e)):u&&s.initialHits.includes(t)&&r(o,s.interaction.filter((e=>!s.initialHits.includes(e))))}}))}}}}const me=e=>!(null==e||!e.render),ve=a.createContext(null),ye=(e,t)=>{const n=function(e){const t="function"==typeof e?P(e):e,n=(e=t.getState,n=Object.is)=>{const[,r]=(0,a.useReducer)((e=>e+1),0),i=t.getState(),o=(0,a.useRef)(i),s=(0,a.useRef)(e),l=(0,a.useRef)(n),u=(0,a.useRef)(!1),c=(0,a.useRef)();let d;void 0===c.current&&(c.current=e(i));let h=!1;(o.current!==i||s.current!==e||l.current!==n||u.current)&&(d=e(i),h=!n(c.current,d)),O((()=>{h&&(c.current=d),o.current=i,s.current=e,l.current=n,u.current=!1}));const f=(0,a.useRef)(i);O((()=>{const e=()=>{try{const e=t.getState(),n=s.current(e);l.current(c.current,n)||(o.current=e,c.current=n,r())}catch(e){u.current=!0,r()}},n=t.subscribe(e);return t.getState()!==f.current&&e(),n}),[]);const p=h?d:c.current;return(0,a.useDebugValue)(p),p};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[n,t];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},n}(((n,r)=>{const i=new M.Vector3,o=new M.Vector3,s=new M.Vector3;function l(e=r().camera,t=o,n=r().size){const{width:a,height:l,top:u,left:c}=n,d=a/l;t instanceof M.Vector3?s.copy(t):s.set(...t);const h=e.getWorldPosition(i).distanceTo(s);if(W(e))return{width:a/e.zoom,height:l/e.zoom,top:u,left:c,factor:1,distance:h,aspect:d};{const t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*h,r=n*(a/l);return{width:r,height:n,top:u,left:c,factor:a/r,distance:h,aspect:d}}}let u;const c=e=>n((t=>({performance:{...t.performance,current:e}}))),d=new M.Vector2,h={set:n,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(t=1)=>e(r(),t),advance:(e,n)=>t(e,n,r()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new M.Clock,pointer:d,mouse:d,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const e=r();u&&clearTimeout(u),e.performance.current!==e.performance.min&&c(e.performance.min),u=setTimeout((()=>c(r().performance.max)),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:e=>n((t=>({...t,events:{...t.events,...e}}))),setSize:(e,t,i,a,s)=>{const u=r().camera,c={width:e,height:t,top:a||0,left:s||0,updateStyle:i};n((e=>({size:c,viewport:{...e.viewport,...l(u,o,c)}})))},setDpr:e=>n((t=>{const n=J(e);return{viewport:{...t.viewport,dpr:n,initialDpr:t.viewport.initialDpr||n}}})),setFrameloop:(e="always")=>{const t=r().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n((()=>({frameloop:e})))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:a.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(e,t,n)=>{const i=r().internal;return i.priority=i.priority+(t>0?1:0),i.subscribers.push({ref:e,priority:t,store:n}),i.subscribers=i.subscribers.sort(((e,t)=>e.priority-t.priority)),()=>{const n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter((t=>t.ref!==e)))}}}};return h})),r=n.getState();let i=r.size,o=r.viewport.dpr,s=r.camera;return n.subscribe((()=>{const{camera:e,size:t,viewport:r,gl:a,set:l}=n.getState();if(t!==i||r.dpr!==o){var u;i=t,o=r.dpr,he(e,t),a.setPixelRatio(r.dpr);const n=null!=(u=t.updateStyle)?u:"undefined"!=typeof HTMLCanvasElement&&a.domElement instanceof HTMLCanvasElement;a.setSize(t.width,t.height,n)}e!==s&&(s=e,l((t=>({viewport:{...t.viewport,...t.viewport.getCurrentViewport(e)}}))))})),n.subscribe((t=>e(t))),n};function be(e,t){const n={callback:e};return t.add(n),()=>{t.delete(n)}}let _e,we=new Set,xe=new Set,Se=new Set;function Ee(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function ke(e,t){switch(e){case"before":return Ee(we,t);case"after":return Ee(xe,t);case"tail":return Ee(Se,t)}}let Te,Ce;function Me(e,t,n){let r=t.clock.getDelta();for("never"===t.frameloop&&"number"==typeof e&&(r=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),Te=t.internal.subscribers,_e=0;_e<Te.length;_e++)Ce=Te[_e],Ce.ref.current(Ce.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function Ae(){const e=a.useContext(ve);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function Pe(e=(e=>e),t){return Ae()(e,t)}function Oe(e,t=0){const n=Ae(),r=n.getState().internal.subscribe,i=$(e);return q((()=>r(i,t,n)),[t,r,n]),null}function Ue(e,t){return function(n,...r){const i=new n;return e&&e(i),Promise.all(r.map((e=>new Promise(((n,r)=>i.load(e,(e=>{e.scene&&Object.assign(e,ne(e.scene)),n(e)}),t,(t=>r(new Error(`Could not load ${e}: ${t.message})`)))))))))}}function ze(e,t,n,r){const i=Array.isArray(t)?t:[t],o=R(Ue(n,r),[e,...i],{equal:te.equ});return Array.isArray(t)?o:o[0]}ze.preload=function(e,t,n){const r=Array.isArray(t)?t:[t];return((e,t,n)=>{I(e,t,!0,n)})(Ue(n),[e,...r])},ze.clear=function(e,t){return(e=>{if(void 0===e||0===e.length)L.splice(0,L.length);else{const t=L.find((t=>N(e,t.keys,t.equal)));t&&t.remove()}})([e,...Array.isArray(t)?t:[t]])};const De=new Map,{invalidate:Le,advance:Ne}=function(e){let t,n,r,i=!1;function o(a){n=requestAnimationFrame(o),i=!0,t=0,ke("before",a);for(const n of e.values()){var s;r=n.store.getState(),!r.internal.active||!("always"===r.frameloop||r.internal.frames>0)||null!=(s=r.gl.xr)&&s.isPresenting||(t+=Me(a,r))}if(ke("after",a),0===t)return ke("tail",a),i=!1,cancelAnimationFrame(n)}return{loop:o,invalidate:function t(n,r=1){var a;if(!n)return e.forEach((e=>t(e.store.getState())),r);null!=(a=n.gl.xr)&&a.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=Math.min(60,n.internal.frames+r),i||(i=!0,requestAnimationFrame(o)))},advance:function(t,n=!0,r,i){if(n&&ke("before",t),r)Me(t,r,i);else for(const o of e.values())Me(t,o.store.getState());n&&ke("after",t)}}}(De),{reconciler:Ie,applyProps:Re}=function(e,t){function n(e,{args:t=[],attach:n,...r},i){let o,a=`${e[0].toUpperCase()}${e.slice(1)}`;if("primitive"===e){if(void 0===r.object)throw new Error("R3F: Primitives without 'object' are invalid!");o=re(r.object,{type:e,root:i,attach:n,primitive:!0})}else{const r=F[a];if(!r)throw new Error(`R3F: ${a} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(t))throw new Error("R3F: The args prop must be an array!");o=re(new r(...t),{type:e,root:i,attach:n,memoizedProps:{args:t}})}return void 0===o.__r3f.attach&&(o instanceof M.BufferGeometry?o.__r3f.attach="geometry":o instanceof M.Material&&(o.__r3f.attach="material")),"inject"!==a&&ue(o,r),o}function r(e,t){let n=!1;var r,i;t&&(null!=(r=t.__r3f)&&r.attach?ae(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),n=!0),n||null==(i=e.__r3f)||i.objects.push(t),t.__r3f||re(t,{}),t.__r3f.parent=e,de(t),ce(t))}function i(e,t,n){let r=!1;if(t){var i,o;if(null!=(i=t.__r3f)&&i.attach)ae(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"});const i=e.children.filter((e=>e!==t)),o=i.indexOf(n);e.children=[...i.slice(0,o),t,...i.slice(o)],r=!0}r||null==(o=e.__r3f)||o.objects.push(t),t.__r3f||re(t,{}),t.__r3f.parent=e,de(t),ce(t)}}function o(e,t,n=!1){e&&[...e].forEach((e=>a(t,e,n)))}function a(e,t,n){if(t){var r,i,a;if(t.__r3f&&(t.__r3f.parent=null),null!=(r=e.__r3f)&&r.objects&&(e.__r3f.objects=e.__r3f.objects.filter((e=>e!==t))),null!=(i=t.__r3f)&&i.attach)se(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var s;e.remove(t),null!=(s=t.__r3f)&&s.root&&function(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter((e=>e!==t)),n.initialHits=n.initialHits.filter((e=>e!==t)),n.hovered.forEach(((e,r)=>{e.eventObject!==t&&e.object!==t||n.hovered.delete(r)})),n.capturedMap.forEach(((e,r)=>{pe(n.capturedMap,t,e,r)}))}(t.__r3f.root,t)}const u=null==(a=t.__r3f)?void 0:a.primitive,c=void 0===n?null!==t.dispose&&!u:n;var l;if(!u)o(null==(l=t.__r3f)?void 0:l.objects,t,c),o(t.children,t,c);delete t.__r3f,c&&t.dispose&&"Scene"!==t.type&&(0,D.unstable_scheduleCallback)(D.unstable_IdlePriority,(()=>{try{t.dispose()}catch(e){}})),ce(e)}}const s=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters."),l=z()({createInstance:n,removeChild:a,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(e,t)=>{if(!t)return;const n=e.getState().scene;n.__r3f&&(n.__r3f.root=e,r(n,t))},removeChildFromContainer:(e,t)=>{t&&a(e.getState().scene,t)},insertInContainerBefore:(e,t,n)=>{if(!t||!n)return;const r=e.getState().scene;r.__r3f&&i(r,t,n)},getRootHostContext:()=>null,getChildHostContext:e=>e,finalizeInitialChildren(e){var t;const n=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(n.handlers)},prepareUpdate(e,t,n,r){var i;if((null!=(i=null==e?void 0:e.__r3f)?i:{}).primitive&&r.object&&r.object!==e)return[!0];{const{args:t=[],children:i,...o}=r,{args:a=[],children:s,...l}=n;if(!Array.isArray(t))throw new Error("R3F: the args prop must be an array!");if(t.some(((e,t)=>e!==a[t])))return[!0];const u=le(e,o,l,!0);return u.changes.length?[!1,u]:null}},commitUpdate(e,[t,i],o,s,l,u){t?function(e,t,i,o){var s;const l=null==(s=e.__r3f)?void 0:s.parent;if(!l)return;const u=n(t,i,e.__r3f.root);if(e.children){for(const t of e.children)t.__r3f&&r(u,t);e.children=e.children.filter((e=>!e.__r3f))}e.__r3f.objects.forEach((e=>r(u,e))),e.__r3f.objects=[],e.__r3f.autoRemovedBeforeAppend||a(l,e),u.parent&&(u.__r3f.autoRemovedBeforeAppend=!0),r(l,u),u.raycast&&u.__r3f.eventCount&&u.__r3f.root.getState().internal.interaction.push(u);[o,o.alternate].forEach((e=>{null!==e&&(e.stateNode=u,e.ref&&("function"==typeof e.ref?e.ref(u):e.ref.current=u))}))}(e,o,l,u):ue(e,i)},commitMount(e,t,n,r){var i;const o=null!=(i=e.__r3f)?i:{};e.raycast&&o.handlers&&o.eventCount&&e.__r3f.root.getState().internal.interaction.push(e)},getPublicInstance:e=>e,prepareForCommit:()=>null,preparePortalMount:e=>re(e.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(e){var t;const{attach:n,parent:r}=null!=(t=e.__r3f)?t:{};n&&r&&se(r,e,n),e.isObject3D&&(e.visible=!1),ce(e)},unhideInstance(e,t){var n;const{attach:r,parent:i}=null!=(n=e.__r3f)?n:{};r&&i&&ae(i,e,r),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),ce(e)},createTextInstance:s,hideTextInstance:s,unhideTextInstance:s,getCurrentEventPriority:()=>t?t():A.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!=typeof performance&&te.fun(performance.now)?performance.now:te.fun(Date.now)?Date.now:()=>0,scheduleTimeout:te.fun(setTimeout)?setTimeout:void 0,cancelTimeout:te.fun(clearTimeout)?clearTimeout:void 0});return{reconciler:l,applyProps:ue}}(0,(function(){var e;const t="undefined"!=typeof self&&self||"undefined"!=typeof window&&window;if(!t)return A.DefaultEventPriority;switch(null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return A.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return A.ContinuousEventPriority;default:return A.DefaultEventPriority}})),Fe={objects:"shallow",strict:!1},Ge=(e,t)=>{const n="function"==typeof e?e(t):e;return me(n)?n:new M.WebGLRenderer({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function je(e){const t=De.get(e),n=null==t?void 0:t.fiber,r=null==t?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const i="function"==typeof reportError?reportError:console.error,o=r||ye(Le,Ne),s=n||Ie.createContainer(o,A.ConcurrentRoot,null,!1,null,"",i,null);let l;t||De.set(e,{fiber:s,store:o});let u,c=!1;return{configure(t={}){let{gl:n,size:r,scene:i,events:a,onCreated:s,shadows:d=!1,linear:h=!1,flat:f=!1,legacy:p=!1,orthographic:g=!1,frameloop:m="always",dpr:v=[1,2],performance:y,raycaster:b,camera:_,onPointerMissed:w}=t,x=o.getState(),S=x.gl;x.gl||x.set({gl:S=Ge(n,e)});let E=x.raycaster;E||x.set({raycaster:E=new M.Raycaster});const{params:k,...T}=b||{};if(te.equ(T,E,Fe)||Re(E,{...T}),te.equ(k,E.params,Fe)||Re(E,{params:{...E.params,...k}}),!x.camera||x.camera===u&&!te.equ(u,_,Fe)){u=_;const e=_ instanceof M.Camera,t=e?_:g?new M.OrthographicCamera(0,0,0,0,.1,1e3):new M.PerspectiveCamera(75,0,.1,1e3);e||(t.position.z=5,_&&Re(t,_),x.camera||null!=_&&_.rotation||t.lookAt(0,0,0)),x.set({camera:t})}if(!x.scene){let e;i instanceof M.Scene?e=i:(e=new M.Scene,i&&Re(e,i)),x.set({scene:re(e)})}if(!x.xr){const e=(e,t)=>{const n=o.getState();"never"!==n.frameloop&&Ne(e,!0,n,t)},t=()=>{const t=o.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||Le(t)},n={connect(){const e=o.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){const e=o.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};S.xr&&n.connect(),x.set({xr:n})}if(S.shadowMap){const e=S.shadowMap.enabled,t=S.shadowMap.type;if(S.shadowMap.enabled=!!d,te.boo(d))S.shadowMap.type=M.PCFSoftShadowMap;else if(te.str(d)){var C;const e={basic:M.BasicShadowMap,percentage:M.PCFShadowMap,soft:M.PCFSoftShadowMap,variance:M.VSMShadowMap};S.shadowMap.type=null!=(C=e[d])?C:M.PCFSoftShadowMap}else te.obj(d)&&Object.assign(S.shadowMap,d);e===S.shadowMap.enabled&&t===S.shadowMap.type||(S.shadowMap.needsUpdate=!0)}const A=H();A&&("enabled"in A?A.enabled=!p:"legacyMode"in A&&(A.legacyMode=p));Re(S,{outputEncoding:h?3e3:3001,toneMapping:f?M.NoToneMapping:M.ACESFilmicToneMapping}),x.legacy!==p&&x.set((()=>({legacy:p}))),x.linear!==h&&x.set((()=>({linear:h}))),x.flat!==f&&x.set((()=>({flat:f}))),!n||te.fun(n)||me(n)||te.equ(n,S,Fe)||Re(S,n),a&&!x.events.handlers&&x.set({events:a(o)});const P=function(e,t){if(t)return t;if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:t,height:n,top:r,left:i}=e.parentElement.getBoundingClientRect();return{width:t,height:n,top:r,left:i}}return"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0}:{width:0,height:0,top:0,left:0}}(e,r);return te.equ(P,x.size,Fe)||x.setSize(P.width,P.height,P.updateStyle,P.top,P.left),v&&x.viewport.dpr!==J(v)&&x.setDpr(v),x.frameloop!==m&&x.setFrameloop(m),x.onPointerMissed||x.set({onPointerMissed:w}),y&&!te.equ(y,x.performance,Fe)&&x.set((e=>({performance:{...e.performance,...y}}))),l=s,c=!0,this},render(t){return c||this.configure(),Ie.updateContainer(a.createElement(Be,{store:o,children:t,onCreated:l,rootElement:e}),s,null,(()=>{})),o},unmount(){Ve(e)}}}function Be({store:e,children:t,onCreated:n,rootElement:r}){return q((()=>{const t=e.getState();t.set((e=>({internal:{...e.internal,active:!0}}))),n&&n(t),e.getState().events.connected||null==t.events.connect||t.events.connect(r)}),[]),a.createElement(ve.Provider,{value:e},t)}function Ve(e,t){const n=De.get(e),r=null==n?void 0:n.fiber;if(r){const i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),Ie.updateContainer(null,r,null,(()=>{i&&setTimeout((()=>{try{var n,r,o,a;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(o=i.gl)||null==o.forceContextLoss||o.forceContextLoss(),null!=(a=i.gl)&&a.xr&&i.xr.disconnect(),function(e){e.dispose&&"Scene"!==e.type&&e.dispose();for(const t in e)null==t.dispose||t.dispose(),delete e[t]}(i),De.delete(e),t&&t(e)}catch(s){}}),500)}))}}Ie.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:a.version});a.unstable_act;var He=n(5773),We=n(6415),qe=n.n(We);function $e(e){let{debounce:t,scroll:n,polyfill:r,offsetSize:i}=void 0===e?{debounce:0,scroll:!1,offsetSize:!1}:e;const o=r||("undefined"==typeof window?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,l]=(0,a.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),u=(0,a.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s}),c=t?"number"==typeof t?t:t.scroll:null,d=t?"number"==typeof t?t:t.resize:null,h=(0,a.useRef)(!1);(0,a.useEffect)((()=>(h.current=!0,()=>{h.current=!1})));const[f,p,g]=(0,a.useMemo)((()=>{const e=()=>{if(!u.current.element)return;const{left:e,top:t,width:n,height:r,bottom:o,right:a,x:s,y:c}=u.current.element.getBoundingClientRect(),d={left:e,top:t,width:n,height:r,bottom:o,right:a,x:s,y:c};u.current.element instanceof HTMLElement&&i&&(d.height=u.current.element.offsetHeight,d.width=u.current.element.offsetWidth),Object.freeze(d),h.current&&!Ze(u.current.lastBounds,d)&&l(u.current.lastBounds=d)};return[e,d?qe()(e,d):e,c?qe()(e,c):e]}),[l,i,c,d]);function m(){u.current.scrollContainers&&(u.current.scrollContainers.forEach((e=>e.removeEventListener("scroll",g,!0))),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null)}function v(){u.current.element&&(u.current.resizeObserver=new o(g),u.current.resizeObserver.observe(u.current.element),n&&u.current.scrollContainers&&u.current.scrollContainers.forEach((e=>e.addEventListener("scroll",g,{capture:!0,passive:!0}))))}var y;return function(e,t){(0,a.useEffect)((()=>{if(t){const t=e;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}}),[e,t])}(g,Boolean(n)),y=p,(0,a.useEffect)((()=>{const e=y;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[y]),(0,a.useEffect)((()=>{m(),v()}),[n,g,p]),(0,a.useEffect)((()=>m),[]),[e=>{e&&e!==u.current.element&&(m(),u.current.element=e,u.current.scrollContainers=Ye(e),v())},s,f]}function Ye(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(e);return[n,r,i].some((e=>"auto"===e||"scroll"===e))&&t.push(e),[...t,...Ye(e.parentElement)]}const Xe=["x","y","top","bottom","left","right","width","height"],Ze=(e,t)=>Xe.every((n=>e[n]===t[n]));var Ke=n(8283);const Qe={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Je(e){const{handlePointer:t}=ge(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(Qe).reduce(((e,n)=>({...e,[n]:t(n)})),{}),update:()=>{var t;const{events:n,internal:r}=e.getState();null!=(t=r.lastEvent)&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var n;const{set:r,events:i}=e.getState();null==i.disconnect||i.disconnect(),r((e=>({events:{...e.events,connected:t}}))),Object.entries(null!=(n=i.handlers)?n:[]).forEach((([e,n])=>{const[r,i]=Qe[e];t.addEventListener(r,n,{passive:i})}))},disconnect:()=>{const{set:t,events:n}=e.getState();var r;n.connected&&(Object.entries(null!=(r=n.handlers)?r:[]).forEach((([e,t])=>{if(n&&n.connected instanceof HTMLElement){const[r]=Qe[e];n.connected.removeEventListener(r,t)}})),t((e=>({events:{...e.events,connected:void 0}}))))}}}const et=a.forwardRef((function({children:e,fallback:t,resize:n,style:r,gl:i,events:o=Je,eventSource:s,eventPrefix:l,shadows:u,linear:c,flat:d,legacy:h,orthographic:f,frameloop:p,dpr:g,performance:m,raycaster:v,camera:y,onPointerMissed:b,onCreated:_,...w},x){a.useMemo((()=>G(M)),[]);const S=(0,Ke.jn)(),[E,k]=$e({scroll:!0,debounce:{scroll:50,resize:0},...n}),T=a.useRef(null),C=a.useRef(null);a.useImperativeHandle(x,(()=>T.current));const A=$(b),[P,O]=a.useState(!1),[U,z]=a.useState(!1);if(P)throw P;if(U)throw U;const D=a.useRef(null);q((()=>{const t=T.current;k.width>0&&k.height>0&&t&&(D.current||(D.current=je(t)),D.current.configure({gl:i,events:o,shadows:u,linear:c,flat:d,legacy:h,orthographic:f,frameloop:p,dpr:g,performance:m,raycaster:v,camera:y,size:k,onPointerMissed:(...e)=>null==A.current?void 0:A.current(...e),onCreated:e=>{var t;null==e.events.connect||e.events.connect(s?(t=s)&&t.hasOwnProperty("current")?s.current:s:C.current),l&&e.setEvents({compute:(e,t)=>{const n=e[l+"X"],r=e[l+"Y"];t.pointer.set(n/t.size.width*2-1,-r/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==_||_(e)}}),D.current.render(a.createElement(S,null,a.createElement(X,{set:z},a.createElement(a.Suspense,{fallback:a.createElement(Y,{set:O})},e)))))})),a.useEffect((()=>{const e=T.current;if(e)return()=>Ve(e)}),[]);const L=s?"none":"auto";return a.createElement("div",(0,He.Z)({ref:C,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:L,...r}},w),a.createElement("div",{ref:E,style:{width:"100%",height:"100%"}},a.createElement("canvas",{ref:T,style:{display:"block"}},t)))})),tt=a.forwardRef((function(e,t){return a.createElement(Ke.Hn,null,a.createElement(et,(0,He.Z)({},e,{ref:t})))}));function nt(e){return function(){return e}}var rt={value:()=>{}};function it(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new ot(r)}function ot(e){this._=e}function at(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function st(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=rt,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}ot.prototype=it.prototype={constructor:ot,on:function(e,t){var n,r,i=this._,o=(r=i,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=o[a]).type)i[n]=st(i[n],e.name,t);else if(null==t)for(n in i)i[n]=st(i[n],e.name,null);return this}for(;++a<s;)if((n=(e=o[a]).type)&&(n=at(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ot(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var lt,ut,ct=it,dt=0,ht=0,ft=0,pt=1e3,gt=0,mt=0,vt=0,yt="object"==typeof performance&&performance.now?performance:Date,bt="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function _t(){return mt||(bt(wt),mt=yt.now()+vt)}function wt(){mt=0}function xt(){this._call=this._time=this._next=null}function St(e,t,n){var r=new xt;return r.restart(e,t,n),r}function Et(){mt=(gt=yt.now())+vt,dt=ht=0;try{!function(){_t(),++dt;for(var e,t=lt;t;)(e=mt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--dt}()}finally{dt=0,function(){var e,t,n=lt,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:lt=t);ut=e,Tt(r)}(),mt=0}}function kt(){var e=yt.now(),t=e-gt;t>pt&&(vt-=t,gt=e)}function Tt(e){dt||(ht&&(ht=clearTimeout(ht)),e-mt>24?(e<1/0&&(ht=setTimeout(Et,e-yt.now()-vt)),ft&&(ft=clearInterval(ft))):(ft||(gt=yt.now(),ft=setInterval(kt,pt)),dt=1,bt(Et)))}xt.prototype=St.prototype={constructor:xt,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?_t():+n)+(null==t?0:+t),this._next||ut===this||(ut?ut._next=this:lt=this,ut=this),this._call=e,this._time=n,Tt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Tt())}};const Ct=1664525,Mt=1013904223,At=4294967296;var Pt=3;function Ot(e){return e.x}function Ut(e){return e.y}function zt(e){return e.z}var Dt=10,Lt=Math.PI*(3-Math.sqrt(5)),Nt=20*Math.PI/(9+Math.sqrt(221));function It(e,t){t=t||2;var n,r=Math.min(Pt,Math.max(1,Math.round(t))),i=1,o=.001,a=1-Math.pow(o,1/300),s=0,l=.6,u=new Map,c=St(f),d=ct("tick","end"),h=function(){let e=1;return()=>(e=(Ct*e+Mt)%At)/At}();function f(){p(),d.call("tick",n),i<o&&(c.stop(),d.call("end",n))}function p(t){var o,c,d=e.length;void 0===t&&(t=1);for(var h=0;h<t;++h)for(i+=(s-i)*a,u.forEach((function(e){e(i)})),o=0;o<d;++o)null==(c=e[o]).fx?c.x+=c.vx*=l:(c.x=c.fx,c.vx=0),r>1&&(null==c.fy?c.y+=c.vy*=l:(c.y=c.fy,c.vy=0)),r>2&&(null==c.fz?c.z+=c.vz*=l:(c.z=c.fz,c.vz=0));return n}function g(){for(var t,n=0,i=e.length;n<i;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),null!=t.fz&&(t.z=t.fz),isNaN(t.x)||r>1&&isNaN(t.y)||r>2&&isNaN(t.z)){var o=Dt*(r>2?Math.cbrt(.5+n):r>1?Math.sqrt(.5+n):n),a=n*Lt,s=n*Nt;1===r?t.x=o:2===r?(t.x=o*Math.cos(a),t.y=o*Math.sin(a)):(t.x=o*Math.sin(a)*Math.cos(s),t.y=o*Math.cos(a),t.z=o*Math.sin(a)*Math.sin(s))}(isNaN(t.vx)||r>1&&isNaN(t.vy)||r>2&&isNaN(t.vz))&&(t.vx=0,r>1&&(t.vy=0),r>2&&(t.vz=0))}}function m(t){return t.initialize&&t.initialize(e,h,r),t}return null==e&&(e=[]),g(),n={tick:p,restart:function(){return c.restart(f),n},stop:function(){return c.stop(),n},numDimensions:function(e){return arguments.length?(r=Math.min(Pt,Math.max(1,Math.round(e))),u.forEach(m),n):r},nodes:function(t){return arguments.length?(e=t,g(),u.forEach(m),n):e},alpha:function(e){return arguments.length?(i=+e,n):i},alphaMin:function(e){return arguments.length?(o=+e,n):o},alphaDecay:function(e){return arguments.length?(a=+e,n):+a},alphaTarget:function(e){return arguments.length?(s=+e,n):s},velocityDecay:function(e){return arguments.length?(l=1-e,n):1-l},randomSource:function(e){return arguments.length?(h=e,u.forEach(m),n):h},force:function(e,t){return arguments.length>1?(null==t?u.delete(e):u.set(e,m(t)),n):u.get(e)},find:function(){var t,n,i,o,a,s,l=Array.prototype.slice.call(arguments),u=l.shift()||0,c=(r>1?l.shift():null)||0,d=(r>2?l.shift():null)||0,h=l.shift()||1/0,f=0,p=e.length;for(h*=h,f=0;f<p;++f)(o=(t=u-(a=e[f]).x)*t+(n=c-(a.y||0))*n+(i=d-(a.z||0))*i)<h&&(s=a,h=o);return s},on:function(e,t){return arguments.length>1?(d.on(e,t),n):d.on(e)}}}function Rt(e){return 1e-6*(e()-.5)}function Ft(e){return e.index}function Gt(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function jt(e,t,n){if(isNaN(t))return e;var r,i,o,a,s,l,u=e._root,c={data:n},d=e._x0,h=e._x1;if(!u)return e._root=c,e;for(;u.length;)if((a=t>=(i=(d+h)/2))?d=i:h=i,r=u,!(u=u[s=+a]))return r[s]=c,e;if(t===(o=+e._x.call(null,u.data)))return c.next=u,r?r[s]=c:e._root=c,e;do{r=r?r[s]=new Array(2):e._root=new Array(2),(a=t>=(i=(d+h)/2))?d=i:h=i}while((s=+a)==(l=+(o>=i)));return r[l]=u,r[s]=c,e}function Bt(e,t,n){this.node=e,this.x0=t,this.x1=n}function Vt(e){return e[0]}function Ht(e,t){var n=new Wt(null==t?Vt:t,NaN,NaN);return null==e?n:n.addAll(e)}function Wt(e,t,n){this._x=e,this._x0=t,this._x1=n,this._root=void 0}function qt(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var $t=Ht.prototype=Wt.prototype;function Yt(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,a,s,l,u,c,d,h,f=e._root,p={data:r},g=e._x0,m=e._y0,v=e._x1,y=e._y1;if(!f)return e._root=p,e;for(;f.length;)if((u=t>=(o=(g+v)/2))?g=o:v=o,(c=n>=(a=(m+y)/2))?m=a:y=a,i=f,!(f=f[d=c<<1|u]))return i[d]=p,e;if(s=+e._x.call(null,f.data),l=+e._y.call(null,f.data),t===s&&n===l)return p.next=f,i?i[d]=p:e._root=p,e;do{i=i?i[d]=new Array(4):e._root=new Array(4),(u=t>=(o=(g+v)/2))?g=o:v=o,(c=n>=(a=(m+y)/2))?m=a:y=a}while((d=c<<1|u)==(h=(l>=a)<<1|s>=o));return i[h]=f,i[d]=p,e}function Xt(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Zt(e){return e[0]}function Kt(e){return e[1]}function Qt(e,t,n){var r=new Jt(null==t?Zt:t,null==n?Kt:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function Jt(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function en(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}$t.copy=function(){var e,t,n=new Wt(this._x,this._x0,this._x1),r=this._root;if(!r)return n;if(!r.length)return n._root=qt(r),n;for(e=[{source:r,target:n._root=new Array(2)}];r=e.pop();)for(var i=0;i<2;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(2)}):r.target[i]=qt(t));return n},$t.add=function(e){const t=+this._x.call(null,e);return jt(this.cover(t),t,e)},$t.addAll=function(e){Array.isArray(e)||(e=Array.from(e));const t=e.length,n=new Float64Array(t);let r=1/0,i=-1/0;for(let o,a=0;a<t;++a)isNaN(o=+this._x.call(null,e[a]))||(n[a]=o,o<r&&(r=o),o>i&&(i=o));if(r>i)return this;this.cover(r).cover(i);for(let o=0;o<t;++o)jt(this,n[o],e[o]);return this},$t.cover=function(e){if(isNaN(e=+e))return this;var t=this._x0,n=this._x1;if(isNaN(t))n=(t=Math.floor(e))+1;else{for(var r,i,o=n-t||1,a=this._root;t>e||e>=n;)switch(i=+(e<t),(r=new Array(2))[i]=a,a=r,o*=2,i){case 0:n=t+o;break;case 1:t=n-o}this._root&&this._root.length&&(this._root=a)}return this._x0=t,this._x1=n,this},$t.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},$t.extent=function(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]},$t.find=function(e,t){var n,r,i,o,a,s=this._x0,l=this._x1,u=[],c=this._root;for(c&&u.push(new Bt(c,s,l)),null==t?t=1/0:(s=e-t,l=e+t);o=u.pop();)if(!(!(c=o.node)||(r=o.x0)>l||(i=o.x1)<s))if(c.length){var d=(r+i)/2;u.push(new Bt(c[1],d,i),new Bt(c[0],r,d)),(a=+(e>=d))&&(o=u[u.length-1],u[u.length-1]=u[u.length-1-a],u[u.length-1-a]=o)}else{var h=Math.abs(e-+this._x.call(null,c.data));h<t&&(t=h,s=e-h,l=e+h,n=c.data)}return n},$t.remove=function(e){if(isNaN(o=+this._x.call(null,e)))return this;var t,n,r,i,o,a,s,l,u,c=this._root,d=this._x0,h=this._x1;if(!c)return this;if(c.length)for(;;){if((s=o>=(a=(d+h)/2))?d=a:h=a,t=c,!(c=c[l=+s]))return this;if(!c.length)break;t[l+1&1]&&(n=t,u=l)}for(;c.data!==e;)if(r=c,!(c=c.next))return this;return(i=c.next)&&delete c.next,r?(i?r.next=i:delete r.next,this):t?(i?t[l]=i:delete t[l],(c=t[0]||t[1])&&c===(t[1]||t[0])&&!c.length&&(n?n[u]=c:this._root=c),this):(this._root=i,this)},$t.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},$t.root=function(){return this._root},$t.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},$t.visit=function(e){var t,n,r,i,o=[],a=this._root;for(a&&o.push(new Bt(a,this._x0,this._x1));t=o.pop();)if(!e(a=t.node,r=t.x0,i=t.x1)&&a.length){var s=(r+i)/2;(n=a[1])&&o.push(new Bt(n,s,i)),(n=a[0])&&o.push(new Bt(n,r,s))}return this},$t.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new Bt(this._root,this._x0,this._x1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,s=t.x1,l=(a+s)/2;(o=i[0])&&n.push(new Bt(o,a,l)),(o=i[1])&&n.push(new Bt(o,l,s))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.x1);return this},$t.x=function(e){return arguments.length?(this._x=e,this):this._x};var tn=Qt.prototype=Jt.prototype;function nn(e,t,n,r,i){if(isNaN(t)||isNaN(n)||isNaN(r))return e;var o,a,s,l,u,c,d,h,f,p,g,m,v=e._root,y={data:i},b=e._x0,_=e._y0,w=e._z0,x=e._x1,S=e._y1,E=e._z1;if(!v)return e._root=y,e;for(;v.length;)if((h=t>=(a=(b+x)/2))?b=a:x=a,(f=n>=(s=(_+S)/2))?_=s:S=s,(p=r>=(l=(w+E)/2))?w=l:E=l,o=v,!(v=v[g=p<<2|f<<1|h]))return o[g]=y,e;if(u=+e._x.call(null,v.data),c=+e._y.call(null,v.data),d=+e._z.call(null,v.data),t===u&&n===c&&r===d)return y.next=v,o?o[g]=y:e._root=y,e;do{o=o?o[g]=new Array(8):e._root=new Array(8),(h=t>=(a=(b+x)/2))?b=a:x=a,(f=n>=(s=(_+S)/2))?_=s:S=s,(p=r>=(l=(w+E)/2))?w=l:E=l}while((g=p<<2|f<<1|h)==(m=(d>=l)<<2|(c>=s)<<1|u>=a));return o[m]=v,o[g]=y,e}function rn(e,t,n,r,i,o,a){this.node=e,this.x0=t,this.y0=n,this.z0=r,this.x1=i,this.y1=o,this.z1=a}function on(e){return e[0]}function an(e){return e[1]}function sn(e){return e[2]}function ln(e,t,n,r){var i=new un(null==t?on:t,null==n?an:n,null==r?sn:r,NaN,NaN,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function un(e,t,n,r,i,o,a,s,l){this._x=e,this._y=t,this._z=n,this._x0=r,this._y0=i,this._z0=o,this._x1=a,this._y1=s,this._z1=l,this._root=void 0}function cn(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}tn.copy=function(){var e,t,n=new Jt(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=en(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=en(t));return n},tn.add=function(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Yt(this.cover(t,n),t,n,e)},tn.addAll=function(e){var t,n,r,i,o=e.length,a=new Array(o),s=new Array(o),l=1/0,u=1/0,c=-1/0,d=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(a[n]=r,s[n]=i,r<l&&(l=r),r>c&&(c=r),i<u&&(u=i),i>d&&(d=i));if(l>c||u>d)return this;for(this.cover(l,u).cover(c,d),n=0;n<o;++n)Yt(this,a[n],s[n],e[n]);return this},tn.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a,s,l=i-n||1,u=this._root;n>e||e>=i||r>t||t>=o;)switch(s=(t<r)<<1|e<n,(a=new Array(4))[s]=u,u=a,l*=2,s){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},tn.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},tn.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},tn.find=function(e,t,n){var r,i,o,a,s,l,u,c=this._x0,d=this._y0,h=this._x1,f=this._y1,p=[],g=this._root;for(g&&p.push(new Xt(g,c,d,h,f)),null==n?n=1/0:(c=e-n,d=t-n,h=e+n,f=t+n,n*=n);l=p.pop();)if(!(!(g=l.node)||(i=l.x0)>h||(o=l.y0)>f||(a=l.x1)<c||(s=l.y1)<d))if(g.length){var m=(i+a)/2,v=(o+s)/2;p.push(new Xt(g[3],m,v,a,s),new Xt(g[2],i,v,m,s),new Xt(g[1],m,o,a,v),new Xt(g[0],i,o,m,v)),(u=(t>=v)<<1|e>=m)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-u],p[p.length-1-u]=l)}else{var y=e-+this._x.call(null,g.data),b=t-+this._y.call(null,g.data),_=y*y+b*b;if(_<n){var w=Math.sqrt(n=_);c=e-w,d=t-w,h=e+w,f=t+w,r=g.data}}return r},tn.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,r,i,o,a,s,l,u,c,d,h,f=this._root,p=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!f)return this;if(f.length)for(;;){if((u=o>=(s=(p+m)/2))?p=s:m=s,(c=a>=(l=(g+v)/2))?g=l:v=l,t=f,!(f=f[d=c<<1|u]))return this;if(!f.length)break;(t[d+1&3]||t[d+2&3]||t[d+3&3])&&(n=t,h=d)}for(;f.data!==e;)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):t?(i?t[d]=i:delete t[d],(f=t[0]||t[1]||t[2]||t[3])&&f===(t[3]||t[2]||t[1]||t[0])&&!f.length&&(n?n[h]=f:this._root=f),this):(this._root=i,this)},tn.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},tn.root=function(){return this._root},tn.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},tn.visit=function(e){var t,n,r,i,o,a,s=[],l=this._root;for(l&&s.push(new Xt(l,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(l=t.node,r=t.x0,i=t.y0,o=t.x1,a=t.y1)&&l.length){var u=(r+o)/2,c=(i+a)/2;(n=l[3])&&s.push(new Xt(n,u,c,o,a)),(n=l[2])&&s.push(new Xt(n,r,c,u,a)),(n=l[1])&&s.push(new Xt(n,u,i,o,c)),(n=l[0])&&s.push(new Xt(n,r,i,u,c))}return this},tn.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new Xt(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,s=t.y0,l=t.x1,u=t.y1,c=(a+l)/2,d=(s+u)/2;(o=i[0])&&n.push(new Xt(o,a,s,c,d)),(o=i[1])&&n.push(new Xt(o,c,s,l,d)),(o=i[2])&&n.push(new Xt(o,a,d,c,u)),(o=i[3])&&n.push(new Xt(o,c,d,l,u))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},tn.x=function(e){return arguments.length?(this._x=e,this):this._x},tn.y=function(e){return arguments.length?(this._y=e,this):this._y};var dn=ln.prototype=un.prototype;function hn(e){return e.x+e.vx}function fn(e){return e.y+e.vy}function pn(e){return e.z+e.vz}dn.copy=function(){var e,t,n=new un(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),r=this._root;if(!r)return n;if(!r.length)return n._root=cn(r),n;for(e=[{source:r,target:n._root=new Array(8)}];r=e.pop();)for(var i=0;i<8;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(8)}):r.target[i]=cn(t));return n},dn.add=function(e){const t=+this._x.call(null,e),n=+this._y.call(null,e),r=+this._z.call(null,e);return nn(this.cover(t,n,r),t,n,r,e)},dn.addAll=function(e){Array.isArray(e)||(e=Array.from(e));const t=e.length,n=new Float64Array(t),r=new Float64Array(t),i=new Float64Array(t);let o=1/0,a=1/0,s=1/0,l=-1/0,u=-1/0,c=-1/0;for(let d,h,f,p,g=0;g<t;++g)isNaN(h=+this._x.call(null,d=e[g]))||isNaN(f=+this._y.call(null,d))||isNaN(p=+this._z.call(null,d))||(n[g]=h,r[g]=f,i[g]=p,h<o&&(o=h),h>l&&(l=h),f<a&&(a=f),f>u&&(u=f),p<s&&(s=p),p>c&&(c=p));if(o>l||a>u||s>c)return this;this.cover(o,a,s).cover(l,u,c);for(let d=0;d<t;++d)nn(this,n[d],r[d],i[d],e[d]);return this},dn.cover=function(e,t,n){if(isNaN(e=+e)||isNaN(t=+t)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,o=this._z0,a=this._x1,s=this._y1,l=this._z1;if(isNaN(r))a=(r=Math.floor(e))+1,s=(i=Math.floor(t))+1,l=(o=Math.floor(n))+1;else{for(var u,c,d=a-r||1,h=this._root;r>e||e>=a||i>t||t>=s||o>n||n>=l;)switch(c=(n<o)<<2|(t<i)<<1|e<r,(u=new Array(8))[c]=h,h=u,d*=2,c){case 0:a=r+d,s=i+d,l=o+d;break;case 1:r=a-d,s=i+d,l=o+d;break;case 2:a=r+d,i=s-d,l=o+d;break;case 3:r=a-d,i=s-d,l=o+d;break;case 4:a=r+d,s=i+d,o=l-d;break;case 5:r=a-d,s=i+d,o=l-d;break;case 6:a=r+d,i=s-d,o=l-d;break;case 7:r=a-d,i=s-d,o=l-d}this._root&&this._root.length&&(this._root=h)}return this._x0=r,this._y0=i,this._z0=o,this._x1=a,this._y1=s,this._z1=l,this},dn.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},dn.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},dn.find=function(e,t,n,r){var i,o,a,s,l,u,c,d,h,f=this._x0,p=this._y0,g=this._z0,m=this._x1,v=this._y1,y=this._z1,b=[],_=this._root;for(_&&b.push(new rn(_,f,p,g,m,v,y)),null==r?r=1/0:(f=e-r,p=t-r,g=n-r,m=e+r,v=t+r,y=n+r,r*=r);d=b.pop();)if(!(!(_=d.node)||(o=d.x0)>m||(a=d.y0)>v||(s=d.z0)>y||(l=d.x1)<f||(u=d.y1)<p||(c=d.z1)<g))if(_.length){var w=(o+l)/2,x=(a+u)/2,S=(s+c)/2;b.push(new rn(_[7],w,x,S,l,u,c),new rn(_[6],o,x,S,w,u,c),new rn(_[5],w,a,S,l,x,c),new rn(_[4],o,a,S,w,x,c),new rn(_[3],w,x,s,l,u,S),new rn(_[2],o,x,s,w,u,S),new rn(_[1],w,a,s,l,x,S),new rn(_[0],o,a,s,w,x,S)),(h=(n>=S)<<2|(t>=x)<<1|e>=w)&&(d=b[b.length-1],b[b.length-1]=b[b.length-1-h],b[b.length-1-h]=d)}else{var E=e-+this._x.call(null,_.data),k=t-+this._y.call(null,_.data),T=n-+this._z.call(null,_.data),C=E*E+k*k+T*T;if(C<r){var M=Math.sqrt(r=C);f=e-M,p=t-M,g=n-M,m=e+M,v=t+M,y=n+M,i=_.data}}return i},dn.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e))||isNaN(s=+this._z.call(null,e)))return this;var t,n,r,i,o,a,s,l,u,c,d,h,f,p,g,m=this._root,v=this._x0,y=this._y0,b=this._z0,_=this._x1,w=this._y1,x=this._z1;if(!m)return this;if(m.length)for(;;){if((d=o>=(l=(v+_)/2))?v=l:_=l,(h=a>=(u=(y+w)/2))?y=u:w=u,(f=s>=(c=(b+x)/2))?b=c:x=c,t=m,!(m=m[p=f<<2|h<<1|d]))return this;if(!m.length)break;(t[p+1&7]||t[p+2&7]||t[p+3&7]||t[p+4&7]||t[p+5&7]||t[p+6&7]||t[p+7&7])&&(n=t,g=p)}for(;m.data!==e;)if(r=m,!(m=m.next))return this;return(i=m.next)&&delete m.next,r?(i?r.next=i:delete r.next,this):t?(i?t[p]=i:delete t[p],(m=t[0]||t[1]||t[2]||t[3]||t[4]||t[5]||t[6]||t[7])&&m===(t[7]||t[6]||t[5]||t[4]||t[3]||t[2]||t[1]||t[0])&&!m.length&&(n?n[g]=m:this._root=m),this):(this._root=i,this)},dn.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},dn.root=function(){return this._root},dn.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},dn.visit=function(e){var t,n,r,i,o,a,s,l,u=[],c=this._root;for(c&&u.push(new rn(c,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=u.pop();)if(!e(c=t.node,r=t.x0,i=t.y0,o=t.z0,a=t.x1,s=t.y1,l=t.z1)&&c.length){var d=(r+a)/2,h=(i+s)/2,f=(o+l)/2;(n=c[7])&&u.push(new rn(n,d,h,f,a,s,l)),(n=c[6])&&u.push(new rn(n,r,h,f,d,s,l)),(n=c[5])&&u.push(new rn(n,d,i,f,a,h,l)),(n=c[4])&&u.push(new rn(n,r,i,f,d,h,l)),(n=c[3])&&u.push(new rn(n,d,h,o,a,s,f)),(n=c[2])&&u.push(new rn(n,r,h,o,d,s,f)),(n=c[1])&&u.push(new rn(n,d,i,o,a,h,f)),(n=c[0])&&u.push(new rn(n,r,i,o,d,h,f))}return this},dn.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new rn(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,s=t.y0,l=t.z0,u=t.x1,c=t.y1,d=t.z1,h=(a+u)/2,f=(s+c)/2,p=(l+d)/2;(o=i[0])&&n.push(new rn(o,a,s,l,h,f,p)),(o=i[1])&&n.push(new rn(o,h,s,l,u,f,p)),(o=i[2])&&n.push(new rn(o,a,f,l,h,c,p)),(o=i[3])&&n.push(new rn(o,h,f,l,u,c,p)),(o=i[4])&&n.push(new rn(o,a,s,p,h,f,d)),(o=i[5])&&n.push(new rn(o,h,s,p,u,f,d)),(o=i[6])&&n.push(new rn(o,a,f,p,h,c,d)),(o=i[7])&&n.push(new rn(o,h,f,p,u,c,d))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.z0,t.x1,t.y1,t.z1);return this},dn.x=function(e){return arguments.length?(this._x=e,this):this._x},dn.y=function(e){return arguments.length?(this._y=e,this):this._y},dn.z=function(e){return arguments.length?(this._z=e,this):this._z};var gn=n(6276);function mn(e){return null==e?null:function(e){if("function"!=typeof e)throw new Error;return e}(e)}function vn(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function yn(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=_n)):void 0===t&&(t=bn);for(var n,r,i,o,a,s=new Sn(e),l=[s];n=l.pop();)if((i=t(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)l.push(r=i[o]=new Sn(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(xn)}function bn(e){return e.children}function _n(e){return Array.isArray(e)?e[1]:null}function wn(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function xn(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function Sn(e){this.data=e,this.depth=this.height=0,this.parent=null}Sn.prototype=yn.prototype={constructor:Sn,count:function(){return this.eachAfter(vn)},each:function(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this},eachAfter:function(e,t){for(var n,r,i,o=this,a=[o],s=[],l=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)e.call(t,o,++l,this);return this},eachBefore:function(e,t){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(e.call(t,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();for(;e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return yn(this).eachBefore(wn)},[Symbol.iterator]:function*(){var e,t,n,r,i=this,o=[i];do{for(e=o.reverse(),o=[];i=e.pop();)if(yield i,t=i.children)for(n=0,r=t.length;n<r;++n)o.push(t[n])}while(o.length)}};var En={depth:-1},kn={},Tn={};function Cn(e){return e.id}function Mn(e){return e.parentId}function An(){var e,t=Cn,n=Mn;function r(r){var i,o,a,s,l,u,c,d,h=Array.from(r),f=t,p=n,g=new Map;if(null!=e){const t=h.map(((t,n)=>function(e){e=`${e}`;let t=e.length;On(e,t-1)&&!On(e,t-2)&&(e=e.slice(0,-1));return"/"===e[0]?e:`/${e}`}(e(t,n,r)))),n=t.map(Pn),i=new Set(t).add("");for(const e of n)i.has(e)||(i.add(e),t.push(e),n.push(Pn(e)),h.push(Tn));f=(e,n)=>t[n],p=(e,t)=>n[t]}for(a=0,i=h.length;a<i;++a)o=h[a],u=h[a]=new Sn(o),null!=(c=f(o,a,r))&&(c+="")&&(d=u.id=c,g.set(d,g.has(d)?kn:u)),null!=(c=p(o,a,r))&&(c+="")&&(u.parent=c);for(a=0;a<i;++a)if(c=(u=h[a]).parent){if(!(l=g.get(c)))throw new Error("missing: "+c);if(l===kn)throw new Error("ambiguous: "+c);l.children?l.children.push(u):l.children=[u],u.parent=l}else{if(s)throw new Error("multiple roots");s=u}if(!s)throw new Error("no root");if(null!=e){for(;s.data===Tn&&1===s.children.length;)s=s.children[0],--i;for(let e=h.length-1;e>=0&&(u=h[e]).data===Tn;--e)u.data=null}if(s.parent=En,s.eachBefore((function(e){e.depth=e.parent.depth+1,--i})).eachBefore(xn),s.parent=null,i>0)throw new Error("cycle");return s}return r.id=function(e){return arguments.length?(t=mn(e),r):t},r.parentId=function(e){return arguments.length?(n=mn(e),r):n},r.path=function(t){return arguments.length?(e=mn(t),r):e},r}function Pn(e){let t=e.length;if(t<2)return"";for(;--t>1&&!On(e,t););return e.slice(0,t)}function On(e,t){if("/"===e[t]){let n=0;for(;t>0&&"\\"===e[--t];)++n;if(0==(1&n))return!0}return!1}function Un(e,t){return e.parent===t.parent?1:2}function zn(e){var t=e.children;return t?t[0]:e.t}function Dn(e){var t=e.children;return t?t[t.length-1]:e.t}function Ln(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Nn(e,t,n){return e.a.parent===t.parent?e.a:n}function In(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function Rn(){var e=Un,t=1,n=1,r=null;function i(i){var l=function(e){for(var t,n,r,i,o,a=new In(e,0),s=[a];t=s.pop();)if(r=t._.children)for(t.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=t.children[i]=new In(r[i],i)),n.parent=t;return(a.parent=new In(null,0)).children=[a],a}(i);if(l.eachAfter(o),l.parent.m=-l.z,l.eachBefore(a),r)i.eachBefore(s);else{var u=i,c=i,d=i;i.eachBefore((function(e){e.x<u.x&&(u=e),e.x>c.x&&(c=e),e.depth>d.depth&&(d=e)}));var h=u===c?1:e(u,c)/2,f=h-u.x,p=t/(c.x+h+f),g=n/(d.depth||1);i.eachBefore((function(e){e.x=(e.x+f)*p,e.y=e.depth*g}))}return i}function o(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,i=e.children,o=i.length;--o>=0;)(t=i[o]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var o=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,o=t,a=t,s=n,l=o.parent.children[0],u=o.m,c=a.m,d=s.m,h=l.m;s=Dn(s),o=zn(o),s&&o;)l=zn(l),(a=Dn(a)).a=t,(i=s.z+d-o.z-u+e(s._,o._))>0&&(Ln(Nn(s,t,r),t,i),u+=i,c+=i),d+=s.m,u+=o.m,h+=l.m,c+=a.m;s&&!Dn(a)&&(a.t=s,a.m+=d-c),o&&!zn(l)&&(l.t=o,l.m+=u-h,r=t)}return r}(t,i,t.parent.A||r[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function s(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i}In.prototype=Object.create(Sn.prototype);var Fn=n(2977),Gn=n(8311),jn=n(5656),Bn=n(770),Vn=n(9255);const Hn=Math.sqrt(50),Wn=Math.sqrt(10),qn=Math.sqrt(2);function $n(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=Hn?10:o>=Wn?5:o>=qn?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*a,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=n&&n<2?$n(e,t,2*n):[s,l,u]}function Yn(e,t,n){return $n(e=+e,t=+t,n=+n)[2]}function Xn(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Zn(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Kn(e){let t,n,r;function i(e,r,i=0,o=e.length){if(i<o){if(0!==t(r,r))return o;do{const t=i+o>>>1;n(e[t],r)<0?i=t+1:o=t}while(i<o)}return i}return 2!==e.length?(t=Xn,n=(t,n)=>Xn(e(t),n),r=(t,n)=>e(t)-n):(t=e===Xn||e===Zn?e:Qn,n=e,r=e),{left:i,center:function(e,t,n=0,o=e.length){const a=i(e,t,n,o-1);return a>n&&r(e[a-1],t)>-r(e[a],t)?a-1:a},right:function(e,r,i=0,o=e.length){if(i<o){if(0!==t(r,r))return o;do{const t=i+o>>>1;n(e[t],r)<=0?i=t+1:o=t}while(i<o)}return i}}}function Qn(){return 0}const Jn=Kn(Xn),er=Jn.right;Jn.left,Kn((function(e){return null===e?NaN:+e})).center;var tr=er;function nr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function rr(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ir(){}var or=.7,ar=1/or,sr="\\s*([+-]?\\d+)\\s*",lr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ur="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cr=/^#([0-9a-f]{3,8})$/,dr=new RegExp(`^rgb\\(${sr},${sr},${sr}\\)$`),hr=new RegExp(`^rgb\\(${ur},${ur},${ur}\\)$`),fr=new RegExp(`^rgba\\(${sr},${sr},${sr},${lr}\\)$`),pr=new RegExp(`^rgba\\(${ur},${ur},${ur},${lr}\\)$`),gr=new RegExp(`^hsl\\(${lr},${ur},${ur}\\)$`),mr=new RegExp(`^hsla\\(${lr},${ur},${ur},${lr}\\)$`),vr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function yr(){return this.rgb().formatHex()}function br(){return this.rgb().formatRgb()}function _r(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=cr.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?wr(t):3===n?new Er(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?xr(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?xr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=dr.exec(e))?new Er(t[1],t[2],t[3],1):(t=hr.exec(e))?new Er(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=fr.exec(e))?xr(t[1],t[2],t[3],t[4]):(t=pr.exec(e))?xr(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=gr.exec(e))?Pr(t[1],t[2]/100,t[3]/100,1):(t=mr.exec(e))?Pr(t[1],t[2]/100,t[3]/100,t[4]):vr.hasOwnProperty(e)?wr(vr[e]):"transparent"===e?new Er(NaN,NaN,NaN,0):null}function wr(e){return new Er(e>>16&255,e>>8&255,255&e,1)}function xr(e,t,n,r){return r<=0&&(e=t=n=NaN),new Er(e,t,n,r)}function Sr(e,t,n,r){return 1===arguments.length?((i=e)instanceof ir||(i=_r(i)),i?new Er((i=i.rgb()).r,i.g,i.b,i.opacity):new Er):new Er(e,t,n,null==r?1:r);var i}function Er(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function kr(){return`#${Ar(this.r)}${Ar(this.g)}${Ar(this.b)}`}function Tr(){const e=Cr(this.opacity);return`${1===e?"rgb(":"rgba("}${Mr(this.r)}, ${Mr(this.g)}, ${Mr(this.b)}${1===e?")":`, ${e})`}`}function Cr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Mr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ar(e){return((e=Mr(e))<16?"0":"")+e.toString(16)}function Pr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ur(e,t,n,r)}function Or(e){if(e instanceof Ur)return new Ur(e.h,e.s,e.l,e.opacity);if(e instanceof ir||(e=_r(e)),!e)return new Ur;if(e instanceof Ur)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new Ur(a,s,l,e.opacity)}function Ur(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function zr(e){return(e=(e||0)%360)<0?e+360:e}function Dr(e){return Math.max(0,Math.min(1,e||0))}function Lr(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Nr(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}nr(ir,_r,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:yr,formatHex:yr,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Or(this).formatHsl()},formatRgb:br,toString:br}),nr(Er,Sr,rr(ir,{brighter(e){return e=null==e?ar:Math.pow(ar,e),new Er(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?or:Math.pow(or,e),new Er(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Er(Mr(this.r),Mr(this.g),Mr(this.b),Cr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kr,formatHex:kr,formatHex8:function(){return`#${Ar(this.r)}${Ar(this.g)}${Ar(this.b)}${Ar(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Tr,toString:Tr})),nr(Ur,(function(e,t,n,r){return 1===arguments.length?Or(e):new Ur(e,t,n,null==r?1:r)}),rr(ir,{brighter(e){return e=null==e?ar:Math.pow(ar,e),new Ur(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?or:Math.pow(or,e),new Ur(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Er(Lr(e>=240?e-240:e+120,i,r),Lr(e,i,r),Lr(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ur(zr(this.h),Dr(this.s),Dr(this.l),Cr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Cr(this.opacity);return`${1===e?"hsl(":"hsla("}${zr(this.h)}, ${100*Dr(this.s)}%, ${100*Dr(this.l)}%${1===e?")":`, ${e})`}`}}));var Ir=e=>()=>e;function Rr(e,t){return function(n){return e+n*t}}function Fr(e){return 1==(e=+e)?Gr:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Ir(isNaN(t)?n:t)}}function Gr(e,t){var n=t-e;return n?Rr(e,n):Ir(isNaN(e)?t:e)}var jr=function e(t){var n=Fr(t);function r(e,t){var r=n((e=Sr(e)).r,(t=Sr(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=Gr(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function Br(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Sr(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}Br((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return Nr((n-r/t)*t,a,i,o,s)}})),Br((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return Nr((n-r/t)*t,i,o,a,s)}}));function Vr(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Kr(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function Hr(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Wr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function qr(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=Kr(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var $r=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yr=new RegExp($r.source,"g");function Xr(e,t){var n,r,i,o=$r.lastIndex=Yr.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=$r.exec(e))&&(r=Yr.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:Wr(n,r)})),o=Yr.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function Zr(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function Kr(e,t){var n,r=typeof t;return null==t||"boolean"===r?Ir(t):("number"===r?Wr:"string"===r?(n=_r(t))?(t=n,jr):Xr:t instanceof _r?jr:t instanceof Date?Hr:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?Zr:Array.isArray(t)?Vr:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?qr:Wr)(e,t)}function Qr(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Jr(e){return+e}var ei=[0,1];function ti(e){return e}function ni(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function ri(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=ni(i,r),o=n(a,o)):(r=ni(r,i),o=n(o,a)),function(e){return o(r(e))}}function ii(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=ni(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=tr(e,t,1,r)-1;return o[n](i[n](t))}}function oi(){var e,t,n,r,i,o,a=ei,s=ei,l=Kr,u=ti;function c(){var e=Math.min(a.length,s.length);return u!==ti&&(u=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(a[0],a[e-1])),r=e>2?ii:ri,i=o=null,d}function d(t){return null==t||isNaN(t=+t)?n:(i||(i=r(a.map(e),s,l)))(e(u(t)))}return d.invert=function(n){return u(t((o||(o=r(s,a.map(e),Wr)))(n)))},d.domain=function(e){return arguments.length?(a=Array.from(e,Jr),c()):a.slice()},d.range=function(e){return arguments.length?(s=Array.from(e),c()):s.slice()},d.rangeRound=function(e){return s=Array.from(e),l=Qr,c()},d.clamp=function(e){return arguments.length?(u=!!e||ti,c()):u!==ti},d.interpolate=function(e){return arguments.length?(l=e,c()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,c()}}function ai(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}var si,li=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ui(e){if(!(t=li.exec(e)))throw new Error("invalid format: "+e);var t;return new ci({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function ci(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function di(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function hi(e){return(e=di(Math.abs(e)))?e[1]:NaN}function fi(e,t){var n=di(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}ui.prototype=ci.prototype,ci.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var pi={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>fi(100*e,t),r:fi,s:function(e,t){var n=di(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(si=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+di(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function gi(e){return e}var mi,vi,yi,bi=Array.prototype.map,_i=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function wi(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?gi:(t=bi.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?gi:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(bi.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",u=void 0===e.minus?"−":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=ui(e)).fill,n=e.align,d=e.sign,h=e.symbol,f=e.zero,p=e.width,g=e.comma,m=e.precision,v=e.trim,y=e.type;"n"===y?(g=!0,y="g"):pi[y]||(void 0===m&&(m=12),v=!0,y="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",_="$"===h?o:/[%p]/.test(y)?l:"",w=pi[y],x=/[defgprs%]/.test(y);function S(e){var i,o,l,h=b,S=_;if("c"===y)S=w(e)+S,e="";else{var E=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:w(Math.abs(e),m),v&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),E&&0==+e&&"+"!==d&&(E=!1),h=(E?"("===d?d:u:"-"===d||"("===d?"":d)+h,S=("s"===y?_i[8+si/3]:"")+S+(E&&"("===d?")":""),x)for(i=-1,o=e.length;++i<o;)if(48>(l=e.charCodeAt(i))||l>57){S=(46===l?a+e.slice(i+1):e.slice(i))+S,e=e.slice(0,i);break}}g&&!f&&(e=r(e,1/0));var k=h.length+e.length+S.length,T=k<p?new Array(p-k+1).join(t):"";switch(g&&f&&(e=r(T+e,T.length?p-S.length:1/0),T=""),n){case"<":e=h+e+S+T;break;case"=":e=h+T+e+S;break;case"^":e=T.slice(0,k=T.length>>1)+h+e+S+T.slice(k);break;default:e=T+h+e+S}return s(e)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),S.toString=function(){return e+""},S}return{format:d,formatPrefix:function(e,t){var n=d(((e=ui(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(hi(t)/3))),i=Math.pow(10,-r),o=_i[8+r/3];return function(e){return n(i*e)+o}}}}function xi(e,t,n,r){var i,o=function(e,t,n){n=+n;const r=(t=+t)<(e=+e),i=r?Yn(t,e,n):Yn(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}(e,t,n);switch((r=ui(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(hi(t)/3)))-hi(Math.abs(e)))}(o,a))||(r.precision=i),yi(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,hi(t)-hi(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-hi(Math.abs(e)))}(o))||(r.precision=i-2*("%"===r.type))}return vi(r)}function Si(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){if(!((n=+n)>0))return[];if((e=+e)==(t=+t))return[e];const r=t<e,[i,o,a]=r?$n(t,e,n):$n(e,t,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let u=0;u<s;++u)l[u]=(o-u)/-a;else for(let u=0;u<s;++u)l[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)l[u]=(i+u)/-a;else for(let u=0;u<s;++u)l[u]=(i+u)*a;return l}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return xi(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),a=0,s=o.length-1,l=o[a],u=o[s],c=10;for(u<l&&(i=l,l=u,u=i,i=a,a=s,s=i);c-- >0;){if((i=Yn(l,u,n))===r)return o[a]=l,o[s]=u,t(o);if(i>0)l=Math.floor(l/i)*i,u=Math.ceil(u/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,u=Math.floor(u*i)/i}r=i}return e},e}function Ei(){var e=oi()(ti,ti);return e.copy=function(){return t=e,Ei().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},ai.apply(e,arguments),Si(e)}mi=wi({thousands:",",grouping:[3],currency:["$",""]}),vi=mi.format,yi=mi.formatPrefix;const ki=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"==typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=r?r:"object"!=typeof i)?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,o={setState:r,getState:i,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return t=e(r,i,o),o},Ti=e=>e?ki(e):ki;var Ci=n(626);const{useSyncExternalStoreWithSelector:Mi}=Ci;function Ai(e,t=e.getState,n){const r=Mi(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return(0,a.useDebugValue)(r),r}const Pi=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"==typeof e?Ti(e):e,n=(e,n)=>Ai(t,e,n);return Object.assign(n,t),n},Oi=e=>e?Pi(e):Pi;function Ui(e,t){return e.map((function(e,n){return e+t[n]}))}function zi(e,t){return e.map((function(e,n){return e-t[n]}))}function Di(e){return Math.hypot.apply(Math,e)}function Li(e,t){void 0===t&&(t=e);var n=Di(t),r=0===n?0:1/n,i=t.map((function(e){return r*e}));return{distance:Di(e),direction:i}}function Ni(e,t,n){var r=Di(t),i=0===r?0:1/r,o=0===n?0:1/n,a=o*r,s=t.map((function(e){return o*e})),l=t.map((function(e){return i*e}));return{velocities:s,velocity:a,distance:Di(e),direction:l}}function Ii(e){return Math.sign?Math.sign(e):Number(e>0)-Number(e<0)||+e}function Ri(e,t,n){return 0===t||Math.abs(t)===1/0?function(e,t){return Math.pow(e,5*t)}(e,n):e*t*n/(t+n*e)}function Fi(e,t,n,r){return void 0===r&&(r=.15),0===r?function(e,t,n){return Math.max(t,Math.min(e,n))}(e,t,n):e<t?-Ri(t-e,n-t,r)+t:e>n?+Ri(e-n,n-t,r)+n:e}function Gi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ji(){return ji=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ji.apply(this,arguments)}function Bi(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Vi(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function Hi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qi(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Wi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wi(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function $i(){}function Yi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?$i:1===t.length?t[0]:function(){for(var e,n,r=qi(t);!(n=r()).done;){e=n.value.apply(this,arguments)||e}return e}}function Xi(e,t){if(void 0===e){if(void 0===t)throw new Error("Must define fallback value if undefined is expected");e=t}return Array.isArray(e)?e:[e,e]}function Zi(e,t){return Object.assign({},t,e||{})}function Ki(e){if("function"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}return e}function Qi(e,t){void 0===e&&(e={});for(var n={},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r],a=o[0],s=o[1];switch(typeof s){case"function":n[a]=s.call(n,e[a],a,e);break;case"object":n[a]=Qi(e[a],s);break;case"boolean":s&&(n[a]=e[a])}}return n}function Ji(){return"undefined"!=typeof window&&"ontouchstart"in window}function eo(e){return"pointerId"in e?null:"touchend"===e.type?e.changedTouches:e.targetTouches}function to(e){return Array.from(eo(e)).map((function(e){return e.identifier}))}function no(e){return{buttons:"buttons"in e?e.buttons:0,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,ctrlKey:e.ctrlKey}}var ro=function(e){return e};function io(e,t){void 0===t&&(t=ro);var n=eo(e),r=n?n[0]:e;return t([r.clientX,r.clientY])}function oo(e,t,n){void 0===n&&(n=ro);var r=Array.from(e.touches).filter((function(e){return t.includes(e.identifier)})),i=r[0],o=r[1];if(!i||!o)throw Error("The event doesn't have two pointers matching the pointerIds");var a=o.clientX-i.clientX,s=o.clientY-i.clientY,l=(o.clientX+i.clientX)/2,u=(o.clientY+i.clientY)/2;return{values:n([Math.hypot(a,s),-180*Math.atan2(a,s)/Math.PI]),origin:n([l,u])}}function ao(e,t){void 0===t&&(t=ro);var n=e.deltaX,r=e.deltaY,i=e.deltaMode;return 1===i?(n*=40,r*=40):2===i&&(n*=800,r*=800),t([n,r])}function so(e,t){return void 0===t&&(t=ro),t([e.scale,e.rotation])}var lo={threshold:function(e){return void 0===e&&(e=0),Xi(e)},rubberband:function(e){switch(void 0===e&&(e=0),e){case!0:return Xi(.15);case!1:return Xi(0);default:return Xi(e)}},enabled:function(e){return void 0===e&&(e=!0),e},triggerAllEvents:function(e){return void 0===e&&(e=!1),e},initial:function(e){return void 0===e&&(e=0),"function"==typeof e?e:Xi(e)},transform:!0},uo=ji({},lo,{axis:!0,lockDirection:function(e){return void 0===e&&(e=!1),e},bounds:function(e){if(void 0===e&&(e={}),"function"==typeof e)return function(t){return uo.bounds(e(t))};var t=e,n=t.left,r=void 0===n?-1/0:n,i=t.right,o=void 0===i?1/0:i,a=t.top,s=void 0===a?-1/0:a,l=t.bottom;return[[r,o],[s,void 0===l?1/0:l]]}}),co="undefined"!=typeof window&&window.document&&window.document.createElement,ho={enabled:function(e){return void 0===e&&(e=!0),e},domTarget:!0,window:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return void 0===e&&(e=co?window:void 0),e})),eventOptions:function(e){var t=void 0===e?{}:e,n=t.passive,r=void 0===n||n,i=t.capture;return{passive:r,capture:void 0!==i&&i}},transform:!0},fo=ji({},lo,{bounds:function(e,t,n){var r=n.distanceBounds,i=void 0===r?{}:r,o=n.angleBounds,a=void 0===o?{}:o,s=function(e){var t=Zi(Ki(i,e),{min:-1/0,max:1/0});return[t.min,t.max]},l=function(e){var t=Zi(Ki(a,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!=typeof i&&"function"!=typeof a?[s(),l()]:function(e){return[s(e),l(e)]}}}),po=ji({},uo,{useTouch:function(e){void 0===e&&(e=!1);var t=Ji(),n="undefined"!=typeof window&&"onpointerdown"in window;return!(!e||!t)||!(!t||n)},experimental_preventWindowScrollY:function(e){return void 0===e&&(e=!1),e},threshold:function(e,t,n){var r=n.filterTaps,i=void 0!==r&&r,o=n.lockDirection,a=void 0!==o&&o,s=n.axis,l=Xi(e,i?3:a||(void 0===s?void 0:s)?1:0);return this.filterTaps=i,l},swipeVelocity:function(e){return void 0===e&&(e=.5),Xi(e)},swipeDistance:function(e){return void 0===e&&(e=50),Xi(e)},swipeDuration:function(e){return void 0===e&&(e=250),e},delay:function(e){switch(void 0===e&&(e=0),e){case!0:return 180;case!1:return 0;default:return e}}});function go(e){return void 0===e&&(e={}),Qi(e,ho)}function mo(e){return void 0===e&&(e={}),Qi(e,uo)}function vo(e){return void 0===e&&(e={}),Qi(e,fo)}function yo(e){return void 0===e&&(e={}),Qi(e,po)}function bo(e){return ji({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_threshold:[0,0],_lastEventType:void 0,_dragStarted:!1,_dragPreventScroll:!1,_dragIsTap:!0,_dragDelayed:!1,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:$i,canceled:!1,memo:void 0,args:void 0},e)}function _o(){return{shared:{hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1,locked:!1},drag:bo({_pointerId:void 0,axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,tap:!1,swipe:[0,0]}),pinch:bo({_pointerIds:[],da:[0,0],vdva:[0,0],origin:void 0,turns:0}),wheel:bo({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),move:bo({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),scroll:bo({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0})}}var wo=new Map,xo=function(e){return e},So=function(){function e(e,t){var n=this;void 0===t&&(t=[]),this.controller=e,this.args=t,this.debounced=!0,this.setTimeout=function(e,t){var r;void 0===t&&(t=140),clearTimeout(n.controller.timeouts[n.stateKey]);for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];n.controller.timeouts[n.stateKey]=(r=window).setTimeout.apply(r,[e,t].concat(o))},this.clearTimeout=function(){clearTimeout(n.controller.timeouts[n.stateKey])},this.fireGestureHandler=function(e){if(void 0===e&&(e=!1),n.state._blocked)return n.debounced||(n.state._active=!1,n.clean()),null;if(!e&&!n.state.intentional&&!n.config.triggerAllEvents)return null;if(n.state.intentional){var t=n.state.active,r=n.state._active;n.state.active=r,n.state.first=r&&!t,n.state.last=t&&!r,n.controller.state.shared[n.ingKey]=r}var i=n.controller.pointerIds.size||n.controller.touchIds.size,o=n.controller.state.shared.buttons>0||i>0,a=ji({},n.controller.state.shared,n.state,n.mapStateValues(n.state),{locked:!!document.pointerLockElement,touches:i,down:o}),s=n.handler(a);return n.state.memo=void 0!==s?s:n.state.memo,a},this.controller=e,this.args=t}var t,n,r,i=e.prototype;return i.updateSharedState=function(e){Object.assign(this.controller.state.shared,e)},i.updateGestureState=function(e){Object.assign(this.state,e)},i.checkIntentionality=function(e,t){return{_intentional:e,_blocked:!1}},i.getMovement=function(e){var t=this.config.rubberband,n=this.state,r=n._bounds,i=n._initial,o=n._active,a=n._intentional,s=n.lastOffset,l=n.movement,u=n._threshold,c=this.getInternalMovement(e,this.state),d=!1===a[0]?Eo(c[0],u[0]):a[0],h=!1===a[1]?Eo(c[1],u[1]):a[1],f=this.checkIntentionality([d,h],c);if(f._blocked)return ji({},f,{_movement:c,delta:[0,0]});var p=f._intentional,g=c,m=[!1!==p[0]?c[0]-p[0]:0,!1!==p[1]?c[1]-p[1]:0],v=Ui(m,s),y=o?t:[0,0];return m=ko(r,Ui(m,i),y),ji({},f,{intentional:!1!==p[0]||!1!==p[1],_initial:i,_movement:g,movement:m,values:e,offset:ko(r,v,y),delta:zi(m,l)})},i.clean=function(){this.clearTimeout()},t=e,(n=[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}},{key:"transform",get:function(){return this.config.transform||this.controller.config.transform||xo}}])&&Gi(t.prototype,n),r&&Gi(t,r),e}();function Eo(e,t){return Math.abs(e)>=t&&Ii(e)*t}function ko(e,t,n){var r=t[0],i=t[1],o=n[0],a=n[1],s=e[0],l=s[0],u=s[1],c=e[1],d=c[0],h=c[1];return[Fi(r,l,u,o),Fi(i,d,h,a)]}function To(e,t,n){var r=e.state,i=t.timeStamp,o=t.type,a=r.values;return{_lastEventType:o,event:t,timeStamp:i,elapsedTime:n?0:i-r.startTime,previous:a}}function Co(e,t,n,r){var i=e.state,o=e.config,a=e.stateKey,s=e.args,l=e.transform,u=i.offset,c=n.timeStamp,d=o.initial,h=o.bounds,f=zi(l(o.threshold),l([0,0])).map(Math.abs),p=ji({},_o()[a],{_active:!0,args:s,values:t,initial:null!=r?r:t,_threshold:f,offset:u,lastOffset:u,startTime:c});return ji({},p,{_initial:Ki(d,p),_bounds:Ki(h,p)})}var Mo=function(e){var t=this;this.classes=e,this.pointerIds=new Set,this.touchIds=new Set,this.supportsTouchEvents=Ji(),this.supportsGestureEvents=function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),this.bind=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i,o={},a=qi(t.classes);!(i=a()).done;){new(0,i.value)(t,n).addBindings(o)}var s=function(e){zo(o,e,(function(r){return t.nativeRefs[e](ji({},t.state.shared,{event:r,args:n}))}))};for(var l in t.nativeRefs)s(l);return t.config.domTarget?function(e,t){var n=e.config,r=e.domListeners,i=Uo(n);if(!i)throw new Error("domTarget must be defined");var o=n.eventOptions;Lo(i,Oo(r),o);for(var a=0,s=Object.entries(t);a<s.length;a++){var l=s[a],u=l[0],c=l[1],d=u.slice(2).toLowerCase();r.push([d,Yi.apply(void 0,c)])}Do(i,r,o)}(t,o):function(e,t){for(var n=e.config,r={},i=n.eventOptions.capture?"Capture":"",o=0,a=Object.entries(t);o<a.length;o++){var s=a[o],l=s[0],u=s[1],c=Array.isArray(u)?u:[u];r[l+i]=Yi.apply(void 0,c)}return r}(t,o)},this.effect=function(){return t.config.domTarget&&t.bind(),t.clean},this.clean=function(){var e=Uo(t.config),n=t.config.eventOptions;e&&Lo(e,Oo(t.domListeners),n),Object.values(t.timeouts).forEach(clearTimeout),function(e){var t=e.config,n=t.window,r=t.eventOptions,i=e.windowListeners;if(!n)return;for(var o in i){Lo(n,i[o],r)}e.windowListeners={}}(t)},this.classes=e,this.state=_o(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function Ao(e,t){"pointerId"in t?e.pointerIds.add(t.pointerId):e.touchIds=new Set(to(t))}function Po(e,t){"pointerId"in t?e.pointerIds.delete(t.pointerId):to(t).forEach((function(t){return e.touchIds.delete(t)}))}function Oo(e){return void 0===e&&(e=[]),e.splice(0,e.length)}function Uo(e){var t=e.domTarget;return t&&"current"in t?t.current:t}function zo(e,t,n){e[t]||(e[t]=[]),e[t].push(n)}function Do(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={});for(var r,i=qi(t);!(r=i()).done;){var o=r.value,a=o[0],s=o[1];e.addEventListener(a,s,n)}}function Lo(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={});for(var r,i=qi(t);!(r=i()).done;){var o=r.value,a=o[0],s=o[1];e.removeEventListener(a,s,n)}}function No(e,t,n){void 0===n&&(n={});var r=function(e){var t=new Set;e.drag&&t.add(wo.get("drag"));e.wheel&&t.add(wo.get("wheel"));e.scroll&&t.add(wo.get("scroll"));e.move&&t.add(wo.get("move"));e.pinch&&t.add(wo.get("pinch"));e.hover&&t.add(wo.get("hover"));return t}(e),i=a.useMemo((function(){return new Mo(r)}),[]);return i.config=t,i.handlers=e,i.nativeRefs=n,a.useEffect(i.effect,[]),i.config.domTarget?Io:i.bind}function Io(){0}var Ro=function(e){function t(){return e.apply(this,arguments)||this}Bi(t,e);var n=t.prototype;return n.getInternalMovement=function(e,t){return zi(e,t.initial)},n.checkIntentionality=function(e,t){if(!1===e[0]&&!1===e[1])return{_intentional:e,axis:this.state.axis};var n=t.map(Math.abs),r=n[0],i=n[1],o=this.state.axis||(r>i?"x":r<i?"y":void 0);return this.config.axis||this.config.lockDirection?o?this.config.axis&&o!==this.config.axis?{_intentional:e,_blocked:!0,axis:o}:(e["x"===o?1:0]=!1,{_intentional:e,_blocked:!1,axis:o}):{_intentional:[!1,!1],_blocked:!1,axis:o}:{_intentional:e,_blocked:!1,axis:o}},n.getKinematics=function(e,t){var n=this.getMovement(e);if(!n._blocked){var r=t.timeStamp-this.state.timeStamp;Object.assign(n,Ni(n.movement,n.delta,r))}return n},n.mapStateValues=function(e){return{xy:e.values,vxvy:e.velocities}},t}(So);function Fo(e){"persist"in e&&"function"==typeof e.persist&&e.persist()}var Go=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).ingKey="dragging",t.stateKey="drag",t.setPointerCapture=function(e){if(!t.config.useTouch&&!document.pointerLockElement){var n=e.target,r=e.pointerId;n&&"setPointerCapture"in n&&n.setPointerCapture(r),t.updateGestureState({_dragTarget:n,_dragPointerId:r})}},t.releasePointerCapture=function(){if(!t.config.useTouch&&!document.pointerLockElement){var e=t.state,n=e._dragTarget,r=e._dragPointerId;if(r&&n&&"releasePointerCapture"in n&&(!("hasPointerCapture"in n)||n.hasPointerCapture(r)))try{n.releasePointerCapture(r)}catch(i){}}},t.preventScroll=function(e){t.state._dragPreventScroll&&e.cancelable&&e.preventDefault()},t.getEventId=function(e){return t.config.useTouch?e.changedTouches[0].identifier:e.pointerId},t.isValidEvent=function(e){return t.state._pointerId===t.getEventId(e)},t.shouldPreventWindowScrollY=t.config.experimental_preventWindowScrollY&&t.controller.supportsTouchEvents,t.setUpWindowScrollDetection=function(e){Fo(e),function(e,t,n,r){var i=e.config,o=e.windowListeners;void 0===n&&(n=[]),void 0===r&&(r=i.eventOptions),i.window&&(Lo(i.window,o[t],r),Do(i.window,o[t]=n,r))}(t.controller,t.stateKey,[["touchmove",t.preventScroll],["touchend",t.clean.bind(Hi(t))],["touchcancel",t.clean.bind(Hi(t))]],{passive:!1}),t.setTimeout(t.startDrag.bind(Hi(t)),250,e)},t.setUpDelayedDragTrigger=function(e){t.state._dragDelayed=!0,Fo(e),t.setTimeout(t.startDrag.bind(Hi(t)),t.config.delay,e)},t.setStartState=function(e){var n=io(e,t.transform);t.updateSharedState(no(e)),t.updateGestureState(ji({},Co(Hi(t),n,e),To(Hi(t),e,!0),{_pointerId:t.getEventId(e)})),t.updateGestureState(t.getMovement(n))},t.onDragStart=function(e){Ao(t.controller,e),t.enabled&&!t.state._active&&(t.setStartState(e),t.setPointerCapture(e),t.shouldPreventWindowScrollY?t.setUpWindowScrollDetection(e):t.config.delay>0?t.setUpDelayedDragTrigger(e):t.startDrag(e,!0))},t.onDragChange=function(e){if(!t.state.canceled&&t.state._active&&t.isValidEvent(e)&&(t.state._lastEventType!==e.type||e.timeStamp!==t.state.timeStamp)){var n;if(document.pointerLockElement){var r=e.movementX,i=e.movementY;n=Ui(t.transform([r,i]),t.state.values)}else n=io(e,t.transform);var o=t.getKinematics(n,e);if(!t.state._dragStarted){if(t.state._dragDelayed)return void t.startDrag(e);if(!t.shouldPreventWindowScrollY)return;if(t.state._dragPreventScroll||!o.axis)return;if("x"!==o.axis)return void(t.state._active=!1);t.startDrag(e)}var a=no(e);t.updateSharedState(a);var s=To(Hi(t),e),l=Di(o._movement),u=t.state._dragIsTap;u&&l>=3&&(u=!1),t.updateGestureState(ji({},s,o,{_dragIsTap:u})),t.fireGestureHandler()}},t.onDragEnd=function(e){if(Po(t.controller,e),t.isValidEvent(e)&&(t.clean(),t.state._active)){t.state._active=!1;var n=t.state._dragIsTap,r=t.state.velocities,i=r[0],o=r[1],a=t.state.movement,s=a[0],l=a[1],u=t.state._intentional,c=u[0],d=u[1],h=t.config.swipeVelocity,f=h[0],p=h[1],g=t.config.swipeDistance,m=g[0],v=g[1],y=t.config.swipeDuration,b=ji({},To(Hi(t),e),t.getMovement(t.state.values)),_=[0,0];b.elapsedTime<y&&(!1!==c&&Math.abs(i)>f&&Math.abs(s)>m&&(_[0]=Ii(i)),!1!==d&&Math.abs(o)>p&&Math.abs(l)>v&&(_[1]=Ii(o))),t.updateSharedState({buttons:0}),t.updateGestureState(ji({},b,{tap:n,swipe:_})),t.fireGestureHandler(t.config.filterTaps&&!0===n)}},t.clean=function(){e.prototype.clean.call(Hi(t)),t.state._dragStarted=!1,t.releasePointerCapture(),function(e,t,n){var r=e.config,i=e.windowListeners;void 0===n&&(n=r.eventOptions),r.window&&(Lo(r.window,i[t],n),delete i[t])}(t.controller,t.stateKey)},t.onCancel=function(){t.state.canceled||(t.updateGestureState({canceled:!0,_active:!1}),t.updateSharedState({buttons:0}),setTimeout((function(){return t.fireGestureHandler()}),0))},t.onClick=function(e){t.state._dragIsTap||e.stopPropagation()},t}Bi(t,e);var n=t.prototype;return n.startDrag=function(e,t){void 0===t&&(t=!1),this.state._active&&!this.state._dragStarted&&(t||this.setStartState(e),this.updateGestureState({_dragStarted:!0,_dragPreventScroll:!0,cancel:this.onCancel}),this.clearTimeout(),this.fireGestureHandler())},n.addBindings=function(e){(this.config.useTouch?(zo(e,"onTouchStart",this.onDragStart),zo(e,"onTouchMove",this.onDragChange),zo(e,"onTouchEnd",this.onDragEnd),zo(e,"onTouchCancel",this.onDragEnd)):(zo(e,"onPointerDown",this.onDragStart),zo(e,"onPointerMove",this.onDragChange),zo(e,"onPointerUp",this.onDragEnd),zo(e,"onPointerCancel",this.onDragEnd)),this.config.filterTaps)&&zo(e,this.controller.config.eventOptions.capture?"onClick":"onClickCapture",this.onClick)},t}(Ro);var jo=function(e){function t(){return e.apply(this,arguments)||this}Bi(t,e);var n=t.prototype;return n.getInternalMovement=function(e,t){var n=t.values[1],r=e[0],i=e[1],o=void 0===i?n:i,a=o-n,s=t.turns;return Math.abs(a)>270&&(s+=Ii(a)),zi([r,o-360*s],t.initial)},n.getKinematics=function(e,t){var n=this.getMovement(e),r=(e[1]-n._movement[1]-this.state.initial[1])/360,i=t.timeStamp-this.state.timeStamp;return ji({turns:r},n,Vi(Ni(n.movement,n.delta,i),["distance","velocity"]))},n.mapStateValues=function(e){return{da:e.values,vdva:e.velocities}},t}(So),Bo=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).ingKey="pinching",t.stateKey="pinch",t.onPinchStart=function(e){Ao(t.controller,e);var n=t.controller.touchIds;if(t.enabled&&!(t.state._active&&t.state._pointerIds.every((function(e){return n.has(e)}))||n.size<2)){var r=Array.from(n).slice(0,2),i=oo(e,r,t.transform),o=i.values,a=i.origin;t.updateSharedState(no(e)),t.updateGestureState(ji({},Co(Hi(t),o,e),To(Hi(t),e,!0),{_pointerIds:r,cancel:t.onCancel,origin:a})),t.updateGestureState(t.getMovement(o)),t.fireGestureHandler()}},t.onPinchChange=function(e){var n=t.state,r=n.canceled,i=n._active;if(!r&&i&&e.timeStamp!==t.state.timeStamp){var o=no(e);t.updateSharedState(o);try{var a=oo(e,t.state._pointerIds,t.transform),s=a.values,l=a.origin,u=t.getKinematics(s,e);t.updateGestureState(ji({},To(Hi(t),e),u,{origin:l})),t.fireGestureHandler()}catch(c){t.onPinchEnd(e)}}},t.onPinchEnd=function(e){Po(t.controller,e);var n=to(e);t.state._pointerIds.every((function(e){return!n.includes(e)}))||(t.clean(),t.state._active&&(t.updateGestureState(ji({},To(Hi(t),e),t.getMovement(t.state.values),{_active:!1})),t.fireGestureHandler()))},t.onCancel=function(){t.state.canceled||(t.updateGestureState({_active:!1,canceled:!0}),setTimeout((function(){return t.fireGestureHandler()}),0))},t.onGestureStart=function(e){if(t.enabled){e.preventDefault();var n=so(e,t.transform);t.updateSharedState(no(e)),t.updateGestureState(ji({},Co(Hi(t),n,e),To(Hi(t),e,!0),{origin:[e.clientX,e.clientY],cancel:t.onCancel})),t.updateGestureState(t.getMovement(n)),t.fireGestureHandler()}},t.onGestureChange=function(e){var n=t.state,r=n.canceled,i=n._active;if(!r&&i){e.preventDefault();var o=no(e);t.updateSharedState(o);var a=so(e,t.transform);a[0]=260*(a[0]-t.state.event.scale)+t.state.values[0];var s=t.getKinematics(a,e);t.updateGestureState(ji({},To(Hi(t),e),s,{origin:[e.clientX,e.clientY]})),t.fireGestureHandler()}},t.onGestureEnd=function(e){t.clean(),t.state._active&&(t.updateGestureState(ji({},To(Hi(t),e),t.getMovement(t.state.values),{_active:!1,origin:[e.clientX,e.clientY]})),t.fireGestureHandler())},t.wheelShouldRun=function(e){return t.enabled&&e.ctrlKey},t.getWheelValuesFromEvent=function(e){var n=ao(e,t.transform)[1],r=t.state.values,i=r[0],o=r[1],a=7*-n,s=void 0!==o?o:0;return{values:[i+a,s],origin:[e.clientX,e.clientY],delta:[a,s]}},t.onWheel=function(e){t.wheelShouldRun(e)&&(t.setTimeout(t.onWheelEnd),t.state._active?t.onWheelChange(e):t.onWheelStart(e))},t.onWheelStart=function(e){var n=t.getWheelValuesFromEvent(e),r=n.values,i=n.delta,o=n.origin;e.cancelable&&e.preventDefault(),t.updateSharedState(no(e)),t.updateGestureState(ji({},Co(Hi(t),r,e,t.state.values),To(Hi(t),e,!0),{offset:r,delta:i,origin:o})),t.updateGestureState(t.getMovement(r)),t.fireGestureHandler()},t.onWheelChange=function(e){e.cancelable&&e.preventDefault(),t.updateSharedState(no(e));var n=t.getWheelValuesFromEvent(e),r=n.values,i=n.origin,o=n.delta;t.updateGestureState(ji({},To(Hi(t),e),t.getKinematics(r,e),{origin:i,delta:o})),t.fireGestureHandler()},t.onWheelEnd=function(){t.clean(),t.state._active&&(t.state._active=!1,t.updateGestureState(t.getMovement(t.state.values)),t.fireGestureHandler())},t}return Bi(t,e),t.prototype.addBindings=function(e){this.controller.config.domTarget&&!this.controller.supportsTouchEvents&&this.controller.supportsGestureEvents?(zo(e,"onGestureStart",this.onGestureStart),zo(e,"onGestureChange",this.onGestureChange),zo(e,"onGestureEnd",this.onGestureEnd)):(zo(e,"onTouchStart",this.onPinchStart),zo(e,"onTouchMove",this.onPinchChange),zo(e,"onTouchEnd",this.onPinchEnd),zo(e,"onTouchCancel",this.onPinchEnd),zo(e,"onWheel",this.onWheel))},t}(jo);var Vo=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).ingKey="wheeling",t.stateKey="wheel",t.debounced=!0,t.handleEvent=function(e){if((!e.ctrlKey||!("pinch"in t.controller.handlers))&&t.enabled){t.setTimeout(t.onEnd),t.updateSharedState(no(e));var n=Ui(ao(e,t.transform),t.state.values);if(t.state._active)t.updateGestureState(ji({},To(Hi(t),e),t.getKinematics(n,e)));else{t.updateGestureState(ji({},Co(Hi(t),n,e,t.state.values),To(Hi(t),e,!0)));var r=t.getMovement(n),i=Li(r.delta);t.updateGestureState(r),t.updateGestureState(i)}t.fireGestureHandler()}},t.onEnd=function(){if(t.clean(),t.state._active){var e=t.getMovement(t.state.values);t.updateGestureState(e),t.updateGestureState({_active:!1,velocities:[0,0],velocity:0}),t.fireGestureHandler()}},t}return Bi(t,e),t.prototype.addBindings=function(e){zo(e,"onWheel",this.handleEvent)},t}(Ro);var Ho=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).ingKey="moving",t.stateKey="move",t.debounced=!0,t.onMove=function(e){t.enabled&&(t.setTimeout(t.onMoveEnd),t.state._active?t.onMoveChange(e):t.onMoveStart(e))},t.onMoveStart=function(e){t.updateSharedState(no(e));var n=io(e,t.transform);t.updateGestureState(ji({},Co(Hi(t),n,e),To(Hi(t),e,!0))),t.updateGestureState(t.getMovement(n)),t.fireGestureHandler()},t.onMoveChange=function(e){t.updateSharedState(no(e));var n=io(e,t.transform);t.updateGestureState(ji({},To(Hi(t),e),t.getKinematics(n,e))),t.fireGestureHandler()},t.onMoveEnd=function(){if(t.clean(),t.state._active){var e=t.state.values;t.updateGestureState(t.getMovement(e)),t.updateGestureState({velocities:[0,0],velocity:0,_active:!1}),t.fireGestureHandler()}},t.hoverTransform=function(){return t.controller.config.hover.transform||t.controller.config.transform},t.onPointerEnter=function(e){if(t.controller.state.shared.hovering=!0,t.controller.config.enabled){if(t.controller.config.hover.enabled){var n=io(e,t.hoverTransform()),r=ji({},t.controller.state.shared,t.state,To(Hi(t),e,!0),{args:t.args,values:n,active:!0,hovering:!0});t.controller.handlers.hover(ji({},r,t.mapStateValues(r)))}"move"in t.controller.handlers&&t.onMoveStart(e)}},t.onPointerLeave=function(e){if(t.controller.state.shared.hovering=!1,"move"in t.controller.handlers&&t.onMoveEnd(),t.controller.config.hover.enabled){var n=io(e,t.hoverTransform()),r=ji({},t.controller.state.shared,t.state,To(Hi(t),e),{args:t.args,values:n,active:!1});t.controller.handlers.hover(ji({},r,t.mapStateValues(r)))}},t}return Bi(t,e),t.prototype.addBindings=function(e){"move"in this.controller.handlers&&zo(e,"onPointerMove",this.onMove),"hover"in this.controller.handlers&&(zo(e,"onPointerEnter",this.onPointerEnter),zo(e,"onPointerLeave",this.onPointerLeave))},t}(Ro);var Wo=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).ingKey="scrolling",t.stateKey="scroll",t.debounced=!0,t.handleEvent=function(e){if(t.enabled){t.clearTimeout(),t.setTimeout(t.onEnd);var n=function(e,t){void 0===t&&(t=ro);var n=e.currentTarget,r=n.scrollX,i=n.scrollY,o=n.scrollLeft,a=n.scrollTop;return t([r||o||0,i||a||0])}(e,t.transform);if(t.updateSharedState(no(e)),t.state._active)t.updateGestureState(ji({},To(Hi(t),e),t.getKinematics(n,e)));else{t.updateGestureState(ji({},Co(Hi(t),n,e,t.state.values),To(Hi(t),e,!0)));var r=t.getMovement(n),i=Li(r.delta);t.updateGestureState(r),t.updateGestureState(i)}t.fireGestureHandler()}},t.onEnd=function(){t.clean(),t.state._active&&(t.updateGestureState(ji({},t.getMovement(t.state.values),{_active:!1,velocities:[0,0],velocity:0})),t.fireGestureHandler())},t}return Bi(t,e),t.prototype.addBindings=function(e){zo(e,"onScroll",this.handleEvent)},t}(Ro);var qo=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function $o(e,t){void 0===t&&(t={});var n=function(e){var t={},n={},r=new Set;for(var i in e)qo.test(i)?(r.add(RegExp.lastMatch),n[i]=e[i]):t[i]=e[i];return[n,t,r]}(e),r=n[0],i=n[1],o=n[2];wo.set("drag",Go),wo.set("hover",Ho),wo.set("move",Ho),wo.set("pinch",Bo),wo.set("scroll",Wo),wo.set("wheel",Vo);var a=function(e,t){void 0===e&&(e={}),void 0===t&&(t=new Set);var n=e,r=n.drag,i=n.wheel,o=n.move,a=n.scroll,s=n.pinch,l=n.hover,u=n.eventOptions,c=n.window,d=n.transform,h=go({domTarget:n.domTarget,eventOptions:u,transform:d,window:c,enabled:n.enabled});return t.has("onDrag")&&(h.drag=yo(r)),t.has("onWheel")&&(h.wheel=mo(i)),t.has("onScroll")&&(h.scroll=mo(a)),t.has("onMove")&&(h.move=mo(o)),t.has("onPinch")&&(h.pinch=vo(s)),t.has("onHover")&&(h.hover=ji({enabled:!0},l)),h}(t,o),s={};return o.has("onDrag")&&(s.drag=Yo(r,"onDrag")),o.has("onWheel")&&(s.wheel=Yo(r,"onWheel")),o.has("onScroll")&&(s.scroll=Yo(r,"onScroll")),o.has("onMove")&&(s.move=Yo(r,"onMove")),o.has("onPinch")&&(s.pinch=Yo(r,"onPinch")),o.has("onHover")&&(s.hover=r.onHover),No(s,a,i)}function Yo(e,t){var n=t+"Start",r=t+"End";return function(i){var o=void 0;return i.first&&n in e&&e[n](i),t in e&&(o=e[t](i)),i.last&&r in e&&e[r](i),o}}var Xo=n(8497),Zo=n(9807);var Ko=function(e){return function(t){e.forEach((function(e){"function"==typeof e?e(t):null!=e&&(e.current=t)}))}};const Qo=a.forwardRef((function({follow:e=!0,lockX:t=!1,lockY:n=!1,lockZ:r=!1,...i},o){const s=a.useRef();return Oe((({camera:i})=>{if(!e||!s.current)return;const o=s.current.rotation.clone();i.getWorldQuaternion(s.current.quaternion),t&&(s.current.rotation.x=o.x),n&&(s.current.rotation.y=o.y),r&&(s.current.rotation.z=o.z)})),a.createElement("group",(0,He.Z)({ref:Ko([s,o])},i))}));function Jo(){var e=Object.create(null);function t(r,i){var o=r.id,a=r.name,s=r.dependencies;void 0===s&&(s=[]);var l=r.init;void 0===l&&(l=function(){});var u=r.getTransferables;if(void 0===u&&(u=null),!e[o])try{s=s.map((function(n){return n&&n.isWorkerModule&&(t(n,(function(e){if(e instanceof Error)throw e})),n=e[n.id].value),n})),l=n("<"+a+">.init",l),u&&(u=n("<"+a+">.getTransferables",u));var c=null;"function"==typeof l?c=l.apply(void 0,s):console.error("worker module init function failed to rehydrate"),e[o]={id:o,value:c,getTransferables:u},i(c)}catch(d){d&&d.noLog||console.error(d),i(d)}}function n(e,t){var n=void 0;self.troikaDefine=function(e){return n=e};var r=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+t+"\n)"],{type:"application/javascript"}));try{importScripts(r)}catch(i){console.error(i)}return URL.revokeObjectURL(r),delete self.troikaDefine,n}self.addEventListener("message",(function(n){var r=n.data,i=r.messageId,o=r.action,a=r.data;try{"registerModule"===o&&t(a,(function(e){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:{isCallable:"function"==typeof e}})})),"callModule"===o&&function(t,n){var r,i=t.id,o=t.args;e[i]&&"function"==typeof e[i].value||n(new Error("Worker module "+i+": not found or its 'init' did not return a function"));try{var a=(r=e[i]).value.apply(r,o);a&&"function"==typeof a.then?a.then(s,(function(e){return n(e instanceof Error?e:new Error(""+e))})):s(a)}catch(l){n(l)}function s(t){try{var r=e[i].getTransferables&&e[i].getTransferables(t);r&&Array.isArray(r)&&r.length||(r=void 0),n(t,r)}catch(l){console.error(l),n(l)}}}(a,(function(e,t){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:e},t||void 0)}))}catch(s){postMessage({messageId:i,success:!1,error:s.stack})}}))}var ea=function(){var e=!1;if("undefined"!=typeof window&&void 0!==window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return ea=function(){return e},e},ta=0,na=0,ra=!1,ia=Object.create(null),oa=Object.create(null),aa=Object.create(null);function sa(e){if(!(e&&"function"==typeof e.init||ra))throw new Error("requires `options.init` function");var t=e.dependencies,n=e.init,r=e.getTransferables,i=e.workerId;if(!ea())return function(e){var t=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return t._getInitResult().then((function(t){if("function"==typeof t)return t.apply(void 0,e);throw new Error("Worker module function was called but `init` did not return a callable function")}))};return t._getInitResult=function(){var n=e.dependencies,r=e.init;n=Array.isArray(n)?n.map((function(e){return e&&e._getInitResult?e._getInitResult():e})):[];var i=Promise.all(n).then((function(e){return r.apply(null,e)}));return t._getInitResult=function(){return i},i},t}(e);null==i&&(i="#default");var o="workerModule"+ ++ta,a=e.name||o,s=null;function l(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(!s){s=ua(i,"registerModule",l.workerModuleData);var n=function(){s=null,oa[i].delete(n)};(oa[i]||(oa[i]=new Set)).add(n)}return s.then((function(t){if(t.isCallable)return ua(i,"callModule",{id:o,args:e});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return t=t&&t.map((function(e){return"function"!=typeof e||e.workerModuleData||(ra=!0,e=sa({workerId:i,name:"<"+a+"> function dependency: "+e.name,init:"function(){return (\n"+la(e)+"\n)}"}),ra=!1),e&&e.workerModuleData&&(e=e.workerModuleData),e})),l.workerModuleData={isWorkerModule:!0,id:o,name:a,dependencies:t,init:la(n),getTransferables:r&&la(r)},l}function la(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function ua(e,t,n){return new Promise((function(r,i){var o=++na;aa[o]=function(e){e.success?r(e.result):i(new Error("Error in worker "+t+" call: "+e.error))},function(e){var t=ia[e];if(!t){var n=la(Jo);(t=ia[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+n+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,n=t.messageId,r=aa[n];if(!r)throw new Error("WorkerModule response with empty or unknown messageId");delete aa[n],r(t)}}return t}(e).postMessage({messageId:o,action:t,data:n})}))}function ca(){var e=function(e){function t(e,t,n,r,i,o,a,s,l,u){var c=1-l;u.x=c*c*c*e+3*c*c*l*n+3*c*l*l*i+l*l*l*a,u.y=c*c*c*t+3*c*c*l*r+3*c*l*l*o+l*l*l*s}function n(e,t){for(var n,r,i,o,a,s=/([MLQCZ])([^MLQCZ]*)/g;n=s.exec(e);){var l=n[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map((function(e){return parseFloat(e)}));switch(n[1]){case"M":o=r=l[0],a=i=l[1];break;case"L":l[0]===o&&l[1]===a||t("L",o,a,o=l[0],a=l[1]);break;case"Q":t("Q",o,a,o=l[2],a=l[3],l[0],l[1]);break;case"C":t("C",o,a,o=l[4],a=l[5],l[0],l[1],l[2],l[3]);break;case"Z":o===r&&a===i||t("L",o,a,r,i)}}}function r(e,r,i){void 0===i&&(i=16);var o={x:0,y:0};n(e,(function(e,n,a,s,l,u,c,d,h){switch(e){case"L":r(n,a,s,l);break;case"Q":for(var f=n,p=a,g=1;g<i;g++)b=a,_=c,w=l,E=void 0,E=1-(x=g/(i-1)),(S=o).x=E*E*n+2*E*x*u+x*x*s,S.y=E*E*b+2*E*x*_+x*x*w,r(f,p,o.x,o.y),f=o.x,p=o.y;break;case"C":for(var m=n,v=a,y=1;y<i;y++)t(n,a,u,c,d,h,s,l,y/(i-1),o),r(m,v,o.x,o.y),m=o.x,v=o.y}var b,_,w,x,S,E}))}var i="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",o="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",a=new WeakMap,s={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function l(e,t){var n=e.getContext?e.getContext("webgl",s):e,r=a.get(n);if(!r){var i="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext,o={},l={},u={},c=-1,d=[];function h(e){var t=o[e];if(!t&&!(t=o[e]=n.getExtension(e)))throw new Error(e+" not supported");return t}function f(e,t){var r=n.createShader(t);return n.shaderSource(r,e),n.compileShader(r),r}function p(e,t,r,o){if(!l[e]){var a={},s={},u=n.createProgram();n.attachShader(u,f(t,n.VERTEX_SHADER)),n.attachShader(u,f(r,n.FRAGMENT_SHADER)),n.linkProgram(u),l[e]={program:u,transaction:function(e){n.useProgram(u),e({setUniform:function(e,t){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];var o=s[t]||(s[t]=n.getUniformLocation(u,t));n["uniform"+e].apply(n,[o].concat(r))},setAttribute:function(e,t,r,o,s){var l=a[e];l||(l=a[e]={buf:n.createBuffer(),loc:n.getAttribLocation(u,e),data:null}),n.bindBuffer(n.ARRAY_BUFFER,l.buf),n.vertexAttribPointer(l.loc,t,n.FLOAT,!1,0,0),n.enableVertexAttribArray(l.loc),i?n.vertexAttribDivisor(l.loc,o):h("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(l.loc,o),s!==l.data&&(n.bufferData(n.ARRAY_BUFFER,s,r),l.data=s)}})}}}l[e].transaction(o)}function g(e,t){c++;try{n.activeTexture(n.TEXTURE0+c);var r=u[e];r||(r=u[e]=n.createTexture(),n.bindTexture(n.TEXTURE_2D,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.bindTexture(n.TEXTURE_2D,r),t(r,c)}finally{c--}}function m(e,t,r){var i=n.createFramebuffer();d.push(i),n.bindFramebuffer(n.FRAMEBUFFER,i),n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);try{r(i)}finally{n.deleteFramebuffer(i),n.bindFramebuffer(n.FRAMEBUFFER,d[--d.length-1]||null)}}function v(){o={},l={},u={},c=-1,d.length=0}n.canvas.addEventListener("webglcontextlost",(function(e){v(),e.preventDefault()}),!1),a.set(n,r={gl:n,isWebGL2:i,getExtension:h,withProgram:p,withTexture:g,withTextureFramebuffer:m,handleContextLoss:v})}t(r)}function u(e,t,n,r,a,s,u,c){void 0===u&&(u=15),void 0===c&&(c=null),l(e,(function(e){var l=e.gl,d=e.withProgram;(0,e.withTexture)("copy",(function(e,h){l.texImage2D(l.TEXTURE_2D,0,l.RGBA,a,s,0,l.RGBA,l.UNSIGNED_BYTE,t),d("copy",i,o,(function(e){var t=e.setUniform;(0,e.setAttribute)("aUV",2,l.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),t("1i","image",h),l.bindFramebuffer(l.FRAMEBUFFER,c||null),l.disable(l.BLEND),l.colorMask(8&u,4&u,2&u,1&u),l.viewport(n,r,a,s),l.scissor(n,r,a,s),l.drawArrays(l.TRIANGLES,0,3)}))}))}))}var c=Object.freeze({__proto__:null,withWebGLContext:l,renderImageData:u,resizeWebGLCanvasWithoutClearing:function(e,t,n){var r=e.width,i=e.height;l(e,(function(o){var a=o.gl,s=new Uint8Array(r*i*4);a.readPixels(0,0,r,i,a.RGBA,a.UNSIGNED_BYTE,s),e.width=t,e.height=n,u(a,s,0,0,r,i)}))}});function d(e,t,n,i,o,a){void 0===a&&(a=1);var s=new Uint8Array(e*t),l=i[2]-i[0],u=i[3]-i[1],c=[];r(n,(function(e,t,n,r){c.push({x1:e,y1:t,x2:n,y2:r,minX:Math.min(e,n),minY:Math.min(t,r),maxX:Math.max(e,n),maxY:Math.max(t,r)})})),c.sort((function(e,t){return e.maxX-t.maxX}));for(var d=0;d<e;d++)for(var h=0;h<t;h++){var f=m(i[0]+l*(d+.5)/e,i[1]+u*(h+.5)/t),g=Math.pow(1-Math.abs(f)/o,a)/2;f<0&&(g=1-g),g=Math.max(0,Math.min(255,Math.round(255*g))),s[h*e+d]=g}return s;function m(e,t){for(var n=1/0,r=1/0,i=c.length;i--;){var o=c[i];if(o.maxX+r<=e)break;if(e+r>o.minX&&t-r<o.maxY&&t+r>o.minY){var a=p(e,t,o.x1,o.y1,o.x2,o.y2);a<n&&(n=a,r=Math.sqrt(n))}}return function(e,t){for(var n=0,r=c.length;r--;){var i=c[r];if(i.maxX<=e)break;i.y1>t!=i.y2>t&&e<(i.x2-i.x1)*(t-i.y1)/(i.y2-i.y1)+i.x1&&(n+=i.y1<i.y2?1:-1)}return 0!==n}(e,t)&&(r=-r),r}}function h(e,t,n,r,i,o,a,s,l,u){void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===u&&(u=0),f(e,t,n,r,i,o,a,null,s,l,u)}function f(e,t,n,r,i,o,a,s,l,c,h){void 0===o&&(o=1),void 0===l&&(l=0),void 0===c&&(c=0),void 0===h&&(h=0);for(var f=d(e,t,n,r,i,o),p=new Uint8Array(4*f.length),g=0;g<f.length;g++)p[4*g+h]=f[g];u(a,p,l,c,e,t,1<<3-h,s)}function p(e,t,n,r,i,o){var a=i-n,s=o-r,l=a*a+s*s,u=l?Math.max(0,Math.min(1,((e-n)*a+(t-r)*s)/l)):0,c=e-(n+u*a),d=t-(r+u*s);return c*c+d*d}var g=Object.freeze({__proto__:null,generate:d,generateIntoCanvas:h,generateIntoFramebuffer:f}),m="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",v="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",y="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",b=new Float32Array([0,0,2,0,0,2]),_=null,w=!1,x={},S=new WeakMap;function E(e){if(!w&&!M(e))throw new Error("WebGL generation not supported")}function k(e,t,n,r,i,o,a){if(void 0===o&&(o=1),void 0===a&&(a=null),!a&&!(a=_)){var s="function"==typeof OffscreenCanvas?new OffscreenCanvas(1,1):"undefined"!=typeof document?document.createElement("canvas"):null;if(!s)throw new Error("OffscreenCanvas or DOM canvas not supported");a=_=s.getContext("webgl",{depth:!1})}E(a);var u=new Uint8Array(e*t*4);l(a,(function(a){var s=a.gl,l=a.withTexture,c=a.withTextureFramebuffer;l("readable",(function(a,l){s.texImage2D(s.TEXTURE_2D,0,s.RGBA,e,t,0,s.RGBA,s.UNSIGNED_BYTE,null),c(a,l,(function(a){C(e,t,n,r,i,o,s,a,0,0,0),s.readPixels(0,0,e,t,s.RGBA,s.UNSIGNED_BYTE,u)}))}))}));for(var c=new Uint8Array(e*t),d=0,h=0;d<u.length;d+=4)c[h++]=u[d];return c}function T(e,t,n,r,i,o,a,s,l,u){void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===u&&(u=0),C(e,t,n,r,i,o,a,null,s,l,u)}function C(e,t,n,o,a,s,u,c,d,h,f){void 0===s&&(s=1),void 0===d&&(d=0),void 0===h&&(h=0),void 0===f&&(f=0),E(u);var p=[];r(n,(function(e,t,n,r){p.push(e,t,n,r)})),p=new Float32Array(p),l(u,(function(n){var r=n.gl,l=n.isWebGL2,u=n.getExtension,g=n.withProgram,_=n.withTexture,w=n.withTextureFramebuffer,x=n.handleContextLoss;if(_("rawDistances",(function(n,_){e===n._lastWidth&&t===n._lastHeight||r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n._lastWidth=e,n._lastHeight=t,0,r.RGBA,r.UNSIGNED_BYTE,null),g("main",m,v,(function(i){var c=i.setAttribute,d=i.setUniform,h=!l&&u("ANGLE_instanced_arrays"),f=!l&&u("EXT_blend_minmax");c("aUV",2,r.STATIC_DRAW,0,b),c("aLineSegment",4,r.DYNAMIC_DRAW,1,p),d.apply(void 0,["4f","uGlyphBounds"].concat(o)),d("1f","uMaxDistance",a),d("1f","uExponent",s),w(n,_,(function(n){r.enable(r.BLEND),r.colorMask(!0,!0,!0,!0),r.viewport(0,0,e,t),r.scissor(0,0,e,t),r.blendFunc(r.ONE,r.ONE),r.blendEquationSeparate(r.FUNC_ADD,l?r.MAX:f.MAX_EXT),r.clear(r.COLOR_BUFFER_BIT),l?r.drawArraysInstanced(r.TRIANGLES,0,3,p.length/4):h.drawArraysInstancedANGLE(r.TRIANGLES,0,3,p.length/4)}))})),g("post",i,y,(function(n){n.setAttribute("aUV",2,r.STATIC_DRAW,0,b),n.setUniform("1i","tex",_),r.bindFramebuffer(r.FRAMEBUFFER,c),r.disable(r.BLEND),r.colorMask(0===f,1===f,2===f,3===f),r.viewport(d,h,e,t),r.scissor(d,h,e,t),r.drawArrays(r.TRIANGLES,0,3)}))})),r.isContextLost())throw x(),new Error("webgl context lost")}))}function M(e){var t=e&&e!==_?e.canvas||e:x,n=S.get(t);if(void 0===n){w=!0;var r=null;try{var i=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],o=k(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,e);n=o&&i.length===o.length&&o.every((function(e,t){return e===i[t]})),n||(r="bad trial run results",console.info(i,o))}catch(a){n=!1,r=a.message}r&&console.warn("WebGL SDF generation not supported:",r),w=!1,S.set(t,n)}return n}var A=Object.freeze({__proto__:null,generate:k,generateIntoCanvas:T,generateIntoFramebuffer:C,isSupported:M});return e.forEachPathCommand=n,e.generate=function(e,t,n,r,i,o){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===o&&(o=1);try{return k.apply(A,arguments)}catch(a){return console.info("WebGL SDF generation failed, falling back to JS",a),d.apply(g,arguments)}},e.generateIntoCanvas=function(e,t,n,r,i,o,a,s,l,u){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===u&&(u=0);try{return T.apply(A,arguments)}catch(c){return console.info("WebGL SDF generation failed, falling back to JS",c),h.apply(g,arguments)}},e.javascript=g,e.pathToLineSegments=r,e.webgl=A,e.webglUtils=c,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e}var da=function(){var e=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},r={};n.L=1,r[1]="L",Object.keys(t).forEach((function(e,t){n[e]=1<<t+1,r[n[e]]=e})),Object.freeze(n);var i=n.LRI|n.RLI|n.FSI,o=n.L|n.R|n.AL,a=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,s=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,l=n.S|n.WS|n.B|i|n.PDI|s,u=null;function c(e){return function(){if(!u){u=new Map;var e=function(e){if(t.hasOwnProperty(e)){var r=0;t[e].split(",").forEach((function(t){var i=t.split("+"),o=i[0],a=i[1];o=parseInt(o,36),a=a?parseInt(a,36):0,u.set(r+=o,n[e]);for(var s=0;s<a;s++)u.set(++r,n[e])}))}};for(var r in t)e(r)}}(),u.get(e.codePointAt(0))||n.L}var d,h,f,p={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function g(e,t){var n,r=0,i=new Map,o=t&&new Map;return e.split(",").forEach((function e(a){if(-1!==a.indexOf("+"))for(var s=+a;s--;)e(n);else{n=a;var l=a.split(">"),u=l[0],c=l[1];u=String.fromCodePoint(r+=parseInt(u,36)),c=String.fromCodePoint(r+=parseInt(c,36)),i.set(u,c),t&&o.set(c,u)}})),{map:i,reverseMap:o}}function m(){if(!d){var e=g(p.pairs,!0),t=e.map,n=e.reverseMap;d=t,h=n,f=g(p.canonical,!1).map}}function v(e){return m(),d.get(e)||null}function y(e){return m(),h.get(e)||null}function b(e){return m(),f.get(e)||null}var _=n.L,w=n.R,x=n.EN,S=n.ES,E=n.ET,k=n.AN,T=n.CS,C=n.B,M=n.S,A=n.ON,P=n.BN,O=n.NSM,U=n.AL,z=n.LRO,D=n.RLO,L=n.LRE,N=n.RLE,I=n.PDF,R=n.LRI,F=n.RLI,G=n.FSI,j=n.PDI;var B,V="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1";function H(e){return function(){if(!B){var e=g(V,!0),t=e.map;e.reverseMap.forEach((function(e,n){t.set(n,e)})),B=t}}(),B.get(e)||null}function W(e,t,n,r){var i=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);var o=[];return t.paragraphs.forEach((function(i){var a=Math.max(n,i.start),s=Math.min(r,i.end);if(a<s){for(var u=t.levels.slice(a,s+1),d=s;d>=a&&c(e[d])&l;d--)u[d]=i.level;for(var h=i.level,f=1/0,p=0;p<u.length;p++){var g=u[p];g>h&&(h=g),g<f&&(f=1|g)}for(var m=h;m>=f;m--)for(var v=0;v<u.length;v++)if(u[v]>=m){for(var y=v;v+1<u.length&&u[v+1]>=m;)v++;v>y&&o.push([y+n,v+n])}}})),o}function q(e,t,n,r){for(var i=W(e,t,n,r),o=[],a=0;a<e.length;a++)o[a]=a;return i.forEach((function(e){for(var t=e[0],n=e[1],r=o.slice(t,n+1),i=r.length;i--;)o[n-i]=r[i]})),o}return e.closingToOpeningBracket=y,e.getBidiCharType=c,e.getBidiCharTypeName=function(e){return r[c(e)]},e.getCanonicalBracket=b,e.getEmbeddingLevels=function(e,t){for(var n=new Uint32Array(e.length),r=0;r<e.length;r++)n[r]=c(e[r]);var u=new Map;function d(e,t){var r=n[e];n[e]=t,u.set(r,u.get(r)-1),r&a&&u.set(a,u.get(a)-1),u.set(t,(u.get(t)||0)+1),t&a&&u.set(a,(u.get(a)||0)+1)}for(var h=new Uint8Array(e.length),f=new Map,p=[],g=null,m=0;m<e.length;m++)g||p.push(g={start:m,end:e.length-1,level:"rtl"===t?1:"ltr"===t?0:jt(m,!1)}),n[m]&C&&(g.end=m,g=null);for(var B=N|L|D|z|i|j|I|C,V=function(e){return e+(1&e?1:2)},H=function(e){return e+(1&e?2:1)},W=0;W<p.length;W++){var q=[{_level:(g=p[W]).level,_override:0,_isolate:0}],$=void 0,Y=0,X=0,Z=0;u.clear();for(var K=g.start;K<=g.end;K++){var Q=n[K];if($=q[q.length-1],u.set(Q,(u.get(Q)||0)+1),Q&a&&u.set(a,(u.get(a)||0)+1),Q&B)if(Q&(N|L)){h[K]=$._level;var J=(Q===N?H:V)($._level);J<=125&&!Y&&!X?q.push({_level:J,_override:0,_isolate:0}):Y||X++}else if(Q&(D|z)){h[K]=$._level;var ee=(Q===D?H:V)($._level);ee<=125&&!Y&&!X?q.push({_level:ee,_override:Q&D?w:_,_isolate:0}):Y||X++}else if(Q&i){Q&G&&(Q=1===jt(K+1,!0)?F:R),h[K]=$._level,$._override&&d(K,$._override);var te=(Q===F?H:V)($._level);te<=125&&0===Y&&0===X?(Z++,q.push({_level:te,_override:0,_isolate:1,_isolInitIndex:K})):Y++}else if(Q&j){if(Y>0)Y--;else if(Z>0){for(X=0;!q[q.length-1]._isolate;)q.pop();var ne=q[q.length-1]._isolInitIndex;null!=ne&&(f.set(ne,K),f.set(K,ne)),q.pop(),Z--}$=q[q.length-1],h[K]=$._level,$._override&&d(K,$._override)}else Q&I?(0===Y&&(X>0?X--:!$._isolate&&q.length>1&&(q.pop(),$=q[q.length-1])),h[K]=$._level):Q&C&&(h[K]=g.level);else h[K]=$._level,$._override&&Q!==P&&d(K,$._override)}for(var re=[],ie=null,oe=g.start;oe<=g.end;oe++){var ae=n[oe];if(!(ae&s)){var se=h[oe],le=ae&i,ue=ae===j;ie&&se===ie._level?(ie._end=oe,ie._endsWithIsolInit=le):re.push(ie={_start:oe,_end:oe,_level:se,_startsWithPDI:ue,_endsWithIsolInit:le})}}for(var ce=[],de=0;de<re.length;de++){var he=re[de];if(!he._startsWithPDI||he._startsWithPDI&&!f.has(he._start)){for(var fe=[ie=he],pe=void 0;ie&&ie._endsWithIsolInit&&null!=(pe=f.get(ie._end));)for(var ge=de+1;ge<re.length;ge++)if(re[ge]._start===pe){fe.push(ie=re[ge]);break}for(var me=[],ve=0;ve<fe.length;ve++)for(var ye=fe[ve],be=ye._start;be<=ye._end;be++)me.push(be);for(var _e=h[me[0]],we=g.level,xe=me[0]-1;xe>=0;xe--)if(!(n[xe]&s)){we=h[xe];break}var Se=me[me.length-1],Ee=h[Se],ke=g.level;if(!(n[Se]&i))for(var Te=Se+1;Te<=g.end;Te++)if(!(n[Te]&s)){ke=h[Te];break}ce.push({_seqIndices:me,_sosType:Math.max(we,_e)%2?w:_,_eosType:Math.max(ke,Ee)%2?w:_})}}for(var Ce=0;Ce<ce.length;Ce++){var Me=ce[Ce],Ae=Me._seqIndices,Pe=Me._sosType,Oe=Me._eosType;if(u.get(O))for(var Ue=0;Ue<Ae.length;Ue++){var ze=Ae[Ue];if(n[ze]&O){for(var De=Pe,Le=Ue-1;Le>=0;Le--)if(!(n[Ae[Le]]&s)){De=n[Ae[Le]];break}d(ze,De&(i|j)?A:De)}}if(u.get(x))for(var Ne=0;Ne<Ae.length;Ne++){var Ie=Ae[Ne];if(n[Ie]&x)for(var Re=Ne-1;Re>=-1;Re--){var Fe=-1===Re?Pe:n[Ae[Re]];if(Fe&o){Fe===U&&d(Ie,k);break}}}if(u.get(U))for(var Ge=0;Ge<Ae.length;Ge++){var je=Ae[Ge];n[je]&U&&d(je,w)}if(u.get(S)||u.get(T))for(var Be=1;Be<Ae.length-1;Be++){var Ve=Ae[Be];if(n[Ve]&(S|T)){for(var He=0,We=0,qe=Be-1;qe>=0&&(He=n[Ae[qe]])&s;qe--);for(var $e=Be+1;$e<Ae.length&&(We=n[Ae[$e]])&s;$e++);He===We&&(n[Ve]===S?He===x:He&(x|k))&&d(Ve,He)}}if(u.get(x))for(var Ye=0;Ye<Ae.length;Ye++){var Xe=Ae[Ye];if(n[Xe]&x){for(var Ze=Ye-1;Ze>=0&&n[Ae[Ze]]&(E|s);Ze--)d(Ae[Ze],x);for(var Ke=Ye+1;Ke<Ae.length&&n[Ae[Ke]]&(E|s);Ke++)d(Ae[Ke],x)}}if(u.get(E)||u.get(S)||u.get(T))for(var Qe=0;Qe<Ae.length;Qe++){var Je=Ae[Qe];if(n[Je]&(E|S|T)){d(Je,A);for(var et=Qe-1;et>=0&&n[Ae[et]]&s;et--)d(Ae[et],A);for(var tt=Qe+1;tt<Ae.length&&n[Ae[tt]]&s;tt++)d(Ae[tt],A)}}if(u.get(x))for(var nt=0,rt=Pe;nt<Ae.length;nt++){var it=Ae[nt],ot=n[it];ot&x?rt===_&&d(it,_):ot&o&&(rt=ot)}if(u.get(a)){for(var at=w|x|k,st=at|_,lt=[],ut=[],ct=0;ct<Ae.length;ct++)if(n[Ae[ct]]&a){var dt=e[Ae[ct]],ht=void 0;if(null!==v(dt)){if(!(ut.length<63))break;ut.push({char:dt,seqIndex:ct})}else if(null!==(ht=y(dt)))for(var ft=ut.length-1;ft>=0;ft--){var pt=ut[ft].char;if(pt===ht||pt===y(b(dt))||v(b(pt))===dt){lt.push([ut[ft].seqIndex,ct]),ut.length=ft;break}}}lt.sort((function(e,t){return e[0]-t[0]}));for(var gt=0;gt<lt.length;gt++){for(var mt=lt[gt],vt=mt[0],yt=mt[1],bt=!1,_t=0,wt=vt+1;wt<yt;wt++){var xt=Ae[wt];if(n[xt]&st){bt=!0;var St=n[xt]&at?w:_;if(St===Vt(xt)){_t=St;break}}}if(bt&&!_t){_t=Pe;for(var Et=vt-1;Et>=0;Et--){var kt=Ae[Et];if(n[kt]&st){var Tt=n[kt]&at?w:_;_t=Tt!==Vt(kt)?Tt:Vt(kt);break}}}if(_t){if(n[Ae[vt]]=n[Ae[yt]]=_t,_t!==Vt(Ae[vt]))for(var Ct=vt+1;Ct<Ae.length;Ct++)if(!(n[Ae[Ct]]&s)){c(e[Ae[Ct]])&O&&(n[Ae[Ct]]=_t);break}if(_t!==Vt(Ae[yt]))for(var Mt=yt+1;Mt<Ae.length;Mt++)if(!(n[Ae[Mt]]&s)){c(e[Ae[Mt]])&O&&(n[Ae[Mt]]=_t);break}}}for(var At=0;At<Ae.length;At++)if(n[Ae[At]]&a){for(var Pt=At,Ot=At,Ut=Pe,zt=At-1;zt>=0;zt--){if(!(n[Ae[zt]]&s)){Ut=n[Ae[zt]]&at?w:_;break}Pt=zt}for(var Dt=Oe,Lt=At+1;Lt<Ae.length;Lt++){if(!(n[Ae[Lt]]&(a|s))){Dt=n[Ae[Lt]]&at?w:_;break}Ot=Lt}for(var Nt=Pt;Nt<=Ot;Nt++)n[Ae[Nt]]=Ut===Dt?Ut:Vt(Ae[Nt]);At=Ot}}}for(var It=g.start;It<=g.end;It++){var Rt=h[It],Ft=n[It];if(1&Rt?Ft&(_|x|k)&&h[It]++:Ft&w?h[It]++:Ft&(k|x)&&(h[It]+=2),Ft&s&&(h[It]=0===It?g.level:h[It-1]),It===g.end||c(e[It])&(M|C))for(var Gt=It;Gt>=0&&c(e[Gt])&l;Gt--)h[Gt]=g.level}}return{levels:h,paragraphs:p};function jt(t,r){for(var o=t;o<e.length;o++){var a=n[o];if(a&(w|U))return 1;if(a&(C|_)||r&&a===j)return 0;if(a&i){var s=Bt(o);o=-1===s?e.length:s}}return 0}function Bt(t){for(var r=1,o=t+1;o<e.length;o++){var a=n[o];if(a&C)break;if(a&j){if(0==--r)return o}else a&i&&r++}return-1}function Vt(e){return 1&h[e]?w:_}},e.getMirroredCharacter=H,e.getMirroredCharactersMap=function(e,t,n,r){var i=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);for(var o=new Map,a=n;a<=r;a++)if(1&t[a]){var s=H(e[a]);null!==s&&o.set(a,s)}return o},e.getReorderSegments=W,e.getReorderedIndices=q,e.getReorderedString=function(e,t,n,r){var i=q(e,t,n,r),o=[].concat(e);return i.forEach((function(n,r){o[r]=(1&t.levels[n]?H(e[n]):null)||e[n]})),o.join("")},e.openingToClosingBracket=v,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e};const ha=/\bvoid\s+main\s*\(\s*\)\s*{/g;function fa(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){let n=M.ShaderChunk[t];return n?fa(n):e}))}const pa=[];for(let op=0;op<256;op++)pa[op]=(op<16?"0":"")+op.toString(16);const ga=Object.assign||function(){let e=arguments[0];for(let t=1,n=arguments.length;t<n;t++){let n=arguments[t];if(n)for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},ma=Date.now(),va=new WeakMap,ya=new Map;let ba=1e10;function _a(e,t){const n=function(e){const t=JSON.stringify(e,xa);let n=Ea.get(t);null==n&&Ea.set(t,n=++Sa);return n}(t);let r=va.get(e);if(r||va.set(e,r=Object.create(null)),r[n])return new r[n];const i=`_onBeforeCompile${n}`,o=function(r,o){e.onBeforeCompile.call(this,r,o);const a=this.customProgramCacheKey()+"|"+r.vertexShader+"|"+r.fragmentShader;let s=ya[a];if(!s){const e=function(e,{vertexShader:t,fragmentShader:n},r,i){let{vertexDefs:o,vertexMainIntro:a,vertexMainOutro:s,vertexTransform:l,fragmentDefs:u,fragmentMainIntro:c,fragmentMainOutro:d,fragmentColorTransform:h,customRewriter:f,timeUniform:p}=r;o=o||"",a=a||"",s=s||"",u=u||"",c=c||"",d=d||"",(l||f)&&(t=fa(t));(h||f)&&(n=fa(n=n.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n")));if(f){let e=f({vertexShader:t,fragmentShader:n});t=e.vertexShader,n=e.fragmentShader}if(h){let e=[];n=n.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,(t=>(e.push(t),""))),d=`${h}\n${e.join("\n")}\n${d}`}if(p){const e=`\nuniform float ${p};\n`;o=e+o,u=e+u}l&&(o=`${o}\nvoid troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ${l}\n}\n`,a=`\ntroika_position_${i} = vec3(position);\ntroika_normal_${i} = vec3(normal);\ntroika_uv_${i} = vec2(uv);\ntroikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});\n${a}\n`,t=(t=`vec3 troika_position_${i};\nvec3 troika_normal_${i};\nvec2 troika_uv_${i};\n${t}\n`).replace(/\b(position|normal|uv)\b/g,((e,t,n,r)=>/\battribute\s+vec[23]\s+$/.test(r.substr(0,n))?t:`troika_${t}_${i}`)),e.map&&e.map.channel>0||(t=t.replace(/\bMAP_UV\b/g,`troika_uv_${i}`)));return t=wa(t,i,o,a,s),n=wa(n,i,u,c,d),{vertexShader:t,fragmentShader:n}}(this,r,t,n);s=ya[a]=e}r.vertexShader=s.vertexShader,r.fragmentShader=s.fragmentShader,ga(r.uniforms,this.uniforms),t.timeUniform&&(r.uniforms[t.timeUniform]={get value(){return Date.now()-ma}}),this[i]&&this[i](r)},a=function(){return s(t.chained?e:e.clone())},s=function(r){const i=Object.create(r,l);return Object.defineProperty(i,"baseMaterial",{value:e}),Object.defineProperty(i,"id",{value:ba++}),i.uuid=function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(pa[255&e]+pa[e>>8&255]+pa[e>>16&255]+pa[e>>24&255]+"-"+pa[255&t]+pa[t>>8&255]+"-"+pa[t>>16&15|64]+pa[t>>24&255]+"-"+pa[63&n|128]+pa[n>>8&255]+"-"+pa[n>>16&255]+pa[n>>24&255]+pa[255&r]+pa[r>>8&255]+pa[r>>16&255]+pa[r>>24&255]).toUpperCase()}(),i.uniforms=ga({},r.uniforms,t.uniforms),i.defines=ga({},r.defines,t.defines),i.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",i.extensions=ga({},r.extensions,t.extensions),i._listeners=void 0,i},l={constructor:{value:a},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return e.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get(){return o},set(e){this[i]=e}},copy:{writable:!0,configurable:!0,value:function(t){return e.copy.call(this,t),e.isShaderMaterial||e.isDerivedMaterial||(ga(this.extensions,t.extensions),ga(this.defines,t.defines),ga(this.uniforms,M.UniformsUtils.clone(t.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const t=new e.constructor;return s(t).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let n=this._depthMaterial;return n||(n=this._depthMaterial=_a(e.isDerivedMaterial?e.getDepthMaterial():new M.MeshDepthMaterial({depthPacking:M.RGBADepthPacking}),t),n.defines.IS_DEPTH_MATERIAL="",n.uniforms=this.uniforms),n}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let n=this._distanceMaterial;return n||(n=this._distanceMaterial=_a(e.isDerivedMaterial?e.getDistanceMaterial():new M.MeshDistanceMaterial,t),n.defines.IS_DISTANCE_MATERIAL="",n.uniforms=this.uniforms),n}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:t,_distanceMaterial:n}=this;t&&t.dispose(),n&&n.dispose(),e.dispose.call(this)}}};return r[n]=a,new a}function wa(e,t,n,r,i){return(r||i||n)&&(e=e.replace(ha,`\n${n}\nvoid troikaOrigMain${t}() {`),e+=`\nvoid main() {\n  ${r}\n  troikaOrigMain${t}();\n  ${i}\n}`),e}function xa(e,t){return"uniforms"===e?void 0:"function"==typeof t?t.toString():t}let Sa=0;const Ea=new Map;M.DoubleSide;const ka=()=>(self.performance||Date).now(),Ta=ca();let Ca;const Ma=[];let Aa=0;function Pa(){const e=ka();for(;Ma.length&&ka()-e<5;)Ma.shift()();Aa=Ma.length?setTimeout(Pa,0):0}const Oa=(...e)=>new Promise(((t,n)=>{Ma.push((()=>{const r=ka();try{Ta.webgl.generateIntoCanvas(...e),t({timing:ka()-r})}catch(i){n(i)}})),Aa||(Aa=setTimeout(Pa,0))})),Ua=4,za=2e3,Da={};let La=0;function Na(e,t,n,r,i,o,a,s,l,u){const c="TroikaTextSDFGenerator_JS_"+La++%Ua;let d=Da[c];return d||(d=Da[c]={workerModule:sa({name:c,workerId:c,dependencies:[ca,ka],init(e,t){const n=e().javascript.generate;return function(...e){const r=t();return{textureData:n(...e),timing:t()-r}}},getTransferables(e){return[e.textureData.buffer]}}),requests:0,idleTimer:null}),d.requests++,clearTimeout(d.idleTimer),d.workerModule(e,t,n,r,i,o).then((({textureData:n,timing:r})=>{const i=ka(),o=new Uint8Array(4*n.length);for(let e=0;e<n.length;e++)o[4*e+u]=n[e];return Ta.webglUtils.renderImageData(a,o,s,l,e,t,1<<3-u),r+=ka()-i,0==--d.requests&&(d.idleTimer=setTimeout((()=>{!function(e){oa[e]&&oa[e].forEach((function(e){e()})),ia[e]&&(ia[e].terminate(),delete ia[e])}(c)}),za)),{timing:r}}))}const Ia=Ta.webglUtils.resizeWebGLCanvasWithoutClearing;const Ra=sa({name:"Typr Font Parser",dependencies:[function(){return"undefined"==typeof window&&(self.window=self),function(e){var t={parse:function(e){var n=t._bin,r=new Uint8Array(e);if("ttcf"==n.readASCII(r,0,4)){var i=4;n.readUshort(r,i),i+=2,n.readUshort(r,i),i+=2;var o=n.readUint(r,i);i+=4;for(var a=[],s=0;s<o;s++){var l=n.readUint(r,i);i+=4,a.push(t._readFont(r,l))}return a}return[t._readFont(r,0)]},_readFont:function(e,n){var r=t._bin,i=n;r.readFixed(e,n),n+=4;var o=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2;for(var a=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],s={_data:e,_offset:i},l={},u=0;u<o;u++){var c=r.readASCII(e,n,4);n+=4,r.readUint(e,n),n+=4;var d=r.readUint(e,n);n+=4;var h=r.readUint(e,n);n+=4,l[c]={offset:d,length:h}}for(u=0;u<a.length;u++){var f=a[u];l[f]&&(s[f.trim()]=t[f.trim()].parse(e,l[f].offset,l[f].length,s))}return s},_tabOffset:function(e,n,r){for(var i=t._bin,o=i.readUshort(e,r+4),a=r+12,s=0;s<o;s++){var l=i.readASCII(e,a,4);a+=4,i.readUint(e,a),a+=4;var u=i.readUint(e,a);if(a+=4,i.readUint(e,a),a+=4,l==n)return u}return 0}};t._bin={readFixed:function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<8|e[t+3])/65540},readF2dot14:function(e,n){return t._bin.readShort(e,n)/16384},readInt:function(e,n){return t._bin._view(e).getInt32(n)},readInt8:function(e,n){return t._bin._view(e).getInt8(n)},readShort:function(e,n){return t._bin._view(e).getInt16(n)},readUshort:function(e,n){return t._bin._view(e).getUint16(n)},readUshorts:function(e,n,r){for(var i=[],o=0;o<r;o++)i.push(t._bin.readUshort(e,n+2*o));return i},readUint:function(e,n){return t._bin._view(e).getUint32(n)},readUint64:function(e,n){return 4294967296*t._bin.readUint(e,n)+t._bin.readUint(e,n+4)},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},readUnicode:function(e,t,n){for(var r="",i=0;i<n;i++){var o=e[t++]<<8|e[t++];r+=String.fromCharCode(o)}return r},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(e,n,r){var i=t._bin._tdec;return i&&0==n&&r==e.length?i.decode(e):t._bin.readASCII(e,n,r)},readBytes:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(e[t+i]);return r},readASCIIArray:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(String.fromCharCode(e[t+i]));return r},_view:function(e){return e._dataView||(e._dataView=e.buffer?new DataView(e.buffer,e.byteOffset,e.byteLength):new DataView(new Uint8Array(e).buffer))}},t._lctf={},t._lctf.parse=function(e,n,r,i,o){var a=t._bin,s={},l=n;a.readFixed(e,n),n+=4;var u=a.readUshort(e,n);n+=2;var c=a.readUshort(e,n);n+=2;var d=a.readUshort(e,n);return n+=2,s.scriptList=t._lctf.readScriptList(e,l+u),s.featureList=t._lctf.readFeatureList(e,l+c),s.lookupList=t._lctf.readLookupList(e,l+d,o),s},t._lctf.readLookupList=function(e,n,r){var i=t._bin,o=n,a=[],s=i.readUshort(e,n);n+=2;for(var l=0;l<s;l++){var u=i.readUshort(e,n);n+=2;var c=t._lctf.readLookupTable(e,o+u,r);a.push(c)}return a},t._lctf.readLookupTable=function(e,n,r){var i=t._bin,o=n,a={tabs:[]};a.ltype=i.readUshort(e,n),n+=2,a.flag=i.readUshort(e,n),n+=2;var s=i.readUshort(e,n);n+=2;for(var l=a.ltype,u=0;u<s;u++){var c=i.readUshort(e,n);n+=2;var d=r(e,l,o+c,a);a.tabs.push(d)}return a},t._lctf.numOfOnes=function(e){for(var t=0,n=0;n<32;n++)0!=(e>>>n&1)&&t++;return t},t._lctf.readClassDef=function(e,n){var r=t._bin,i=[],o=r.readUshort(e,n);if(n+=2,1==o){var a=r.readUshort(e,n);n+=2;var s=r.readUshort(e,n);n+=2;for(var l=0;l<s;l++)i.push(a+l),i.push(a+l),i.push(r.readUshort(e,n)),n+=2}if(2==o){var u=r.readUshort(e,n);for(n+=2,l=0;l<u;l++)i.push(r.readUshort(e,n)),n+=2,i.push(r.readUshort(e,n)),n+=2,i.push(r.readUshort(e,n)),n+=2}return i},t._lctf.getInterval=function(e,t){for(var n=0;n<e.length;n+=3){var r=e[n],i=e[n+1];if(e[n+2],r<=t&&t<=i)return n}return-1},t._lctf.readCoverage=function(e,n){var r=t._bin,i={};i.fmt=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);return n+=2,1==i.fmt&&(i.tab=r.readUshorts(e,n,o)),2==i.fmt&&(i.tab=r.readUshorts(e,n,3*o)),i},t._lctf.coverageIndex=function(e,n){var r=e.tab;if(1==e.fmt)return r.indexOf(n);if(2==e.fmt){var i=t._lctf.getInterval(r,n);if(-1!=i)return r[i+2]+(n-r[i])}return-1},t._lctf.readFeatureList=function(e,n){var r=t._bin,i=n,o=[],a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readASCII(e,n,4);n+=4;var u=r.readUshort(e,n);n+=2;var c=t._lctf.readFeatureTable(e,i+u);c.tag=l.trim(),o.push(c)}return o},t._lctf.readFeatureTable=function(e,n){var r=t._bin,i=n,o={},a=r.readUshort(e,n);n+=2,a>0&&(o.featureParams=i+a);var s=r.readUshort(e,n);n+=2,o.tab=[];for(var l=0;l<s;l++)o.tab.push(r.readUshort(e,n+2*l));return o},t._lctf.readScriptList=function(e,n){var r=t._bin,i=n,o={},a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readASCII(e,n,4);n+=4;var u=r.readUshort(e,n);n+=2,o[l.trim()]=t._lctf.readScriptTable(e,i+u)}return o},t._lctf.readScriptTable=function(e,n){var r=t._bin,i=n,o={},a=r.readUshort(e,n);n+=2,o.default=t._lctf.readLangSysTable(e,i+a);var s=r.readUshort(e,n);n+=2;for(var l=0;l<s;l++){var u=r.readASCII(e,n,4);n+=4;var c=r.readUshort(e,n);n+=2,o[u.trim()]=t._lctf.readLangSysTable(e,i+c)}return o},t._lctf.readLangSysTable=function(e,n){var r=t._bin,i={};r.readUshort(e,n),n+=2,i.reqFeature=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);return n+=2,i.features=r.readUshorts(e,n,o),i},t.CFF={},t.CFF.parse=function(e,n,r){var i=t._bin;(e=new Uint8Array(e.buffer,n,r))[n=0],e[++n],e[++n],e[++n],n++;var o=[];n=t.CFF.readIndex(e,n,o);for(var a=[],s=0;s<o.length-1;s++)a.push(i.readASCII(e,n+o[s],o[s+1]-o[s]));n+=o[o.length-1];var l=[];n=t.CFF.readIndex(e,n,l);var u=[];for(s=0;s<l.length-1;s++)u.push(t.CFF.readDict(e,n+l[s],n+l[s+1]));n+=l[l.length-1];var c=u[0],d=[];n=t.CFF.readIndex(e,n,d);var h=[];for(s=0;s<d.length-1;s++)h.push(i.readASCII(e,n+d[s],d[s+1]-d[s]));if(n+=d[d.length-1],t.CFF.readSubrs(e,n,c),c.CharStrings){n=c.CharStrings,d=[],n=t.CFF.readIndex(e,n,d);var f=[];for(s=0;s<d.length-1;s++)f.push(i.readBytes(e,n+d[s],d[s+1]-d[s]));c.CharStrings=f}if(c.ROS){n=c.FDArray;var p=[];for(n=t.CFF.readIndex(e,n,p),c.FDArray=[],s=0;s<p.length-1;s++){var g=t.CFF.readDict(e,n+p[s],n+p[s+1]);t.CFF._readFDict(e,g,h),c.FDArray.push(g)}n+=p[p.length-1],n=c.FDSelect,c.FDSelect=[];var m=e[n];if(n++,3!=m)throw m;var v=i.readUshort(e,n);for(n+=2,s=0;s<v+1;s++)c.FDSelect.push(i.readUshort(e,n),e[n+2]),n+=3}return c.Encoding&&(c.Encoding=t.CFF.readEncoding(e,c.Encoding,c.CharStrings.length)),c.charset&&(c.charset=t.CFF.readCharset(e,c.charset,c.CharStrings.length)),t.CFF._readFDict(e,c,h),c},t.CFF._readFDict=function(e,n,r){var i;for(var o in n.Private&&(i=n.Private[1],n.Private=t.CFF.readDict(e,i,i+n.Private[0]),n.Private.Subrs&&t.CFF.readSubrs(e,i+n.Private.Subrs,n.Private)),n)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(o)&&(n[o]=r[n[o]-426+35])},t.CFF.readSubrs=function(e,n,r){var i=t._bin,o=[];n=t.CFF.readIndex(e,n,o);var a,s=o.length;a=s<1240?107:s<33900?1131:32768,r.Bias=a,r.Subrs=[];for(var l=0;l<o.length-1;l++)r.Subrs.push(i.readBytes(e,n+o[l],o[l+1]-o[l]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(e,t){for(var n=0;n<e.charset.length;n++)if(e.charset[n]==t)return n;return-1},t.CFF.glyphBySE=function(e,n){return n<0||n>255?-1:t.CFF.glyphByUnicode(e,t.CFF.tableSE[n])},t.CFF.readEncoding=function(e,n,r){t._bin;var i=[".notdef"],o=e[n];if(n++,0!=o)throw"error: unknown encoding format: "+o;var a=e[n];n++;for(var s=0;s<a;s++)i.push(e[n+s]);return i},t.CFF.readCharset=function(e,n,r){var i=t._bin,o=[".notdef"],a=e[n];if(n++,0==a)for(var s=0;s<r;s++){var l=i.readUshort(e,n);n+=2,o.push(l)}else{if(1!=a&&2!=a)throw"error: format: "+a;for(;o.length<r;){l=i.readUshort(e,n),n+=2;var u=0;for(1==a?(u=e[n],n++):(u=i.readUshort(e,n),n+=2),s=0;s<=u;s++)o.push(l),l++}}return o},t.CFF.readIndex=function(e,n,r){var i=t._bin,o=i.readUshort(e,n)+1,a=e[n+=2];if(n++,1==a)for(var s=0;s<o;s++)r.push(e[n+s]);else if(2==a)for(s=0;s<o;s++)r.push(i.readUshort(e,n+2*s));else if(3==a)for(s=0;s<o;s++)r.push(16777215&i.readUint(e,n+3*s-1));else if(1!=o)throw"unsupported offset size: "+a+", count: "+o;return(n+=o*a)-1},t.CFF.getCharString=function(e,n,r){var i=t._bin,o=e[n],a=e[n+1];e[n+2],e[n+3],e[n+4];var s=1,l=null,u=null;o<=20&&(l=o,s=1),12==o&&(l=100*o+a,s=2),21<=o&&o<=27&&(l=o,s=1),28==o&&(u=i.readShort(e,n+1),s=3),29<=o&&o<=31&&(l=o,s=1),32<=o&&o<=246&&(u=o-139,s=1),247<=o&&o<=250&&(u=256*(o-247)+a+108,s=2),251<=o&&o<=254&&(u=256*-(o-251)-a-108,s=2),255==o&&(u=i.readInt(e,n+1)/65535,s=5),r.val=null!=u?u:"o"+l,r.size=s},t.CFF.readCharString=function(e,n,r){for(var i=n+r,o=t._bin,a=[];n<i;){var s=e[n],l=e[n+1];e[n+2],e[n+3],e[n+4];var u=1,c=null,d=null;s<=20&&(c=s,u=1),12==s&&(c=100*s+l,u=2),19!=s&&20!=s||(c=s,u=2),21<=s&&s<=27&&(c=s,u=1),28==s&&(d=o.readShort(e,n+1),u=3),29<=s&&s<=31&&(c=s,u=1),32<=s&&s<=246&&(d=s-139,u=1),247<=s&&s<=250&&(d=256*(s-247)+l+108,u=2),251<=s&&s<=254&&(d=256*-(s-251)-l-108,u=2),255==s&&(d=o.readInt(e,n+1)/65535,u=5),a.push(null!=d?d:"o"+c),n+=u}return a},t.CFF.readDict=function(e,n,r){for(var i=t._bin,o={},a=[];n<r;){var s=e[n],l=e[n+1];e[n+2],e[n+3],e[n+4];var u=1,c=null,d=null;if(28==s&&(d=i.readShort(e,n+1),u=3),29==s&&(d=i.readInt(e,n+1),u=5),32<=s&&s<=246&&(d=s-139,u=1),247<=s&&s<=250&&(d=256*(s-247)+l+108,u=2),251<=s&&s<=254&&(d=256*-(s-251)-l-108,u=2),255==s)throw d=i.readInt(e,n+1)/65535,u=5,"unknown number";if(30==s){var h=[];for(u=1;;){var f=e[n+u];u++;var p=f>>4,g=15&f;if(15!=p&&h.push(p),15!=g&&h.push(g),15==g)break}for(var m="",v=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],y=0;y<h.length;y++)m+=v[h[y]];d=parseFloat(m)}s<=21&&(c=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],u=1,12==s&&(c=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][l],u=2)),null!=c?(o[c]=1==a.length?a[0]:a,a=[]):a.push(d),n+=u}return o},t.cmap={},t.cmap.parse=function(e,n,r){e=new Uint8Array(e.buffer,n,r),n=0;var i=t._bin,o={};i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2;var s=[];o.tables=[];for(var l=0;l<a;l++){var u=i.readUshort(e,n);n+=2;var c=i.readUshort(e,n);n+=2;var d=i.readUint(e,n);n+=4;var h="p"+u+"e"+c,f=s.indexOf(d);if(-1==f){var p;f=o.tables.length,s.push(d);var g=i.readUshort(e,d);0==g?p=t.cmap.parse0(e,d):4==g?p=t.cmap.parse4(e,d):6==g?p=t.cmap.parse6(e,d):12==g?p=t.cmap.parse12(e,d):console.debug("unknown format: "+g,u,c,d),o.tables.push(p)}if(null!=o[h])throw"multiple tables for one platform+encoding";o[h]=f}return o},t.cmap.parse0=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2,i.map=[];for(var a=0;a<o-6;a++)i.map.push(e[n+a]);return i},t.cmap.parse4=function(e,n){var r=t._bin,i=n,o={};o.format=r.readUshort(e,n),n+=2;var a=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2;var s=r.readUshort(e,n);n+=2;var l=s/2;o.searchRange=r.readUshort(e,n),n+=2,o.entrySelector=r.readUshort(e,n),n+=2,o.rangeShift=r.readUshort(e,n),n+=2,o.endCount=r.readUshorts(e,n,l),n+=2*l,n+=2,o.startCount=r.readUshorts(e,n,l),n+=2*l,o.idDelta=[];for(var u=0;u<l;u++)o.idDelta.push(r.readShort(e,n)),n+=2;for(o.idRangeOffset=r.readUshorts(e,n,l),n+=2*l,o.glyphIdArray=[];n<i+a;)o.glyphIdArray.push(r.readUshort(e,n)),n+=2;return o},t.cmap.parse6=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,i.firstCode=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2,i.glyphIdArray=[];for(var a=0;a<o;a++)i.glyphIdArray.push(r.readUshort(e,n)),n+=2;return i},t.cmap.parse12=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2,n+=2,r.readUint(e,n),n+=4,r.readUint(e,n),n+=4;var o=r.readUint(e,n);n+=4,i.groups=[];for(var a=0;a<o;a++){var s=n+12*a,l=r.readUint(e,s+0),u=r.readUint(e,s+4),c=r.readUint(e,s+8);i.groups.push([l,u,c])}return i},t.glyf={},t.glyf.parse=function(e,t,n,r){for(var i=[],o=0;o<r.maxp.numGlyphs;o++)i.push(null);return i},t.glyf._parseGlyf=function(e,n){var r=t._bin,i=e._data,o=t._tabOffset(i,"glyf",e._offset)+e.loca[n];if(e.loca[n]==e.loca[n+1])return null;var a={};if(a.noc=r.readShort(i,o),o+=2,a.xMin=r.readShort(i,o),o+=2,a.yMin=r.readShort(i,o),o+=2,a.xMax=r.readShort(i,o),o+=2,a.yMax=r.readShort(i,o),o+=2,a.xMin>=a.xMax||a.yMin>=a.yMax)return null;if(a.noc>0){a.endPts=[];for(var s=0;s<a.noc;s++)a.endPts.push(r.readUshort(i,o)),o+=2;var l=r.readUshort(i,o);if(o+=2,i.length-o<l)return null;a.instructions=r.readBytes(i,o,l),o+=l;var u=a.endPts[a.noc-1]+1;for(a.flags=[],s=0;s<u;s++){var c=i[o];if(o++,a.flags.push(c),0!=(8&c)){var d=i[o];o++;for(var h=0;h<d;h++)a.flags.push(c),s++}}for(a.xs=[],s=0;s<u;s++){var f=0!=(2&a.flags[s]),p=0!=(16&a.flags[s]);f?(a.xs.push(p?i[o]:-i[o]),o++):p?a.xs.push(0):(a.xs.push(r.readShort(i,o)),o+=2)}for(a.ys=[],s=0;s<u;s++)f=0!=(4&a.flags[s]),p=0!=(32&a.flags[s]),f?(a.ys.push(p?i[o]:-i[o]),o++):p?a.ys.push(0):(a.ys.push(r.readShort(i,o)),o+=2);var g=0,m=0;for(s=0;s<u;s++)g+=a.xs[s],m+=a.ys[s],a.xs[s]=g,a.ys[s]=m}else{var v;a.parts=[];do{v=r.readUshort(i,o),o+=2;var y={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(a.parts.push(y),y.glyphIndex=r.readUshort(i,o),o+=2,1&v){var b=r.readShort(i,o);o+=2;var _=r.readShort(i,o);o+=2}else b=r.readInt8(i,o),o++,_=r.readInt8(i,o),o++;2&v?(y.m.tx=b,y.m.ty=_):(y.p1=b,y.p2=_),8&v?(y.m.a=y.m.d=r.readF2dot14(i,o),o+=2):64&v?(y.m.a=r.readF2dot14(i,o),o+=2,y.m.d=r.readF2dot14(i,o),o+=2):128&v&&(y.m.a=r.readF2dot14(i,o),o+=2,y.m.b=r.readF2dot14(i,o),o+=2,y.m.c=r.readF2dot14(i,o),o+=2,y.m.d=r.readF2dot14(i,o),o+=2)}while(32&v);if(256&v){var w=r.readUshort(i,o);for(o+=2,a.instr=[],s=0;s<w;s++)a.instr.push(i[o]),o++}}return a},t.GPOS={},t.GPOS.parse=function(e,n,r,i){return t._lctf.parse(e,n,r,i,t.GPOS.subt)},t.GPOS.subt=function(e,n,r,i){var o=t._bin,a=r,s={};if(s.fmt=o.readUshort(e,r),r+=2,1==n||2==n||3==n||7==n||8==n&&s.fmt<=2){var l=o.readUshort(e,r);r+=2,s.coverage=t._lctf.readCoverage(e,l+a)}if(1==n&&1==s.fmt){var u=o.readUshort(e,r);r+=2;var c=t._lctf.numOfOnes(u);0!=u&&(s.pos=t.GPOS.readValueRecord(e,r,u))}else if(2==n&&s.fmt>=1&&s.fmt<=2){u=o.readUshort(e,r),r+=2;var d=o.readUshort(e,r);r+=2,c=t._lctf.numOfOnes(u);var h=t._lctf.numOfOnes(d);if(1==s.fmt){s.pairsets=[];var f=o.readUshort(e,r);r+=2;for(var p=0;p<f;p++){var g=a+o.readUshort(e,r);r+=2;var m=o.readUshort(e,g);g+=2;for(var v=[],y=0;y<m;y++){var b=o.readUshort(e,g);g+=2,0!=u&&(k=t.GPOS.readValueRecord(e,g,u),g+=2*c),0!=d&&(T=t.GPOS.readValueRecord(e,g,d),g+=2*h),v.push({gid2:b,val1:k,val2:T})}s.pairsets.push(v)}}if(2==s.fmt){var _=o.readUshort(e,r);r+=2;var w=o.readUshort(e,r);r+=2;var x=o.readUshort(e,r);r+=2;var S=o.readUshort(e,r);for(r+=2,s.classDef1=t._lctf.readClassDef(e,a+_),s.classDef2=t._lctf.readClassDef(e,a+w),s.matrix=[],p=0;p<x;p++){var E=[];for(y=0;y<S;y++){var k=null,T=null;0!=u&&(k=t.GPOS.readValueRecord(e,r,u),r+=2*c),0!=d&&(T=t.GPOS.readValueRecord(e,r,d),r+=2*h),E.push({val1:k,val2:T})}s.matrix.push(E)}}}else{if(9==n&&1==s.fmt){var C=o.readUshort(e,r);r+=2;var M=o.readUint(e,r);if(r+=4,9==i.ltype)i.ltype=C;else if(i.ltype!=C)throw"invalid extension substitution";return t.GPOS.subt(e,i.ltype,a+M)}console.debug("unsupported GPOS table LookupType",n,"format",s.fmt)}return s},t.GPOS.readValueRecord=function(e,n,r){var i=t._bin,o=[];return o.push(1&r?i.readShort(e,n):0),n+=1&r?2:0,o.push(2&r?i.readShort(e,n):0),n+=2&r?2:0,o.push(4&r?i.readShort(e,n):0),n+=4&r?2:0,o.push(8&r?i.readShort(e,n):0),n+=8&r?2:0,o},t.GSUB={},t.GSUB.parse=function(e,n,r,i){return t._lctf.parse(e,n,r,i,t.GSUB.subt)},t.GSUB.subt=function(e,n,r,i){var o=t._bin,a=r,s={};if(s.fmt=o.readUshort(e,r),r+=2,1!=n&&4!=n&&5!=n&&6!=n)return null;if(1==n||4==n||5==n&&s.fmt<=2||6==n&&s.fmt<=2){var l=o.readUshort(e,r);r+=2,s.coverage=t._lctf.readCoverage(e,a+l)}if(1==n&&s.fmt>=1&&s.fmt<=2){if(1==s.fmt)s.delta=o.readShort(e,r),r+=2;else if(2==s.fmt){var u=o.readUshort(e,r);r+=2,s.newg=o.readUshorts(e,r,u),r+=2*s.newg.length}}else if(4==n){s.vals=[],u=o.readUshort(e,r),r+=2;for(var c=0;c<u;c++){var d=o.readUshort(e,r);r+=2,s.vals.push(t.GSUB.readLigatureSet(e,a+d))}}else if(5==n&&2==s.fmt){if(2==s.fmt){var h=o.readUshort(e,r);r+=2,s.cDef=t._lctf.readClassDef(e,a+h),s.scset=[];var f=o.readUshort(e,r);for(r+=2,c=0;c<f;c++){var p=o.readUshort(e,r);r+=2,s.scset.push(0==p?null:t.GSUB.readSubClassSet(e,a+p))}}}else if(6==n&&3==s.fmt){if(3==s.fmt){for(c=0;c<3;c++){u=o.readUshort(e,r),r+=2;for(var g=[],m=0;m<u;m++)g.push(t._lctf.readCoverage(e,a+o.readUshort(e,r+2*m)));r+=2*u,0==c&&(s.backCvg=g),1==c&&(s.inptCvg=g),2==c&&(s.ahedCvg=g)}u=o.readUshort(e,r),r+=2,s.lookupRec=t.GSUB.readSubstLookupRecords(e,r,u)}}else{if(7==n&&1==s.fmt){var v=o.readUshort(e,r);r+=2;var y=o.readUint(e,r);if(r+=4,9==i.ltype)i.ltype=v;else if(i.ltype!=v)throw"invalid extension substitution";return t.GSUB.subt(e,i.ltype,a+y)}console.debug("unsupported GSUB table LookupType",n,"format",s.fmt)}return s},t.GSUB.readSubClassSet=function(e,n){var r=t._bin.readUshort,i=n,o=[],a=r(e,n);n+=2;for(var s=0;s<a;s++){var l=r(e,n);n+=2,o.push(t.GSUB.readSubClassRule(e,i+l))}return o},t.GSUB.readSubClassRule=function(e,n){var r=t._bin.readUshort,i={},o=r(e,n),a=r(e,n+=2);n+=2,i.input=[];for(var s=0;s<o-1;s++)i.input.push(r(e,n)),n+=2;return i.substLookupRecords=t.GSUB.readSubstLookupRecords(e,n,a),i},t.GSUB.readSubstLookupRecords=function(e,n,r){for(var i=t._bin.readUshort,o=[],a=0;a<r;a++)o.push(i(e,n),i(e,n+2)),n+=4;return o},t.GSUB.readChainSubClassSet=function(e,n){var r=t._bin,i=n,o=[],a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readUshort(e,n);n+=2,o.push(t.GSUB.readChainSubClassRule(e,i+l))}return o},t.GSUB.readChainSubClassRule=function(e,n){for(var r=t._bin,i={},o=["backtrack","input","lookahead"],a=0;a<o.length;a++){var s=r.readUshort(e,n);n+=2,1==a&&s--,i[o[a]]=r.readUshorts(e,n,s),n+=2*i[o[a]].length}return s=r.readUshort(e,n),n+=2,i.subst=r.readUshorts(e,n,2*s),n+=2*i.subst.length,i},t.GSUB.readLigatureSet=function(e,n){var r=t._bin,i=n,o=[],a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readUshort(e,n);n+=2,o.push(t.GSUB.readLigature(e,i+l))}return o},t.GSUB.readLigature=function(e,n){var r=t._bin,i={chain:[]};i.nglyph=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2;for(var a=0;a<o-1;a++)i.chain.push(r.readUshort(e,n)),n+=2;return i},t.head={},t.head.parse=function(e,n,r){var i=t._bin,o={};return i.readFixed(e,n),n+=4,o.fontRevision=i.readFixed(e,n),n+=4,i.readUint(e,n),n+=4,i.readUint(e,n),n+=4,o.flags=i.readUshort(e,n),n+=2,o.unitsPerEm=i.readUshort(e,n),n+=2,o.created=i.readUint64(e,n),n+=8,o.modified=i.readUint64(e,n),n+=8,o.xMin=i.readShort(e,n),n+=2,o.yMin=i.readShort(e,n),n+=2,o.xMax=i.readShort(e,n),n+=2,o.yMax=i.readShort(e,n),n+=2,o.macStyle=i.readUshort(e,n),n+=2,o.lowestRecPPEM=i.readUshort(e,n),n+=2,o.fontDirectionHint=i.readShort(e,n),n+=2,o.indexToLocFormat=i.readShort(e,n),n+=2,o.glyphDataFormat=i.readShort(e,n),n+=2,o},t.hhea={},t.hhea.parse=function(e,n,r){var i=t._bin,o={};return i.readFixed(e,n),n+=4,o.ascender=i.readShort(e,n),n+=2,o.descender=i.readShort(e,n),n+=2,o.lineGap=i.readShort(e,n),n+=2,o.advanceWidthMax=i.readUshort(e,n),n+=2,o.minLeftSideBearing=i.readShort(e,n),n+=2,o.minRightSideBearing=i.readShort(e,n),n+=2,o.xMaxExtent=i.readShort(e,n),n+=2,o.caretSlopeRise=i.readShort(e,n),n+=2,o.caretSlopeRun=i.readShort(e,n),n+=2,o.caretOffset=i.readShort(e,n),n+=2,n+=8,o.metricDataFormat=i.readShort(e,n),n+=2,o.numberOfHMetrics=i.readUshort(e,n),n+=2,o},t.hmtx={},t.hmtx.parse=function(e,n,r,i){for(var o=t._bin,a={aWidth:[],lsBearing:[]},s=0,l=0,u=0;u<i.maxp.numGlyphs;u++)u<i.hhea.numberOfHMetrics&&(s=o.readUshort(e,n),n+=2,l=o.readShort(e,n),n+=2),a.aWidth.push(s),a.lsBearing.push(l);return a},t.kern={},t.kern.parse=function(e,n,r,i){var o=t._bin,a=o.readUshort(e,n);if(n+=2,1==a)return t.kern.parseV1(e,n-2,r,i);var s=o.readUshort(e,n);n+=2;for(var l={glyph1:[],rval:[]},u=0;u<s;u++){n+=2,r=o.readUshort(e,n),n+=2;var c=o.readUshort(e,n);n+=2;var d=c>>>8;if(0!=(d&=15))throw"unknown kern table format: "+d;n=t.kern.readFormat0(e,n,l)}return l},t.kern.parseV1=function(e,n,r,i){var o=t._bin;o.readFixed(e,n),n+=4;var a=o.readUint(e,n);n+=4;for(var s={glyph1:[],rval:[]},l=0;l<a;l++){o.readUint(e,n),n+=4;var u=o.readUshort(e,n);n+=2,o.readUshort(e,n),n+=2;var c=u>>>8;if(0!=(c&=15))throw"unknown kern table format: "+c;n=t.kern.readFormat0(e,n,s)}return s},t.kern.readFormat0=function(e,n,r){var i=t._bin,o=-1,a=i.readUshort(e,n);n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2;for(var s=0;s<a;s++){var l=i.readUshort(e,n);n+=2;var u=i.readUshort(e,n);n+=2;var c=i.readShort(e,n);n+=2,l!=o&&(r.glyph1.push(l),r.rval.push({glyph2:[],vals:[]}));var d=r.rval[r.rval.length-1];d.glyph2.push(u),d.vals.push(c),o=l}return n},t.loca={},t.loca.parse=function(e,n,r,i){var o=t._bin,a=[],s=i.head.indexToLocFormat,l=i.maxp.numGlyphs+1;if(0==s)for(var u=0;u<l;u++)a.push(o.readUshort(e,n+(u<<1))<<1);if(1==s)for(u=0;u<l;u++)a.push(o.readUint(e,n+(u<<2)));return a},t.maxp={},t.maxp.parse=function(e,n,r){var i=t._bin,o={},a=i.readUint(e,n);return n+=4,o.numGlyphs=i.readUshort(e,n),n+=2,65536==a&&(o.maxPoints=i.readUshort(e,n),n+=2,o.maxContours=i.readUshort(e,n),n+=2,o.maxCompositePoints=i.readUshort(e,n),n+=2,o.maxCompositeContours=i.readUshort(e,n),n+=2,o.maxZones=i.readUshort(e,n),n+=2,o.maxTwilightPoints=i.readUshort(e,n),n+=2,o.maxStorage=i.readUshort(e,n),n+=2,o.maxFunctionDefs=i.readUshort(e,n),n+=2,o.maxInstructionDefs=i.readUshort(e,n),n+=2,o.maxStackElements=i.readUshort(e,n),n+=2,o.maxSizeOfInstructions=i.readUshort(e,n),n+=2,o.maxComponentElements=i.readUshort(e,n),n+=2,o.maxComponentDepth=i.readUshort(e,n),n+=2),o},t.name={},t.name.parse=function(e,n,r){var i=t._bin,o={};i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2,i.readUshort(e,n);for(var s,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],u=n+=2,c=0;c<a;c++){var d=i.readUshort(e,n);n+=2;var h=i.readUshort(e,n);n+=2;var f=i.readUshort(e,n);n+=2;var p=i.readUshort(e,n);n+=2;var g=i.readUshort(e,n);n+=2;var m=i.readUshort(e,n);n+=2;var v,y=l[p],b=u+12*a+m;if(0==d)v=i.readUnicode(e,b,g/2);else if(3==d&&0==h)v=i.readUnicode(e,b,g/2);else if(0==h)v=i.readASCII(e,b,g);else if(1==h)v=i.readUnicode(e,b,g/2);else if(3==h)v=i.readUnicode(e,b,g/2);else{if(1!=d)throw"unknown encoding "+h+", platformID: "+d;v=i.readASCII(e,b,g),console.debug("reading unknown MAC encoding "+h+" as ASCII")}var _="p"+d+","+f.toString(16);null==o[_]&&(o[_]={}),o[_][void 0!==y?y:p]=v,o[_]._lang=f}for(var w in o)if(null!=o[w].postScriptName&&1033==o[w]._lang)return o[w];for(var w in o)if(null!=o[w].postScriptName&&0==o[w]._lang)return o[w];for(var w in o)if(null!=o[w].postScriptName&&3084==o[w]._lang)return o[w];for(var w in o)if(null!=o[w].postScriptName)return o[w];for(var w in o){s=w;break}return console.debug("returning name table with languageID "+o[s]._lang),o[s]},t["OS/2"]={},t["OS/2"].parse=function(e,n,r){var i=t._bin.readUshort(e,n);n+=2;var o={};if(0==i)t["OS/2"].version0(e,n,o);else if(1==i)t["OS/2"].version1(e,n,o);else if(2==i||3==i||4==i)t["OS/2"].version2(e,n,o);else{if(5!=i)throw"unknown OS/2 table version: "+i;t["OS/2"].version5(e,n,o)}return o},t["OS/2"].version0=function(e,n,r){var i=t._bin;return r.xAvgCharWidth=i.readShort(e,n),n+=2,r.usWeightClass=i.readUshort(e,n),n+=2,r.usWidthClass=i.readUshort(e,n),n+=2,r.fsType=i.readUshort(e,n),n+=2,r.ySubscriptXSize=i.readShort(e,n),n+=2,r.ySubscriptYSize=i.readShort(e,n),n+=2,r.ySubscriptXOffset=i.readShort(e,n),n+=2,r.ySubscriptYOffset=i.readShort(e,n),n+=2,r.ySuperscriptXSize=i.readShort(e,n),n+=2,r.ySuperscriptYSize=i.readShort(e,n),n+=2,r.ySuperscriptXOffset=i.readShort(e,n),n+=2,r.ySuperscriptYOffset=i.readShort(e,n),n+=2,r.yStrikeoutSize=i.readShort(e,n),n+=2,r.yStrikeoutPosition=i.readShort(e,n),n+=2,r.sFamilyClass=i.readShort(e,n),n+=2,r.panose=i.readBytes(e,n,10),n+=10,r.ulUnicodeRange1=i.readUint(e,n),n+=4,r.ulUnicodeRange2=i.readUint(e,n),n+=4,r.ulUnicodeRange3=i.readUint(e,n),n+=4,r.ulUnicodeRange4=i.readUint(e,n),n+=4,r.achVendID=[i.readInt8(e,n),i.readInt8(e,n+1),i.readInt8(e,n+2),i.readInt8(e,n+3)],n+=4,r.fsSelection=i.readUshort(e,n),n+=2,r.usFirstCharIndex=i.readUshort(e,n),n+=2,r.usLastCharIndex=i.readUshort(e,n),n+=2,r.sTypoAscender=i.readShort(e,n),n+=2,r.sTypoDescender=i.readShort(e,n),n+=2,r.sTypoLineGap=i.readShort(e,n),n+=2,r.usWinAscent=i.readUshort(e,n),n+=2,r.usWinDescent=i.readUshort(e,n),n+2},t["OS/2"].version1=function(e,n,r){var i=t._bin;return n=t["OS/2"].version0(e,n,r),r.ulCodePageRange1=i.readUint(e,n),n+=4,r.ulCodePageRange2=i.readUint(e,n),n+4},t["OS/2"].version2=function(e,n,r){var i=t._bin;return n=t["OS/2"].version1(e,n,r),r.sxHeight=i.readShort(e,n),n+=2,r.sCapHeight=i.readShort(e,n),n+=2,r.usDefault=i.readUshort(e,n),n+=2,r.usBreak=i.readUshort(e,n),n+=2,r.usMaxContext=i.readUshort(e,n),n+2},t["OS/2"].version5=function(e,n,r){var i=t._bin;return n=t["OS/2"].version2(e,n,r),r.usLowerOpticalPointSize=i.readUshort(e,n),n+=2,r.usUpperOpticalPointSize=i.readUshort(e,n),n+2},t.post={},t.post.parse=function(e,n,r){var i=t._bin,o={};return o.version=i.readFixed(e,n),n+=4,o.italicAngle=i.readFixed(e,n),n+=4,o.underlinePosition=i.readShort(e,n),n+=2,o.underlineThickness=i.readShort(e,n),n+=2,o},null==t&&(t={}),null==t.U&&(t.U={}),t.U.codeToGlyph=function(e,t){var n=e.cmap,r=-1;if(null!=n.p0e4?r=n.p0e4:null!=n.p3e1?r=n.p3e1:null!=n.p1e0?r=n.p1e0:null!=n.p0e3&&(r=n.p0e3),-1==r)throw"no familiar platform and encoding!";var i=n.tables[r];if(0==i.format)return t>=i.map.length?0:i.map[t];if(4==i.format){for(var o=-1,a=0;a<i.endCount.length;a++)if(t<=i.endCount[a]){o=a;break}return-1==o||i.startCount[o]>t?0:65535&(0!=i.idRangeOffset[o]?i.glyphIdArray[t-i.startCount[o]+(i.idRangeOffset[o]>>1)-(i.idRangeOffset.length-o)]:t+i.idDelta[o])}if(12==i.format){if(t>i.groups[i.groups.length-1][1])return 0;for(a=0;a<i.groups.length;a++){var s=i.groups[a];if(s[0]<=t&&t<=s[1])return s[2]+(t-s[0])}return 0}throw"unknown cmap table format "+i.format},t.U.glyphToPath=function(e,n){var r={cmds:[],crds:[]};if(e.SVG&&e.SVG.entries[n]){var i=e.SVG.entries[n];return null==i?r:("string"==typeof i&&(i=t.SVG.toPath(i),e.SVG.entries[n]=i),i)}if(e.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:e.CFF.Private?e.CFF.Private.defaultWidthX:0,open:!1},a=e.CFF,s=e.CFF.Private;if(a.ROS){for(var l=0;a.FDSelect[l+2]<=n;)l+=2;s=a.FDArray[a.FDSelect[l+1]].Private}t.U._drawCFF(e.CFF.CharStrings[n],o,a,s,r)}else e.glyf&&t.U._drawGlyf(n,e,r);return r},t.U._drawGlyf=function(e,n,r){var i=n.glyf[e];null==i&&(i=n.glyf[e]=t.glyf._parseGlyf(n,e)),null!=i&&(i.noc>-1?t.U._simpleGlyph(i,r):t.U._compoGlyph(i,n,r))},t.U._simpleGlyph=function(e,n){for(var r=0;r<e.noc;r++){for(var i=0==r?0:e.endPts[r-1]+1,o=e.endPts[r],a=i;a<=o;a++){var s=a==i?o:a-1,l=a==o?i:a+1,u=1&e.flags[a],c=1&e.flags[s],d=1&e.flags[l],h=e.xs[a],f=e.ys[a];if(a==i)if(u){if(!c){t.U.P.moveTo(n,h,f);continue}t.U.P.moveTo(n,e.xs[s],e.ys[s])}else c?t.U.P.moveTo(n,e.xs[s],e.ys[s]):t.U.P.moveTo(n,(e.xs[s]+h)/2,(e.ys[s]+f)/2);u?c&&t.U.P.lineTo(n,h,f):d?t.U.P.qcurveTo(n,h,f,e.xs[l],e.ys[l]):t.U.P.qcurveTo(n,h,f,(h+e.xs[l])/2,(f+e.ys[l])/2)}t.U.P.closePath(n)}},t.U._compoGlyph=function(e,n,r){for(var i=0;i<e.parts.length;i++){var o={cmds:[],crds:[]},a=e.parts[i];t.U._drawGlyf(a.glyphIndex,n,o);for(var s=a.m,l=0;l<o.crds.length;l+=2){var u=o.crds[l],c=o.crds[l+1];r.crds.push(u*s.a+c*s.b+s.tx),r.crds.push(u*s.c+c*s.d+s.ty)}for(l=0;l<o.cmds.length;l++)r.cmds.push(o.cmds[l])}},t.U._getGlyphClass=function(e,n){var r=t._lctf.getInterval(n,e);return-1==r?0:n[r+2]},t.U.getPairAdjustment=function(e,n,r){var i=!1;if(e.GPOS)for(var o=e.GPOS,a=o.lookupList,s=o.featureList,l=[],u=0;u<s.length;u++){var c=s[u];if("kern"==c.tag){i=!0;for(var d=0;d<c.tab.length;d++)if(!l[c.tab[d]]){l[c.tab[d]]=!0;for(var h=a[c.tab[d]],f=0;f<h.tabs.length;f++)if(null!=h.tabs[f]){var p,g=h.tabs[f];if(!g.coverage||-1!=(p=t._lctf.coverageIndex(g.coverage,n)))if(1==h.ltype);else if(2==h.ltype){var m=null;if(1==g.fmt){var v=g.pairsets[p];for(u=0;u<v.length;u++)v[u].gid2==r&&(m=v[u])}else if(2==g.fmt){var y=t.U._getGlyphClass(n,g.classDef1),b=t.U._getGlyphClass(r,g.classDef2);m=g.matrix[y][b]}if(m){var _=0;return m.val1&&m.val1[2]&&(_+=m.val1[2]),m.val2&&m.val2[0]&&(_+=m.val2[0]),_}}}}}}if(e.kern&&!i){var w=e.kern.glyph1.indexOf(n);if(-1!=w){var x=e.kern.rval[w].glyph2.indexOf(r);if(-1!=x)return e.kern.rval[w].vals[x]}}return 0},t.U._applySubs=function(e,n,r,i){for(var o=e.length-n-1,a=0;a<r.tabs.length;a++)if(null!=r.tabs[a]){var s,l=r.tabs[a];if(!l.coverage||-1!=(s=t._lctf.coverageIndex(l.coverage,e[n])))if(1==r.ltype)e[n],1==l.fmt?e[n]=e[n]+l.delta:e[n]=l.newg[s];else if(4==r.ltype)for(var u=l.vals[s],c=0;c<u.length;c++){var d=u[c],h=d.chain.length;if(!(h>o)){for(var f=!0,p=0,g=0;g<h;g++){for(;-1==e[n+p+(1+g)];)p++;d.chain[g]!=e[n+p+(1+g)]&&(f=!1)}if(f){for(e[n]=d.nglyph,g=0;g<h+p;g++)e[n+g+1]=-1;break}}}else if(5==r.ltype&&2==l.fmt)for(var m=t._lctf.getInterval(l.cDef,e[n]),v=l.cDef[m+2],y=l.scset[v],b=0;b<y.length;b++){var _=y[b],w=_.input;if(!(w.length>o)){for(f=!0,g=0;g<w.length;g++){var x=t._lctf.getInterval(l.cDef,e[n+1+g]);if(-1==m&&l.cDef[x+2]!=w[g]){f=!1;break}}if(f){var S=_.substLookupRecords;for(c=0;c<S.length;c+=2)S[c],S[c+1]}}}else if(6==r.ltype&&3==l.fmt){if(!t.U._glsCovered(e,l.backCvg,n-l.backCvg.length))continue;if(!t.U._glsCovered(e,l.inptCvg,n))continue;if(!t.U._glsCovered(e,l.ahedCvg,n+l.inptCvg.length))continue;var E=l.lookupRec;for(b=0;b<E.length;b+=2){m=E[b];var k=i[E[b+1]];t.U._applySubs(e,n+m,k,i)}}}},t.U._glsCovered=function(e,n,r){for(var i=0;i<n.length;i++)if(-1==t._lctf.coverageIndex(n[i],e[r+i]))return!1;return!0},t.U.glyphsToPath=function(e,n,r){for(var i={cmds:[],crds:[]},o=0,a=0;a<n.length;a++){var s=n[a];if(-1!=s){for(var l=a<n.length-1&&-1!=n[a+1]?n[a+1]:0,u=t.U.glyphToPath(e,s),c=0;c<u.crds.length;c+=2)i.crds.push(u.crds[c]+o),i.crds.push(u.crds[c+1]);for(r&&i.cmds.push(r),c=0;c<u.cmds.length;c++)i.cmds.push(u.cmds[c]);r&&i.cmds.push("X"),o+=e.hmtx.aWidth[s],a<n.length-1&&(o+=t.U.getPairAdjustment(e,s,l))}}return i},t.U.P={},t.U.P.moveTo=function(e,t,n){e.cmds.push("M"),e.crds.push(t,n)},t.U.P.lineTo=function(e,t,n){e.cmds.push("L"),e.crds.push(t,n)},t.U.P.curveTo=function(e,t,n,r,i,o,a){e.cmds.push("C"),e.crds.push(t,n,r,i,o,a)},t.U.P.qcurveTo=function(e,t,n,r,i){e.cmds.push("Q"),e.crds.push(t,n,r,i)},t.U.P.closePath=function(e){e.cmds.push("Z")},t.U._drawCFF=function(e,n,r,i,o){for(var a=n.stack,s=n.nStems,l=n.haveWidth,u=n.width,c=n.open,d=0,h=n.x,f=n.y,p=0,g=0,m=0,v=0,y=0,b=0,_=0,w=0,x=0,S=0,E={val:0,size:0};d<e.length;){t.CFF.getCharString(e,d,E);var k=E.val;if(d+=E.size,"o1"==k||"o18"==k)a.length%2!=0&&!l&&(u=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,l=!0;else if("o3"==k||"o23"==k)a.length%2!=0&&!l&&(u=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,l=!0;else if("o4"==k)a.length>1&&!l&&(u=a.shift()+i.nominalWidthX,l=!0),c&&t.U.P.closePath(o),f+=a.pop(),t.U.P.moveTo(o,h,f),c=!0;else if("o5"==k)for(;a.length>0;)h+=a.shift(),f+=a.shift(),t.U.P.lineTo(o,h,f);else if("o6"==k||"o7"==k)for(var T=a.length,C="o6"==k,M=0;M<T;M++){var A=a.shift();C?h+=A:f+=A,C=!C,t.U.P.lineTo(o,h,f)}else if("o8"==k||"o24"==k){T=a.length;for(var P=0;P+6<=T;)p=h+a.shift(),g=f+a.shift(),m=p+a.shift(),v=g+a.shift(),h=m+a.shift(),f=v+a.shift(),t.U.P.curveTo(o,p,g,m,v,h,f),P+=6;"o24"==k&&(h+=a.shift(),f+=a.shift(),t.U.P.lineTo(o,h,f))}else{if("o11"==k)break;if("o1234"==k||"o1235"==k||"o1236"==k||"o1237"==k)"o1234"==k&&(g=f,m=(p=h+a.shift())+a.shift(),S=v=g+a.shift(),b=v,w=f,h=(_=(y=(x=m+a.shift())+a.shift())+a.shift())+a.shift(),t.U.P.curveTo(o,p,g,m,v,x,S),t.U.P.curveTo(o,y,b,_,w,h,f)),"o1235"==k&&(p=h+a.shift(),g=f+a.shift(),m=p+a.shift(),v=g+a.shift(),x=m+a.shift(),S=v+a.shift(),y=x+a.shift(),b=S+a.shift(),_=y+a.shift(),w=b+a.shift(),h=_+a.shift(),f=w+a.shift(),a.shift(),t.U.P.curveTo(o,p,g,m,v,x,S),t.U.P.curveTo(o,y,b,_,w,h,f)),"o1236"==k&&(p=h+a.shift(),g=f+a.shift(),m=p+a.shift(),S=v=g+a.shift(),b=v,_=(y=(x=m+a.shift())+a.shift())+a.shift(),w=b+a.shift(),h=_+a.shift(),t.U.P.curveTo(o,p,g,m,v,x,S),t.U.P.curveTo(o,y,b,_,w,h,f)),"o1237"==k&&(p=h+a.shift(),g=f+a.shift(),m=p+a.shift(),v=g+a.shift(),x=m+a.shift(),S=v+a.shift(),y=x+a.shift(),b=S+a.shift(),_=y+a.shift(),w=b+a.shift(),Math.abs(_-h)>Math.abs(w-f)?h=_+a.shift():f=w+a.shift(),t.U.P.curveTo(o,p,g,m,v,x,S),t.U.P.curveTo(o,y,b,_,w,h,f));else if("o14"==k){if(a.length>0&&!l&&(u=a.shift()+r.nominalWidthX,l=!0),4==a.length){var O=a.shift(),U=a.shift(),z=a.shift(),D=a.shift(),L=t.CFF.glyphBySE(r,z),N=t.CFF.glyphBySE(r,D);t.U._drawCFF(r.CharStrings[L],n,r,i,o),n.x=O,n.y=U,t.U._drawCFF(r.CharStrings[N],n,r,i,o)}c&&(t.U.P.closePath(o),c=!1)}else if("o19"==k||"o20"==k)a.length%2!=0&&!l&&(u=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,l=!0,d+=s+7>>3;else if("o21"==k)a.length>2&&!l&&(u=a.shift()+i.nominalWidthX,l=!0),f+=a.pop(),h+=a.pop(),c&&t.U.P.closePath(o),t.U.P.moveTo(o,h,f),c=!0;else if("o22"==k)a.length>1&&!l&&(u=a.shift()+i.nominalWidthX,l=!0),h+=a.pop(),c&&t.U.P.closePath(o),t.U.P.moveTo(o,h,f),c=!0;else if("o25"==k){for(;a.length>6;)h+=a.shift(),f+=a.shift(),t.U.P.lineTo(o,h,f);p=h+a.shift(),g=f+a.shift(),m=p+a.shift(),v=g+a.shift(),h=m+a.shift(),f=v+a.shift(),t.U.P.curveTo(o,p,g,m,v,h,f)}else if("o26"==k)for(a.length%2&&(h+=a.shift());a.length>0;)p=h,g=f+a.shift(),h=m=p+a.shift(),f=(v=g+a.shift())+a.shift(),t.U.P.curveTo(o,p,g,m,v,h,f);else if("o27"==k)for(a.length%2&&(f+=a.shift());a.length>0;)g=f,m=(p=h+a.shift())+a.shift(),v=g+a.shift(),h=m+a.shift(),f=v,t.U.P.curveTo(o,p,g,m,v,h,f);else if("o10"==k||"o29"==k){var I="o10"==k?i:r;if(0==a.length)console.debug("error: empty stack");else{var R=a.pop(),F=I.Subrs[R+I.Bias];n.x=h,n.y=f,n.nStems=s,n.haveWidth=l,n.width=u,n.open=c,t.U._drawCFF(F,n,r,i,o),h=n.x,f=n.y,s=n.nStems,l=n.haveWidth,u=n.width,c=n.open}}else if("o30"==k||"o31"==k){var G=a.length,j=(P=0,"o31"==k);for(P+=G-(T=-3&G);P<T;)j?(g=f,m=(p=h+a.shift())+a.shift(),f=(v=g+a.shift())+a.shift(),T-P==5?(h=m+a.shift(),P++):h=m,j=!1):(p=h,g=f+a.shift(),m=p+a.shift(),v=g+a.shift(),h=m+a.shift(),T-P==5?(f=v+a.shift(),P++):f=v,j=!0),t.U.P.curveTo(o,p,g,m,v,h,f),P+=4}else{if("o"==(k+"").charAt(0))throw console.debug("Unknown operation: "+k,e),k;a.push(k)}}}n.x=h,n.y=f,n.nStems=s,n.haveWidth=l,n.width=u,n.open=c};var n=t,r={Typr:n};return e.Typr=n,e.default=r,Object.defineProperty(e,"__esModule",{value:!0}),e}({}).Typr},function(){return function(e){var t=Uint8Array,n=Uint16Array,r=Uint32Array,i=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(e,t){for(var i=new n(31),o=0;o<31;++o)i[o]=t+=1<<e[o-1];var a=new r(i[30]);for(o=1;o<30;++o)for(var s=i[o];s<i[o+1];++s)a[s]=s-i[o]<<5|o;return[i,a]},l=s(i,2),u=l[0],c=l[1];u[28]=258,c[258]=28;for(var d=s(o,0)[0],h=new n(32768),f=0;f<32768;++f){var p=(43690&f)>>>1|(21845&f)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,h[f]=((65280&p)>>>8|(255&p)<<8)>>>1}var g=function(e,t,r){for(var i=e.length,o=0,a=new n(t);o<i;++o)++a[e[o]-1];var s,l=new n(t);for(o=0;o<t;++o)l[o]=l[o-1]+a[o-1]<<1;if(r){s=new n(1<<t);var u=15-t;for(o=0;o<i;++o)if(e[o])for(var c=o<<4|e[o],d=t-e[o],f=l[e[o]-1]++<<d,p=f|(1<<d)-1;f<=p;++f)s[h[f]>>>u]=c}else for(s=new n(i),o=0;o<i;++o)e[o]&&(s[o]=h[l[e[o]-1]++]>>>15-e[o]);return s},m=new t(288);for(f=0;f<144;++f)m[f]=8;for(f=144;f<256;++f)m[f]=9;for(f=256;f<280;++f)m[f]=7;for(f=280;f<288;++f)m[f]=8;var v=new t(32);for(f=0;f<32;++f)v[f]=5;var y=g(m,9,1),b=g(v,5,1),_=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},w=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},x=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},S=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(e,t,n){var r=new Error(t||S[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,E),!n)throw r;return r},k=function(e,s,l){var c=e.length;if(!c||l&&!l.l&&c<5)return s||new t(0);var h=!s||l,f=!l||l.i;l||(l={}),s||(s=new t(3*c));var p,m=function(e){var n=s.length;if(e>n){var r=new t(Math.max(2*n,e));r.set(s),s=r}},v=l.f||0,S=l.p||0,k=l.b||0,T=l.l,C=l.d,M=l.m,A=l.n,P=8*c;do{if(!T){l.f=v=w(e,S,1);var O=w(e,S+1,3);if(S+=3,!O){var U=e[(V=((p=S)/8|0)+(7&p&&1)+4)-4]|e[V-3]<<8,z=V+U;if(z>c){f&&E(0);break}h&&m(k+U),s.set(e.subarray(V,z),k),l.b=k+=U,l.p=S=8*z;continue}if(1==O)T=y,C=b,M=9,A=5;else if(2==O){var D=w(e,S,31)+257,L=w(e,S+10,15)+4,N=D+w(e,S+5,31)+1;S+=14;for(var I=new t(N),R=new t(19),F=0;F<L;++F)R[a[F]]=w(e,S+3*F,7);S+=3*L;var G=_(R),j=(1<<G)-1,B=g(R,G,1);for(F=0;F<N;){var V,H=B[w(e,S,j)];if(S+=15&H,(V=H>>>4)<16)I[F++]=V;else{var W=0,q=0;for(16==V?(q=3+w(e,S,3),S+=2,W=I[F-1]):17==V?(q=3+w(e,S,7),S+=3):18==V&&(q=11+w(e,S,127),S+=7);q--;)I[F++]=W}}var $=I.subarray(0,D),Y=I.subarray(D);M=_($),A=_(Y),T=g($,M,1),C=g(Y,A,1)}else E(1);if(S>P){f&&E(0);break}}h&&m(k+131072);for(var X=(1<<M)-1,Z=(1<<A)-1,K=S;;K=S){var Q=(W=T[x(e,S)&X])>>>4;if((S+=15&W)>P){f&&E(0);break}if(W||E(2),Q<256)s[k++]=Q;else{if(256==Q){K=S,T=null;break}var J=Q-254;if(Q>264){var ee=i[F=Q-257];J=w(e,S,(1<<ee)-1)+u[F],S+=ee}var te=C[x(e,S)&Z],ne=te>>>4;if(te||E(3),S+=15&te,Y=d[ne],ne>3&&(ee=o[ne],Y+=x(e,S)&(1<<ee)-1,S+=ee),S>P){f&&E(0);break}h&&m(k+131072);for(var re=k+J;k<re;k+=4)s[k]=s[k-Y],s[k+1]=s[k+1-Y],s[k+2]=s[k+2-Y],s[k+3]=s[k+3-Y];k=re}}l.l=T,l.p=K,l.b=k,T&&(v=1,l.m=M,l.d=C,l.n=A)}while(!v);return k==s.length?s:function(e,i,o){(null==i||i<0)&&(i=0),(null==o||o>e.length)&&(o=e.length);var a=new(e instanceof n?n:e instanceof r?r:t)(o-i);return a.set(e.subarray(i,o)),a}(s,0,k)},T=new t(0),C="undefined"!=typeof TextDecoder&&new TextDecoder;try{C.decode(T,{stream:!0})}catch(e){}return e.convert_streams=function(e){var t=new DataView(e),n=0;function r(){var e=t.getUint16(n);return n+=2,e}function i(){var e=t.getUint32(n);return n+=4,e}function o(e){v.setUint16(y,e),y+=2}function a(e){v.setUint32(y,e),y+=4}for(var s={signature:i(),flavor:i(),length:i(),numTables:r(),reserved:r(),totalSfntSize:i(),majorVersion:r(),minorVersion:r(),metaOffset:i(),metaLength:i(),metaOrigLength:i(),privOffset:i(),privLength:i()},l=0;Math.pow(2,l)<=s.numTables;)l++;l--;for(var u=16*Math.pow(2,l),c=16*s.numTables-u,d=12,h=[],f=0;f<s.numTables;f++)h.push({tag:i(),offset:i(),compLength:i(),origLength:i(),origChecksum:i()}),d+=16;var p,g=new Uint8Array(12+16*h.length+h.reduce((function(e,t){return e+t.origLength+4}),0)),m=g.buffer,v=new DataView(m),y=0;return a(s.flavor),o(s.numTables),o(u),o(l),o(c),h.forEach((function(e){a(e.tag),a(e.origChecksum),a(d),a(e.origLength),e.outOffset=d,(d+=e.origLength)%4!=0&&(d+=4-d%4)})),h.forEach((function(t){var n,r=e.slice(t.offset,t.offset+t.compLength);if(t.compLength!=t.origLength){var i=new Uint8Array(t.origLength);n=new Uint8Array(r,2),k(n,i)}else i=new Uint8Array(r);g.set(i,t.outOffset);var o=0;(d=t.outOffset+t.origLength)%4!=0&&(o=4-d%4),g.set(new Uint8Array(o).buffer,t.outOffset+t.origLength),p=d+o})),m.slice(0,p)},Object.defineProperty(e,"__esModule",{value:!0}),e}({}).convert_streams},function(e,t){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,o=2,a=4,s=8,l=16,u=32;let c;function d(e){if(!c){const e={R:o,L:i,D:a,C:l,U:u,T:s};c=new Map;for(let t in r){let n=0;r[t].split(",").forEach((r=>{let[i,o]=r.split("+");i=parseInt(i,36),o=o?parseInt(o,36):0,c.set(n+=i,e[t]);for(let a=o;a--;)c.set(++n,e[t])}))}}return c.get(e)||u}const h=1,f=2,p=3,g=4,m=[null,"isol","init","fina","medi"];function v(e){const t=new Uint8Array(e.length);let n=u,r=h,c=-1;for(let m=0;m<e.length;m++){const v=e.codePointAt(m);let y=0|d(v),b=h;y&s||(n&(i|a|l)?y&(o|a|l)?(b=p,r!==h&&r!==p||t[c]++):y&(i|u)&&(r!==f&&r!==g||t[c]--):n&(o|u)&&(r!==f&&r!==g||t[c]--),r=t[m]=b,n=y,c=m,v>65535&&m++)}return t}function y(...e){for(let t=0;t<e.length;t++)if("number"==typeof e[t])return e[t]}function b(t){const r=Object.create(null),i=t["OS/2"],o=t.hhea,a=t.head.unitsPerEm,s=y(i&&i.sTypoAscender,o&&o.ascender,a),l={unitsPerEm:a,ascender:s,descender:y(i&&i.sTypoDescender,o&&o.descender,0),capHeight:y(i&&i.sCapHeight,s),xHeight:y(i&&i.sxHeight,s),lineGap:y(i&&i.sTypoLineGap,o&&o.lineGap),forEachGlyph(i,o,a,s){let u=0;const c=1/l.unitsPerEm*o,d=function(t,n){const r=[];for(let o=0;o<n.length;o++){const i=n.codePointAt(o);i>65535&&o++,r.push(e.U.codeToGlyph(t,i))}const i=t.GSUB;if(i){const{lookupList:t,featureList:o}=i;let a;const s=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,l=[];o.forEach((i=>{if(s.test(i.tag))for(let o=0;o<i.tab.length;o++){if(l[i.tab[o]])continue;l[i.tab[o]]=!0;const s=t[i.tab[o]],u=/^(isol|init|fina|medi)$/.test(i.tag);u&&!a&&(a=v(n));for(let n=0;n<r.length;n++)a&&u&&m[a[n]]!==i.tag||e.U._applySubs(r,n,s,t)}}))}return r}(t,i);let h=0,f=-1;return d.forEach(((l,d)=>{if(-1!==l){let i=r[l];if(!i){const{cmds:o,crds:a}=e.U.glyphToPath(t,l);let s,u,c,d,h="",f=0;for(let e=0,t=o.length;e<t;e++){const t=n[o[e]];h+=o[e];for(let e=1;e<=t;e++)h+=(e>1?",":"")+a[f++]}if(a.length){s=u=1/0,c=d=-1/0;for(let e=0,t=a.length;e<t;e+=2){let t=a[e],n=a[e+1];t<s&&(s=t),n<u&&(u=n),t>c&&(c=t),n>d&&(d=n)}}else s=c=u=d=0;i=r[l]={index:l,advanceWidth:t.hmtx.aWidth[l],xMin:s,yMin:u,xMax:c,yMax:d,path:h,pathCommandCount:o.length}}-1!==f&&(u+=e.U.getPairAdjustment(t,f,l)*c),s.call(null,i,u,h),i.advanceWidth&&(u+=i.advanceWidth*c),a&&(u+=a*o),f=l}h+=i.codePointAt(h)>65535?2:1})),u}};return l}return function(n){const r=new Uint8Array(n,0,4),i=e._bin.readASCII(r,0,4);if("wOFF"===i)n=t(n);else if("wOF2"===i)throw new Error("woff2 fonts not supported");return b(e.parse(n)[0])}}],init(e,t,n){return n(e(),t())}}),Fa={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},Ga=new M.Color;let ja=!1;function Ba(){return(self.performance||Date).now()}const Va=Object.create(null);function Ha(e,t){ja=!0,e=qa({},e);const n=Ba();if(e.font=function(e){$a||($a="undefined"==typeof document?{}:document.createElement("a"));return $a.href=e,$a.href}(e.font||Fa.defaultFontURL),e.text=""+e.text,e.sdfGlyphSize=e.sdfGlyphSize||Fa.sdfGlyphSize,null!=e.colorRanges){let t={};for(let n in e.colorRanges)if(e.colorRanges.hasOwnProperty(n)){let r=e.colorRanges[n];"number"!=typeof r&&(r=Ga.set(r).getHex()),t[n]=r}e.colorRanges=t}Object.freeze(e);const{textureWidth:r,sdfExponent:i}=Fa,{sdfGlyphSize:o}=e,a=r/o*4;let s=Va[o];if(!s){const e=document.createElement("canvas");e.width=r,e.height=256*o/a,s=Va[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:e,sdfTexture:new M.Texture(e,void 0,void 0,void 0,M.LinearFilter,M.LinearFilter),contextLost:!1,glyphsByFont:new Map},s.sdfTexture.generateMipmaps=!1,function(e){const t=e.sdfCanvas;t.addEventListener("webglcontextlost",(t=>{console.log("Context Lost",t),t.preventDefault(),e.contextLost=!0})),t.addEventListener("webglcontextrestored",(t=>{console.log("Context Restored",t),e.contextLost=!1;const n=[];e.glyphsByFont.forEach((t=>{t.forEach((t=>{n.push(Wa(t,e,!0))}))})),Promise.all(n).then((()=>{Ya(e),e.sdfTexture.needsUpdate=!0}))}))}(s)}const{sdfTexture:l,sdfCanvas:u}=s;let c=s.glyphsByFont.get(e.font);c||s.glyphsByFont.set(e.font,c=new Map),Za(e).then((d=>{const{glyphIds:h,glyphPositions:f,fontSize:p,unitsPerEm:g,timings:m}=d,v=[],y=new Float32Array(4*h.length),b=p/g;let _=0,w=0;const x=Ba();h.forEach(((e,t)=>{let n=c.get(e);if(!n){const{path:t,pathBounds:r}=d.glyphData[e],i=Math.max(r[2]-r[0],r[3]-r[1])/o*(Fa.sdfMargin*o+.5),a=s.glyphCount++,l=[r[0]-i,r[1]-i,r[2]+i,r[3]+i];c.set(e,n={path:t,atlasIndex:a,sdfViewBox:l}),v.push(n)}const{sdfViewBox:r}=n,i=f[w++],a=f[w++];y[_++]=i+r[0]*b,y[_++]=a+r[1]*b,y[_++]=i+r[2]*b,y[_++]=a+r[3]*b,h[t]=n.atlasIndex})),m.quads=(m.quads||0)+(Ba()-x);const S=Ba();m.sdf={};const E=u.height,k=Math.ceil(s.glyphCount/a),T=Math.pow(2,Math.ceil(Math.log2(k*o)));T>E&&(console.info(`Increasing SDF texture size ${E}->${T}`),Ia(u,r,T),l.dispose()),Promise.all(v.map((t=>Wa(t,s,e.gpuAccelerateSDF).then((({timing:e})=>{m.sdf[t.atlasIndex]=e}))))).then((()=>{v.length&&!s.contextLost&&(Ya(s),l.needsUpdate=!0),m.sdfTotal=Ba()-S,m.total=Ba()-n,t(Object.freeze({parameters:e,sdfTexture:l,sdfGlyphSize:o,sdfExponent:i,glyphBounds:y,glyphAtlasIndices:h,glyphColors:d.glyphColors,caretPositions:d.caretPositions,caretHeight:d.caretHeight,chunkedBounds:d.chunkedBounds,ascender:d.ascender,descender:d.descender,lineHeight:d.lineHeight,capHeight:d.capHeight,xHeight:d.xHeight,topBaseline:d.topBaseline,blockBounds:d.blockBounds,visibleBounds:d.visibleBounds,timings:d.timings}))}))})),Promise.resolve().then((()=>{s.contextLost||function(e){e._warm||(Ta.webgl.isSupported(e),e._warm=!0)}(u)}))}function Wa({path:e,atlasIndex:t,sdfViewBox:n},{sdfGlyphSize:r,sdfCanvas:i,contextLost:o},a){if(o)return Promise.resolve({timing:-1});const{textureWidth:s,sdfExponent:l}=Fa,u=Math.max(n[2]-n[0],n[3]-n[1]),c=Math.floor(t/4);return function(e,t,n,r,i,o,a,s,l,u,c=!0){return c?Oa(e,t,n,r,i,o,a,s,l,u).then(null,(c=>(Ca||(console.warn("WebGL SDF generation failed, falling back to JS",c),Ca=!0),Na(e,t,n,r,i,o,a,s,l,u)))):Na(e,t,n,r,i,o,a,s,l,u)}(r,r,e,n,u,l,i,c%(s/r)*r,Math.floor(c/(s/r))*r,t%4,a)}function qa(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}let $a;function Ya(e){if("function"!=typeof createImageBitmap){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:n}=e,{width:r,height:i}=t,o=e.sdfCanvas.getContext("webgl");let a=n.image.data;a&&a.length===r*i*4||(a=new Uint8Array(r*i*4),n.image={width:r,height:i,data:a},n.flipY=!1,n.isDataTexture=!0),o.readPixels(0,0,r,i,o.RGBA,o.UNSIGNED_BYTE,a)}}const Xa=sa({name:"Typesetter",dependencies:[Fa,Ra,function(e,t,n){const{defaultFontURL:r}=n,i=Object.create(null),o=1/0,a=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,s="[^\\S\\u00A0]",l=new RegExp(`${s}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function u(t,n){t||(t=r);let o=i[t];o?o.pending?o.pending.push(n):n(o):(i[t]={pending:[n]},function(t,n){!function i(){const o=e=>{console.error(`Failure loading font ${t}${t===r?"":"; trying fallback"}`,e),t!==r&&(t=r,i())};try{const r=new XMLHttpRequest;r.open("get",t,!0),r.responseType="arraybuffer",r.onload=function(){if(r.status>=400)o(new Error(r.statusText));else if(r.status>0)try{const t=e(r.response);n(t)}catch(t){o(t)}},r.onerror=o,r.send()}catch(a){o(a)}}()}(t,(e=>{let n=i[t].pending;i[t]=e,n.forEach((t=>t(e)))})))}function c({text:e="",font:n=r,sdfGlyphSize:i=64,fontSize:c=1,letterSpacing:g=0,lineHeight:m="normal",maxWidth:v=o,direction:y,textAlign:b="left",textIndent:_=0,whiteSpace:w="normal",overflowWrap:x="normal",anchorX:S=0,anchorY:E=0,includeCaretPositions:k=!1,chunkedBoundsSize:T=8192,colorRanges:C=null},M,A=!1){const P=f(),O={fontLoad:0,typesetting:0};e.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),c=+c,g=+g,v=+v,m=m||"normal",_=+_,u(n,(n=>{const r=isFinite(v);let i=null,u=null,U=null,z=null,D=null,L=null,N=null,I=0,R=0,F="nowrap"!==w;const{ascender:G,descender:j,unitsPerEm:B,lineGap:V,capHeight:H,xHeight:W}=n;O.fontLoad=f()-P;const q=f(),$=c/B;"normal"===m&&(m=(G-j+V)/B);const Y=((m*=c)-(G-j)*$)/2,X=-(G*$+Y),Z=Math.min(m,(G-j)*$),K=(G+j)/2*$-Z/2;let Q=_,J=new p;const ee=[J];n.forEachGlyph(e,c,g,((t,n,i)=>{const o=e.charAt(i),u=t.advanceWidth*$,d=J.count;let h;if("isEmpty"in t||(t.isWhitespace=!!o&&new RegExp(s).test(o),t.canBreakAfter=!!o&&l.test(o),t.isEmpty=t.xMin===t.xMax||t.yMin===t.yMax||a.test(o)),t.isWhitespace||t.isEmpty||R++,F&&r&&!t.isWhitespace&&n+u+Q>v&&d){if(J.glyphAt(d-1).glyphObj.canBreakAfter)h=new p,Q=-n;else for(let e=d;e--;){if(0===e&&"break-word"===x){h=new p,Q=-n;break}if(J.glyphAt(e).glyphObj.canBreakAfter){h=J.splitAt(e+1);const t=h.glyphAt(0).x;Q-=t;for(let e=h.count;e--;)h.glyphAt(e).x-=t;break}}h&&(J.isSoftWrapped=!0,J=h,ee.push(J),I=v)}let f=J.glyphAt(J.count);f.glyphObj=t,f.x=n+Q,f.width=u,f.charIndex=i,"\n"===o&&(J=new p,ee.push(J),Q=-(n+u+g*c)+_)})),ee.forEach((e=>{for(let t=e.count;t--;){let{glyphObj:n,x:r,width:i}=e.glyphAt(t);if(!n.isWhitespace)return e.width=r+i,void(e.width>I&&(I=e.width))}}));let te=0,ne=0;if(S&&("number"==typeof S?te=-S:"string"==typeof S&&(te=-I*("left"===S?0:"center"===S?.5:"right"===S?1:d(S)))),E)if("number"==typeof E)ne=-E;else if("string"==typeof E){let e=ee.length*m;ne="top"===E?0:"top-baseline"===E?-X:"top-cap"===E?-X-H*$:"top-ex"===E?-X-W*$:"middle"===E?e/2:"bottom"===E?e:"bottom-baseline"===E?e-Y+j*$:d(E)*e}if(!A){const r=t.getEmbeddingLevels(e,y);i=new Uint16Array(R),u=new Float32Array(2*R),U={},L=[o,o,-o,-o],N=[];let a=X;k&&(D=new Float32Array(3*e.length)),C&&(z=new Uint8Array(3*R));let s,l,c=0,d=-1,f=-1;if(ee.forEach(((p,g)=>{let{count:v,width:y}=p;if(v>0){let g=0;for(let e=v;e--&&p.glyphAt(e).glyphObj.isWhitespace;)g++;let m=0,_=0;if("center"===b)m=(I-y)/2;else if("right"===b)m=I-y;else if("justify"===b&&p.isSoftWrapped){let e=0;for(let t=v-g;t--;)p.glyphAt(t).glyphObj.isWhitespace&&e++;_=(I-y)/e}if(_||m){let e=0;for(let t=0;t<v;t++){let n=p.glyphAt(t);const r=n.glyphObj;n.x+=m+e,0!==_&&r.isWhitespace&&t<v-g&&(e+=_,n.width+=_)}}const w=t.getReorderSegments(e,r,p.glyphAt(0).charIndex,p.glyphAt(p.count-1).charIndex);for(let e=0;e<w.length;e++){const[t,n]=w[e];let r=1/0,i=-1/0;for(let e=0;e<v;e++)if(p.glyphAt(e).charIndex>=t){let t=e,o=e;for(;o<v;o++){let e=p.glyphAt(o);if(e.charIndex>n)break;o<v-g&&(r=Math.min(r,e.x),i=Math.max(i,e.x+e.width))}for(let e=t;e<o;e++){const t=p.glyphAt(e);t.x=i-(t.x+t.width-r)}break}}let x;const S=e=>x=e;for(let y=0;y<v;y++){let g=p.glyphAt(y);x=g.glyphObj;const m=x.index,v=1&r.levels[g.charIndex];if(v){const r=t.getMirroredCharacter(e[g.charIndex]);r&&n.forEachGlyph(r,0,0,S)}if(k){const{charIndex:e}=g,t=g.x+te,n=g.x+g.width+te;D[3*e]=v?n:t,D[3*e+1]=v?t:n,D[3*e+2]=a+K+ne;const r=e-d;r>1&&h(D,d,r),d=e}if(C){const{charIndex:e}=g;for(;e>f;)f++,C.hasOwnProperty(f)&&(l=C[f])}if(!x.isWhitespace&&!x.isEmpty){const e=c++;U[m]||(U[m]={path:x.path,pathBounds:[x.xMin,x.yMin,x.xMax,x.yMax]});const t=g.x+te,n=a+ne;u[2*e]=t,u[2*e+1]=n;const r=t+x.xMin*$,d=n+x.yMin*$,h=t+x.xMax*$,f=n+x.yMax*$;r<L[0]&&(L[0]=r),d<L[1]&&(L[1]=d),h>L[2]&&(L[2]=h),f>L[3]&&(L[3]=f),e%T==0&&(s={start:e,end:e,rect:[o,o,-o,-o]},N.push(s)),s.end++;const p=s.rect;if(r<p[0]&&(p[0]=r),d<p[1]&&(p[1]=d),h>p[2]&&(p[2]=h),f>p[3]&&(p[3]=f),i[e]=m,C){const t=3*e;z[t]=l>>16&255,z[t+1]=l>>8&255,z[t+2]=255&l}}}}a-=m})),D){const t=e.length-d;t>1&&h(D,d,t)}}O.typesetting=f()-q,M({glyphIds:i,glyphPositions:u,glyphData:U,caretPositions:D,caretHeight:Z,glyphColors:z,chunkedBounds:N,fontSize:c,unitsPerEm:B,ascender:G*$,descender:j*$,capHeight:H*$,xHeight:W*$,lineHeight:m,topBaseline:X,blockBounds:[te,ne-ee.length*m,te+I,ne],visibleBounds:L,timings:O})}))}function d(e){let t=e.match(/^([\d.]+)%$/),n=t?parseFloat(t[1]):NaN;return isNaN(n)?0:n/100}function h(e,t,n){const r=e[3*t],i=e[3*t+1],o=e[3*t+2],a=(i-r)/n;for(let s=0;s<n;s++){const n=3*(t+s);e[n]=r+a*s,e[n+1]=r+a*(s+1),e[n+2]=o}}function f(){return(self.performance||Date).now()}function p(){this.data=[]}const g=["glyphObj","x","width","charIndex"];return p.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/g.length)},glyphAt(e){let t=p.flyweight;return t.data=this.data,t.index=e,t},splitAt(e){let t=new p;return t.data=this.data.splice(e*g.length),t}},p.flyweight=g.reduce(((e,t,n,r)=>(Object.defineProperty(e,t,{get(){return this.data[this.index*g.length+n]},set(e){this.data[this.index*g.length+n]=e}}),e)),{data:null,index:0}),{typeset:c,measure:function(e,t){c(e,(e=>{const[n,r,i,o]=e.blockBounds;t({width:i-n,height:o-r})}),{metricsOnly:!0})},loadFont:u}},da],init(e,t,n,r){const{defaultFontURL:i}=e;return n(t,r(),{defaultFontURL:i})}}),Za=sa({name:"Typesetter",dependencies:[Xa],init(e){return function(t){return new Promise((n=>{e.typeset(t,n)}))}},getTransferables(e){const t=[e.glyphPositions.buffer,e.glyphIds.buffer];return e.caretPositions&&t.push(e.caretPositions.buffer),e.glyphColors&&t.push(e.glyphColors.buffer),t}});const Ka={};const Qa="aTroikaGlyphIndex";class Ja extends M.InstancedBufferGeometry{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new M.Sphere,this.boundingBox=new M.Box3}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===M.BackSide?t/2:0,e===M.DoubleSide?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,("number"!=typeof e||e<1)&&(e=1);let t=function(e){let t=Ka[e];if(!t){const n=new M.PlaneGeometry(1,1,e,e),r=n.clone(),i=n.attributes,o=r.attributes,a=new M.BufferGeometry,s=i.uv.count;for(let e=0;e<s;e++)o.position.array[3*e]*=-1,o.normal.array[3*e+2]*=-1;["position","normal","uv"].forEach((e=>{a.setAttribute(e,new M.Float32BufferAttribute([...i[e].array,...o[e].array],i[e].itemSize))})),a.setIndex([...n.index.array,...r.index.array.map((e=>e+s))]),a.translate(.5,.5,0),t=Ka[e]=a}return t}(e);["position","normal","uv"].forEach((e=>{this.attributes[e]=t.attributes[e].clone()})),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,n,r,i){es(this,"aTroikaGlyphBounds",e,4),es(this,Qa,t,1),es(this,"aTroikaGlyphColor",i,3),this._blockBounds=n,this._chunkedBounds=r,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:n}=this;if(t){const{PI:r,floor:i,min:o,max:a,sin:s,cos:l}=Math,u=r/2,c=2*r,d=Math.abs(t),h=e[0]/d,f=e[2]/d,p=i((h+u)/c)!==i((f+u)/c)?-d:o(s(h)*d,s(f)*d),g=i((h-u)/c)!==i((f-u)/c)?d:a(s(h)*d,s(f)*d),m=i((h+r)/c)!==i((f+r)/c)?2*d:a(d-l(h)*d,d-l(f)*d);n.min.set(p,e[1],t<0?-m:0),n.max.set(g,e[3],t<0?0:m)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(Qa).count,n=this._chunkedBounds;if(n)for(let r=n.length;r--;){t=n[r].end;let i=n[r].rect;if(i[1]<e.w&&i[3]>e.y&&i[0]<e.z&&i[2]>e.x)break}this.instanceCount=t}}function es(e,t,n,r){const i=e.getAttribute(t);n?i&&i.array.length===n.length?(i.array.set(n),i.needsUpdate=!0):(e.setAttribute(t,new M.InstancedBufferAttribute(n,r)),delete e._maxInstanceCount,e.dispose()):i&&e.deleteAttribute(t)}const ts=new M.MeshBasicMaterial({color:16777215,side:M.DoubleSide,transparent:!0}),ns=8421504,rs=new M.Matrix4,is=new M.Vector3,os=new M.Vector3,as=[],ss=new M.Vector3,ls="+x+y";function us(e){return Array.isArray(e)?e[0]:e}let cs=()=>{const e=new M.Mesh(new M.PlaneGeometry(1,1),ts);return cs=()=>e,e},ds=()=>{const e=new M.Mesh(new M.PlaneGeometry(1,1,32,1),ts);return ds=()=>e,e};const hs={type:"syncstart"},fs={type:"synccomplete"},ps=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],gs=ps.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class ms extends M.Mesh{constructor(){super(new Ja,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=ns,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=ls,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(hs),Ha({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},(t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync((()=>{n.forEach((e=>e&&e()))}))),this.dispatchEvent(fs),e&&e()}))))}onBeforeRender(e,t,n,r,i,o){this.sync(),i.isTroikaTextMaterial&&this._prepareForRender(i),i._hadOwnSide=i.hasOwnProperty("side"),this.geometry.setSide(i._actualSide=i.side),i.side=M.FrontSide}onAfterRender(e,t,n,r,i,o){i._hadOwnSide?i.side=i._actualSide:delete i.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=ts.clone());if(e&&e.baseMaterial===t||(e=this._derivedMaterial=function(e){const t=_a(e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new M.Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new M.Vector4(0,0,0,0)},uTroikaClipRect:{value:new M.Vector4(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new M.Vector2},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new M.Color},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new M.Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",vertexTransform:"\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n",fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  \n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  \n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n",fragmentColorTransform:"\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n",customRewriter({vertexShader:e,fragmentShader:t}){let n=/\buniform\s+vec3\s+diffuse\b/;return n.test(t)&&(t=t.replace(n,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),n.test(e)||(e=e.replace(ha,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:e,fragmentShader:t}}});return t.transparent=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}(t),t.addEventListener("dispose",(function n(){t.removeEventListener("dispose",n),e.dispose()}))),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let t=e._outlineMtl;return t||(t=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),t.isTextOutlineMaterial=!0,t.depthWrite=!1,t.map=null,e.addEventListener("dispose",(function n(){e.removeEventListener("dispose",n),t.dispose()}))),[t,e]}return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return us(this.material).getDepthMaterial()}get customDistanceMaterial(){return us(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,n=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:e,blockBounds:i}=r;n.uTroikaSDFTexture.value=e,n.uTroikaSDFTextureSize.value.set(e.image.width,e.image.height),n.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,n.uTroikaSDFExponent.value=r.sdfExponent,n.uTroikaTotalBounds.value.fromArray(i),n.uTroikaUseGlyphColors.value=!t&&!!r.glyphColors;let o,a,s,l=0,u=0,c=0,d=0,h=0;if(t){let{outlineWidth:e,outlineOffsetX:t,outlineOffsetY:n,outlineBlur:r,outlineOpacity:i}=this;l=this._parsePercent(e)||0,u=Math.max(0,this._parsePercent(r)||0),o=i,d=this._parsePercent(t)||0,h=this._parsePercent(n)||0}else c=Math.max(0,this._parsePercent(this.strokeWidth)||0),c&&(s=this.strokeColor,n.uTroikaStrokeColor.value.set(null==s?ns:s),a=this.strokeOpacity,null==a&&(a=1)),o=this.fillOpacity;n.uTroikaDistanceOffset.value=l,n.uTroikaPositionOffset.value.set(d,h),n.uTroikaBlurRadius.value=u,n.uTroikaStrokeWidth.value=c,n.uTroikaStrokeOpacity.value=a,n.uTroikaFillOpacity.value=null==o?1:o,n.uTroikaCurveRadius.value=this.curveRadius||0;let f=this.clipRect;if(f&&Array.isArray(f)&&4===f.length)n.uTroikaClipRect.value.fromArray(f);else{const e=100*(this.fontSize||.1);n.uTroikaClipRect.value.set(i[0]-e,i[1]-e,i[2]+e,i[3]+e)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const i=t?this.outlineColor||0:this.color;if(null==i)delete e.color;else{const t=e.hasOwnProperty("color")?e.color:e.color=new M.Color;i===t._input&&"object"!=typeof i||t.set(t._input=i)}let o=this.orientation||ls;if(o!==e._orientation){let t=n.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let r=o!==ls&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(r){let[,e,n,i,o]=r;is.set(0,0,0)[n]="-"===e?1:-1,os.set(0,0,0)[o]="-"===i?-1:1,rs.lookAt(ss,is.cross(os),os),t.setFromMatrix4(rs)}else t.identity();e._orientation=o}}_parsePercent(e){if("string"==typeof e){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new M.Vector2){t.copy(e);const n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e,t=new M.Vector2){return is.copy(e),this.localPositionToTextCoords(this.worldToLocal(is),t)}raycast(e,t){const{textRenderInfo:n,curveRadius:r}=this;if(n){const i=n.blockBounds,o=r?ds():cs(),a=o.geometry,{position:s,uv:l}=a.attributes;for(let e=0;e<l.count;e++){let t=i[0]+l.getX(e)*(i[2]-i[0]);const n=i[1]+l.getY(e)*(i[3]-i[1]);let o=0;r&&(o=r-Math.cos(t/r)*r,t=Math.sin(t/r)*r),s.setXYZ(e,t,n,o)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,as.length=0,o.raycast(e,as);for(let e=0;e<as.length;e++)as[e].object=this,t.push(as[e])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,gs.forEach((t=>{this[t]=e[t]})),this}clone(){return(new this.constructor).copy(this)}}ps.forEach((e=>{const t="_private_"+e;Object.defineProperty(ms.prototype,e,{get(){return this[t]},set(e){e!==this[t]&&(this[t]=e,this._needsSync=!0)}})}));new WeakMap;new WeakMap;const vs=a.forwardRef((({sdfGlyphSize:e=64,anchorX:t="center",anchorY:n="middle",font:r,fontSize:i=1,children:o,characters:s,onSync:l,...u},c)=>{const d=Pe((({invalidate:e})=>e)),[h]=a.useState((()=>new ms)),[f,p]=a.useMemo((()=>{const e=[];let t="";return a.Children.forEach(o,(n=>{"string"==typeof n||"number"==typeof n?t+=n:e.push(n)})),[e,t]}),[o]);return R((()=>new Promise((e=>function({font:e,characters:t,sdfGlyphSize:n},r){Ha({font:e,sdfGlyphSize:n,text:Array.isArray(t)?t.join("\n"):""+t},r)}({font:r,characters:s},e)))),["troika-text",r,s]),a.useLayoutEffect((()=>{h.sync((()=>{d(),l&&l(h)}))})),a.useEffect((()=>()=>h.dispose()),[h]),a.createElement("primitive",(0,He.Z)({object:h,ref:c,font:r,text:p,anchorX:t,anchorY:n,fontSize:i,sdfGlyphSize:e},u),f)}));class ys extends M.Loader{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,t,n,r){const i=this,o=new M.FileLoader(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(n))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)}parse(e){const t=this;function n(e,t,n,i,o,a,s,l){if(0==t||0==n)return void e.lineTo(l.x,l.y);i=i*Math.PI/180,t=Math.abs(t),n=Math.abs(n);const u=(s.x-l.x)/2,c=(s.y-l.y)/2,d=Math.cos(i)*u+Math.sin(i)*c,h=-Math.sin(i)*u+Math.cos(i)*c;let f=t*t,p=n*n;const g=d*d,m=h*h,v=g/f+m/p;if(v>1){const e=Math.sqrt(v);f=(t*=e)*t,p=(n*=e)*n}const y=f*m+p*g,b=(f*p-y)/y;let _=Math.sqrt(Math.max(0,b));o===a&&(_=-_);const w=_*t*h/n,x=-_*n*d/t,S=Math.cos(i)*w-Math.sin(i)*x+(s.x+l.x)/2,E=Math.sin(i)*w+Math.cos(i)*x+(s.y+l.y)/2,k=r(1,0,(d-w)/t,(h-x)/n),T=r((d-w)/t,(h-x)/n,(-d-w)/t,(-h-x)/n)%(2*Math.PI);e.currentPath.absellipse(S,E,t,n,k,k+T,0===a,i)}function r(e,t,n,r){const i=e*n+t*r,o=Math.sqrt(e*e+t*t)*Math.sqrt(n*n+r*r);let a=Math.acos(Math.max(-1,Math.min(1,i/o)));return e*r-t*n<0&&(a=-a),a}function i(e,t){t=Object.assign({},t);let n={};if(e.hasAttribute("class")){const t=e.getAttribute("class").split(/\s/).filter(Boolean).map((e=>e.trim()));for(let e=0;e<t.length;e++)n=Object.assign(n,f["."+t[e]])}function r(r,i,o){void 0===o&&(o=function(e){return e.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),e}),e.hasAttribute(r)&&(t[i]=o(e.getAttribute(r))),n[r]&&(t[i]=o(n[r])),e.style&&""!==e.style[r]&&(t[i]=o(e.style[r]))}function i(e){return Math.max(0,Math.min(1,u(e)))}function o(e){return Math.max(0,u(e))}return e.hasAttribute("id")&&(n=Object.assign(n,f["#"+e.getAttribute("id")])),r("fill","fill"),r("fill-opacity","fillOpacity",i),r("fill-rule","fillRule"),r("opacity","opacity",i),r("stroke","stroke"),r("stroke-opacity","strokeOpacity",i),r("stroke-width","strokeWidth",o),r("stroke-linejoin","strokeLineJoin"),r("stroke-linecap","strokeLineCap"),r("stroke-miterlimit","strokeMiterLimit",o),r("visibility","visibility"),t}function o(e,t){return e-(t-e)}function a(e,t,n){if("string"!=typeof e)throw new TypeError("Invalid input: "+typeof e);const r={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/};let i=0,o=!0,a="",s="";const l=[];function u(e,t,n){const r=new SyntaxError('Unexpected character "'+e+'" at index '+t+".");throw r.partial=n,r}function c(){""!==a&&(""===s?l.push(Number(a)):l.push(Number(a)*Math.pow(10,Number(s)))),a="",s=""}let d;const h=e.length;for(let f=0;f<h;f++)if(d=e[f],Array.isArray(t)&&t.includes(l.length%n)&&r.FLAGS.test(d))i=1,a=d,c();else{if(0===i){if(r.WHITESPACE.test(d))continue;if(r.DIGIT.test(d)||r.SIGN.test(d)){i=1,a=d;continue}if(r.POINT.test(d)){i=2,a=d;continue}r.COMMA.test(d)&&(o&&u(d,f,l),o=!0)}if(1===i){if(r.DIGIT.test(d)){a+=d;continue}if(r.POINT.test(d)){a+=d,i=2;continue}if(r.EXP.test(d)){i=3;continue}r.SIGN.test(d)&&1===a.length&&r.SIGN.test(a[0])&&u(d,f,l)}if(2===i){if(r.DIGIT.test(d)){a+=d;continue}if(r.EXP.test(d)){i=3;continue}r.POINT.test(d)&&"."===a[a.length-1]&&u(d,f,l)}if(3===i){if(r.DIGIT.test(d)){s+=d;continue}if(r.SIGN.test(d)){if(""===s){s+=d;continue}1===s.length&&r.SIGN.test(s)&&u(d,f,l)}}r.WHITESPACE.test(d)?(c(),i=0,o=!1):r.COMMA.test(d)?(c(),i=0,o=!0):r.SIGN.test(d)?(c(),i=1,a=d):r.POINT.test(d)?(c(),i=2,a=d):u(d,f,l)}return c(),l}const s=["mm","cm","in","pt","pc","px"],l={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function u(e){let n,r="px";if("string"==typeof e||e instanceof String)for(let t=0,i=s.length;t<i;t++){const n=s[t];if(e.endsWith(n)){r=n,e=e.substring(0,e.length-n.length);break}}return"px"===r&&"px"!==t.defaultUnit?n=l.in[t.defaultUnit]/t.defaultDPI:(n=l[r][t.defaultUnit],n<0&&(n=l[r].in*t.defaultDPI)),n*parseFloat(e)}function c(e){const t=e.elements;return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function d(e){const t=e.elements;return Math.sqrt(t[3]*t[3]+t[4]*t[4])}const h=[],f={},p=[],g=new M.Matrix3,m=new M.Matrix3,v=new M.Matrix3,y=new M.Matrix3,b=new M.Vector2,_=new M.Vector3,w=new M.Matrix3,x=(new DOMParser).parseFromString(e,"image/svg+xml");!function e(t,r){if(1!==t.nodeType)return;const s=function(e){if(!(e.hasAttribute("transform")||"use"===e.nodeName&&(e.hasAttribute("x")||e.hasAttribute("y"))))return null;const t=function(e){const t=new M.Matrix3,n=g;if("use"===e.nodeName&&(e.hasAttribute("x")||e.hasAttribute("y"))){const n=u(e.getAttribute("x")),r=u(e.getAttribute("y"));t.translate(n,r)}if(e.hasAttribute("transform")){const r=e.getAttribute("transform").split(")");for(let e=r.length-1;e>=0;e--){const i=r[e].trim();if(""===i)continue;const o=i.indexOf("("),s=i.length;if(o>0&&o<s){const e=i.substr(0,o),t=a(i.substr(o+1,s-o-1));switch(n.identity(),e){case"translate":if(t.length>=1){const e=t[0];let r=e;t.length>=2&&(r=t[1]),n.translate(e,r)}break;case"rotate":if(t.length>=1){let e=0,r=0,i=0;e=-t[0]*Math.PI/180,t.length>=3&&(r=t[1],i=t[2]),m.identity().translate(-r,-i),v.identity().rotate(e),y.multiplyMatrices(v,m),m.identity().translate(r,i),n.multiplyMatrices(m,y)}break;case"scale":if(t.length>=1){const e=t[0];let r=e;t.length>=2&&(r=t[1]),n.scale(e,r)}break;case"skewX":1===t.length&&n.set(1,Math.tan(t[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===t.length&&n.set(1,0,0,Math.tan(t[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===t.length&&n.set(t[0],t[2],t[4],t[1],t[3],t[5],0,0,1)}}t.premultiply(n)}}return t}(e);p.length>0&&t.premultiply(p[p.length-1]);return w.copy(t),p.push(t),t}(t);let l=!0,x=null;switch(t.nodeName){case"svg":break;case"style":!function(e){if(!e.sheet||!e.sheet.cssRules||!e.sheet.cssRules.length)return;for(let t=0;t<e.sheet.cssRules.length;t++){const n=e.sheet.cssRules[t];if(1!==n.type)continue;const r=n.selectorText.split(/,/gm).filter(Boolean).map((e=>e.trim()));for(let e=0;e<r.length;e++)f[r[e]]=Object.assign(f[r[e]]||{},n.style)}}(t);break;case"g":r=i(t,r);break;case"path":r=i(t,r),t.hasAttribute("d")&&(x=function(e){const t=new M.ShapePath,r=new M.Vector2,i=new M.Vector2,s=new M.Vector2;let l=!0,u=!1;const c=e.getAttribute("d"),d=c.match(/[a-df-z][^a-df-z]*/gi);for(let h=0,f=d.length;h<f;h++){const e=d[h],c=e.charAt(0),f=e.substr(1).trim();let p;switch(!0===l&&(u=!0,l=!1),c){case"M":p=a(f);for(let e=0,n=p.length;e<n;e+=2)r.x=p[e+0],r.y=p[e+1],i.x=r.x,i.y=r.y,0===e?t.moveTo(r.x,r.y):t.lineTo(r.x,r.y),0===e&&s.copy(r);break;case"H":p=a(f);for(let e=0,n=p.length;e<n;e++)r.x=p[e],i.x=r.x,i.y=r.y,t.lineTo(r.x,r.y),0===e&&!0===u&&s.copy(r);break;case"V":p=a(f);for(let e=0,n=p.length;e<n;e++)r.y=p[e],i.x=r.x,i.y=r.y,t.lineTo(r.x,r.y),0===e&&!0===u&&s.copy(r);break;case"L":p=a(f);for(let e=0,n=p.length;e<n;e+=2)r.x=p[e+0],r.y=p[e+1],i.x=r.x,i.y=r.y,t.lineTo(r.x,r.y),0===e&&!0===u&&s.copy(r);break;case"C":p=a(f);for(let e=0,n=p.length;e<n;e+=6)t.bezierCurveTo(p[e+0],p[e+1],p[e+2],p[e+3],p[e+4],p[e+5]),i.x=p[e+2],i.y=p[e+3],r.x=p[e+4],r.y=p[e+5],0===e&&!0===u&&s.copy(r);break;case"S":p=a(f);for(let e=0,n=p.length;e<n;e+=4)t.bezierCurveTo(o(r.x,i.x),o(r.y,i.y),p[e+0],p[e+1],p[e+2],p[e+3]),i.x=p[e+0],i.y=p[e+1],r.x=p[e+2],r.y=p[e+3],0===e&&!0===u&&s.copy(r);break;case"Q":p=a(f);for(let e=0,n=p.length;e<n;e+=4)t.quadraticCurveTo(p[e+0],p[e+1],p[e+2],p[e+3]),i.x=p[e+0],i.y=p[e+1],r.x=p[e+2],r.y=p[e+3],0===e&&!0===u&&s.copy(r);break;case"T":p=a(f);for(let e=0,n=p.length;e<n;e+=2){const n=o(r.x,i.x),a=o(r.y,i.y);t.quadraticCurveTo(n,a,p[e+0],p[e+1]),i.x=n,i.y=a,r.x=p[e+0],r.y=p[e+1],0===e&&!0===u&&s.copy(r)}break;case"A":p=a(f,[3,4],7);for(let e=0,o=p.length;e<o;e+=7){if(p[e+5]==r.x&&p[e+6]==r.y)continue;const o=r.clone();r.x=p[e+5],r.y=p[e+6],i.x=r.x,i.y=r.y,n(t,p[e],p[e+1],p[e+2],p[e+3],p[e+4],o,r),0===e&&!0===u&&s.copy(r)}break;case"m":p=a(f);for(let e=0,n=p.length;e<n;e+=2)r.x+=p[e+0],r.y+=p[e+1],i.x=r.x,i.y=r.y,0===e?t.moveTo(r.x,r.y):t.lineTo(r.x,r.y),0===e&&s.copy(r);break;case"h":p=a(f);for(let e=0,n=p.length;e<n;e++)r.x+=p[e],i.x=r.x,i.y=r.y,t.lineTo(r.x,r.y),0===e&&!0===u&&s.copy(r);break;case"v":p=a(f);for(let e=0,n=p.length;e<n;e++)r.y+=p[e],i.x=r.x,i.y=r.y,t.lineTo(r.x,r.y),0===e&&!0===u&&s.copy(r);break;case"l":p=a(f);for(let e=0,n=p.length;e<n;e+=2)r.x+=p[e+0],r.y+=p[e+1],i.x=r.x,i.y=r.y,t.lineTo(r.x,r.y),0===e&&!0===u&&s.copy(r);break;case"c":p=a(f);for(let e=0,n=p.length;e<n;e+=6)t.bezierCurveTo(r.x+p[e+0],r.y+p[e+1],r.x+p[e+2],r.y+p[e+3],r.x+p[e+4],r.y+p[e+5]),i.x=r.x+p[e+2],i.y=r.y+p[e+3],r.x+=p[e+4],r.y+=p[e+5],0===e&&!0===u&&s.copy(r);break;case"s":p=a(f);for(let e=0,n=p.length;e<n;e+=4)t.bezierCurveTo(o(r.x,i.x),o(r.y,i.y),r.x+p[e+0],r.y+p[e+1],r.x+p[e+2],r.y+p[e+3]),i.x=r.x+p[e+0],i.y=r.y+p[e+1],r.x+=p[e+2],r.y+=p[e+3],0===e&&!0===u&&s.copy(r);break;case"q":p=a(f);for(let e=0,n=p.length;e<n;e+=4)t.quadraticCurveTo(r.x+p[e+0],r.y+p[e+1],r.x+p[e+2],r.y+p[e+3]),i.x=r.x+p[e+0],i.y=r.y+p[e+1],r.x+=p[e+2],r.y+=p[e+3],0===e&&!0===u&&s.copy(r);break;case"t":p=a(f);for(let e=0,n=p.length;e<n;e+=2){const n=o(r.x,i.x),a=o(r.y,i.y);t.quadraticCurveTo(n,a,r.x+p[e+0],r.y+p[e+1]),i.x=n,i.y=a,r.x=r.x+p[e+0],r.y=r.y+p[e+1],0===e&&!0===u&&s.copy(r)}break;case"a":p=a(f,[3,4],7);for(let e=0,o=p.length;e<o;e+=7){if(0==p[e+5]&&0==p[e+6])continue;const o=r.clone();r.x+=p[e+5],r.y+=p[e+6],i.x=r.x,i.y=r.y,n(t,p[e],p[e+1],p[e+2],p[e+3],p[e+4],o,r),0===e&&!0===u&&s.copy(r)}break;case"Z":case"z":t.currentPath.autoClose=!0,t.currentPath.curves.length>0&&(r.copy(s),t.currentPath.currentPoint.copy(r),l=!0);break;default:console.warn(e)}u=!1}return t}(t));break;case"rect":r=i(t,r),x=function(e){const t=u(e.getAttribute("x")||0),n=u(e.getAttribute("y")||0),r=u(e.getAttribute("rx")||e.getAttribute("ry")||0),i=u(e.getAttribute("ry")||e.getAttribute("rx")||0),o=u(e.getAttribute("width")),a=u(e.getAttribute("height")),s=.448084975506,l=new M.ShapePath;l.moveTo(t+r,n),l.lineTo(t+o-r,n),(0!==r||0!==i)&&l.bezierCurveTo(t+o-r*s,n,t+o,n+i*s,t+o,n+i);l.lineTo(t+o,n+a-i),(0!==r||0!==i)&&l.bezierCurveTo(t+o,n+a-i*s,t+o-r*s,n+a,t+o-r,n+a);l.lineTo(t+r,n+a),(0!==r||0!==i)&&l.bezierCurveTo(t+r*s,n+a,t,n+a-i*s,t,n+a-i);l.lineTo(t,n+i),(0!==r||0!==i)&&l.bezierCurveTo(t,n+i*s,t+r*s,n,t+r,n);return l}(t);break;case"polygon":r=i(t,r),x=function(e){function t(e,t,n){const o=u(t),a=u(n);0===i?r.moveTo(o,a):r.lineTo(o,a),i++}const n=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,r=new M.ShapePath;let i=0;return e.getAttribute("points").replace(n,t),r.currentPath.autoClose=!0,r}(t);break;case"polyline":r=i(t,r),x=function(e){function t(e,t,n){const o=u(t),a=u(n);0===i?r.moveTo(o,a):r.lineTo(o,a),i++}const n=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,r=new M.ShapePath;let i=0;return e.getAttribute("points").replace(n,t),r.currentPath.autoClose=!1,r}(t);break;case"circle":r=i(t,r),x=function(e){const t=u(e.getAttribute("cx")||0),n=u(e.getAttribute("cy")||0),r=u(e.getAttribute("r")||0),i=new M.Path;i.absarc(t,n,r,0,2*Math.PI);const o=new M.ShapePath;return o.subPaths.push(i),o}(t);break;case"ellipse":r=i(t,r),x=function(e){const t=u(e.getAttribute("cx")||0),n=u(e.getAttribute("cy")||0),r=u(e.getAttribute("rx")||0),i=u(e.getAttribute("ry")||0),o=new M.Path;o.absellipse(t,n,r,i,0,2*Math.PI);const a=new M.ShapePath;return a.subPaths.push(o),a}(t);break;case"line":r=i(t,r),x=function(e){const t=u(e.getAttribute("x1")||0),n=u(e.getAttribute("y1")||0),r=u(e.getAttribute("x2")||0),i=u(e.getAttribute("y2")||0),o=new M.ShapePath;return o.moveTo(t,n),o.lineTo(r,i),o.currentPath.autoClose=!1,o}(t);break;case"defs":case"mask":l=!1;break;case"use":r=i(t,r);const s=t.href.baseVal.substring(1),c=t.viewportElement.getElementById(s);c?e(c,r):console.warn("SVGLoader: 'use node' references non-existent node id: "+s)}if(x&&(void 0!==r.fill&&"none"!==r.fill&&x.color.setStyle(r.fill),function(e,t){function n(e){_.set(e.x,e.y,1).applyMatrix3(t),e.set(_.x,_.y)}const r=function(e){return 0!==e.elements[1]||0!==e.elements[3]}(t),i=e.subPaths;for(let o=0,a=i.length;o<a;o++){const e=i[o].curves;for(let i=0;i<e.length;i++){const o=e[i];o.isLineCurve?(n(o.v1),n(o.v2)):o.isCubicBezierCurve?(n(o.v0),n(o.v1),n(o.v2),n(o.v3)):o.isQuadraticBezierCurve?(n(o.v0),n(o.v1),n(o.v2)):o.isEllipseCurve&&(r&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),b.set(o.aX,o.aY),n(b),o.aX=b.x,o.aY=b.y,o.xRadius*=c(t),o.yRadius*=d(t))}}}(x,w),h.push(x),x.userData={node:t,style:r}),l){const n=t.childNodes;for(let t=0;t<n.length;t++)e(n[t],r)}s&&(p.pop(),p.length>0?w.copy(p[p.length-1]):w.identity())}(x.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4});return{paths:h,xml:x.documentElement}}static createShapes(e){const t=999999999,n=0,r=1,i=2,o=3,a=4,s=5,l=6,u={loc:n,t:0};function c(e,t,r,o){const a=e.x,s=t.x,l=r.x,c=o.x,h=e.y,f=t.y,p=r.y,g=o.y,m=(c-l)*(h-p)-(g-p)*(a-l),v=(g-p)*(s-a)-(c-l)*(f-h),y=m/v,b=((s-a)*(h-p)-(f-h)*(a-l))/v;if(0===v&&0!==m||y<=0||y>=1||b<0||b>1)return null;if(0===m&&0===v){for(let l=0;l<2;l++){if(d(0===l?r:o,e,t),u.loc==n){const e=0===l?r:o;return{x:e.x,y:e.y,t:u.t}}if(u.loc==i){return{x:+(a+u.t*(s-a)).toPrecision(10),y:+(h+u.t*(f-h)).toPrecision(10),t:u.t}}}return null}for(let i=0;i<2;i++)if(d(0===i?r:o,e,t),u.loc==n){const e=0===i?r:o;return{x:e.x,y:e.y,t:u.t}}return{x:+(a+y*(s-a)).toPrecision(10),y:+(h+y*(f-h)).toPrecision(10),t:y}}function d(e,t,c){const d=c.x-t.x,h=c.y-t.y,f=e.x-t.x,p=e.y-t.y,g=d*p-f*h;if(e.x===t.x&&e.y===t.y)return u.loc=n,void(u.t=0);if(e.x===c.x&&e.y===c.y)return u.loc=r,void(u.t=1);if(g<-Number.EPSILON)return void(u.loc=o);if(g>Number.EPSILON)return void(u.loc=a);if(d*f<0||h*p<0)return void(u.loc=s);if(Math.sqrt(d*d+h*h)<Math.sqrt(f*f+p*p))return void(u.loc=l);let m;m=0!==d?f/d:p/h,u.loc=i,u.t=m}function h(e,t,n){const r=new M.Vector2;t.getCenter(r);const i=[];return n.forEach((t=>{if(t.boundingBox.containsPoint(r)){const n=function(e,t){const n=[],r=[];for(let i=1;i<e.length;i++){const o=e[i-1],a=e[i];for(let e=1;e<t.length;e++){const i=c(o,a,t[e-1],t[e]);null!==i&&void 0===n.find((e=>e.t<=i.t+Number.EPSILON&&e.t>=i.t-Number.EPSILON))&&(n.push(i),r.push(new M.Vector2(i.x,i.y)))}}return r}(e,t.points);n.forEach((e=>{i.push({identifier:t.identifier,isCW:t.isCW,point:e})}))}})),i.sort(((e,t)=>e.point.x-t.point.x)),i}let f=0,p=t,g=-999999999,m=e.subPaths.map((e=>{const n=e.getPoints();let r=-999999999,i=t,o=-999999999,a=t;for(let t=0;t<n.length;t++){const e=n[t];e.y>r&&(r=e.y),e.y<i&&(i=e.y),e.x>o&&(o=e.x),e.x<a&&(a=e.x)}return g<=o&&(g=o+1),p>=a&&(p=a-1),{curves:e.curves,points:n,isCW:M.ShapeUtils.isClockWise(n),identifier:f++,boundingBox:new M.Box2(new M.Vector2(a,i),new M.Vector2(o,r))}}));m=m.filter((e=>e.points.length>1));const v=m.map((t=>function(e,t,n,r,i){null!=i&&""!==i||(i="nonzero");const o=new M.Vector2;e.boundingBox.getCenter(o);const a=h([new M.Vector2(n,o.y),new M.Vector2(r,o.y)],e.boundingBox,t);a.sort(((e,t)=>e.point.x-t.point.x));const s=[],l=[];a.forEach((t=>{t.identifier===e.identifier?s.push(t):l.push(t)}));const u=s[0].point.x,c=[];let d=0;for(;d<l.length&&l[d].point.x<u;)c.length>0&&c[c.length-1]===l[d].identifier?c.pop():c.push(l[d].identifier),d++;if(c.push(e.identifier),"evenodd"===i){const t=c.length%2==0,n=c[c.length-2];return{identifier:e.identifier,isHole:t,for:n}}if("nonzero"===i){let n=!0,r=null,i=null;for(let e=0;e<c.length;e++){const o=c[e];n?(i=t[o].isCW,n=!1,r=o):i!==t[o].isCW&&(i=t[o].isCW,n=!0)}return{identifier:e.identifier,isHole:n,for:r}}console.warn('fill-rule: "'+i+'" is currently not implemented.')}(t,m,p,g,e.userData.style.fillRule))),y=[];return m.forEach((e=>{if(!v[e.identifier].isHole){const t=new M.Shape;t.curves=e.curves;v.filter((t=>t.isHole&&t.for===e.identifier)).forEach((e=>{const n=m[e.identifier],r=new M.Path;r.curves=n.curves,t.holes.push(r)})),y.push(t)}})),y}static getStrokeStyle(e,t,n,r,i){return{strokeColor:t=void 0!==t?t:"#000",strokeWidth:e=void 0!==e?e:1,strokeLineJoin:n=void 0!==n?n:"miter",strokeLineCap:r=void 0!==r?r:"butt",strokeMiterLimit:i=void 0!==i?i:4}}static pointsToStroke(e,t,n,r){const i=[],o=[],a=[];if(0===ys.pointsToStrokeWithBuffers(e,t,n,r,i,o,a))return null;const s=new M.BufferGeometry;return s.setAttribute("position",new M.Float32BufferAttribute(i,3)),s.setAttribute("normal",new M.Float32BufferAttribute(o,3)),s.setAttribute("uv",new M.Float32BufferAttribute(a,2)),s}static pointsToStrokeWithBuffers(e,t,n,r,i,o,a,s){const l=new M.Vector2,u=new M.Vector2,c=new M.Vector2,d=new M.Vector2,h=new M.Vector2,f=new M.Vector2,p=new M.Vector2,g=new M.Vector2,m=new M.Vector2,v=new M.Vector2,y=new M.Vector2,b=new M.Vector2,_=new M.Vector2,w=new M.Vector2,x=new M.Vector2,S=new M.Vector2,E=new M.Vector2;n=void 0!==n?n:12,r=void 0!==r?r:.001,s=void 0!==s?s:0,e=function(e){let t=!1;for(let i=1,o=e.length-1;i<o;i++)if(e[i].distanceTo(e[i+1])<r){t=!0;break}if(!t)return e;const n=[];n.push(e[0]);for(let i=1,o=e.length-1;i<o;i++)e[i].distanceTo(e[i+1])>=r&&n.push(e[i]);return n.push(e[e.length-1]),n}(e);const k=e.length;if(k<2)return 0;const T=e[0].equals(e[k-1]);let C,A,P=e[0];const O=t.strokeWidth/2,U=1/(k-1);let z,D,L,N,I=0,R=!1,F=0,G=3*s,j=2*s;B(e[0],e[1],l).multiplyScalar(O),g.copy(e[0]).sub(l),m.copy(e[0]).add(l),v.copy(g),y.copy(m);for(let M=1;M<k;M++){C=e[M],A=M===k-1?T?e[1]:void 0:e[M+1];const n=l;if(B(P,C,n),c.copy(n).multiplyScalar(O),b.copy(C).sub(c),_.copy(C).add(c),z=I+U,D=!1,void 0!==A){B(C,A,u),c.copy(u).multiplyScalar(O),w.copy(C).sub(c),x.copy(C).add(c),L=!0,c.subVectors(A,P),n.dot(c)<0&&(L=!1),1===M&&(R=L),c.subVectors(A,C),c.normalize();const e=Math.abs(n.dot(c));if(0!==e){const n=O/e;c.multiplyScalar(-n),d.subVectors(C,P),h.copy(d).setLength(n).add(c),S.copy(h).negate();const r=h.length(),i=d.length();d.divideScalar(i),f.subVectors(A,C);const o=f.length();switch(f.divideScalar(o),d.dot(S)<i&&f.dot(S)<o&&(D=!0),E.copy(h).add(C),S.add(C),N=!1,D?L?(x.copy(S),_.copy(S)):(w.copy(S),b.copy(S)):W(),t.strokeLineJoin){case"bevel":q(L,D,z);break;case"round":$(L,D),L?H(C,b,w,z,0):H(C,x,_,z,1);break;default:const e=O*t.strokeMiterLimit/r;if(e<1){if("miter-clip"!==t.strokeLineJoin){q(L,D,z);break}$(L,D),L?(f.subVectors(E,b).multiplyScalar(e).add(b),p.subVectors(E,w).multiplyScalar(e).add(w),V(b,z,0),V(f,z,0),V(C,z,.5),V(C,z,.5),V(f,z,0),V(p,z,0),V(C,z,.5),V(p,z,0),V(w,z,0)):(f.subVectors(E,_).multiplyScalar(e).add(_),p.subVectors(E,x).multiplyScalar(e).add(x),V(_,z,1),V(f,z,1),V(C,z,.5),V(C,z,.5),V(f,z,1),V(p,z,1),V(C,z,.5),V(p,z,1),V(x,z,1))}else D?(L?(V(m,I,1),V(g,I,0),V(E,z,0),V(m,I,1),V(E,z,0),V(S,z,1)):(V(m,I,1),V(g,I,0),V(E,z,1),V(g,I,0),V(S,z,0),V(E,z,1)),L?w.copy(E):x.copy(E)):L?(V(b,z,0),V(E,z,0),V(C,z,.5),V(C,z,.5),V(E,z,0),V(w,z,0)):(V(_,z,1),V(E,z,1),V(C,z,.5),V(C,z,.5),V(E,z,1),V(x,z,1)),N=!0}}else W()}else W();T||M!==k-1||Y(e[0],v,y,L,!0,I),I=z,P=C,g.copy(w),m.copy(x)}if(T){if(D&&i){let e=E,t=S;R!==L&&(e=S,t=E),L?(N||R)&&(t.toArray(i,0),t.toArray(i,9),N&&e.toArray(i,3)):!N&&R||(t.toArray(i,3),t.toArray(i,9),N&&e.toArray(i,0))}}else Y(C,b,_,L,!1,z);return F;function B(e,t,n){return n.subVectors(t,e),n.set(-n.y,n.x).normalize()}function V(e,t,n){i&&(i[G]=e.x,i[G+1]=e.y,i[G+2]=0,o&&(o[G]=0,o[G+1]=0,o[G+2]=1),G+=3,a&&(a[j]=t,a[j+1]=n,j+=2)),F+=3}function H(e,t,r,i,o){l.copy(t).sub(e).normalize(),u.copy(r).sub(e).normalize();let a=Math.PI;const s=l.dot(u);Math.abs(s)<1&&(a=Math.abs(Math.acos(s))),a/=n,c.copy(t);for(let l=0,u=n-1;l<u;l++)d.copy(c).rotateAround(e,a),V(c,i,o),V(d,i,o),V(e,i,.5),c.copy(d);V(d,i,o),V(r,i,o),V(e,i,.5)}function W(){V(m,I,1),V(g,I,0),V(b,z,0),V(m,I,1),V(b,z,1),V(_,z,0)}function q(e,t,n){t?e?(V(m,I,1),V(g,I,0),V(b,z,0),V(m,I,1),V(b,z,0),V(S,z,1),V(b,n,0),V(w,n,0),V(S,n,.5)):(V(m,I,1),V(g,I,0),V(_,z,1),V(g,I,0),V(S,z,0),V(_,z,1),V(_,n,1),V(x,n,0),V(S,n,.5)):e?(V(b,n,0),V(w,n,0),V(C,n,.5)):(V(_,n,1),V(x,n,0),V(C,n,.5))}function $(e,t){t&&(e?(V(m,I,1),V(g,I,0),V(b,z,0),V(m,I,1),V(b,z,0),V(S,z,1),V(b,I,0),V(C,z,.5),V(S,z,1),V(C,z,.5),V(w,I,0),V(S,z,1)):(V(m,I,1),V(g,I,0),V(_,z,1),V(g,I,0),V(S,z,0),V(_,z,1),V(_,I,1),V(S,z,0),V(C,z,.5),V(C,z,.5),V(S,z,0),V(x,I,1)))}function Y(e,n,r,o,a,s){switch(t.strokeLineCap){case"round":a?H(e,r,n,s,.5):H(e,n,r,s,.5);break;case"square":if(a)l.subVectors(n,e),u.set(l.y,-l.x),c.addVectors(l,u).add(e),d.subVectors(u,l).add(e),o?(c.toArray(i,3),d.toArray(i,0),d.toArray(i,9)):(c.toArray(i,3),c.toArray(i,9),d.toArray(i,0));else{l.subVectors(r,e),u.set(l.y,-l.x),c.addVectors(l,u).add(e),d.subVectors(u,l).add(e);const t=i.length;o?(c.toArray(i,t-3),d.toArray(i,t-6),d.toArray(i,t-12)):(c.toArray(i,t-6),d.toArray(i,t-3),d.toArray(i,t-12))}}}}}const bs=(0,a.forwardRef)((function({src:e,skipFill:t,skipStrokes:n,fillMaterial:r,strokeMaterial:i,fillMeshProps:o,strokeMeshProps:s,...l},u){const c=ze(ys,e.startsWith("<svg")?`data:image/svg+xml;utf8,${e}`:e),d=(0,a.useMemo)((()=>n?[]:c.paths.map((e=>{var t;return void 0===(null==(t=e.userData)?void 0:t.style.stroke)||"none"===e.userData.style.stroke?null:e.subPaths.map((t=>ys.pointsToStroke(t.getPoints(),e.userData.style)))}))),[c,n]);return(0,a.useEffect)((()=>()=>d.forEach((e=>e&&e.map((e=>e.dispose()))))),[d]),a.createElement("object3D",(0,He.Z)({ref:u},l),a.createElement("object3D",{scale:[1,-1,1]},c.paths.map(((e,l)=>{var u,c;return a.createElement(a.Fragment,{key:l},!t&&void 0!==(null==(u=e.userData)?void 0:u.style.fill)&&"none"!==e.userData.style.fill&&ys.createShapes(e).map(((t,n)=>a.createElement("mesh",(0,He.Z)({key:n},o),a.createElement("shapeGeometry",{args:[t]}),a.createElement("meshBasicMaterial",(0,He.Z)({color:e.userData.style.fill,opacity:e.userData.style.fillOpacity,transparent:!0,side:M.DoubleSide,depthWrite:!1},r))))),!n&&void 0!==(null==(c=e.userData)?void 0:c.style.stroke)&&"none"!==e.userData.style.stroke&&e.subPaths.map(((t,n)=>a.createElement("mesh",(0,He.Z)({key:n,geometry:d[l][n]},s),a.createElement("meshBasicMaterial",(0,He.Z)({color:e.userData.style.stroke,opacity:e.userData.style.strokeOpacity,transparent:!0,side:M.DoubleSide,depthWrite:!1},i))))))}))))}));function _s(e,t="pointer",n="auto"){a.useEffect((()=>{if(e)return document.body.style.cursor=t,()=>{document.body.style.cursor=n}}),[e])}var ws=n(7634);const xs=new M.Vector3,Ss=new M.Vector3,Es=new M.Vector3;function ks(e,t,n){const r=xs.setFromMatrixPosition(e.matrixWorld);r.project(t);const i=n.width/2,o=n.height/2;return[r.x*i+i,-r.y*o+o]}const Ts=e=>Math.abs(e)<1e-10?0:e;function Cs(e,t,n=""){let r="matrix3d(";for(let i=0;16!==i;i++)r+=Ts(t[i]*e.elements[i])+(15!==i?",":")");return n+r}const Ms=(As=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],e=>Cs(e,As));var As;const Ps=(e,t)=>{return Cs(e,[1/(n=t),1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1],"translate(-50%,-50%)");var n};const Os=a.forwardRef((({children:e,eps:t=.001,style:n,className:r,prepend:i,center:o,fullscreen:s,portal:l,distanceFactor:u,sprite:c=!1,transform:d=!1,occlude:h,onOcclude:f,castShadow:p,receiveShadow:g,material:m,geometry:v,zIndexRange:y=[16777271,0],calculatePosition:b=ks,as:_="div",wrapperClass:w,pointerEvents:x="auto",...S},E)=>{const{gl:k,camera:T,scene:C,size:A,raycaster:P,events:O,viewport:U}=Pe(),[z]=a.useState((()=>document.createElement(_))),D=a.useRef(),L=a.useRef(null),N=a.useRef(0),I=a.useRef([0,0]),R=a.useRef(null),F=a.useRef(null),G=(null==l?void 0:l.current)||O.connected||k.domElement.parentNode,j=a.useRef(null),B=a.useRef(!1),V=a.useMemo((()=>h&&"blending"!==h||Array.isArray(h)&&h.length&&function(e){return e&&"object"==typeof e&&"current"in e}(h[0])),[h]);a.useLayoutEffect((()=>{const e=k.domElement;h&&"blending"===h?(e.style.zIndex=`${Math.floor(y[0]/2)}`,e.style.position="absolute",e.style.pointerEvents="none"):(e.style.zIndex=null,e.style.position=null,e.style.pointerEvents=null)}),[h]),a.useLayoutEffect((()=>{if(L.current){const e=D.current=ws.createRoot(z);if(C.updateMatrixWorld(),d)z.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const e=b(L.current,T,A);z.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${e[0]}px,${e[1]}px,0);transform-origin:0 0;`}return G&&(i?G.prepend(z):G.appendChild(z)),()=>{G&&G.removeChild(z),e.unmount()}}}),[G,d]),a.useLayoutEffect((()=>{w&&(z.className=w)}),[w]);const H=a.useMemo((()=>d?{position:"absolute",top:0,left:0,width:A.width,height:A.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:o?"translate3d(-50%,-50%,0)":"none",...s&&{top:-A.height/2,left:-A.width/2,width:A.width,height:A.height},...n}),[n,o,s,A,d]),W=a.useMemo((()=>({position:"absolute",pointerEvents:x})),[x]);a.useLayoutEffect((()=>{var t,i;(B.current=!1,d)?null==(t=D.current)||t.render(a.createElement("div",{ref:R,style:H},a.createElement("div",{ref:F,style:W},a.createElement("div",{ref:E,className:r,style:n,children:e})))):null==(i=D.current)||i.render(a.createElement("div",{ref:E,style:H,className:r,children:e}))}));const q=a.useRef(!0);Oe((e=>{if(L.current){T.updateMatrixWorld(),L.current.updateWorldMatrix(!0,!1);const e=d?I.current:b(L.current,T,A);if(d||Math.abs(N.current-T.zoom)>t||Math.abs(I.current[0]-e[0])>t||Math.abs(I.current[1]-e[1])>t){const t=function(e,t){const n=xs.setFromMatrixPosition(e.matrixWorld),r=Ss.setFromMatrixPosition(t.matrixWorld),i=n.sub(r),o=t.getWorldDirection(Es);return i.angleTo(o)>Math.PI/2}(L.current,T);let n=!1;V&&("blending"!==h?n=[C]:Array.isArray(h)&&(n=h.map((e=>e.current))));const r=q.current;if(n){const e=function(e,t,n,r){const i=xs.setFromMatrixPosition(e.matrixWorld),o=i.clone();o.project(t),n.setFromCamera(o,t);const a=n.intersectObjects(r,!0);if(a.length){const e=a[0].distance;return i.distanceTo(n.ray.origin)<e}return!0}(L.current,T,P,n);q.current=e&&!t}else q.current=!t;r!==q.current&&(f?f(!q.current):z.style.display=q.current?"block":"none");const i=Math.floor(y[0]/2),o=h?V?[y[0],i]:[i-1,0]:y;if(z.style.zIndex=`${function(e,t,n){if(t instanceof M.PerspectiveCamera||t instanceof M.OrthographicCamera){const r=xs.setFromMatrixPosition(e.matrixWorld),i=Ss.setFromMatrixPosition(t.matrixWorld),o=r.distanceTo(i),a=(n[1]-n[0])/(t.far-t.near),s=n[1]-a*t.far;return Math.round(a*o+s)}}(L.current,T,o)}`,d){const[e,t]=[A.width/2,A.height/2],n=T.projectionMatrix.elements[5]*t,{isOrthographicCamera:r,top:i,left:o,bottom:a,right:s}=T,l=Ms(T.matrixWorldInverse),d=r?`scale(${n})translate(${Ts(-(s+o)/2)}px,${Ts((i+a)/2)}px)`:`translateZ(${n}px)`;let h=L.current.matrixWorld;c&&(h=T.matrixWorldInverse.clone().transpose().copyPosition(h).scale(L.current.scale),h.elements[3]=h.elements[7]=h.elements[11]=0,h.elements[15]=1),z.style.width=A.width+"px",z.style.height=A.height+"px",z.style.perspective=r?"":`${n}px`,R.current&&F.current&&(R.current.style.transform=`${d}${l}translate(${e}px,${t}px)`,F.current.style.transform=Ps(h,1/((u||10)/400)))}else{const t=void 0===u?1:function(e,t){if(t instanceof M.OrthographicCamera)return t.zoom;if(t instanceof M.PerspectiveCamera){const n=xs.setFromMatrixPosition(e.matrixWorld),r=Ss.setFromMatrixPosition(t.matrixWorld),i=t.fov*Math.PI/180,o=n.distanceTo(r);return 1/(2*Math.tan(i/2)*o)}return 1}(L.current,T)*u;z.style.transform=`translate3d(${e[0]}px,${e[1]}px,0) scale(${t})`}I.current=e,N.current=T.zoom}}if(!V&&j.current&&!B.current)if(d){if(R.current){const e=R.current.children[0];if(null!=e&&e.clientWidth&&null!=e&&e.clientHeight){const{isOrthographicCamera:t}=T;if(t||v)S.scale&&(Array.isArray(S.scale)?S.scale instanceof M.Vector3?j.current.scale.copy(S.scale.clone().divideScalar(1)):j.current.scale.set(1/S.scale[0],1/S.scale[1],1/S.scale[2]):j.current.scale.setScalar(1/S.scale));else{const t=(u||10)/400,n=e.clientWidth*t,r=e.clientHeight*t;j.current.scale.set(n,r,1)}B.current=!0}}}else{const t=z.children[0];if(null!=t&&t.clientWidth&&null!=t&&t.clientHeight){const e=1/U.factor,n=t.clientWidth*e,r=t.clientHeight*e;j.current.scale.set(n,r,1),B.current=!0}j.current.lookAt(e.camera.position)}}));const $=a.useMemo((()=>({vertexShader:d?void 0:'\n          /*\n            This shader is from the THREE\'s SpriteMaterial.\n            We need to turn the backing plane into a Sprite\n            (make it always face the camera) if "transfrom" \n            is false. \n          */\n          #include <common>\n\n          void main() {\n            vec2 center = vec2(0., 1.);\n            float rotation = 0.0;\n            \n            // This is somewhat arbitrary, but it seems to work well\n            // Need to figure out how to derive this dynamically if it even matters\n            float size = 0.03;\n\n            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n            vec2 scale;\n            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n            bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n            if ( isPerspective ) scale *= - mvPosition.z;\n\n            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;\n            vec2 rotatedPosition;\n            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n            mvPosition.xy += rotatedPosition;\n\n            gl_Position = projectionMatrix * mvPosition;\n          }\n      ',fragmentShader:"\n        void main() {\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        }\n      "})),[d]);return a.createElement("group",(0,He.Z)({},S,{ref:L}),h&&!V&&a.createElement("mesh",{castShadow:p,receiveShadow:g,ref:j},v||a.createElement("planeGeometry",null),m||a.createElement("shaderMaterial",{side:M.DoubleSide,vertexShader:$.vertexShader,fragmentShader:$.fragmentShader})))}));var Us=n(7922);let zs=Xs();const Ds=e=>Ws(e,zs);let Ls=Xs();Ds.write=e=>Ws(e,Ls);let Ns=Xs();Ds.onStart=e=>Ws(e,Ns);let Is=Xs();Ds.onFrame=e=>Ws(e,Is);let Rs=Xs();Ds.onFinish=e=>Ws(e,Rs);let Fs=[];Ds.setTimeout=(e,t)=>{let n=Ds.now()+t,r=()=>{let e=Fs.findIndex((e=>e.cancel==r));~e&&Fs.splice(e,1),Vs-=~e?1:0},i={time:n,handler:e,cancel:r};return Fs.splice(Gs(n),0,i),Vs+=1,qs(),i};let Gs=e=>~(~Fs.findIndex((t=>t.time>e))||~Fs.length);Ds.cancel=e=>{Ns.delete(e),Is.delete(e),Rs.delete(e),zs.delete(e),Ls.delete(e)},Ds.sync=e=>{Hs=!0,Ds.batchedUpdates(e),Hs=!1},Ds.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...e){t=e,Ds.onStart(n)}return r.handler=e,r.cancel=()=>{Ns.delete(n),t=null},r};let js="undefined"!=typeof window?window.requestAnimationFrame:()=>{};Ds.use=e=>js=e,Ds.now="undefined"!=typeof performance?()=>performance.now():Date.now,Ds.batchedUpdates=e=>e(),Ds.catch=console.error,Ds.frameLoop="always",Ds.advance=()=>{"demand"!==Ds.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Ys()};let Bs=-1,Vs=0,Hs=!1;function Ws(e,t){Hs?(t.delete(e),e(0)):(t.add(e),qs())}function qs(){Bs<0&&(Bs=0,"demand"!==Ds.frameLoop&&js($s))}function $s(){~Bs&&(js($s),Ds.batchedUpdates(Ys))}function Ys(){let e=Bs;Bs=Ds.now();let t=Gs(Bs);t&&(Zs(Fs.splice(0,t),(e=>e.handler())),Vs-=t),Vs?(Ns.flush(),zs.flush(e?Math.min(64,Bs-e):16.667),Is.flush(),Ls.flush(),Rs.flush()):Bs=-1}function Xs(){let e=new Set,t=e;return{add(n){Vs+=t!=e||e.has(n)?0:1,e.add(n)},delete(n){return Vs-=t==e&&e.has(n)?1:0,e.delete(n)},flush(n){t.size&&(e=new Set,Vs-=t.size,Zs(t,(t=>t(n)&&e.add(t))),Vs+=e.size,t=e)}}}function Zs(e,t){e.forEach((e=>{try{t(e)}catch(n){Ds.catch(n)}}))}function Ks(){}const Qs={arr:Array.isArray,obj:e=>!!e&&"Object"===e.constructor.name,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,und:e=>void 0===e};function Js(e,t){if(Qs.arr(e)){if(!Qs.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}const el=(e,t)=>e.forEach(t);function tl(e,t,n){if(Qs.arr(e))for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);else for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}const nl=e=>Qs.und(e)?[]:Qs.arr(e)?e:[e];function rl(e,t){if(e.size){const n=Array.from(e);e.clear(),el(n,t)}}const il=(e,...t)=>rl(e,(e=>e(...t))),ol=()=>"undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let al,sl,ll=null,ul=!1,cl=Ks;const dl=e=>{e.to&&(sl=e.to),e.now&&(Ds.now=e.now),void 0!==e.colors&&(ll=e.colors),null!=e.skipAnimation&&(ul=e.skipAnimation),e.createStringInterpolator&&(al=e.createStringInterpolator),e.requestAnimationFrame&&Ds.use(e.requestAnimationFrame),e.batchedUpdates&&(Ds.batchedUpdates=e.batchedUpdates),e.willAdvance&&(cl=e.willAdvance),e.frameLoop&&(Ds.frameLoop=e.frameLoop)};var hl=Object.freeze({__proto__:null,get createStringInterpolator(){return al},get to(){return sl},get colors(){return ll},get skipAnimation(){return ul},get willAdvance(){return cl},assign:dl});const fl=new Set;let pl=[],gl=[],ml=0;const vl={get idle(){return!fl.size&&!pl.length},start(e){ml>e.priority?(fl.add(e),Ds.onStart(yl)):(bl(e),Ds(wl))},advance:wl,sort(e){if(ml)Ds.onFrame((()=>vl.sort(e)));else{const t=pl.indexOf(e);~t&&(pl.splice(t,1),_l(e))}},clear(){pl=[],fl.clear()}};function yl(){fl.forEach(bl),fl.clear(),Ds(wl)}function bl(e){pl.includes(e)||_l(e)}function _l(e){pl.splice(function(e,t){const n=e.findIndex(t);return n<0?e.length:n}(pl,(t=>t.priority>e.priority)),0,e)}function wl(e){const t=gl;for(let n=0;n<pl.length;n++){const r=pl[n];ml=r.priority,r.idle||(cl(r),r.advance(e),r.idle||t.push(r))}return ml=0,gl=pl,gl.length=0,pl=t,pl.length>0}const xl="[-+]?\\d*\\.?\\d+",Sl=xl+"%";function El(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const kl=new RegExp("rgb"+El(xl,xl,xl)),Tl=new RegExp("rgba"+El(xl,xl,xl,xl)),Cl=new RegExp("hsl"+El(xl,Sl,Sl)),Ml=new RegExp("hsla"+El(xl,Sl,Sl,xl)),Al=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Pl=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Ol=/^#([0-9a-fA-F]{6})$/,Ul=/^#([0-9a-fA-F]{8})$/;function zl(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Dl(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,i=2*n-r,o=zl(i,r,e+1/3),a=zl(i,r,e),s=zl(i,r,e-1/3);return Math.round(255*o)<<24|Math.round(255*a)<<16|Math.round(255*s)<<8}function Ll(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function Nl(e){return(parseFloat(e)%360+360)%360/360}function Il(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function Rl(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function Fl(e){let t=function(e){let t;return"number"==typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=Ol.exec(e))?parseInt(t[1]+"ff",16)>>>0:ll&&void 0!==ll[e]?ll[e]:(t=kl.exec(e))?(Ll(t[1])<<24|Ll(t[2])<<16|Ll(t[3])<<8|255)>>>0:(t=Tl.exec(e))?(Ll(t[1])<<24|Ll(t[2])<<16|Ll(t[3])<<8|Il(t[4]))>>>0:(t=Al.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=Ul.exec(e))?parseInt(t[1],16)>>>0:(t=Pl.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=Cl.exec(e))?(255|Dl(Nl(t[1]),Rl(t[2]),Rl(t[3])))>>>0:(t=Ml.exec(e))?(Dl(Nl(t[1]),Rl(t[2]),Rl(t[3]))|Il(t[4]))>>>0:null}(e);return null===t?e:(t=t||0,`rgba(${(4278190080&t)>>>24}, ${(16711680&t)>>>16}, ${(65280&t)>>>8}, ${(255&t)/255})`)}const Gl=(e,t,n)=>{if(Qs.fun(e))return e;if(Qs.arr(e))return Gl({range:e,output:t,extrapolate:n});if(Qs.str(e.output[0]))return al(e);const r=e,i=r.output,o=r.range||[0,1],a=r.extrapolateLeft||r.extrapolate||"extend",s=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(e=>e);return e=>{const t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,o);return function(e,t,n,r,i,o,a,s,l){let u=l?l(e):e;if(u<t){if("identity"===a)return u;"clamp"===a&&(u=t)}if(u>n){if("identity"===s)return u;"clamp"===s&&(u=n)}if(r===i)return r;if(t===n)return e<=t?r:i;t===-1/0?u=-u:n===1/0?u-=t:u=(u-t)/(n-t);u=o(u),r===-1/0?u=-u:i===1/0?u+=r:u=u*(i-r)+r;return u}(e,o[t],o[t+1],i[t],i[t+1],l,a,s,r.map)}};const jl=1.70158,Bl=1.525*jl,Vl=jl+1,Hl=2*Math.PI/3,Wl=2*Math.PI/4.5,ql=e=>{const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},$l={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>0===e?0:Math.pow(2,10*e-10),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>Vl*e*e*e-jl*e*e,easeOutBack:e=>1+Vl*Math.pow(e-1,3)+jl*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*(7.189819*e-Bl)/2:(Math.pow(2*e-2,2)*((Bl+1)*(2*e-2)+Bl)+2)/2,easeInElastic:e=>0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*Hl),easeOutElastic:e=>0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*Hl)+1,easeInOutElastic:e=>0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*Wl)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*Wl)/2+1,easeInBounce:e=>1-ql(1-e),easeOutBounce:ql,easeInOutBounce:e=>e<.5?(1-ql(1-2*e))/2:(1+ql(2*e-1))/2,steps:(e,t="end")=>n=>{const r=(n="end"===t?Math.min(n,.999):Math.max(n,.001))*e,i="end"===t?Math.floor(r):Math.ceil(r);return o=0,a=1,s=i/e,Math.min(Math.max(s,o),a);var o,a,s}};function Yl(){return Yl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yl.apply(this,arguments)}const Xl=Symbol.for("FluidValue.get"),Zl=Symbol.for("FluidValue.observers"),Kl=e=>Boolean(e&&e[Xl]),Ql=e=>e&&e[Xl]?e[Xl]():e,Jl=e=>e[Zl]||null;function eu(e,t){let n=e[Zl];n&&n.forEach((e=>{!function(e,t){e.eventObserved?e.eventObserved(t):e(t)}(e,t)}))}class tu{constructor(e){if(this[Xl]=void 0,this[Zl]=void 0,!e&&!(e=this.get))throw Error("Unknown getter");nu(this,e)}}const nu=(e,t)=>ou(e,Xl,t);function ru(e,t){if(e[Xl]){let n=e[Zl];n||ou(e,Zl,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function iu(e,t){let n=e[Zl];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[Zl]=null,e.observerRemoved&&e.observerRemoved(r,t)}}const ou=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),au=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,su=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,lu=new RegExp(`(${au.source})(%|[a-z]+)`,"i"),uu=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,cu=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,du=e=>{const[t,n]=hu(e);if(!t||ol())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const t=window.getComputedStyle(document.documentElement).getPropertyValue(n);return t||e}return n&&cu.test(n)?du(n):n||e},hu=e=>{const t=cu.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]};let fu;const pu=(e,t,n,r,i)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,gu=e=>{fu||(fu=ll?new RegExp(`(${Object.keys(ll).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map((e=>Ql(e).replace(cu,du).replace(su,Fl).replace(fu,Fl))),n=t.map((e=>e.match(au).map(Number))),r=n[0].map(((e,t)=>n.map((e=>{if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]})))),i=r.map((t=>Gl(Yl({},e,{output:t}))));return e=>{var n;const r=!lu.test(t[0])&&(null==(n=t.find((e=>lu.test(e))))?void 0:n.replace(au,""));let o=0;return t[0].replace(au,(()=>`${i[o++](e)}${r||""}`)).replace(uu,pu)}},mu="react-spring: ",vu=e=>{const t=e;let n=!1;if("function"!=typeof t)throw new TypeError(`${mu}once requires a function parameter`);return(...e)=>{n||(t(...e),n=!0)}},yu=vu(console.warn);const bu=vu(console.warn);function _u(e){return Qs.str(e)&&("#"==e[0]||/\d/.test(e)||!ol()&&cu.test(e)||e in(ll||{}))}new WeakMap;new Set;new WeakMap,new WeakMap,new WeakMap;const wu=ol()?a.useEffect:a.useLayoutEffect,xu=()=>{const e=(0,a.useRef)(!1);return wu((()=>(e.current=!0,()=>{e.current=!1})),[]),e};function Su(){const e=(0,a.useState)()[1],t=xu();return()=>{t.current&&e(Math.random())}}const Eu=e=>(0,a.useEffect)(e,ku),ku=[];function Tu(e){const t=(0,a.useRef)();return(0,a.useEffect)((()=>{t.current=e})),t.current}const Cu=Symbol.for("Animated:node"),Mu=e=>e&&e[Cu],Au=(e,t)=>((e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}))(e,Cu,t),Pu=e=>e&&e[Cu]&&e[Cu].getPayload();class Ou{constructor(){this.payload=void 0,Au(this,this)}getPayload(){return this.payload||[]}}class Uu extends Ou{constructor(e){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=e,Qs.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new Uu(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return Qs.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,Qs.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}class zu extends Uu{constructor(e){super(0),this._string=null,this._toString=void 0,this._toString=Gl({output:[e,e]})}static create(e){return new zu(e)}getValue(){let e=this._string;return null==e?this._string=this._toString(this._value):e}setValue(e){if(Qs.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!super.setValue(e))return!1;this._string=null}return!0}reset(e){e&&(this._toString=Gl({output:[this.getValue(),e]})),this._value=0,super.reset()}}const Du={dependencies:null};class Lu extends Ou{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return tl(this.source,((n,r)=>{(e=>!!e&&e[Cu]===e)(n)?t[r]=n.getValue(e):Kl(n)?t[r]=Ql(n):e||(t[r]=n)})),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&el(this.payload,(e=>e.reset()))}_makePayload(e){if(e){const t=new Set;return tl(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){Du.dependencies&&Kl(e)&&Du.dependencies.add(e);const t=Pu(e);t&&el(t,(e=>this.add(e)))}}class Nu extends Lu{constructor(e){super(e)}static create(e){return new Nu(e)}getValue(){return this.source.map((e=>e.getValue()))}setValue(e){const t=this.getPayload();return e.length==t.length?t.map(((t,n)=>t.setValue(e[n]))).some(Boolean):(super.setValue(e.map(Iu)),!0)}}function Iu(e){return(_u(e)?zu:Uu).create(e)}function Ru(e){const t=Mu(e);return t?t.constructor:Qs.arr(e)?Nu:_u(e)?zu:Uu}function Fu(){return Fu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fu.apply(this,arguments)}const Gu=(e,t)=>{const n=!Qs.fun(e)||e.prototype&&e.prototype.isReactComponent;return(0,a.forwardRef)(((r,i)=>{const o=(0,a.useRef)(null),s=n&&(0,a.useCallback)((e=>{o.current=function(e,t){e&&(Qs.fun(e)?e(t):e.current=t);return t}(i,e)}),[i]),[l,u]=function(e,t){const n=new Set;Du.dependencies=n,e.style&&(e=Fu({},e,{style:t.createAnimatedStyle(e.style)}));return e=new Lu(e),Du.dependencies=null,[e,n]}(r,t),c=Su(),d=()=>{const e=o.current;if(n&&!e)return;!1===(!!e&&t.applyAnimatedValues(e,l.getValue(!0)))&&c()},h=new ju(d,u),f=(0,a.useRef)();wu((()=>(f.current=h,el(u,(e=>ru(e,h))),()=>{f.current&&(el(f.current.deps,(e=>iu(e,f.current))),Ds.cancel(f.current.update))}))),(0,a.useEffect)(d,[]),Eu((()=>()=>{const e=f.current;el(e.deps,(t=>iu(t,e)))}));const p=t.getComponentProps(l.getValue());return a.createElement(e,Fu({},p,{ref:s}))}))};class ju{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){"change"==e.type&&Ds.write(this.update)}}const Bu=Symbol.for("AnimatedComponent"),Vu=e=>Qs.str(e)?e:e&&Qs.str(e.displayName)?e.displayName:Qs.fun(e)&&e.name||null;function Hu(){return Hu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hu.apply(this,arguments)}function Wu(e,...t){return Qs.fun(e)?e(...t):e}const qu=(e,t)=>!0===e||!!(t&&e&&(Qs.fun(e)?e(t):nl(e).includes(t))),$u=(e,t)=>Qs.obj(e)?t&&e[t]:e,Yu=(e,t)=>!0===e.default?e[t]:e.default?e.default[t]:void 0,Xu=e=>e,Zu=(e,t=Xu)=>{let n=Ku;e.default&&!0!==e.default&&(e=e.default,n=Object.keys(e));const r={};for(const i of n){const n=t(e[i],i);Qs.und(n)||(r[i]=n)}return r},Ku=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Qu={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Ju(e){const t=function(e){const t={};let n=0;if(tl(e,((e,r)=>{Qu[r]||(t[r]=e,n++)})),n)return t}(e);if(t){const n={to:t};return tl(e,((e,r)=>r in t||(n[r]=e))),n}return Hu({},e)}function ec(e){return e=Ql(e),Qs.arr(e)?e.map(ec):_u(e)?hl.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function tc(e){for(const t in e)return!0;return!1}function nc(e){return Qs.fun(e)||Qs.arr(e)&&Qs.obj(e[0])}function rc(e,t){var n;null==(n=e.ref)||n.delete(e),null==t||t.delete(e)}function ic(e,t){var n;t&&e.ref!==t&&(null==(n=e.ref)||n.delete(e),t.add(e),e.ref=t)}const oc=Hu({},{tension:170,friction:26},{mass:1,damping:1,easing:$l.linear,clamp:!1});class ac{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,oc)}}function sc(e,t){if(Qs.und(t.decay)){const n=!Qs.und(t.tension)||!Qs.und(t.friction);!n&&Qs.und(t.frequency)&&Qs.und(t.damping)&&Qs.und(t.mass)||(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}else e.duration=void 0}const lc=[];class uc{constructor(){this.changed=!1,this.values=lc,this.toValues=null,this.fromValues=lc,this.to=void 0,this.from=void 0,this.config=new ac,this.immediate=!1}}function cc(e,{key:t,props:n,defaultProps:r,state:i,actions:o}){return new Promise(((a,s)=>{var l;let u,c,d=qu(null!=(l=n.cancel)?l:null==r?void 0:r.cancel,t);if(d)p();else{Qs.und(n.pause)||(i.paused=qu(n.pause,t));let e=null==r?void 0:r.pause;!0!==e&&(e=i.paused||qu(e,t)),u=Wu(n.delay||0,t),e?(i.resumeQueue.add(f),o.pause()):(o.resume(),f())}function h(){i.resumeQueue.add(f),i.timeouts.delete(c),c.cancel(),u=c.time-Ds.now()}function f(){u>0&&!hl.skipAnimation?(i.delayed=!0,c=Ds.setTimeout(p,u),i.pauseQueue.add(h),i.timeouts.add(c)):p()}function p(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(h),i.timeouts.delete(c),e<=(i.cancelId||0)&&(d=!0);try{o.start(Hu({},n,{callId:e,cancel:d}),a)}catch(t){s(t)}}}))}const dc=(e,t)=>1==t.length?t[0]:t.some((e=>e.cancelled))?pc(e.get()):t.every((e=>e.noop))?hc(e.get()):fc(e.get(),t.every((e=>e.finished))),hc=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),fc=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),pc=e=>({value:e,cancelled:!0,finished:!1});function gc(e,t,n,r){const{callId:i,parentId:o,onRest:a}=t,{asyncTo:s,promise:l}=n;return o||e!==s||t.reset?n.promise=(async()=>{n.asyncId=i,n.asyncTo=e;const u=Zu(t,((e,t)=>"onRest"===t?void 0:e));let c,d;const h=new Promise(((e,t)=>(c=e,d=t))),f=e=>{const t=i<=(n.cancelId||0)&&pc(r)||i!==n.asyncId&&fc(r,!1);if(t)throw e.result=t,d(e),e},p=(e,t)=>{const o=new vc,a=new yc;return(async()=>{if(hl.skipAnimation)throw mc(n),a.result=fc(r,!1),d(a),a;f(o);const s=Qs.obj(e)?Hu({},e):Hu({},t,{to:e});s.parentId=i,tl(u,((e,t)=>{Qs.und(s[t])&&(s[t]=e)}));const l=await r.start(s);return f(o),n.paused&&await new Promise((e=>{n.resumeQueue.add(e)})),l})()};let g;if(hl.skipAnimation)return mc(n),fc(r,!1);try{let t;t=Qs.arr(e)?(async e=>{for(const t of e)await p(t)})(e):Promise.resolve(e(p,r.stop.bind(r))),await Promise.all([t.then(c),h]),g=fc(r.get(),!0,!1)}catch(m){if(m instanceof vc)g=m.result;else{if(!(m instanceof yc))throw m;g=m.result}}finally{i==n.asyncId&&(n.asyncId=o,n.asyncTo=o?s:void 0,n.promise=o?l:void 0)}return Qs.fun(a)&&Ds.batchedUpdates((()=>{a(g,r,r.item)})),g})():l}function mc(e,t){rl(e.timeouts,(e=>e.cancel())),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}class vc extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class yc extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const bc=e=>e instanceof wc;let _c=1;class wc extends tu{constructor(...e){super(...e),this.id=_c++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Mu(this);return e&&e.getValue()}to(...e){return hl.to(this,e)}interpolate(...e){return yu(`${mu}The "interpolate" function is deprecated in v9 (use "to" instead)`),hl.to(this,e)}toJSON(){return this.get()}observerAdded(e){1==e&&this._attach()}observerRemoved(e){0==e&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){eu(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||vl.sort(this),eu(this,{type:"priority",parent:this,priority:e})}}const xc=Symbol.for("SpringPhase"),Sc=e=>(1&e[xc])>0,Ec=e=>(2&e[xc])>0,kc=e=>(4&e[xc])>0,Tc=(e,t)=>t?e[xc]|=3:e[xc]&=-3,Cc=(e,t)=>t?e[xc]|=4:e[xc]&=-5;class Mc extends wc{constructor(e,t){if(super(),this.key=void 0,this.animation=new uc,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Qs.und(e)||!Qs.und(t)){const n=Qs.obj(e)?Hu({},e):Hu({},t,{from:e});Qs.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Ec(this)||this._state.asyncTo)||kc(this)}get goal(){return Ql(this.animation.to)}get velocity(){const e=Mu(this);return e instanceof Uu?e.lastVelocity||0:e.getPayload().map((e=>e.lastVelocity||0))}get hasAnimated(){return Sc(this)}get isAnimating(){return Ec(this)}get isPaused(){return kc(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{config:i,toValues:o}=r;const a=Pu(r.to);!a&&Kl(r.to)&&(o=nl(Ql(r.to))),r.values.forEach(((s,l)=>{if(s.done)return;const u=s.constructor==zu?1:a?a[l].lastPosition:o[l];let c=r.immediate,d=u;if(!c){if(d=s.lastPosition,i.tension<=0)return void(s.done=!0);let t=s.elapsedTime+=e;const n=r.fromValues[l],o=null!=s.v0?s.v0:s.v0=Qs.arr(i.velocity)?i.velocity[l]:i.velocity;let a;const h=i.precision||(n==u?.005:Math.min(1,.001*Math.abs(u-n)));if(Qs.und(i.duration))if(i.decay){const e=!0===i.decay?.998:i.decay,r=Math.exp(-(1-e)*t);d=n+o/(1-e)*(1-r),c=Math.abs(s.lastPosition-d)<=h,a=o*r}else{a=null==s.lastVelocity?o:s.lastVelocity;const t=i.restVelocity||h/10,r=i.clamp?0:i.bounce,l=!Qs.und(r),f=n==u?s.v0>0:n<u;let p,g=!1;const m=1,v=Math.ceil(e/m);for(let e=0;e<v&&(p=Math.abs(a)>t,p||(c=Math.abs(u-d)<=h,!c));++e){l&&(g=d==u||d>u==f,g&&(a=-a*r,d=u));a+=(1e-6*-i.tension*(d-u)+.001*-i.friction*a)/i.mass*m,d+=a*m}}else{let r=1;i.duration>0&&(this._memoizedDuration!==i.duration&&(this._memoizedDuration=i.duration,s.durationProgress>0&&(s.elapsedTime=i.duration*s.durationProgress,t=s.elapsedTime+=e)),r=(i.progress||0)+t/this._memoizedDuration,r=r>1?1:r<0?0:r,s.durationProgress=r),d=n+i.easing(r)*(u-n),a=(d-s.lastPosition)/e,c=1==r}s.lastVelocity=a,Number.isNaN(d)&&(console.warn("Got NaN while animating:",this),c=!0)}a&&!a[l].done&&(c=!1),c?s.done=!0:t=!1,s.setValue(d,i.round)&&(n=!0)}));const s=Mu(this),l=s.getValue();if(t){const e=Ql(r.to);l===e&&!n||i.decay?n&&i.decay&&this._onChange(l):(s.setValue(e),this._onChange(e)),this._stop()}else n&&this._onChange(l)}set(e){return Ds.batchedUpdates((()=>{this._stop(),this._focus(e),this._set(e)})),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ec(this)){const{to:e,config:t}=this.animation;Ds.batchedUpdates((()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()}))}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return Qs.und(e)?(n=this.queue||[],this.queue=[]):n=[Qs.obj(e)?e:Hu({},t,{to:e})],Promise.all(n.map((e=>this._update(e)))).then((e=>dc(this,e)))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),mc(this._state,e&&this._lastCallId),Ds.batchedUpdates((()=>this._stop(t,e))),this}reset(){this._update({reset:!0})}eventObserved(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=Qs.obj(n)?n[t]:n,(null==n||nc(n))&&(n=void 0),r=Qs.obj(r)?r[t]:r,null==r&&(r=void 0);const i={to:n,from:r};return Sc(this)||(e.reverse&&([n,r]=[r,n]),r=Ql(r),Qs.und(r)?Mu(this)||this._set(n):this._set(r)),i}_update(e,t){let n=Hu({},e);const{key:r,defaultProps:i}=this;n.default&&Object.assign(i,Zu(n,((e,t)=>/^on/.test(t)?$u(e,r):e))),Lc(this,n,"onProps"),Nc(this,"onProps",n,this);const o=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return cc(++this._lastCallId,{key:r,props:n,defaultProps:i,state:a,actions:{pause:()=>{kc(this)||(Cc(this,!0),il(a.pauseQueue),Nc(this,"onPause",fc(this,Ac(this,this.animation.to)),this))},resume:()=>{kc(this)&&(Cc(this,!1),Ec(this)&&this._resume(),il(a.resumeQueue),Nc(this,"onResume",fc(this,Ac(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then((e=>{if(n.loop&&e.finished&&(!t||!e.noop)){const e=Pc(n);if(e)return this._update(e,!0)}return e}))}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(pc(this));const r=!Qs.und(e.to),i=!Qs.und(e.from);if(r||i){if(!(t.callId>this._lastToId))return n(pc(this));this._lastToId=t.callId}const{key:o,defaultProps:a,animation:s}=this,{to:l,from:u}=s;let{to:c=l,from:d=u}=e;!i||r||t.default&&!Qs.und(c)||(c=d),t.reverse&&([c,d]=[d,c]);const h=!Js(d,u);h&&(s.from=d),d=Ql(d);const f=!Js(c,l);f&&this._focus(c);const p=nc(t.to),{config:g}=s,{decay:m,velocity:v}=g;(r||i)&&(g.velocity=0),t.config&&!p&&function(e,t,n){n&&(sc(n=Hu({},n),t),t=Hu({},n,t)),sc(e,t),Object.assign(e,t);for(const a in oc)null==e[a]&&(e[a]=oc[a]);let{mass:r,frequency:i,damping:o}=e;Qs.und(i)||(i<.01&&(i=.01),o<0&&(o=0),e.tension=Math.pow(2*Math.PI/i,2)*r,e.friction=4*Math.PI*o*r/i)}(g,Wu(t.config,o),t.config!==a.config?Wu(a.config,o):void 0);let y=Mu(this);if(!y||Qs.und(c))return n(fc(this,!0));const b=Qs.und(t.reset)?i&&!t.default:!Qs.und(d)&&qu(t.reset,o),_=b?d:this.get(),w=ec(c),x=Qs.num(w)||Qs.arr(w)||_u(w),S=!p&&(!x||qu(a.immediate||t.immediate,o));if(f){const e=Ru(c);if(e!==y.constructor){if(!S)throw Error(`Cannot animate between ${y.constructor.name} and ${e.name}, as the "to" prop suggests`);y=this._set(w)}}const E=y.constructor;let k=Kl(c),T=!1;if(!k){const e=b||!Sc(this)&&h;(f||e)&&(T=Js(ec(_),w),k=!T),(Js(s.immediate,S)||S)&&Js(g.decay,m)&&Js(g.velocity,v)||(k=!0)}if(T&&Ec(this)&&(s.changed&&!b?k=!0:k||this._stop(l)),!p&&((k||Kl(l))&&(s.values=y.getPayload(),s.toValues=Kl(c)?null:E==zu?[1]:nl(w)),s.immediate!=S&&(s.immediate=S,S||b||this._set(l)),k)){const{onRest:e}=s;el(Dc,(e=>Lc(this,t,e)));const r=fc(this,Ac(this,l));il(this._pendingCalls,r),this._pendingCalls.add(n),s.changed&&Ds.batchedUpdates((()=>{s.changed=!b,null==e||e(r,this),b?Wu(a.onRest,r):null==s.onStart||s.onStart(r,this)}))}b&&this._set(_),p?n(gc(t.to,t,this._state,this)):k?this._start():Ec(this)&&!f?this._pendingCalls.add(n):n(hc(_))}_focus(e){const t=this.animation;e!==t.to&&(Jl(this)&&this._detach(),t.to=e,Jl(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;Kl(t)&&(ru(t,this),bc(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;Kl(e)&&iu(e,this)}_set(e,t=!0){const n=Ql(e);if(!Qs.und(n)){const e=Mu(this);if(!e||!Js(n,e.getValue())){const r=Ru(n);e&&e.constructor==r?e.setValue(n):Au(this,r.create(n)),e&&Ds.batchedUpdates((()=>{this._onChange(n,t)}))}}return Mu(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Nc(this,"onStart",fc(this,Ac(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),Wu(this.animation.onChange,e,this)),Wu(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Mu(this).reset(Ql(e.to)),e.immediate||(e.fromValues=e.values.map((e=>e.lastPosition))),Ec(this)||(Tc(this,!0),kc(this)||this._resume())}_resume(){hl.skipAnimation?this.finish():vl.start(this)}_stop(e,t){if(Ec(this)){Tc(this,!1);const n=this.animation;el(n.values,(e=>{e.done=!0})),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),eu(this,{type:"idle",parent:this});const r=t?pc(this.get()):fc(this.get(),Ac(this,null!=e?e:n.to));il(this._pendingCalls,r),n.changed&&(n.changed=!1,Nc(this,"onRest",r,this))}}}function Ac(e,t){const n=ec(t);return Js(ec(e.get()),n)}function Pc(e,t=e.loop,n=e.to){let r=Wu(t);if(r){const i=!0!==r&&Ju(r),o=(i||e).reverse,a=!i||i.reset;return Oc(Hu({},e,{loop:t,default:!1,pause:void 0,to:!o||nc(n)?n:void 0,from:a?e.from:void 0,reset:a},i))}}function Oc(e){const{to:t,from:n}=e=Ju(e),r=new Set;return Qs.obj(t)&&zc(t,r),Qs.obj(n)&&zc(n,r),e.keys=r.size?Array.from(r):null,e}function Uc(e){const t=Oc(e);return Qs.und(t.default)&&(t.default=Zu(t)),t}function zc(e,t){tl(e,((e,n)=>null!=e&&t.add(n)))}const Dc=["onStart","onRest","onChange","onPause","onResume"];function Lc(e,t,n){e.animation[n]=t[n]!==Yu(t,n)?$u(t[n],e.key):void 0}function Nc(e,t,...n){var r,i,o,a;null==(r=(i=e.animation)[t])||r.call(i,...n),null==(o=(a=e.defaultProps)[t])||o.call(a,...n)}const Ic=["onStart","onChange","onRest"];let Rc=1;class Fc{constructor(e,t){this.id=Rc++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start(Hu({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every((e=>e.idle&&!e.isDelayed&&!e.isPaused))}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each(((t,n)=>e[n]=t.get())),e}set(e){for(const t in e){const n=e[t];Qs.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(Oc(e)),this}start(e){let{queue:t}=this;return e?t=nl(e).map(Oc):this.queue=[],this._flush?this._flush(this,t):(qc(this,t),Gc(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;el(nl(t),(t=>n[t].stop(!!e)))}else mc(this._state,this._lastAsyncId),this.each((t=>t.stop(!!e)));return this}pause(e){if(Qs.und(e))this.start({pause:!0});else{const t=this.springs;el(nl(e),(e=>t[e].pause()))}return this}resume(e){if(Qs.und(e))this.start({pause:!1});else{const t=this.springs;el(nl(e),(e=>t[e].resume()))}return this}each(e){tl(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,i=this._changed.size>0;(r&&!this._started||i&&!this._started)&&(this._started=!0,rl(e,(([e,t])=>{t.value=this.get(),e(t,this,this._item)})));const o=!r&&this._started,a=i||o&&n.size?this.get():null;i&&t.size&&rl(t,(([e,t])=>{t.value=a,e(t,this,this._item)})),o&&(this._started=!1,rl(n,(([e,t])=>{t.value=a,e(t,this,this._item)})))}eventObserved(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}Ds.onFrame(this._onFrame)}}function Gc(e,t){return Promise.all(t.map((t=>jc(e,t)))).then((t=>dc(e,t)))}async function jc(e,t,n){const{keys:r,to:i,from:o,loop:a,onRest:s,onResolve:l}=t,u=Qs.obj(t.default)&&t.default;a&&(t.loop=!1),!1===i&&(t.to=null),!1===o&&(t.from=null);const c=Qs.arr(i)||Qs.fun(i)?i:void 0;c?(t.to=void 0,t.onRest=void 0,u&&(u.onRest=void 0)):el(Ic,(n=>{const r=t[n];if(Qs.fun(r)){const i=e._events[n];t[n]=({finished:e,cancelled:t})=>{const n=i.get(r);n?(e||(n.finished=!1),t&&(n.cancelled=!0)):i.set(r,{value:null,finished:e||!1,cancelled:t||!1})},u&&(u[n]=t[n])}}));const d=e._state;t.pause===!d.paused?(d.paused=t.pause,il(t.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(t.pause=!0);const h=(r||Object.keys(e.springs)).map((n=>e.springs[n].start(t))),f=!0===t.cancel||!0===Yu(t,"cancel");(c||f&&d.asyncId)&&h.push(cc(++e._lastAsyncId,{props:t,state:d,actions:{pause:Ks,resume:Ks,start(t,n){f?(mc(d,e._lastAsyncId),n(pc(e))):(t.onRest=s,n(gc(c,t,d,e)))}}})),d.paused&&await new Promise((e=>{d.resumeQueue.add(e)}));const p=dc(e,await Promise.all(h));if(a&&p.finished&&(!n||!p.noop)){const n=Pc(t,a,i);if(n)return qc(e,[n]),jc(e,n,!0)}return l&&Ds.batchedUpdates((()=>l(p,e,e.item))),p}function Bc(e,t){const n=Hu({},e.springs);return t&&el(nl(t),(e=>{Qs.und(e.keys)&&(e=Oc(e)),Qs.obj(e.to)||(e=Hu({},e,{to:void 0})),Wc(n,e,(e=>Hc(e)))})),Vc(e,n),n}function Vc(e,t){tl(t,((t,n)=>{e.springs[n]||(e.springs[n]=t,ru(t,e))}))}function Hc(e,t){const n=new Mc;return n.key=e,t&&ru(n,t),n}function Wc(e,t,n){t.keys&&el(t.keys,(r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)}))}function qc(e,t){el(t,(t=>{Wc(e.springs,t,(t=>Hc(t,e)))}))}function $c(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}const Yc=["children"],Xc=e=>{let{children:t}=e,n=$c(e,Yc);const r=(0,a.useContext)(Zc),i=n.pause||!!r.pause,o=n.immediate||!!r.immediate;n=function(e,t){const[n]=(0,a.useState)((()=>({inputs:t,result:e()}))),r=(0,a.useRef)(),i=r.current;let o=i;if(o){const n=Boolean(t&&o.inputs&&function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,o.inputs));n||(o={inputs:t,result:e()})}else o=n;return(0,a.useEffect)((()=>{r.current=o,i==n&&(n.inputs=n.result=void 0)}),[o]),o.result}((()=>({pause:i,immediate:o})),[i,o]);const{Provider:s}=Zc;return a.createElement(s,{value:n},t)},Zc=(Kc=Xc,Qc={},Object.assign(Kc,a.createContext(Qc)),Kc.Provider._context=Kc,Kc.Consumer._context=Kc,Kc);var Kc,Qc;Xc.Provider=Zc.Provider,Xc.Consumer=Zc.Consumer;const Jc=()=>{const e=[],t=function(t){bu(`${mu}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`);const r=[];return el(e,((e,i)=>{if(Qs.und(t))r.push(e.start());else{const o=n(t,e,i);o&&r.push(e.start(o))}})),r};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){const n=e.indexOf(t);~n&&e.splice(n,1)},t.pause=function(){return el(e,(e=>e.pause(...arguments))),this},t.resume=function(){return el(e,(e=>e.resume(...arguments))),this},t.set=function(t){el(e,(e=>e.set(t)))},t.start=function(t){const n=[];return el(e,((e,r)=>{if(Qs.und(t))n.push(e.start());else{const i=this._getProps(t,e,r);i&&n.push(e.start(i))}})),n},t.stop=function(){return el(e,(e=>e.stop(...arguments))),this},t.update=function(t){return el(e,((e,n)=>e.update(this._getProps(t,e,n)))),this};const n=function(e,t,n){return Qs.fun(e)?e(n,t):e};return t._getProps=n,t};function ed(e,t,n){const r=Qs.fun(t)&&t;r&&!n&&(n=[]);const i=(0,a.useMemo)((()=>r||3==arguments.length?Jc():void 0),[]),o=(0,a.useRef)(0),s=Su(),l=(0,a.useMemo)((()=>({ctrls:[],queue:[],flush(e,t){const n=Bc(e,t);return o.current>0&&!l.queue.length&&!Object.keys(n).some((t=>!e.springs[t]))?Gc(e,t):new Promise((r=>{Vc(e,n),l.queue.push((()=>{r(Gc(e,t))})),s()}))}})),[]),u=(0,a.useRef)([...l.ctrls]),c=[],d=Tu(e)||0;function h(e,n){for(let i=e;i<n;i++){const e=u.current[i]||(u.current[i]=new Fc(null,l.flush)),n=r?r(i,e):t[i];n&&(c[i]=Uc(n))}}(0,a.useMemo)((()=>{el(u.current.slice(e,d),(e=>{rc(e,i),e.stop(!0)})),u.current.length=e,h(d,e)}),[e]),(0,a.useMemo)((()=>{h(0,Math.min(d,e))}),n);const f=u.current.map(((e,t)=>Bc(e,c[t]))),p=(0,a.useContext)(Xc),g=Tu(p),m=p!==g&&tc(p);wu((()=>{o.current++,l.ctrls=u.current;const{queue:e}=l;e.length&&(l.queue=[],el(e,(e=>e()))),el(u.current,((e,t)=>{null==i||i.add(e),m&&e.start({default:p});const n=c[t];n&&(ic(e,n.ref),e.ref?e.queue.push(n):e.start(n))}))})),Eu((()=>()=>{el(l.ctrls,(e=>e.stop(!0)))}));const v=f.map((e=>Hu({},e)));return i?[v,i]:v}function td(e,t){const n=Qs.fun(e),[[r],i]=ed(1,n?e:[e],n?t||[]:t);return n||2==arguments.length?[r,i]:r}let nd;!function(e){e.MOUNT="mount",e.ENTER="enter",e.UPDATE="update",e.LEAVE="leave"}(nd||(nd={}));class rd extends wc{constructor(e,t){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=Gl(...t);const n=this._get(),r=Ru(n);Au(this,r.create(n))}advance(e){const t=this._get();Js(t,this.get())||(Mu(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&od(this._active)&&ad(this)}_get(){const e=Qs.arr(this.source)?this.source.map(Ql):nl(Ql(this.source));return this.calc(...e)}_start(){this.idle&&!od(this._active)&&(this.idle=!1,el(Pu(this),(e=>{e.done=!1})),hl.skipAnimation?(Ds.batchedUpdates((()=>this.advance())),ad(this)):vl.start(this))}_attach(){let e=1;el(nl(this.source),(t=>{Kl(t)&&ru(t,this),bc(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))})),this.priority=e,this._start()}_detach(){el(nl(this.source),(e=>{Kl(e)&&iu(e,this)})),this._active.clear(),ad(this)}eventObserved(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=nl(this.source).reduce(((e,t)=>Math.max(e,(bc(t)?t.priority:0)+1)),0))}}function id(e){return!1!==e.idle}function od(e){return!e.size||Array.from(e).every(id)}function ad(e){e.idle||(e.idle=!0,el(Pu(e),(e=>{e.done=!0})),eu(e,{type:"idle",parent:e}))}hl.assign({createStringInterpolator:gu,to:(e,t)=>new rd(e,t)});vl.advance;const sd=["primitive"].concat(Object.keys(M).filter((e=>/^[A-Z]/.test(e))).map((e=>e[0].toLowerCase()+e.slice(1))));hl.assign({createStringInterpolator:gu,colors:{transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},frameLoop:"demand"}),be((()=>{Ds.advance()}),we);const ld=((e,{applyAnimatedValues:t=(()=>!1),createAnimatedStyle:n=(e=>new Lu(e)),getComponentProps:r=(e=>e)}={})=>{const i={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},o=e=>{const t=Vu(e)||"Anonymous";return(e=Qs.str(e)?o[e]||(o[e]=Gu(e,i)):e[Bu]||(e[Bu]=Gu(e,i))).displayName=`Animated(${t})`,e};return tl(e,((t,n)=>{Qs.arr(e)&&(n=Vu(t)),o[n]=o(t)})),{animated:o}})(sd,{applyAnimatedValues:Re}).animated,ud=1,cd=2,dd=4,hd=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),fd=0,pd=1,gd=-1;function md(e){return e.isPerspectiveCamera}function vd(e){return e.isOrthographicCamera}const yd=2*Math.PI,bd=Math.PI/2,_d=1e-5,wd=Math.PI/180;function xd(e,t,n){return Math.max(t,Math.min(n,e))}function Sd(e,t=_d){return Math.abs(e)<t}function Ed(e,t,n=_d){return Sd(e-t,n)}function kd(e,t){return Math.round(e/t)*t}function Td(e){return isFinite(e)?e:e<0?-Number.MAX_VALUE:Number.MAX_VALUE}function Cd(e){return Math.abs(e)<Number.MAX_VALUE?e:e*(1/0)}function Md(e,t,n,r,i=1/0,o){const a=2/(r=Math.max(1e-4,r)),s=a*o,l=1/(1+s+.48*s*s+.235*s*s*s);let u=e-t;const c=t,d=i*r;u=xd(u,-d,d),t=e-u;const h=(n.value+a*u)*o;n.value=(n.value-a*h)*l;let f=t+(u+h)*l;return c-e>0==f>c&&(f=c,n.value=(f-c)/o),f}function Ad(e,t,n,r,i=1/0,o,a){const s=2/(r=Math.max(1e-4,r)),l=s*o,u=1/(1+l+.48*l*l+.235*l*l*l);let c=t.x,d=t.y,h=t.z,f=e.x-c,p=e.y-d,g=e.z-h;const m=c,v=d,y=h,b=i*r,_=f*f+p*p+g*g;if(_>b*b){const e=Math.sqrt(_);f=f/e*b,p=p/e*b,g=g/e*b}c=e.x-f,d=e.y-p,h=e.z-g;const w=(n.x+s*f)*o,x=(n.y+s*p)*o,S=(n.z+s*g)*o;n.x=(n.x-s*w)*u,n.y=(n.y-s*x)*u,n.z=(n.z-s*S)*u,a.x=c+(f+w)*u,a.y=d+(p+x)*u,a.z=h+(g+S)*u;const E=m-e.x,k=v-e.y,T=y-e.z;return E*(a.x-m)+k*(a.y-v)+T*(a.z-y)>0&&(a.x=m,a.y=v,a.z=y,n.x=(a.x-m)/o,n.y=(a.y-v)/o,n.z=(a.z-y)/o),a}function Pd(e,t){t.set(0,0),e.forEach((e=>{t.x+=e.clientX,t.y+=e.clientY})),t.x/=e.length,t.y/=e.length}function Od(e,t){return!!vd(e)&&(console.warn(`${t} is not supported in OrthographicCamera`),!0)}class Ud{constructor(){this._listeners={}}addEventListener(e,t){const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}removeAllEventListeners(e){e?Array.isArray(this._listeners[e])&&(this._listeners[e].length=0):this._listeners={}}dispatchEvent(e){const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e)}}}const zd=1/8,Dd="undefined"!=typeof window,Ld=Dd&&/Mac/.test(navigator.platform),Nd=!(Dd&&"PointerEvent"in window);let Id,Rd,Fd,Gd,jd,Bd,Vd,Hd,Wd,qd,$d,Yd,Xd,Zd,Kd,Qd,Jd,eh,th,nh,rh,ih,oh;class ah extends Ud{static install(e){Id=e.THREE,Rd=Object.freeze(new Id.Vector3(0,0,0)),Fd=Object.freeze(new Id.Vector3(0,1,0)),Gd=Object.freeze(new Id.Vector3(0,0,1)),jd=new Id.Vector2,Bd=new Id.Vector3,Vd=new Id.Vector3,Hd=new Id.Vector3,Wd=new Id.Vector3,qd=new Id.Vector3,$d=new Id.Vector3,Yd=new Id.Vector3,Xd=new Id.Vector3,Zd=new Id.Vector3,Kd=new Id.Spherical,Qd=new Id.Spherical,Jd=new Id.Box3,eh=new Id.Box3,th=new Id.Sphere,nh=new Id.Quaternion,rh=new Id.Quaternion,ih=new Id.Matrix4,oh=new Id.Raycaster}static get ACTION(){return hd}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=hd.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=fd,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new Id.Vector3,this._focalOffsetVelocity=new Id.Vector3,this._zoomVelocity={value:0},this._truckInternal=(e,t,n)=>{let r,i;if(md(this._camera)){const n=Bd.copy(this._camera.position).sub(this._target),o=this._camera.getEffectiveFOV()*wd,a=n.length()*Math.tan(.5*o);r=this.truckSpeed*e*a/this._elementRect.height,i=this.truckSpeed*t*a/this._elementRect.height}else{if(!vd(this._camera))return;{const n=this._camera;r=e*(n.right-n.left)/n.zoom/this._elementRect.width,i=t*(n.top-n.bottom)/n.zoom/this._elementRect.height}}this.verticalDragToForward?(n?this.setFocalOffset(this._focalOffsetEnd.x+r,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(r,0,!0),this.forward(-i,!0)):n?this.setFocalOffset(this._focalOffsetEnd.x+r,this._focalOffsetEnd.y+i,this._focalOffsetEnd.z,!0):this.truck(r,i,!0)},this._rotateInternal=(e,t)=>{const n=yd*this.azimuthRotateSpeed*e/this._elementRect.height,r=yd*this.polarRotateSpeed*t/this._elementRect.height;this.rotate(n,r,!0)},this._dollyInternal=(e,t,n)=>{const r=Math.pow(.95,-e*this.dollySpeed),i=this._sphericalEnd.radius,o=this._sphericalEnd.radius*r,a=Id.MathUtils.clamp(o,this.minDistance,this.maxDistance),s=a-o;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(o,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(s,!0),this._dollyToNoClamp(a,!0)):this._dollyToNoClamp(a,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?o:a)-i,this._dollyControlCoord.set(t,n)),this._lastDollyDirection=Math.sign(-e)},this._zoomInternal=(e,t,n)=>{const r=Math.pow(.95,e*this.dollySpeed),i=this._zoom,o=this._zoom*r;this.zoomTo(o,!0),this.dollyToCursor&&(this._changedZoom+=o-i,this._dollyControlCoord.set(t,n))},void 0===Id&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=(new Id.Quaternion).setFromUnitVectors(this._camera.up,Fd),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=hd.NONE,this._target=new Id.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new Id.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=(new Id.Spherical).setFromVector3(Bd.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new Id.Vector3,new Id.Vector3,new Id.Vector3,new Id.Vector3],this._updateNearPlaneCorners(),this._boundary=new Id.Box3(new Id.Vector3(-1/0,-1/0,-1/0),new Id.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new Id.Vector2,this.mouseButtons={left:hd.ROTATE,middle:hd.DOLLY,right:hd.TRUCK,wheel:md(this._camera)?hd.DOLLY:vd(this._camera)?hd.ZOOM:hd.NONE},this.touches={one:hd.TOUCH_ROTATE,two:md(this._camera)?hd.TOUCH_DOLLY_TRUCK:vd(this._camera)?hd.TOUCH_ZOOM_TRUCK:hd.NONE,three:hd.TOUCH_TRUCK};const n=new Id.Vector2,r=new Id.Vector2,i=new Id.Vector2,o=e=>{if(!this._enabled||!this._domElement)return;if(0!==this._interactiveArea.left||0!==this._interactiveArea.top||1!==this._interactiveArea.width||1!==this._interactiveArea.height){const t=this._domElement.getBoundingClientRect(),n=e.clientX/t.width,r=e.clientY/t.height;if(n<this._interactiveArea.left||n>this._interactiveArea.right||r<this._interactiveArea.top||r>this._interactiveArea.bottom)return}const t="mouse"!==e.pointerType?null:(e.buttons&ud)===ud?ud:(e.buttons&dd)===dd?dd:(e.buttons&cd)===cd?cd:null;if(null!==t){const e=this._findPointerByMouseButton(t);e&&this._disposePointer(e)}if((e.buttons&ud)===ud&&this._lockedPointer)return;const n={pointerId:e.pointerId,clientX:e.clientX,clientY:e.clientY,deltaX:0,deltaY:0,mouseButton:t};this._activePointers.push(n),this._domElement.ownerDocument.removeEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.addEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),this._isDragging=!0,p(e)},a=e=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;if(0!==this._interactiveArea.left||0!==this._interactiveArea.top||1!==this._interactiveArea.width||1!==this._interactiveArea.height){const t=this._domElement.getBoundingClientRect(),n=e.clientX/t.width,r=e.clientY/t.height;if(n<this._interactiveArea.left||n>this._interactiveArea.right||r<this._interactiveArea.top||r>this._interactiveArea.bottom)return}const t=(e.buttons&ud)===ud?ud:(e.buttons&dd)===dd?dd:(e.buttons&cd)===cd?cd:null;if(null!==t){const e=this._findPointerByMouseButton(t);e&&this._disposePointer(e)}const n={pointerId:1,clientX:e.clientX,clientY:e.clientY,deltaX:0,deltaY:0,mouseButton:(e.buttons&ud)===ud?ud:(e.buttons&dd)===ud?dd:(e.buttons&cd)===ud?cd:null};this._activePointers.push(n),this._domElement.ownerDocument.removeEventListener("mousemove",l),this._domElement.ownerDocument.removeEventListener("mouseup",c),this._domElement.ownerDocument.addEventListener("mousemove",l),this._domElement.ownerDocument.addEventListener("mouseup",c),this._isDragging=!0,p(e)},s=e=>{e.cancelable&&e.preventDefault();const t=e.pointerId,n=this._lockedPointer||this._findPointerById(t);if(n){if(n.clientX=e.clientX,n.clientY=e.clientY,n.deltaX=e.movementX,n.deltaY=e.movementY,this._state=0,"touch"===e.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(e.buttons&ud)===ud)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(e.buttons&dd)===dd&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(e.buttons&cd)===cd&&(this._state=this._state|this.mouseButtons.right);g()}},l=e=>{const t=this._lockedPointer||this._findPointerById(1);t&&(t.clientX=e.clientX,t.clientY=e.clientY,t.deltaX=e.movementX,t.deltaY=e.movementY,this._state=0,(this._lockedPointer||(e.buttons&ud)===ud)&&(this._state=this._state|this.mouseButtons.left),(e.buttons&dd)===dd&&(this._state=this._state|this.mouseButtons.middle),(e.buttons&cd)===cd&&(this._state=this._state|this.mouseButtons.right),g())},u=e=>{const t=this._findPointerById(e.pointerId);if(!t||t!==this._lockedPointer){if(t&&this._disposePointer(t),"touch"===e.pointerType)switch(this._activePointers.length){case 0:this._state=hd.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._state=hd.NONE;m()}},c=()=>{const e=this._findPointerById(1);e&&e===this._lockedPointer||(e&&this._disposePointer(e),this._state=hd.NONE,m())};let d=-1;const h=e=>{if(!this._domElement)return;if(!this._enabled||this.mouseButtons.wheel===hd.NONE)return;if(0!==this._interactiveArea.left||0!==this._interactiveArea.top||1!==this._interactiveArea.width||1!==this._interactiveArea.height){const t=this._domElement.getBoundingClientRect(),n=e.clientX/t.width,r=e.clientY/t.height;if(n<this._interactiveArea.left||n>this._interactiveArea.right||r<this._interactiveArea.top||r>this._interactiveArea.bottom)return}if(e.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===hd.ROTATE||this.mouseButtons.wheel===hd.TRUCK){const e=performance.now();d-e<1e3&&this._getClientRect(this._elementRect),d=e}const t=Ld?-1:-3,n=1===e.deltaMode?e.deltaY/t:e.deltaY/(10*t),r=this.dollyToCursor?(e.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,i=this.dollyToCursor?(e.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case hd.ROTATE:this._rotateInternal(e.deltaX,e.deltaY),this._isUserControllingRotate=!0;break;case hd.TRUCK:this._truckInternal(e.deltaX,e.deltaY,!1),this._isUserControllingTruck=!0;break;case hd.OFFSET:this._truckInternal(e.deltaX,e.deltaY,!0),this._isUserControllingOffset=!0;break;case hd.DOLLY:this._dollyInternal(-n,r,i),this._isUserControllingDolly=!0;break;case hd.ZOOM:this._zoomInternal(-n,r,i),this._isUserControllingZoom=!0}this.dispatchEvent({type:"control"})},f=e=>{if(this._domElement&&this._enabled){if(this.mouseButtons.right===ah.ACTION.NONE){const t=e instanceof PointerEvent?e.pointerId:(MouseEvent,0),n=this._findPointerById(t);return n&&this._disposePointer(n),this._domElement.ownerDocument.removeEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mousemove",l),void this._domElement.ownerDocument.removeEventListener("mouseup",c)}e.preventDefault()}},p=e=>{if(!this._enabled)return;Pd(this._activePointers,jd),this._getClientRect(this._elementRect),n.copy(jd),r.copy(jd);if(this._activePointers.length>=2){const e=jd.x-this._activePointers[1].clientX,t=jd.y-this._activePointers[1].clientY,n=Math.sqrt(e*e+t*t);i.set(0,n);const o=.5*(this._activePointers[0].clientX+this._activePointers[1].clientX),a=.5*(this._activePointers[0].clientY+this._activePointers[1].clientY);r.set(o,a)}if(this._state=0,e)if("pointerType"in e&&"touch"===e.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._lockedPointer||(e.buttons&ud)!==ud||(this._state=this._state|this.mouseButtons.left),(e.buttons&dd)===dd&&(this._state=this._state|this.mouseButtons.middle),(e.buttons&cd)===cd&&(this._state=this._state|this.mouseButtons.right);else this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);(this._state&hd.ROTATE)!==hd.ROTATE&&(this._state&hd.TOUCH_ROTATE)!==hd.TOUCH_ROTATE&&(this._state&hd.TOUCH_DOLLY_ROTATE)!==hd.TOUCH_DOLLY_ROTATE&&(this._state&hd.TOUCH_ZOOM_ROTATE)!==hd.TOUCH_ZOOM_ROTATE||(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),(this._state&hd.TRUCK)!==hd.TRUCK&&(this._state&hd.TOUCH_TRUCK)!==hd.TOUCH_TRUCK&&(this._state&hd.TOUCH_DOLLY_TRUCK)!==hd.TOUCH_DOLLY_TRUCK&&(this._state&hd.TOUCH_ZOOM_TRUCK)!==hd.TOUCH_ZOOM_TRUCK||(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),(this._state&hd.DOLLY)!==hd.DOLLY&&(this._state&hd.TOUCH_DOLLY)!==hd.TOUCH_DOLLY&&(this._state&hd.TOUCH_DOLLY_TRUCK)!==hd.TOUCH_DOLLY_TRUCK&&(this._state&hd.TOUCH_DOLLY_OFFSET)!==hd.TOUCH_DOLLY_OFFSET&&(this._state&hd.TOUCH_DOLLY_ROTATE)!==hd.TOUCH_DOLLY_ROTATE||(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),(this._state&hd.ZOOM)!==hd.ZOOM&&(this._state&hd.TOUCH_ZOOM)!==hd.TOUCH_ZOOM&&(this._state&hd.TOUCH_ZOOM_TRUCK)!==hd.TOUCH_ZOOM_TRUCK&&(this._state&hd.TOUCH_ZOOM_OFFSET)!==hd.TOUCH_ZOOM_OFFSET&&(this._state&hd.TOUCH_ZOOM_ROTATE)!==hd.TOUCH_ZOOM_ROTATE||(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),(this._state&hd.OFFSET)!==hd.OFFSET&&(this._state&hd.TOUCH_OFFSET)!==hd.TOUCH_OFFSET&&(this._state&hd.TOUCH_DOLLY_OFFSET)!==hd.TOUCH_DOLLY_OFFSET&&(this._state&hd.TOUCH_ZOOM_OFFSET)!==hd.TOUCH_ZOOM_OFFSET||(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},g=()=>{if(!this._enabled)return;Pd(this._activePointers,jd);const e=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,t=e?-e.deltaX:r.x-jd.x,o=e?-e.deltaY:r.y-jd.y;if(r.copy(jd),(this._state&hd.ROTATE)!==hd.ROTATE&&(this._state&hd.TOUCH_ROTATE)!==hd.TOUCH_ROTATE&&(this._state&hd.TOUCH_DOLLY_ROTATE)!==hd.TOUCH_DOLLY_ROTATE&&(this._state&hd.TOUCH_ZOOM_ROTATE)!==hd.TOUCH_ZOOM_ROTATE||(this._rotateInternal(t,o),this._isUserControllingRotate=!0),(this._state&hd.DOLLY)===hd.DOLLY||(this._state&hd.ZOOM)===hd.ZOOM){const e=this.dollyToCursor?(n.x-this._elementRect.x)/this._elementRect.width*2-1:0,t=this.dollyToCursor?(n.y-this._elementRect.y)/this._elementRect.height*-2+1:0,r=this.dollyDragInverted?-1:1;(this._state&hd.DOLLY)===hd.DOLLY?(this._dollyInternal(r*o*zd,e,t),this._isUserControllingDolly=!0):(this._zoomInternal(r*o*zd,e,t),this._isUserControllingZoom=!0)}if((this._state&hd.TOUCH_DOLLY)===hd.TOUCH_DOLLY||(this._state&hd.TOUCH_ZOOM)===hd.TOUCH_ZOOM||(this._state&hd.TOUCH_DOLLY_TRUCK)===hd.TOUCH_DOLLY_TRUCK||(this._state&hd.TOUCH_ZOOM_TRUCK)===hd.TOUCH_ZOOM_TRUCK||(this._state&hd.TOUCH_DOLLY_OFFSET)===hd.TOUCH_DOLLY_OFFSET||(this._state&hd.TOUCH_ZOOM_OFFSET)===hd.TOUCH_ZOOM_OFFSET||(this._state&hd.TOUCH_DOLLY_ROTATE)===hd.TOUCH_DOLLY_ROTATE||(this._state&hd.TOUCH_ZOOM_ROTATE)===hd.TOUCH_ZOOM_ROTATE){const e=jd.x-this._activePointers[1].clientX,t=jd.y-this._activePointers[1].clientY,n=Math.sqrt(e*e+t*t),o=i.y-n;i.set(0,n);const a=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,s=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&hd.TOUCH_DOLLY)===hd.TOUCH_DOLLY||(this._state&hd.TOUCH_DOLLY_ROTATE)===hd.TOUCH_DOLLY_ROTATE||(this._state&hd.TOUCH_DOLLY_TRUCK)===hd.TOUCH_DOLLY_TRUCK||(this._state&hd.TOUCH_DOLLY_OFFSET)===hd.TOUCH_DOLLY_OFFSET?(this._dollyInternal(o*zd,a,s),this._isUserControllingDolly=!0):(this._zoomInternal(o*zd,a,s),this._isUserControllingZoom=!0)}(this._state&hd.TRUCK)!==hd.TRUCK&&(this._state&hd.TOUCH_TRUCK)!==hd.TOUCH_TRUCK&&(this._state&hd.TOUCH_DOLLY_TRUCK)!==hd.TOUCH_DOLLY_TRUCK&&(this._state&hd.TOUCH_ZOOM_TRUCK)!==hd.TOUCH_ZOOM_TRUCK||(this._truckInternal(t,o,!1),this._isUserControllingTruck=!0),(this._state&hd.OFFSET)!==hd.OFFSET&&(this._state&hd.TOUCH_OFFSET)!==hd.TOUCH_OFFSET&&(this._state&hd.TOUCH_DOLLY_OFFSET)!==hd.TOUCH_DOLLY_OFFSET&&(this._state&hd.TOUCH_ZOOM_OFFSET)!==hd.TOUCH_ZOOM_OFFSET||(this._truckInternal(t,o,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},m=()=>{Pd(this._activePointers,jd),r.copy(jd),(0===this._activePointers.length||1===this._activePointers.length&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),0===this._activePointers.length&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",l),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mouseup",c),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{this._enabled&&this._domElement&&(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",v),this._domElement.ownerDocument.addEventListener("pointerlockerror",y),this._domElement.ownerDocument.addEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),p())},this.unlockPointer=()=>{null!==this._lockedPointer&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",v),this._domElement.ownerDocument.removeEventListener("pointerlockerror",y))};const v=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},y=()=>{this.unlockPointer()};this._addAllEventListeners=e=>{this._domElement=e,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),Nd&&this._domElement.addEventListener("mousedown",a),this._domElement.addEventListener("pointercancel",u),this._domElement.addEventListener("wheel",h,{passive:!1}),this._domElement.addEventListener("contextmenu",f)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("mousedown",a),this._domElement.removeEventListener("pointercancel",u),this._domElement.removeEventListener("wheel",h,{passive:!1}),this._domElement.removeEventListener("contextmenu",f),this._domElement.ownerDocument.removeEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",l),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mouseup",c),this._domElement.ownerDocument.removeEventListener("pointerlockchange",v),this._domElement.ownerDocument.removeEventListener("pointerlockerror",y))},this.cancel=()=>{this._state!==hd.NONE&&(this._state=hd.NONE,this._activePointers.length=0,m())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=xd(e.width,0,1),this._interactiveArea.height=xd(e.height,0,1),this._interactiveArea.x=xd(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=xd(e.x,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,n=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,n)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,n=!1){this._isUserControllingRotate=!1;const r=xd(e,this.minAzimuthAngle,this.maxAzimuthAngle),i=xd(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=i,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,n||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!n||Ed(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ed(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=fd,this._changedDolly=0,this._dollyToNoClamp(xd(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const n=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const t=this._collisionTest(),r=Ed(t,this._spherical.radius);if(!(n>e)&&r)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,t)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const r=!t||Ed(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(r)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(Wd).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const n=!t||Ed(this._target.x,this._targetEnd.x,this.restThreshold)&&Ed(this._target.y,this._targetEnd.y,this.restThreshold)&&Ed(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(n)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=xd(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const n=!t||Ed(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(n)}pan(e,t,n=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,n)}truck(e,t,n=!1){this._camera.updateMatrix(),qd.setFromMatrixColumn(this._camera.matrix,0),$d.setFromMatrixColumn(this._camera.matrix,1),qd.multiplyScalar(e),$d.multiplyScalar(-t);const r=Bd.copy(qd).add($d),i=Vd.copy(this._targetEnd).add(r);return this.moveTo(i.x,i.y,i.z,n)}forward(e,t=!1){Bd.setFromMatrixColumn(this._camera.matrix,0),Bd.crossVectors(this._camera.up,Bd),Bd.multiplyScalar(e);const n=Vd.copy(this._targetEnd).add(Bd);return this.moveTo(n.x,n.y,n.z,t)}elevate(e,t=!1){return Bd.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+Bd.x,this._targetEnd.y+Bd.y,this._targetEnd.z+Bd.z,t)}moveTo(e,t,n,r=!1){this._isUserControllingTruck=!1;const i=Bd.set(e,t,n).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,i,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const o=!r||Ed(this._target.x,this._targetEnd.x,this.restThreshold)&&Ed(this._target.y,this._targetEnd.y,this.restThreshold)&&Ed(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,n,r=!1){const i=Bd.set(e,t,n).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(i.x,i.y,i.z,r)}fitToBox(e,t,{cover:n=!1,paddingLeft:r=0,paddingRight:i=0,paddingBottom:o=0,paddingTop:a=0}={}){const s=[],l=e.isBox3?Jd.copy(e):Jd.setFromObject(e);l.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const u=kd(this._sphericalEnd.theta,bd),c=kd(this._sphericalEnd.phi,bd);s.push(this.rotateTo(u,c,t));const d=Bd.setFromSpherical(this._sphericalEnd).normalize(),h=nh.setFromUnitVectors(d,Gd),f=Ed(Math.abs(d.y),1);f&&h.multiply(rh.setFromAxisAngle(Fd,u)),h.multiply(this._yAxisUpSpaceInverse);const p=eh.makeEmpty();Vd.copy(l.min).applyQuaternion(h),p.expandByPoint(Vd),Vd.copy(l.min).setX(l.max.x).applyQuaternion(h),p.expandByPoint(Vd),Vd.copy(l.min).setY(l.max.y).applyQuaternion(h),p.expandByPoint(Vd),Vd.copy(l.max).setZ(l.min.z).applyQuaternion(h),p.expandByPoint(Vd),Vd.copy(l.min).setZ(l.max.z).applyQuaternion(h),p.expandByPoint(Vd),Vd.copy(l.max).setY(l.min.y).applyQuaternion(h),p.expandByPoint(Vd),Vd.copy(l.max).setX(l.min.x).applyQuaternion(h),p.expandByPoint(Vd),Vd.copy(l.max).applyQuaternion(h),p.expandByPoint(Vd),p.min.x-=r,p.min.y-=o,p.max.x+=i,p.max.y+=a,h.setFromUnitVectors(Gd,d),f&&h.premultiply(rh.invert()),h.premultiply(this._yAxisUpSpace);const g=p.getSize(Bd),m=p.getCenter(Vd).applyQuaternion(h);if(md(this._camera)){const e=this.getDistanceToFitBox(g.x,g.y,g.z,n);s.push(this.moveTo(m.x,m.y,m.z,t)),s.push(this.dollyTo(e,t)),s.push(this.setFocalOffset(0,0,0,t))}else if(vd(this._camera)){const e=this._camera,r=e.right-e.left,i=e.top-e.bottom,o=n?Math.max(r/g.x,i/g.y):Math.min(r/g.x,i/g.y);s.push(this.moveTo(m.x,m.y,m.z,t)),s.push(this.zoomTo(o,t)),s.push(this.setFocalOffset(0,0,0,t))}return Promise.all(s)}fitToSphere(e,t){const n=[],r=e instanceof Id.Sphere?th.copy(e):ah.createBoundingSphere(e,th);if(n.push(this.moveTo(r.center.x,r.center.y,r.center.z,t)),md(this._camera)){const e=this.getDistanceToFitSphere(r.radius);n.push(this.dollyTo(e,t))}else if(vd(this._camera)){const e=this._camera.right-this._camera.left,i=this._camera.top-this._camera.bottom,o=2*r.radius,a=Math.min(e/o,i/o);n.push(this.zoomTo(a,t))}return n.push(this.setFocalOffset(0,0,0,t)),Promise.all(n)}setLookAt(e,t,n,r,i,o,a=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=fd,this._changedDolly=0;const s=Vd.set(r,i,o),l=Bd.set(e,t,n);this._targetEnd.copy(s),this._sphericalEnd.setFromVector3(l.sub(s).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const u=!a||Ed(this._target.x,this._targetEnd.x,this.restThreshold)&&Ed(this._target.y,this._targetEnd.y,this.restThreshold)&&Ed(this._target.z,this._targetEnd.z,this.restThreshold)&&Ed(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ed(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Ed(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(u)}lerpLookAt(e,t,n,r,i,o,a,s,l,u,c,d,h,f=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=fd,this._changedDolly=0;const p=Bd.set(r,i,o),g=Vd.set(e,t,n);Kd.setFromVector3(g.sub(p).applyQuaternion(this._yAxisUpSpace));const m=Hd.set(u,c,d),v=Vd.set(a,s,l);Qd.setFromVector3(v.sub(m).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(p.lerp(m,h));const y=Qd.theta-Kd.theta,b=Qd.phi-Kd.phi,_=Qd.radius-Kd.radius;this._sphericalEnd.set(Kd.radius+_*h,Kd.phi+b*h,Kd.theta+y*h),this.normalizeRotations(),this._needsUpdate=!0,f||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const w=!f||Ed(this._target.x,this._targetEnd.x,this.restThreshold)&&Ed(this._target.y,this._targetEnd.y,this.restThreshold)&&Ed(this._target.z,this._targetEnd.z,this.restThreshold)&&Ed(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ed(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Ed(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(w)}setPosition(e,t,n,r=!1){return this.setLookAt(e,t,n,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,n,r=!1){const i=this.getPosition(Bd),o=this.setLookAt(i.x,i.y,i.z,e,t,n,r);return this._sphericalEnd.phi=xd(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,n,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,n),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const i=!r||Ed(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&Ed(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&Ed(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}setOrbitPoint(e,t,n){this._camera.updateMatrixWorld(),qd.setFromMatrixColumn(this._camera.matrixWorldInverse,0),$d.setFromMatrixColumn(this._camera.matrixWorldInverse,1),Yd.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=Bd.set(e,t,n),i=r.distanceTo(this._camera.position),o=r.sub(this._camera.position);qd.multiplyScalar(o.x),$d.multiplyScalar(o.y),Yd.multiplyScalar(o.z),Bd.copy(qd).add($d).add(Yd),Bd.z=Bd.z+i,this.dollyTo(i,!1),this.setFocalOffset(-Bd.x,Bd.y,-Bd.z,!1),this.moveTo(e,t,n,!1)}setBoundary(e){if(!e)return this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),void(this._needsUpdate=!0);this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,n,r){null!==e?(this._viewport=this._viewport||new Id.Vector4,"number"==typeof e?this._viewport.set(e,t,n,r):this._viewport.copy(e)):this._viewport=null}getDistanceToFitBox(e,t,n,r=!1){if(Od(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const i=e/t,o=this._camera.getEffectiveFOV()*wd,a=this._camera.aspect;return.5*((r?i>a:i<a)?t:e/a)/Math.tan(.5*o)+.5*n}getDistanceToFitSphere(e){if(Od(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*wd,n=2*Math.atan(Math.tan(.5*t)*this._camera.aspect),r=1<this._camera.aspect?t:n;return e/Math.sin(.5*r)}getTarget(e,t=!0){return(e&&e.isVector3?e:new Id.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new Id.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e&&e instanceof Id.Spherical?e:new Id.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new Id.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%yd,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=yd),this._spherical.theta+=yd*Math.round((this._sphericalEnd.theta-this._spherical.theta)/yd)}reset(e=!1){if(!Ed(this._camera.up.x,this._cameraUp0.x)||!Ed(this._camera.up.y,this._cameraUp0.y)||!Ed(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const e=this.getPosition(Bd);this.updateCameraUp(),this.setPosition(e.x,e.y,e.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Fd),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=Bd.subVectors(this._target,this._camera.position).normalize(),t=Vd.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e),this._camera.updateMatrixWorld();const n=this.getPosition(Bd);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,n=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,i=Xd.subVectors(this._targetEnd,this._target),o=Zd.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if(Sd(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const t=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=Md(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,t,1/0,e),this._needsUpdate=!0}if(Sd(n))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const t=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=Md(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,t,1/0,e),this._needsUpdate=!0}if(Sd(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const t=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=Md(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,t,this.maxSpeed,e),this._needsUpdate=!0}if(Sd(i.x)&&Sd(i.y)&&Sd(i.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const t=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;Ad(this._target,this._targetEnd,this._targetVelocity,t,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(Sd(o.x)&&Sd(o.y)&&Sd(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const t=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;Ad(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,t,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(Sd(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const t=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=Md(this._zoom,this._zoomEnd,this._zoomVelocity,t,1/0,e)}if(this.dollyToCursor)if(md(this._camera)&&0!==this._changedDolly){const e=this._spherical.radius-this._lastDistance,t=this._camera,n=this._getCameraDirection(Wd),r=Bd.copy(n).cross(t.up).normalize();0===r.lengthSq()&&(r.x=1);const i=Vd.crossVectors(r,n),o=this._sphericalEnd.radius*Math.tan(t.getEffectiveFOV()*wd*.5),a=(this._sphericalEnd.radius-e-this._sphericalEnd.radius)/this._sphericalEnd.radius,s=Hd.copy(this._targetEnd).add(r.multiplyScalar(this._dollyControlCoord.x*o*t.aspect)).add(i.multiplyScalar(this._dollyControlCoord.y*o)),l=Bd.copy(this._targetEnd).lerp(s,a),u=this._lastDollyDirection===pd&&this._spherical.radius<=this.minDistance,c=this._lastDollyDirection===gd&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(u||c)){this._sphericalEnd.radius-=e,this._spherical.radius-=e;const t=Vd.copy(n).multiplyScalar(-e);l.add(t)}this._boundary.clampPoint(l,l);const d=Vd.subVectors(l,this._targetEnd);this._targetEnd.copy(l),this._target.add(d),this._changedDolly-=e,Sd(this._changedDolly)&&(this._changedDolly=0)}else if(vd(this._camera)&&0!==this._changedZoom){const e=this._zoom-this._lastZoom,t=this._camera,n=Bd.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(t.near+t.far)/(t.near-t.far)).unproject(t),r=Vd.set(0,0,-1).applyQuaternion(t.quaternion),i=Hd.copy(n).add(r.multiplyScalar(-n.dot(t.up))),o=-(this._zoom-e-this._zoom)/this._zoom,a=this._getCameraDirection(Wd),s=this._targetEnd.dot(a),l=Bd.copy(this._targetEnd).lerp(i,o),u=l.dot(a),c=a.multiplyScalar(u-s);l.sub(c),this._boundary.clampPoint(l,l);const d=Vd.subVectors(l,this._targetEnd);this._targetEnd.copy(l),this._target.add(d),this._changedZoom-=e,Sd(this._changedZoom)&&(this._changedZoom=0)}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);const s=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,s),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target);(!Sd(this._focalOffset.x)||!Sd(this._focalOffset.y)||!Sd(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),qd.setFromMatrixColumn(this._camera.matrix,0),$d.setFromMatrixColumn(this._camera.matrix,1),Yd.setFromMatrixColumn(this._camera.matrix,2),qd.multiplyScalar(this._focalOffset.x),$d.multiplyScalar(-this._focalOffset.y),Yd.multiplyScalar(this._focalOffset.z),Bd.copy(qd).add($d).add(Yd),this._camera.position.add(Bd)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),Bd.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const l=this._needsUpdate;return l&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):l?(this.dispatchEvent({type:"update"}),Sd(t,this.restThreshold)&&Sd(n,this.restThreshold)&&Sd(r,this.restThreshold)&&Sd(i.x,this.restThreshold)&&Sd(i.y,this.restThreshold)&&Sd(i.z,this.restThreshold)&&Sd(o.x,this.restThreshold)&&Sd(o.y,this.restThreshold)&&Sd(o.z,this.restThreshold)&&Sd(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!l&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=l,this._needsUpdate=!1,l}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Td(this.maxDistance),minZoom:this.minZoom,maxZoom:Td(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Td(this.maxPolarAngle),minAzimuthAngle:Td(this.minAzimuthAngle),maxAzimuthAngle:Td(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:Bd.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const n=JSON.parse(e);this.enabled=n.enabled,this.minDistance=n.minDistance,this.maxDistance=Cd(n.maxDistance),this.minZoom=n.minZoom,this.maxZoom=Cd(n.maxZoom),this.minPolarAngle=n.minPolarAngle,this.maxPolarAngle=Cd(n.maxPolarAngle),this.minAzimuthAngle=Cd(n.minAzimuthAngle),this.maxAzimuthAngle=Cd(n.maxAzimuthAngle),this.smoothTime=n.smoothTime,this.draggingSmoothTime=n.draggingSmoothTime,this.dollySpeed=n.dollySpeed,this.truckSpeed=n.truckSpeed,this.dollyToCursor=n.dollyToCursor,this.verticalDragToForward=n.verticalDragToForward,this._target0.fromArray(n.target0),this._position0.fromArray(n.position0),this._zoom0=n.zoom0,this._focalOffset0.fromArray(n.focalOffset0),this.moveTo(n.target[0],n.target[1],n.target[2],t),Kd.setFromVector3(Bd.fromArray(n.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Kd.theta,Kd.phi,t),this.dollyTo(Kd.radius,t),this.zoomTo(n.zoom,t),this.setFocalOffset(n.focalOffset[0],n.focalOffset[1],n.focalOffset[2],t),this._needsUpdate=!0}connect(e){this._domElement?console.warn("camera-controls is already connected."):(e.setAttribute("data-camera-controls-version","2.7.0"),this._addAllEventListeners(e))}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find((t=>t.pointerId===e))}_findPointerByMouseButton(e){return this._activePointers.find((t=>t.mouseButton===e))}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,n){const r=t.lengthSq();if(0===r)return e;const i=Vd.copy(t).add(e),o=this._boundary.clampPoint(i,Hd).sub(i),a=o.lengthSq();if(0===a)return e.add(t);if(a===r)return e;if(0===n)return e.add(t).add(o);{const r=1+n*a/t.dot(o);return e.add(Vd.copy(t).multiplyScalar(r)).add(o.multiplyScalar(1-n))}}_updateNearPlaneCorners(){if(md(this._camera)){const e=this._camera,t=e.near,n=e.getEffectiveFOV()*wd,r=Math.tan(.5*n)*t,i=r*e.aspect;this._nearPlaneCorners[0].set(-i,-r,0),this._nearPlaneCorners[1].set(i,-r,0),this._nearPlaneCorners[2].set(i,r,0),this._nearPlaneCorners[3].set(-i,r,0)}else if(vd(this._camera)){const e=this._camera,t=1/e.zoom,n=e.left*t,r=e.right*t,i=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(n,i,0),this._nearPlaneCorners[1].set(r,i,0),this._nearPlaneCorners[2].set(r,o,0),this._nearPlaneCorners[3].set(n,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1))return e;if(Od(this._camera,"_collisionTest"))return e;const t=this._getTargetDirection(Wd);ih.lookAt(Rd,t,this._camera.up);for(let n=0;n<4;n++){const r=Vd.copy(this._nearPlaneCorners[n]);r.applyMatrix4(ih);const i=Hd.addVectors(this._target,r);oh.set(i,t),oh.far=this._spherical.radius+1;const o=oh.intersectObjects(this.colliderMeshes);0!==o.length&&o[0].distance<e&&(e=o[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise((e=>{const t=()=>{this.removeEventListener("rest",t),e()};this.addEventListener("rest",t)})))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new Id.Sphere){const n=t,r=n.center;Jd.makeEmpty(),e.traverseVisible((e=>{e.isMesh&&Jd.expandByObject(e)})),Jd.getCenter(r);let i=0;return e.traverseVisible((e=>{if(!e.isMesh)return;const t=e,n=t.geometry.clone();n.applyMatrix4(t.matrixWorld);const o=n.attributes.position;for(let a=0,s=o.count;a<s;a++)Bd.fromBufferAttribute(o,a),i=Math.max(i,r.distanceToSquared(Bd))})),n.radius=Math.sqrt(i),n}}var sh=n(3345);const lh=(()=>{const e=new Map;let t=[];const n=t=>{t.forEach((t=>{if(!t.disabled)if(t.ref){if(!t.ref.current)return;const n=t.ref.current;e.has(n)||e.set(n,new sh(n)),e.get(n).bind(t.keys,t.callback,t.action)}else e.get(void 0)||e.set(void 0,sh),e.get(void 0).bind(t.keys,t.callback,t.action)}))},r=e=>{t=[...t,...e],n(e)},i=r=>{t=t.filter((e=>!r.includes(e))),r.forEach((t=>{var n,r;if(t.ref){if(!t.ref.current)return;null==(n=e.get(t.ref.current))||n.unbind(t.keys,t.action)}else null==(r=e.get(void 0))||r.unbind(t.keys,t.action)}));for(const[n]of e){if(void 0===n){if(t.some((e=>void 0===e.ref)))continue}else if(t.some((e=>{var t;return(null==(t=e.ref)?void 0:t.current)===n})))continue;e.delete(n)}n(t)};return()=>{const[e,n]=(0,a.useState)([]);return(0,a.useEffect)((()=>{n(t)}),[]),[e,r,i]}})(),uh=e=>{const[t,n,r]=lh();return(0,a.useLayoutEffect)((()=>(e&&n(e),()=>{e&&r(e)})),[n,r,e]),(0,a.useMemo)((()=>t.reduce(((e,t)=>(e.find((e=>e.keys===t.keys&&e.ref&&t.ref))||e.push(t),e)),[])),[t])};let ch=!1;try{navigator&&(ch=navigator.platform.toUpperCase().indexOf("MAC")>=0)}catch(ip){console.warn(ip)}var dh;!function(e){e.HOLD_START="holdStart",e.HOLD_END="holdEnd",e.HOLDING="holding"}(dh||(dh={}));class hh{constructor(){this._listeners={}}addEventListener(e,t){const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}removeEventListener(e,t){const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e)}}}class fh extends hh{constructor(e){super(),this._enabled=!0,this._holding=!1,this._intervalId=-1,this._deltaTime=0,this._elapsedTime=0,this._lastTime=0,this._holdStart=e=>{if(!this._enabled)return;if(this._holding)return;this._deltaTime=0,this._elapsedTime=0,this._lastTime=performance.now(),this.dispatchEvent({type:dh.HOLD_START,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:e}),this._holding=!0;const t=()=>{this._intervalId=this.holdIntervalDelay?window.setTimeout(t,this.holdIntervalDelay):window.requestAnimationFrame(t);const n=performance.now();this._deltaTime=n-this._lastTime,this._elapsedTime+=this._deltaTime,this._lastTime=performance.now(),this.dispatchEvent({type:dh.HOLDING,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:e})};this._intervalId=this.holdIntervalDelay?window.setTimeout(t,this.holdIntervalDelay):window.requestAnimationFrame(t)},this._holdEnd=e=>{if(!this._enabled)return;if(!this._holding)return;const t=performance.now();this._deltaTime=t-this._lastTime,this._elapsedTime+=this._deltaTime,this._lastTime=performance.now(),this.dispatchEvent({type:dh.HOLD_END,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:e}),window.clearTimeout(this._intervalId),window.cancelAnimationFrame(this._intervalId),this._holding=!1},this.holdIntervalDelay=e}get enabled(){return this._enabled}set enabled(e){this._enabled!==e&&(this._enabled=e,this._enabled||this._holdEnd())}}class ph extends fh{constructor(e,t){super(t),this._holdStart=this._holdStart.bind(this),this._holdEnd=this._holdEnd.bind(this);document.addEventListener("keydown",(t=>{(function(e){const t=e.target;return"INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable})(t)||t.keyCode===e&&this._holdStart(t)})),document.addEventListener("keyup",(t=>{t.keyCode===e&&this._holdEnd(t)})),window.addEventListener("blur",this._holdEnd)}}const gh=(e,t)=>{const n=null!==e[0].index,r=new Set(Object.keys(e[0].attributes)),i=new Set(Object.keys(e[0].morphAttributes)),o={},a={},s=e[0].morphTargetsRelative,l=new M.BufferGeometry;let u=0;if(e.forEach(((e,c)=>{let d=0;if(n!==(null!==e.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let t in e.attributes){if(!r.has(t))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+t+'" attribute exists among all geometries, or in none of them.'),null;void 0===o[t]&&(o[t]=[]),o[t].push(e.attributes[t]),d++}if(d!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(s!==e.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let t in e.morphAttributes){if(!i.has(t))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===a[t]&&(a[t]=[]),a[t].push(e.morphAttributes[t])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(e.userData),t){let t;if(e.index)t=e.index.count;else{if(void 0===e.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;t=e.attributes.position.count}l.addGroup(u,t,c),u+=t}})),n){let t=0;const n=[];e.forEach((e=>{const r=e.index;for(let i=0;i<r.count;++i)n.push(r.getX(i)+t);t+=e.attributes.position.count})),l.setIndex(n)}for(let c in o){const e=mh(o[c]);if(!e)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+c+" attribute."),null;l.setAttribute(c,e)}for(let c in a){const e=a[c][0].length;if(0===e)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[c]=[];for(let t=0;t<e;++t){const e=[];for(let r=0;r<a[c].length;++r)e.push(a[c][r][t]);const n=mh(e);if(!n)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+c+" morphAttribute."),null;l.morphAttributes[c].push(n)}}return l},mh=e=>{let t,n,r,i=0;if(e.forEach((e=>(void 0===t&&(t=e.array.constructor),t!==e.array.constructor?(console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null):(void 0===n&&(n=e.itemSize),n!==e.itemSize?(console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null):(void 0===r&&(r=e.normalized),r!==e.normalized?(console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null):void(i+=e.array.length)))))),t&&n){const o=new t(i);let a=0;return e.forEach((e=>{o.set(e.array,a),a+=e.array.length})),new M.BufferAttribute(o,n,r)}};const vh=new M.Frustum,yh=new M.Vector3,bh=new M.Vector3,_h=new M.Vector3,wh=new M.Vector3,xh=new M.Vector3,Sh=new M.Vector3,Eh=new M.Vector3,kh=new M.Vector3,Th=new M.Vector3,Ch=new M.Vector3,Mh=new M.Vector3,Ah=new M.Vector3,Ph=new M.Vector3,Oh=new M.Vector3;class Uh{constructor(e,t,n){this.camera=e,this.scene=t,this.startPoint=new M.Vector3,this.endPoint=new M.Vector3,this.collection=[],this.deep=n||Number.MAX_VALUE}select(e,t){return this.startPoint=e||this.startPoint,this.endPoint=t||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(vh,this.scene),this.collection}updateFrustum(e,t){if(e=e||this.startPoint,t=t||this.endPoint,e.x===t.x&&(t.x+=Number.EPSILON),e.y===t.y&&(t.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera)bh.copy(e),bh.x=Math.min(e.x,t.x),bh.y=Math.max(e.y,t.y),t.x=Math.max(e.x,t.x),t.y=Math.min(e.y,t.y),_h.setFromMatrixPosition(this.camera.matrixWorld),wh.copy(bh),xh.set(t.x,bh.y,0),Sh.copy(t),Eh.set(bh.x,t.y,0),wh.unproject(this.camera),xh.unproject(this.camera),Sh.unproject(this.camera),Eh.unproject(this.camera),Ah.copy(wh).sub(_h),Ph.copy(xh).sub(_h),Oh.copy(Sh).sub(_h),Ah.normalize(),Ph.normalize(),Oh.normalize(),Ah.multiplyScalar(this.deep),Ph.multiplyScalar(this.deep),Oh.multiplyScalar(this.deep),Ah.add(_h),Ph.add(_h),Oh.add(_h),(n=vh.planes)[0].setFromCoplanarPoints(_h,wh,xh),n[1].setFromCoplanarPoints(_h,xh,Sh),n[2].setFromCoplanarPoints(Sh,Eh,_h),n[3].setFromCoplanarPoints(Eh,wh,_h),n[4].setFromCoplanarPoints(xh,Sh,Eh),n[5].setFromCoplanarPoints(Oh,Ph,Ah),n[5].normal.multiplyScalar(-1);else if(this.camera.isOrthographicCamera){const r=Math.min(e.x,t.x),i=Math.max(e.y,t.y),o=Math.max(e.x,t.x),a=Math.min(e.y,t.y);var n;wh.set(r,i,-1),xh.set(o,i,-1),Sh.set(o,a,-1),Eh.set(r,a,-1),kh.set(r,i,1),Th.set(o,i,1),Ch.set(o,a,1),Mh.set(r,a,1),wh.unproject(this.camera),xh.unproject(this.camera),Sh.unproject(this.camera),Eh.unproject(this.camera),kh.unproject(this.camera),Th.unproject(this.camera),Ch.unproject(this.camera),Mh.unproject(this.camera),(n=vh.planes)[0].setFromCoplanarPoints(wh,kh,Th),n[1].setFromCoplanarPoints(xh,Th,Ch),n[2].setFromCoplanarPoints(Ch,Mh,Eh),n[3].setFromCoplanarPoints(Mh,kh,wh),n[4].setFromCoplanarPoints(xh,Sh,Eh),n[5].setFromCoplanarPoints(Ch,Th,kh),n[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(e,t){if((t.isMesh||t.isLine||t.isPoints)&&void 0!==t.material&&(null===t.geometry.boundingSphere&&t.geometry.computeBoundingSphere(),yh.copy(t.geometry.boundingSphere.center),yh.applyMatrix4(t.matrixWorld),e.containsPoint(yh)&&this.collection.push(t)),t.children.length>0)for(let n=0;n<t.children.length;n++)this.searchChildInFrustum(e,t.children[n])}}var zh,Dh;n(42);function Lh(e,t=[]){const n=t.length;for(const r of e){const e=t.indexOf(r);if(e>-1){const n=[...t.slice(e),r].map((e=>e.data.id));throw new Error(`Invalid Graph: Circular node path detected: ${n.join(" -> ")}.`)}n>r.depth&&(r.depth=n,Lh(r.out,[...t,r]))}}function Nh(e,t){let n=!1;const r=e.reduce(((e,t)=>({...e,[t.id]:{data:t,out:[],depth:-1,ins:[]}})),{});try{for(const e of t){const t=e.source,n=e.target;if(!r.hasOwnProperty(t))throw new Error(`Missing source Node ${t}`);if(!r.hasOwnProperty(n))throw new Error(`Missing target Node ${n}`);const i=r[t],o=r[n];o.ins.push(i),i.out.push(o)}Lh(Object.values(r))}catch(ip){n=!0}const i=Object.keys(r).map((e=>r[e].depth)),o=Math.max(...i);return{invalid:n,depths:r,maxDepth:o||1}}!function(){try{if("undefined"!=typeof document){var e=document.createElement("style");e.appendChild(document.createTextNode("._canvas_670zp_1 {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n._container_155l7_1 {\n  transform-origin: bottom right;\n  overflow: hidden;\n  position: absolute;\n  border: solid 1px var(--radial-menu-border);\n}\n\n  ._container_155l7_1._disabled_155l7_7 {\n    opacity: 0.6;\n  }\n\n  ._container_155l7_1._disabled_155l7_7 ._contentContainer_155l7_10 {\n      cursor: not-allowed;\n    }\n\n  ._container_155l7_1:not(._disabled_155l7_7) ._contentContainer_155l7_10 {\n      cursor: pointer;\n    }\n\n  ._container_155l7_1:not(._disabled_155l7_7) ._contentContainer_155l7_10:hover {\n        color: var(--radial-menu-active-color);\n        background: var(--radial-menu-active-background);\n      }\n\n  ._container_155l7_1 ._contentContainer_155l7_10 {\n    width: 200%;\n    height: 200%;\n    transform-origin: 50% 50%;\n    border-radius: 50%;\n    outline: none;\n    transition: background 150ms ease-in-out;\n    color: var(--radial-menu-color);\n  }\n\n  ._container_155l7_1 ._contentContainer_155l7_10 ._contentInner_155l7_35 {\n      position: absolute;\n      width: 100%;\n      text-align: center;\n    }\n\n  ._container_155l7_1 ._contentContainer_155l7_10 ._contentInner_155l7_35 ._content_155l7_10 {\n        display: inline-block;\n      }\n\n  ._container_155l7_1 svg {\n    margin: 0 auto;\n    fill: var(--radial-menu-active-color);\n    height: 25px;\n    width: 25px;\n    display: block;\n  }\n._container_x9hyx_1 {\n  border-radius: 50%;\n  z-index: 9;\n  position: relative;\n  height: 175px;\n  width: 175px;\n  border: solid 5px var(--radial-menu-border);\n  overflow: hidden;\n  background: var(--radial-menu-background);\n}\n\n  ._container_x9hyx_1:before {\n    content: ' ';\n    background: var(--radial-menu-border);\n    border-radius: 50%;\n    height: 25px;\n    width: 25px;\n    position: absolute;\n    z-index: 9;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }")),document.head.appendChild(e)}}catch(ip){console.error("vite-plugin-css-injected-by-js",ip)}}();const Ih=["radialin","radialout"];function Rh({nodes:e,edges:t,mode:n="lr",nodeLevelRatio:r=2}){const{depths:i,maxDepth:o,invalid:a}=Nh(e,t);if(a)return null;const s=Ih.includes(n)?1:5,l=e.length/o*r*s;if(n){const t=(e,t)=>n=>e?(i[n.id].depth-o/2)*l*(t?-1:1):void 0,r=t(["lr","rl"].includes(n),"rl"===n),a=t(["td","bu"].includes(n),"td"===n),s=t(["zin","zout"].includes(n),"zout"===n);e.forEach((e=>{e.fx=r(e),e.fy=a(e),e.fz=s(e)}))}return Ih.includes(n)?function(e,t,n,r){var i,o,a,s,l=nt(.1);function u(e){for(var l=0,u=i.length;l<u;++l){var c=i[l],d=c.x-t||1e-6,h=(c.y||0)-n||1e-6,f=(c.z||0)-r||1e-6,p=Math.sqrt(d*d+h*h+f*f),g=(s[l]-p)*a[l]*e/p;c.vx+=d*g,o>1&&(c.vy+=h*g),o>2&&(c.vz+=f*g)}}function c(){if(i){var t,n=i.length;for(a=new Array(n),s=new Array(n),t=0;t<n;++t)s[t]=+e(i[t],t,i),a[t]=isNaN(s[t])?0:+l(i[t],t,i)}}return"function"!=typeof e&&(e=nt(+e)),null==t&&(t=0),null==n&&(n=0),null==r&&(r=0),u.initialize=function(e,...t){i=e,o=t.find((e=>[1,2,3].includes(e)))||2,c()},u.strength=function(e){return arguments.length?(l="function"==typeof e?e:nt(+e),c(),u):l},u.radius=function(t){return arguments.length?(e="function"==typeof t?t:nt(+t),c(),u):e},u.x=function(e){return arguments.length?(t=+e,u):t},u.y=function(e){return arguments.length?(n=+e,u):n},u.z=function(e){return arguments.length?(r=+e,u):r},u}((e=>{const t=i[e.id];return("radialin"===n?o-t.depth:t.depth)*l})).strength(1):null}function Fh(e){let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;for(let s of e)t=Math.min(t,s.position.x),n=Math.max(n,s.position.x),r=Math.min(r,s.position.y),i=Math.max(i,s.position.y),o=Math.min(o,s.position.z),a=Math.max(a,s.position.z);return{height:i-r,width:n-t,minX:t,maxX:n,minY:r,maxY:i,minZ:o,maxZ:a,x:(n+t)/2,y:(i+r)/2,z:(a+o)/2}}function Gh(e,t){return t?e.reduce(((e,n)=>{const r=n.data[t];return e.set(r,[...e.get(r)||[],n]),e}),new Map):new Map}const jh=100;function Bh({graph:e,nodeLevelRatio:t=2,mode:n=null,dimensions:r=2,nodeStrength:i=-250,linkDistance:o=50,centerInertia:a=1,clusterPadding:s=10,clusterStrength:l=1,drags:u,clusterAttribute:c}){const d=[],h=[];e.forEachNode(((e,t)=>{d.push({...t,id:e,radius:t.size||1})})),e.forEachEdge(((e,t)=>{h.push({...t,id:e})}));const f=2===r&&h.length>25?2*i:i,p=It().force("link",function(e){var t,n,r,i,o,a,s,l=Ft,u=function(e){return 1/Math.min(o[e.source.index],o[e.target.index])},c=nt(30),d=1;function h(r){for(var o=0,l=e.length;o<d;++o)for(var u,c,h,f,p,g=0,m=0,v=0,y=0;g<l;++g)c=(u=e[g]).source,m=(h=u.target).x+h.vx-c.x-c.vx||Rt(s),i>1&&(v=h.y+h.vy-c.y-c.vy||Rt(s)),i>2&&(y=h.z+h.vz-c.z-c.vz||Rt(s)),m*=f=((f=Math.sqrt(m*m+v*v+y*y))-n[g])/f*r*t[g],v*=f,y*=f,h.vx-=m*(p=a[g]),i>1&&(h.vy-=v*p),i>2&&(h.vz-=y*p),c.vx+=m*(p=1-p),i>1&&(c.vy+=v*p),i>2&&(c.vz+=y*p)}function f(){if(r){var i,s,u=r.length,c=e.length,d=new Map(r.map(((e,t)=>[l(e,t,r),e])));for(i=0,o=new Array(u);i<c;++i)(s=e[i]).index=i,"object"!=typeof s.source&&(s.source=Gt(d,s.source)),"object"!=typeof s.target&&(s.target=Gt(d,s.target)),o[s.source.index]=(o[s.source.index]||0)+1,o[s.target.index]=(o[s.target.index]||0)+1;for(i=0,a=new Array(c);i<c;++i)s=e[i],a[i]=o[s.source.index]/(o[s.source.index]+o[s.target.index]);t=new Array(c),p(),n=new Array(c),g()}}function p(){if(r)for(var n=0,i=e.length;n<i;++n)t[n]=+u(e[n],n,e)}function g(){if(r)for(var t=0,i=e.length;t<i;++t)n[t]=+c(e[t],t,e)}return null==e&&(e=[]),h.initialize=function(e,...t){r=e,s=t.find((e=>"function"==typeof e))||Math.random,i=t.find((e=>[1,2,3].includes(e)))||2,f()},h.links=function(t){return arguments.length?(e=t,f(),h):e},h.id=function(e){return arguments.length?(l=e,h):l},h.iterations=function(e){return arguments.length?(d=+e,h):d},h.strength=function(e){return arguments.length?(u="function"==typeof e?e:nt(+e),p(),h):u},h.distance=function(e){return arguments.length?(c="function"==typeof e?e:nt(+e),g(),h):c},h}()).force("charge",function(){var e,t,n,r,i,o,a=nt(-30),s=1,l=1/0,u=.81;function c(r){var o,a=e.length,s=(1===t?Ht(e,Ot):2===t?Qt(e,Ot,Ut):3===t?ln(e,Ot,Ut,zt):null).visitAfter(h);for(i=r,o=0;o<a;++o)n=e[o],s.visit(f)}function d(){if(e){var t,n,r=e.length;for(o=new Array(r),t=0;t<r;++t)n=e[t],o[n.index]=+a(n,t,e)}}function h(e){var n,r,i,a,s,l,u=0,c=0,d=e.length;if(d){for(i=a=s=l=0;l<d;++l)(n=e[l])&&(r=Math.abs(n.value))&&(u+=n.value,c+=r,i+=r*(n.x||0),a+=r*(n.y||0),s+=r*(n.z||0));u*=Math.sqrt(4/d),e.x=i/c,t>1&&(e.y=a/c),t>2&&(e.z=s/c)}else{(n=e).x=n.data.x,t>1&&(n.y=n.data.y),t>2&&(n.z=n.data.z);do{u+=o[n.data.index]}while(n=n.next)}e.value=u}function f(e,a,c,d,h){if(!e.value)return!0;var f=[c,d,h][t-1],p=e.x-n.x,g=t>1?e.y-n.y:0,m=t>2?e.z-n.z:0,v=f-a,y=p*p+g*g+m*m;if(v*v/u<y)return y<l&&(0===p&&(y+=(p=Rt(r))*p),t>1&&0===g&&(y+=(g=Rt(r))*g),t>2&&0===m&&(y+=(m=Rt(r))*m),y<s&&(y=Math.sqrt(s*y)),n.vx+=p*e.value*i/y,t>1&&(n.vy+=g*e.value*i/y),t>2&&(n.vz+=m*e.value*i/y)),!0;if(!(e.length||y>=l)){(e.data!==n||e.next)&&(0===p&&(y+=(p=Rt(r))*p),t>1&&0===g&&(y+=(g=Rt(r))*g),t>2&&0===m&&(y+=(m=Rt(r))*m),y<s&&(y=Math.sqrt(s*y)));do{e.data!==n&&(v=o[e.data.index]*i/y,n.vx+=p*v,t>1&&(n.vy+=g*v),t>2&&(n.vz+=m*v))}while(e=e.next)}}return c.initialize=function(n,...i){e=n,r=i.find((e=>"function"==typeof e))||Math.random,t=i.find((e=>[1,2,3].includes(e)))||2,d()},c.strength=function(e){return arguments.length?(a="function"==typeof e?e:nt(+e),d(),c):a},c.distanceMin=function(e){return arguments.length?(s=e*e,c):Math.sqrt(s)},c.distanceMax=function(e){return arguments.length?(l=e*e,c):Math.sqrt(l)},c.theta=function(e){return arguments.length?(u=e*e,c):Math.sqrt(u)},c}().strength(f)).force("x",function(e){var t,n,r,i=nt(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vx+=(r[o]-i.x)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=nt(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:nt(+e),a(),o):i},o.x=function(t){return arguments.length?(e="function"==typeof t?t:nt(+t),a(),o):e},o}()).force("y",function(e){var t,n,r,i=nt(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vy+=(r[o]-i.y)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=nt(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:nt(+e),a(),o):i},o.y=function(t){return arguments.length?(e="function"==typeof t?t:nt(+t),a(),o):e},o}()).force("z",function(e){var t,n,r,i=nt(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vz+=(r[o]-i.z)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=nt(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:nt(+e),a(),o):i},o.z=function(t){return arguments.length?(e="function"==typeof t?t:nt(+t),a(),o):e},o}()).force("collide",function(e){var t,n,r,i,o=1,a=1;function s(){for(var e,s,u,c,d,h,f,p,g=t.length,m=0;m<a;++m)for(s=(1===n?Ht(t,hn):2===n?Qt(t,hn,fn):3===n?ln(t,hn,fn,pn):null).visitAfter(l),e=0;e<g;++e)u=t[e],f=r[u.index],p=f*f,c=u.x+u.vx,n>1&&(d=u.y+u.vy),n>2&&(h=u.z+u.vz),s.visit(v);function v(e,t,r,a,s,l,g){var m=[t,r,a,s,l,g],v=m[0],y=m[1],b=m[2],_=m[n],w=m[n+1],x=m[n+2],S=e.data,E=e.r,k=f+E;if(!S)return v>c+k||_<c-k||n>1&&(y>d+k||w<d-k)||n>2&&(b>h+k||x<h-k);if(S.index>u.index){var T=c-S.x-S.vx,C=n>1?d-S.y-S.vy:0,M=n>2?h-S.z-S.vz:0,A=T*T+C*C+M*M;A<k*k&&(0===T&&(A+=(T=Rt(i))*T),n>1&&0===C&&(A+=(C=Rt(i))*C),n>2&&0===M&&(A+=(M=Rt(i))*M),A=(k-(A=Math.sqrt(A)))/A*o,u.vx+=(T*=A)*(k=(E*=E)/(p+E)),n>1&&(u.vy+=(C*=A)*k),n>2&&(u.vz+=(M*=A)*k),S.vx-=T*(k=1-k),n>1&&(S.vy-=C*k),n>2&&(S.vz-=M*k))}}}function l(e){if(e.data)return e.r=r[e.data.index];for(var t=e.r=0;t<Math.pow(2,n);++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function u(){if(t){var n,i,o=t.length;for(r=new Array(o),n=0;n<o;++n)i=t[n],r[i.index]=+e(i,n,t)}}return"function"!=typeof e&&(e=nt(null==e?1:+e)),s.initialize=function(e,...r){t=e,i=r.find((e=>"function"==typeof e))||Math.random,n=r.find((e=>[1,2,3].includes(e)))||2,u()},s.iterations=function(e){return arguments.length?(a=+e,s):a},s.strength=function(e){return arguments.length?(o=+e,s):o},s.radius=function(t){return arguments.length?(e="function"==typeof t?t:nt(+t),u(),s):e},s}((e=>e.radius+s))).force("dagRadial",Rh({nodes:d,edges:h,mode:n,nodeLevelRatio:t})).stop(),g=function({nodes:e,clusterAttribute:t,strength:n=300}){const r=new Map;if(t){const i=Gh(e,t),o=i.size;let a=0;for(const[e]of i){const t=2*Math.PI/o*a,i=Math.cos(t)*n,s=Math.sin(t)*n;a++,r.set(e,{x:i,y:s,z:1})}}return r}({nodes:d,clusterAttribute:c}),m=p.numDimensions(r).nodes(d).force("cluster",function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return{x:0,y:0,z:0}},r=[],i=.1,o=0;function a(n){var a,s,l,u,c,d;n*=i*n,t.forEach((function(t,i){(a=r[i])&&a!==t&&(s=t.x-a.x,l=e>1?t.y-a.y:0,u=e>2?t.z-a.z:0,c=Math.sqrt(s*s+l*l+u*u),d=t.radius+(a.radius||0),c&&c!==d&&(c=(c-d)/c*n,t.x-=s*=c,a.x+=(1-o)*s,e>1&&(t.y-=l*=c,a.y+=(1-o)*l),e>2&&(t.z-=u*=c,a.z+=(1-o)*u)))}))}function s(){r=(t||[]).map(n)}return a.initialize=function(n){t=n;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];e=i.find((function(e){return[1,2,3].includes(e)}))||2,s()},a.centers=function(e){return arguments.length?(n=e,s(),a):n},a.strength=function(e){return arguments.length?(i=+e,a):i},a.centerInertia=function(e){return arguments.length?(o=+e,a):o},a}().centers((e=>{var t;if(c){const n=null==(t=null==e?void 0:e.data)?void 0:t[c];return g.get(n)}})).centerInertia(a).strength(l));if(o&&!c){const e=m.force("link");e&&e.id((e=>e.id)).links(h).distance(o)}const v=new Map(d.map((e=>[e.id,e])));return{step(){return p.tick(jh),!0},getNodePosition(e){var t;return(null==(t=null==u?void 0:u[e])?void 0:t.position)||v.get(e)}}}const Vh={td:{x:"x",y:"y",factor:-1},lr:{x:"y",y:"x",factor:1}};function Hh({graph:e,drags:t,mode:n="td"}){const r=[],i=[];e.forEachNode(((e,t)=>{r.push({...t,id:e})})),e.forEachEdge(((e,t)=>{i.push({...t,id:e})}));const{depths:o}=Nh(r,i),a=Object.keys(o).map((e=>o[e])),s=An().id((e=>e.data.id)).parentId((e=>{var t,n,r;return null==(r=null==(n=null==(t=e.ins)?void 0:t[0])?void 0:n.data)?void 0:r.id}))(a),l=Rn().separation((()=>1)).nodeSize([50,50])(yn(s)).descendants(),u=Vh[n],c=new Map(r.map((e=>{const{x:t,y:n}=l.find((t=>t.data.id===e.id));return[e.id,{...e,[u.x]:t*u.factor,[u.y]:n*u.factor,z:0}]})));return{step(){return!0},getNodePosition(e){var n;return(null==(n=null==t?void 0:t[e])?void 0:n.position)||c.get(e)}}}const Wh=["forceDirected2d","treeTd2d","treeLr2d","radialOut2d","treeTd3d","treeLr3d","radialOut3d","forceDirected3d"];function qh({type:e,...t}){if(Wh.includes(e)){const{nodeStrength:n,linkDistance:r,clusterPadding:i,clusterStrength:o,nodeLevelRatio:a}=t;if("forceDirected2d"===e)return Bh({...t,dimensions:2,nodeLevelRatio:a||2,nodeStrength:n||-250,linkDistance:r,clusterPadding:i||10,clusterStrength:o||.5});if("treeTd2d"===e)return Bh({...t,mode:"td",dimensions:2,nodeLevelRatio:a||5,nodeStrength:n||-250,linkDistance:r||50});if("treeLr2d"===e)return Bh({...t,mode:"lr",dimensions:2,nodeLevelRatio:a||5,nodeStrength:n||-250,linkDistance:r||50});if("radialOut2d"===e)return Bh({...t,mode:"radialout",dimensions:2,nodeLevelRatio:a||5,nodeStrength:n||-500,linkDistance:r||100});if("treeTd3d"===e)return Bh({...t,mode:"td",dimensions:3,nodeLevelRatio:a||2,nodeStrength:n||-500,linkDistance:r||50});if("treeLr3d"===e)return Bh({...t,mode:"lr",dimensions:3,nodeLevelRatio:a||2,nodeStrength:n||-500,linkDistance:r||50});if("radialOut3d"===e)return Bh({...t,mode:"radialout",dimensions:3,nodeLevelRatio:a||2,nodeStrength:n||-500,linkDistance:r||100});if("forceDirected3d"===e)return Bh({...t,dimensions:3,nodeLevelRatio:a||2,nodeStrength:n||-250,linkDistance:r})}else{if("circular2d"===e){const{radius:e}=t;return function({graph:e,radius:t,drags:n}){const r=gn(e,{scale:t});return{step(){return!0},getNodePosition(e){var t;return(null==(t=null==n?void 0:n[e])?void 0:t.position)||(null==r?void 0:r[e])}}}({...t,radius:e||300})}if("hierarchicalTd"===e)return Hh({...t,mode:"td"});if("hierarchicalLr"===e)return Hh({...t,mode:"lr"});if("nooverlap"===e){const{graph:e,maxIterations:n,ratio:r,margin:i,gridSize:o}=t;return function({graph:e,margin:t,drags:n,ratio:r,gridSize:i,maxIterations:o}){const a=Fn(e,{maxIterations:o,inputReducer:(e,t)=>({...t,x:t.x||0,y:t.y||0}),settings:{ratio:r,margin:t,gridSize:i}});return{step(){return!0},getNodePosition(e){var t;return(null==(t=null==n?void 0:n[e])?void 0:t.position)||(null==a?void 0:a[e])}}}({type:"nooverlap",graph:e,margin:i||10,maxIterations:n||50,ratio:r||10,gridSize:o||20})}if("forceatlas2"===e){const{graph:e,iterations:n,gravity:r,scalingRatio:i,...o}=t;return function({graph:e,drags:t,iterations:n,...r}){jn.assign(e);const i=Gn(e,{iterations:n,settings:r});return{step(){return!0},getNodePosition(e){var n;return(null==(n=null==t?void 0:t[e])?void 0:n.position)||(null==i?void 0:i[e])}}}({type:"forceatlas2",graph:e,...o,scalingRatio:i||100,gravity:r||10,iterations:n||50})}}throw new Error(`Layout ${e} not found.`)}const $h={pagerank:function({graph:e}){const t=Bn(e);return{ranks:t,getSizeForNode:e=>80*t[e]}},centrality:function({graph:e}){const t=(0,Vn.Nk)(e);return{ranks:t,getSizeForNode:e=>20*t[e]}},attribute:function({graph:e,attribute:t,defaultSize:n}){const r=new Map;return t?e.forEachNode(((e,n)=>{var i;const o=null==(i=n.data)?void 0:i[t];isNaN(o)&&console.warn(`Attribute ${o} is not a number for node ${n.id}`),r.set(e,o||0)})):console.warn("Attribute sizing configured but no attribute provided"),{getSizeForNode:e=>t&&r?r.get(e):n}},none:({defaultSize:e})=>({getSizeForNode:t=>e})};const Yh=20;function Xh(e,t){switch(t){case"above":return e;case"below":return-e;default:return 0}}function Zh({graph:e,layout:t,sizingType:n,labelType:r,sizingAttribute:i,defaultNodeSize:o,minNodeSize:a,maxNodeSize:s}){const l=[],u=[],c=new Map,d=function({type:e,...t}){var n;const r=null==(n=$h[e])?void 0:n.call($h,t);if(!r&&"default"!==e)throw new Error(`Unknown sizing strategy: ${e}`);const{graph:i,minSize:o,maxSize:a}=t,s=new Map;let l,u;if(i.forEachNode(((n,i)=>{let o;o="default"===e?i.size||t.defaultSize:r.getSizeForNode(n),(void 0===l||o<l)&&(l=o),(void 0===u||o>u)&&(u=o),s.set(n,o)})),"none"!==e){const e=Ei().domain([l,u]).rangeRound([o,a]);for(const[t,n]of s)s.set(t,e(n))}return s}({graph:e,type:n,attribute:i,minSize:a,maxSize:s,defaultSize:o}),h=function(e,t){return(n,r)=>"all"===t||"nodes"===t&&"node"===n||"edges"===t&&"edge"===n||"auto"===t&&"node"===n&&(e<=Yh||r>7)}(e.nodes.length,r);return e.forEachNode(((n,r)=>{const i=t.getNodePosition(n),{data:o,fill:a,icon:s,label:u,size:f,...p}=r,g=d.get(r.id),m=h("node",g),v=(e.inboundNeighbors(r.id)||[]).map((t=>e.getNodeAttributes(t))),y={...r,size:g,labelVisible:m,label:u,icon:s,fill:a,parents:v,data:{...p,...o??{}},position:{...i,x:i.x||0,y:i.y||0,z:i.z||1}};c.set(r.id,y),l.push(y)})),e.forEachEdge(((e,t)=>{const n=c.get(t.source),r=c.get(t.target);if(n&&r){const{data:e,id:n,label:r,size:i,...o}=t,a=h("edge",i);u.push({...t,id:n,label:r,labelVisible:a,size:i,data:{...o,id:n,...e||{}}})}})),{nodes:l,edges:u}}const Kh={mass:10,tension:1e3,friction:300,precision:.1};function Qh(e,t,n){const r=t.getLength(),i=(("end"===e?r:r/2)-("end"===e?n/2:0))/r;return[t.getPointAt(i),t.getTangentAt(i)]}function Jh(e){return[e+6,2+e/1.5]}function ef(e,t,n=0){const r=new M.Vector3(e.x,e.y||0,e.z||0),i=new M.Vector3(t.x,t.y||0,t.z||0),o=(new M.Vector3).addVectors(r,i).divideScalar(2);return o.setLength(o.length()+n)}function tf(e,t,n,r,i){const o=rf(e,n,t),a=rf(n,e,r);return i?new M.QuadraticBezierCurve3(...function(e,t,n=-1){const r=e.clone(),i=t.clone(),o=(new M.Vector3).subVectors(i,r),a=o.length(),s=o.clone().normalize(),l=(new M.Vector3).subVectors(i,r).divideScalar(2),u=Math.abs(s.x)%1,c=new M.Vector3(-s.y,s.x-u*s.z,u*s.y).normalize();return[e,(new M.Vector3).add(r).add(l).add(c.multiplyScalar(a/4).multiplyScalar(n)),t]}(o,a)):new M.LineCurve3(o,a)}function nf(e){return new M.Vector3(e.position.x,e.position.y,e.position.z||0)}function rf(e,t,n){const r=e.distanceTo(t);return e.clone().add(t.clone().sub(e).multiplyScalar(n/r))}function of(e,t){return{...e,position:{...e.position,x:e.position.x+t.x,y:e.position.y+t.y,z:e.position.z+t.z}}}const af=({sensitivity:e=7,interval:t=50,timeout:n=0,disabled:r,onPointerOver:i,onPointerOut:o})=>{const s=(0,a.useRef)(!1),l=(0,a.useRef)(null),u=(0,a.useRef)(0),c=(0,a.useRef)({x:null,y:null,px:null,py:null}),d=(0,a.useCallback)((e=>{c.current.x=e.clientX,c.current.y=e.clientY}),[]),h=(0,a.useCallback)((n=>{l.current=clearTimeout(l.current);const{px:r,x:o,py:a,y:s}=c.current;Math.abs(r-o)+Math.abs(a-s)<e?(u.current=1,i(n)):(c.current.px=o,c.current.py=s,l.current=setTimeout((()=>h(n)),t))}),[t,i,e]),f=(0,a.useCallback)((()=>{clearTimeout(l.current),document.removeEventListener("mousemove",d,!1)}),[d]),p=(0,a.useCallback)((e=>{r||(s.current=!0,f(),1!==u.current&&(c.current.px=e.pointer.x,c.current.py=e.pointer.y,document.addEventListener("mousemove",d,!1),l.current=setTimeout((()=>h(e)),n)))}),[f,h,r,d,n]),g=(0,a.useCallback)((e=>{l.current=clearTimeout(l.current),u.current=0,o(e)}),[o]);return{pointerOver:p,pointerOut:(0,a.useCallback)((e=>{s.current=!1,f(),1===u.current&&(l.current=setTimeout((()=>g(e)),n))}),[f,g,n])}};const{Provider:sf,useStore:lf}=function(){console.warn("[DEPRECATED] `context` will be removed in a future version. Instead use `import { createStore, useStore } from 'zustand'`. See: https://github.com/pmndrs/zustand/discussions/1180.");const e=(0,a.createContext)(void 0);return{Provider:({createStore:t,children:n})=>{const r=(0,a.useRef)();return r.current||(r.current=t()),(0,a.createElement)(e.Provider,{value:r.current},n)},useStore:(t,n)=>{const r=(0,a.useContext)(e);if(!r)throw new Error("Seems like you have not used zustand provider as an ancestor.");return Ai(r,t,n)},useStoreApi:()=>{const t=(0,a.useContext)(e);if(!t)throw new Error("Seems like you have not used zustand provider as an ancestor.");return(0,a.useMemo)((()=>({...t})),[t])}}}();function uf({nodeId:e,nodes:t,edges:n,currentHiddenNodes:r,currentHiddenEdges:i}){const o=[],a=[],s=r.map((e=>e.id)),l=i.map((e=>e.id)),u=n.filter((t=>t.source===e)),c=u.map((e=>e.target));a.push(...u);for(const d of c){const r=n.filter((t=>t.target===d&&t.source!==e));let i=!1;if(0===r.length)i=!0;else if(r.length>0&&!s.includes(d)){r.map((e=>e.id)).every((e=>l.includes(e)))&&(i=!0)}if(i){const e=t.find((e=>e.id===d));e&&o.push(e);const r=uf({nodeId:d,nodes:t,edges:n,currentHiddenEdges:a,currentHiddenNodes:o});a.push(...r.hiddenEdges),o.push(...r.hiddenNodes)}}return{hiddenEdges:Object.values(a.reduce(((e,t)=>({...e,[t.id]:t})),{})),hiddenNodes:Object.values(o.reduce(((e,t)=>({...e,[t.id]:t})),{}))}}const cf=({collapsedIds:e,nodes:t,edges:n})=>{const r=[],i=[];for(const s of e){const{hiddenEdges:e,hiddenNodes:o}=uf({nodeId:s,nodes:t,edges:n,currentHiddenEdges:i,currentHiddenNodes:r});r.push(...o),i.push(...e)}const o=r.map((e=>e.id)),a=i.map((e=>e.id));return{visibleNodes:t.filter((e=>!o.includes(e.id))),visibleEdges:n.filter((e=>!a.includes(e.id)))}},df=({layoutType:e,sizingType:t,labelType:n,sizingAttribute:r,clusterAttribute:i,selections:o,nodes:s,edges:l,actives:u,collapsedNodeIds:c,defaultNodeSize:d,maxNodeSize:h,minNodeSize:f,layoutOverrides:p})=>{const g=lf((e=>e.graph)),m=lf((e=>e.setClusters)),v=lf((e=>e.collapsedNodeIds)),y=lf((e=>e.setEdges)),b=lf((e=>e.setNodes)),_=lf((e=>e.setSelections)),w=lf((e=>e.setActives)),x=lf((e=>e.drags)),S=lf((e=>e.setDrags)),E=lf((e=>e.setCollapsedNodeIds)),[k,T]=(0,a.useState)(!1),C=(0,a.useRef)(!1),M=(0,a.useRef)(null),{visibleEdges:A,visibleNodes:P}=(0,a.useMemo)((()=>{const{visibleEdges:e,visibleNodes:t}=cf({collapsedIds:v,nodes:s,edges:l});return{visibleEdges:e,visibleNodes:t}}),[v,s,l]),O=(0,a.useRef)(x);(0,a.useEffect)((()=>{O.current=x}),[x]);const U=(0,a.useCallback)((o=>{M.current=o||qh({...p,type:e,graph:g,drags:O.current,clusterAttribute:i}),function(e,t){let n;!function r(){n?t(n):(n=e.step(),r())}()}(M.current,(()=>{const e=Zh({graph:g,layout:M.current,sizingType:t,labelType:n,sizingAttribute:r,maxNodeSize:h,minNodeSize:f,defaultNodeSize:d}),o=function({nodes:e,clusterAttribute:t}){const n=new Map;if(t){const r=Gh(e,t);for(const[e,t]of r){const r=Fh(t);n.set(e,{label:e,nodes:t,position:r})}}return n}({nodes:e.nodes,clusterAttribute:i});y(e.edges),b(e.nodes),m(o)}))}),[p,m,e,g,i,t,n,r,h,f,d,y,b]);return(0,a.useEffect)((()=>{_(o)}),[o,_]),(0,a.useEffect)((()=>{w(u)}),[u,w]),(0,a.useLayoutEffect)((()=>{C.current=!1,function(e,t,n){e.clear();for(const i of t)try{e.addNode(i.id,i)}catch({message:r}){console.error(`[Graph] ${r}`)}for(const i of n)try{e.addEdge(i.source,i.target,i)}catch({message:r}){console.error(`[Graph] ${r}`)}}(g,P,A),U(),requestAnimationFrame((()=>{C.current=!0,T(!0)}))}),[P,A,g]),(0,a.useEffect)((()=>{E(c)}),[c,E]),(0,a.useEffect)((()=>{C.current&&(O.current={},S({}),U())}),[g,e,U,S]),(0,a.useEffect)((()=>{C.current&&U(M.current)}),[g,t,r,n,U]),{mounted:k}},hf=({text:e,fontSize:t,fontUrl:n,color:r,opacity:i,stroke:o,active:s,ellipsis:l})=>{const u=l&&!s?Us(e,l):e,c=(0,a.useMemo)((()=>new M.Color(r)),[r]),d=(0,a.useMemo)((()=>o?new M.Color(o):void 0),[o]);return(0,C.jsx)(Qo,{position:[0,0,1],children:(0,C.jsx)(vs,{font:n,fontSize:t,color:c,fillOpacity:i,textAlign:"center",outlineWidth:o?1:0,outlineColor:d,depthOffset:0,maxWidth:100,overflowWrap:"break-word",children:u})})};hf.defaultProps={opacity:1,fontSize:7,color:"#2A6475",ellipsis:75};const ff=({color:e,id:t,size:n,opacity:r,animated:i})=>{const{scale:o,nodeOpacity:s}=td({from:{scale:[1e-5,1e-5,1e-5],nodeOpacity:0},to:{scale:[n,n,n],nodeOpacity:r},config:{...Kh,duration:i?void 0:0}}),l=(0,a.useMemo)((()=>new M.Color(e)),[e]);return(0,C.jsxs)(ld.mesh,{userData:{id:t,type:"node"},scale:o,children:[(0,C.jsx)("sphereGeometry",{attach:"geometry",args:[1,25,25]}),(0,C.jsx)(ld.meshPhongMaterial,{attach:"material",side:M.DoubleSide,transparent:!0,fog:!0,opacity:s,color:l})]})};ff.defaultProps={opacity:1,active:!1};const pf=({color:e,size:t,opacity:n,animated:r})=>{const i=(0,a.useMemo)((()=>new M.Color(e)),[e]),{ringSize:o,ringOpacity:s}=td({from:{ringOpacity:0,ringSize:[1e-5,1e-5,1e-5]},to:{ringOpacity:n,ringSize:[t/2,t/2,1]},config:{...Kh,duration:r?void 0:0}});return(0,C.jsx)(Qo,{position:[0,0,1],children:(0,C.jsxs)(ld.mesh,{scale:o,children:[(0,C.jsx)("ringGeometry",{attach:"geometry",args:[4,4.5,25]}),(0,C.jsx)(ld.meshBasicMaterial,{attach:"material",color:i,transparent:!0,depthTest:!1,opacity:s,side:M.DoubleSide,fog:!0})]})})};pf.defaultProps={color:"#D8E6EA",size:1,opacity:.5};const gf=(0,a.createContext)({controls:null,zoomIn:()=>{},zoomOut:()=>{},panLeft:()=>{},panRight:()=>{},panUp:()=>{},panDown:()=>{}}),mf=()=>{const e=(0,a.useContext)(gf);if(void 0===e)throw new Error("`useCameraControls` hook must be used within a `ControlsProvider` component");return e};ah.install({THREE:{MOUSE:M.MOUSE,Vector2:M.Vector2,Vector3:M.Vector3,Vector4:M.Vector4,Quaternion:M.Quaternion,Matrix4:M.Matrix4,Spherical:M.Spherical,Box3:M.Box3,Sphere:M.Sphere,Raycaster:M.Raycaster,MathUtils:{DEG2RAD:null==(zh=M.MathUtils)?void 0:zh.DEG2RAD,clamp:null==(Dh=M.MathUtils)?void 0:Dh.clamp}}}),G({ThreeCameraControls:ah});const vf=38,yf=39,bf=40,_f=new ph(37,100),wf=new ph(yf,100),xf=new ph(vf,100),Sf=new ph(bf,100),Ef=(0,a.forwardRef)((({mode:e,children:t,animated:n,disabled:r},i)=>{const o=(0,a.useRef)(null),s=Pe((e=>e.camera)),l=Pe((e=>e.gl)),u="orbit"===e,c=lf((e=>e.setPanning));Oe(((e,t)=>{var n,r;(null==(n=o.current)?void 0:n.enabled)&&(null==(r=o.current)||r.update(t)),u&&(o.current.azimuthAngle+=20*t*M.MathUtils.DEG2RAD)}),-1),(0,a.useEffect)((()=>()=>{var e;return null==(e=o.current)?void 0:e.dispose()}),[]);const d=(0,a.useCallback)((()=>{var e;null==(e=o.current)||e.zoom(s.zoom/2,n)}),[n,s.zoom]),h=(0,a.useCallback)((()=>{var e;null==(e=o.current)||e.zoom(-s.zoom/2,n)}),[n,s.zoom]),f=(0,a.useCallback)((e=>{var t;u||null==(t=o.current)||t.truck(-.03*e.deltaTime,0,n)}),[n,u]),p=(0,a.useCallback)((e=>{var t;u||null==(t=o.current)||t.truck(.03*e.deltaTime,0,n)}),[n,u]),g=(0,a.useCallback)((e=>{var t;u||null==(t=o.current)||t.truck(0,.03*e.deltaTime,n)}),[n,u]),m=(0,a.useCallback)((e=>{var t;u||null==(t=o.current)||t.truck(0,-.03*e.deltaTime,n)}),[n,u]),v=(0,a.useCallback)((t=>{"Space"===t.code&&(o.current.mouseButtons.left="rotate"===e?ah.ACTION.TRUCK:ah.ACTION.ROTATE)}),[e]),y=(0,a.useCallback)((t=>{"Space"===t.code&&(o.current.mouseButtons.left="rotate"===e?ah.ACTION.ROTATE:ah.ACTION.TRUCK)}),[e]);(0,a.useEffect)((()=>(_f.addEventListener("holding",p),wf.addEventListener("holding",f),xf.addEventListener("holding",g),Sf.addEventListener("holding",m),window.addEventListener("keydown",v),window.addEventListener("keyup",y),()=>{_f.removeEventListener("holding",p),wf.removeEventListener("holding",f),xf.removeEventListener("holding",g),Sf.removeEventListener("holding",m),window.removeEventListener("keydown",v),window.removeEventListener("keyup",y)})),[v,y,m,p,f,g]),(0,a.useEffect)((()=>{const e=()=>c(!0),t=()=>c(!1),n=o.current;return n&&(n.addEventListener("control",e),n.addEventListener("controlend",t)),()=>{n&&(n.removeEventListener("control",e),n.removeEventListener("controlend",t))}}),[o,c]),(0,a.useEffect)((()=>{o.current.mouseButtons.left="rotate"===e?ah.ACTION.ROTATE:ah.ACTION.TRUCK}),[e]),uh([{name:"Zoom In",category:"Graph",keys:"command+shift+i",callback:e=>{e.preventDefault(),d()}},{name:"Zoom Out",category:"Graph",keys:"command+shift+o",callback:e=>{e.preventDefault(),h()}}]);const b=(0,a.useMemo)((()=>({controls:o.current,zoomIn:()=>d(),zoomOut:()=>h(),panLeft:()=>p({deltaTime:1}),panRight:()=>f({deltaTime:1}),panDown:()=>m({deltaTime:1}),panUp:()=>g({deltaTime:1})})),[d,h,p,f,m,g,o.current]);return(0,a.useImperativeHandle)(i,(()=>b)),(0,C.jsxs)(gf.Provider,{value:b,children:[(0,C.jsx)("threeCameraControls",{ref:o,args:[s,l.domElement],enabled:!r,smoothTime:.1,minDistance:1e3,maxDistance:5e4}),t]})}));Ef.defaultProps={mode:"rotate"};const kf=({image:e,id:t,size:n,opacity:r,animated:i})=>{const o=(0,a.useMemo)((()=>(new M.TextureLoader).load(e)),[e]),{scale:s,spriteOpacity:l}=td({from:{scale:[1e-5,1e-5,1e-5],spriteOpacity:0},to:{scale:[n,n,n],spriteOpacity:r},config:{...Kh,duration:i?void 0:0}});return(0,C.jsx)(ld.sprite,{userData:{id:t,type:"node"},scale:s,children:(0,C.jsx)(ld.spriteMaterial,{attach:"material",opacity:l,fog:!0,depthTest:!1,transparent:!0,side:M.DoubleSide,children:(0,C.jsx)("primitive",{attach:"map",object:o,minFilter:M.LinearFilter})})})};kf.defaultProps={opacity:1};const Tf=({id:e,image:t,color:n,size:r,opacity:i,animated:o,...s})=>{const l=r/25,{scale:u}=td({from:{scale:[1e-5,1e-5,1e-5]},to:{scale:[l,l,l]},config:{...Kh,duration:o?void 0:0}}),c=(0,a.useMemo)((()=>new M.Color(n)),[n]);return(0,C.jsx)(ld.group,{userData:{id:e,type:"node"},scale:u,children:(0,C.jsx)(bs,{...s,src:t,fillMaterial:{fog:!0,depthTest:!1,transparent:!0,color:c,opacity:i,side:M.DoubleSide,...s.fillMaterial||{}},fillMeshProps:{position:[-25,-25,1],...s.fillMeshProps||{}}})})};Tf.defaultProps={opacity:1};const Cf=({animated:e,disabled:t,id:n,draggable:r,labelFontUrl:i,contextMenu:o,onClick:s,onPointerOver:l,onPointerOut:u,onContextMenu:c,renderNode:d})=>{const h=mf(),f=lf((e=>e.theme)),p=lf((e=>e.nodes.find((e=>e.id===n)))),g=lf((e=>e.edges)),m=lf((e=>e.draggingId)),v=lf((e=>e.collapsedNodeIds)),y=lf((e=>e.setDraggingId)),b=lf((e=>e.setNodePosition)),_=lf((e=>e.setCollapsedNodeIds)),w=lf((e=>e.collapsedNodeIds.includes(n))),x=lf((e=>{var t;return null==(t=e.actives)?void 0:t.includes(n)})),S=lf((e=>{var t;return null==(t=e.selections)?void 0:t.includes(n)})),E=lf((e=>{var t;return(null==(t=e.selections)?void 0:t.length)>0})),k=m===n,{position:T,label:A,size:P=7,labelVisible:O=!0}=p,U=(0,a.useRef)(null),[z,D]=(0,a.useState)(!1),[L,N]=(0,a.useState)(!1),I=E?S||z||x?f.node.selectedOpacity:f.node.inactiveOpacity:f.node.opacity,R=(0,a.useMemo)((()=>g.filter((e=>e.source===n)).length>0||w),[g,n,w]),F=(0,a.useCallback)((()=>{R&&_(w?v.filter((e=>e!==n)):[...v,n])}),[R,v,n,w,_]),[{nodePosition:G,labelPosition:j}]=td((()=>({from:{nodePosition:[0,0,0],labelPosition:[0,-(P+7),2]},to:{nodePosition:T?[T.x,T.y,T.z]:[0,0,0],labelPosition:[0,-(P+7),2]},config:{...Kh,duration:e&&!m?void 0:0}})),[k,T,e,P]),B=(({draggable:e,set:t,position:n,onDragStart:r,onDragEnd:i})=>{const o=Pe((e=>e.camera)),s=Pe((e=>e.raycaster)),l=Pe((e=>e.size)),u=Pe((e=>e.gl)),{mouse2D:c,mouse3D:d,offset:h,normal:f,plane:p}=(0,a.useMemo)((()=>({mouse2D:new M.Vector2,mouse3D:new M.Vector3,offset:new M.Vector3,normal:new M.Vector3,plane:new M.Plane})),[]),g=(0,a.useMemo)((()=>u.domElement.getBoundingClientRect()),[u.domElement]);return $o({onDragStart:({event:e})=>{const{eventObject:t,point:n}=e;t.getWorldPosition(h).sub(n),d.copy(n),r()},onDrag:({event:e})=>{const r=(e.clientX-((null==g?void 0:g.left)??0))/l.width*2-1,i=-(e.clientY-((null==g?void 0:g.top)??0))/l.height*2+1;c.set(r,i),s.setFromCamera(c,o),o.getWorldDirection(f).negate(),p.setFromNormalAndCoplanarPoint(f,d),s.ray.intersectPlane(p,d);const a=new M.Vector3(n.x,n.y,n.z).copy(d).add(h);return t(a)},onDragEnd:i},{drag:{enabled:e,threshold:10}})})({draggable:r,position:T,set:e=>b(n,e),onDragStart:()=>{y(n),D(!0),h.controls.enabled=!1},onDragEnd:()=>{y(null),D(!1),h.controls.enabled=!0}});_s(z&&!m&&void 0!==s,"pointer"),_s(z&&r&&!k&&void 0===s,"grab"),_s(k,"grabbing");const V=S||z||k||x,H=V?f.node.activeFill:p.fill||f.node.fill,{pointerOver:W,pointerOut:q}=af({disabled:t||k,onPointerOver:()=>{D(!0),null==l||l(p)},onPointerOut:()=>{D(!1),null==u||u(p)}});return(0,C.jsxs)(ld.group,{userData:{id:n,type:"node"},ref:U,position:G,onPointerOver:W,onPointerOut:q,onClick:()=>{t||k||null==s||s(p,{canCollapse:R,isCollapsed:w})},onContextMenu:()=>{t||(N(!0),null==c||c(p,{canCollapse:R,isCollapsed:w,onCollapse:F}))},...B(),children:[d?d({id:n,color:H,size:P,active:V,opacity:I,animated:e,node:p}):(0,C.jsx)(C.Fragment,{children:p.icon?(0,C.jsx)(kf,{id:n,image:p.icon||"",size:P+8,opacity:I,animated:e,color:H,node:p,active:V}):(0,C.jsx)(ff,{id:n,size:P,opacity:I,animated:e,color:H,node:p,active:V})}),(0,C.jsx)(pf,{opacity:S?.5:0,size:P,animated:e,color:S||z?f.ring.activeFill:f.ring.fill}),L&&o&&(0,C.jsx)(Os,{prepend:!0,center:!0,children:o({data:p,canCollapse:R,isCollapsed:w,onCollapse:F,onClose:()=>N(!1)})}),(O||S||z)&&A&&(0,C.jsx)(ld.group,{position:j,children:(0,C.jsx)(hf,{text:A,fontUrl:i,opacity:I,stroke:f.node.label.stroke,active:S||z||k||x,color:S||z||k||x?f.node.label.activeColor:f.node.label.color})})]})};Cf.defaultProps={draggable:!1};const Mf=({animated:e,color:t,length:n,opacity:r,position:i,rotation:o,size:s,onActive:l,onContextMenu:u})=>{const c=(0,a.useMemo)((()=>new M.Color(t)),[t]),d=(0,a.useRef)(null),h=lf((e=>e.draggingId)),[{pos:f,arrowOpacity:p}]=td((()=>({from:{pos:[0,0,0],arrowOpacity:0},to:{pos:[i.x,i.y,i.z],arrowOpacity:r},config:{...Kh,duration:e&&!h?void 0:0}})),[e,h,r,i]),g=(0,a.useCallback)((()=>{var e;const t=new M.Vector3(0,1,0);null==(e=d.current)||e.quaternion.setFromUnitVectors(t,o)}),[o,d]);return(0,a.useEffect)((()=>g()),[g]),(0,C.jsxs)(ld.mesh,{position:f,ref:d,scale:[1,1,1],onPointerOver:()=>l(!0),onPointerOut:()=>l(!1),onPointerDown:e=>{2===e.nativeEvent.buttons&&(e.stopPropagation(),u())},children:[(0,C.jsx)("cylinderGeometry",{args:[0,s,n,20,1,!0],attach:"geometry"}),(0,C.jsx)(ld.meshBasicMaterial,{attach:"material",color:c,depthTest:!1,opacity:p,transparent:!0,side:M.DoubleSide,fog:!0})]})};Mf.defaultProps={size:1,opacity:.5,color:"#D8E6EA"};const Af=({animated:e,color:t,curve:n,curved:r=!1,id:i,opacity:o,size:s,onContextMenu:l,onClick:u,onPointerOver:c,onPointerOut:d})=>{const h=(0,a.useRef)(null),f=lf((e=>e.draggingId)),p=(0,a.useMemo)((()=>new M.Color(t)),[t]),{lineOpacity:g}=td({from:{lineOpacity:0},to:{lineOpacity:o},config:{...Kh,duration:e?void 0:0}});return td((()=>{const t=n.getPoint(0),i=n.getPoint(1);return{from:{fromVertices:[0,0,0],toVertices:[0,0,0]},to:{fromVertices:[null==t?void 0:t.x,null==t?void 0:t.y,(null==t?void 0:t.z)||0],toVertices:[null==i?void 0:i.x,null==i?void 0:i.y,(null==i?void 0:i.z)||0]},onChange:e=>{const{fromVertices:t,toVertices:n}=e.value,i=tf(new M.Vector3(...t),0,new M.Vector3(...n),0,r);h.current.copy(new M.TubeGeometry(i,20,s/2,5,!1))},config:{...Kh,duration:e&&!f?void 0:0}}}),[e,f,n,s]),(0,C.jsxs)("mesh",{userData:{id:i,type:"edge"},onPointerOver:c,onPointerOut:d,onClick:u,onPointerDown:e=>{2===e.nativeEvent.buttons&&(e.stopPropagation(),l())},children:[(0,C.jsx)("tubeGeometry",{attach:"geometry",ref:h}),(0,C.jsx)(ld.meshBasicMaterial,{attach:"material",opacity:g,fog:!0,transparent:!0,depthTest:!1,color:p})]})};Af.defaultProps={color:"#000",size:1,opacity:1};const Pf=({animated:e,arrowPlacement:t,contextMenu:n,disabled:r,labelPlacement:i,id:o,interpolation:s,labelFontUrl:l,onContextMenu:u,onClick:c,onPointerOver:d,onPointerOut:h})=>{const f=lf((e=>e.theme)),p=lf((e=>e.edges.find((e=>e.id===o)))),{target:g,source:m,label:v,labelVisible:y=!1,size:b=1}=p,_="curved"===s,w=lf((e=>e.nodes.find((e=>e.id===m)))),x=lf((e=>e.nodes.find((e=>e.id===g)))),S=lf((e=>e.draggingId)),[E,k]=(0,a.useState)(!1),[T,A]=(0,a.useState)(!1),P=(b+6)/2,[O,U]=(0,a.useMemo)((()=>Jh(b)),[b]),[z,D,L]=(0,a.useMemo)((()=>{const e=nf(w),n=w.size;let r=tf(e,n,nf(x),x.size,_);const[i,o]=Qh(t,r,O);return"end"===t&&(r=tf(e,n,i,0,_)),[r,i,o]}),[_,w,x,t,O]),N=(0,a.useMemo)((()=>ef(w.position,x.position,Xh(P,i))),[w.position,x.position,P,i]),I=lf((e=>{var t;return null==(t=e.selections)?void 0:t.includes(o)})),R=lf((e=>{var t;return null==(t=e.selections)?void 0:t.length})),F=lf((e=>{var t;return null==(t=e.actives)?void 0:t.includes(o)})),G=R?I||F?f.edge.selectedOpacity:f.edge.inactiveOpacity:f.edge.opacity,[{labelPosition:j}]=td((()=>({from:{labelPosition:[0,0,0]},to:{labelPosition:[N.x,N.y,N.z]},config:{...Kh,duration:e&&!S?void 0:0}})),[N,e,S]),B=(0,a.useMemo)((()=>new M.Euler(0,0,"natural"===i?0:Math.atan((x.position.y-w.position.y)/(x.position.x-w.position.x)))),[x.position.x,x.position.y,w.position.x,w.position.y,i]);_s(E&&!S&&void 0!==c,"pointer");const{pointerOver:V,pointerOut:H}=af({disabled:r,onPointerOver:()=>{k(!0),null==d||d(p)},onPointerOut:()=>{k(!1),null==h||h(p)}});return(0,C.jsxs)("group",{children:[(0,C.jsx)(Af,{animated:e,color:I||E||F?f.edge.activeFill:f.edge.fill,curve:z,curved:_,id:o,opacity:G,size:b,onClick:()=>{r||null==c||c(p)},onPointerOver:V,onPointerOut:H,onContextMenu:()=>{r||(A(!0),null==u||u(p))}}),"none"!==t&&(0,C.jsx)(Mf,{animated:e,color:I||E||F?f.arrow.activeFill:f.arrow.fill,length:O,opacity:G,position:D,rotation:L,size:U,onActive:k,onContextMenu:()=>{r||(A(!0),null==u||u(p))}}),y&&v&&(0,C.jsx)(ld.group,{position:j,rotation:B,children:(0,C.jsx)(hf,{text:v,ellipsis:15,fontUrl:l,stroke:f.edge.label.stroke,color:I||E||F?f.edge.label.activeColor:f.edge.label.color,opacity:G,fontSize:6})}),T&&n&&(0,C.jsx)(Os,{prepend:!0,center:!0,children:n({data:p,onClose:()=>A(!1)})})]})};Pf.defaultProps={labelPlacement:"inline",arrowPlacement:"end"};const Of=new M.BoxGeometry(0,0,0);const Uf=({animated:e,color:t,contextMenu:n,edge:r,labelPlacement:i,opacity:o,theme:s})=>{const{target:l,source:u,label:c,labelVisible:d=!1,size:h=1}=r,f=lf((e=>e.nodes)),p=f.find((e=>e.id===u)),g=f.find((e=>e.id===l)),m=lf((e=>e.draggingId)),v=(h+6)/2,y=(0,a.useMemo)((()=>ef(p.position,g.position,Xh(v,i))),[p.position,g.position,v,i]),b=lf((e=>e.edgeContextMenus)),_=lf((e=>e.setEdgeContextMenus)),[{labelPosition:w}]=td((()=>({from:{labelPosition:[0,0,0]},to:{labelPosition:[y.x,y.y,y.z]},config:{...Kh,duration:e&&!m?void 0:0}})),[y,e,m]),x=(0,a.useCallback)((e=>{b.delete(e.id),_(new Set(b.values()))}),[b,_]),S=(0,a.useMemo)((()=>new M.Euler(0,0,"natural"===i?0:Math.atan((g.position.y-p.position.y)/(g.position.x-p.position.x)))),[g.position.x,g.position.y,p.position.x,p.position.y,i]);return(0,C.jsxs)("group",{children:[d&&c&&(0,C.jsx)(ld.group,{position:w,rotation:S,children:(0,C.jsx)(hf,{text:c,ellipsis:15,stroke:s.edge.label.stroke,color:t,opacity:o,fontSize:6})}),n&&b.has(r.id)&&(0,C.jsx)(Os,{prepend:!0,center:!0,position:y,children:n({data:r,onClose:()=>x(r)})})]})};Uf.defaultProps={labelPlacement:"inline"};const zf=({animated:e,arrowPlacement:t="end",contextMenu:n,disabled:r,edges:i,interpolation:o="linear",labelPlacement:s="inline",theme:l,onClick:u,onContextMenu:c,onPointerOut:d,onPointerOver:h})=>{const{getGeometries:f,getGeometry:p}=function(e,t){const n=(0,a.useRef)();lf((e=>{n.current=e}));const r=(0,a.useRef)(new Map),i="curved"===t,o=(0,a.useCallback)((t=>{const o=[],a=r.current,{nodes:s}=n.current;return t.forEach((t=>{const{target:n,source:r,size:l=1}=t,u=s.find((e=>e.id===r)),c=s.find((e=>e.id===n));if(!u||!c)return;const d=`fromX:${u.position.x},fromY:${u.position.y},toX:${c.position.x}},toY:${c.position.y}`;if(a.has(d)){const e=a.get(d);return void o.push(e)}const h=nf(u),f=u.size+6;let p=tf(h,f,nf(c),c.size+6,i),g=new M.TubeGeometry(p,20,l/2,5,!1);if("none"===e)return o.push(g),void a.set(d,g);const[m,v]=Jh(l),[y,b]=Qh(e,p,m),_=new M.Quaternion;_.setFromUnitVectors(new M.Vector3(0,1,0),b);const w=new M.CylinderGeometry(0,v,m,20,1,!0);if(w.applyQuaternion(_),w.translate(y.x,y.y,y.z),e&&"end"===e){const e=tf(h,f,y,0,i);g=new M.TubeGeometry(e,20,l/2,5,!1)}const x=gh([g,w]);o.push(x),a.set(d,x)})),o}),[e,i]),s=(0,a.useCallback)(((e,t)=>{const n=o(e),r=o(t);return gh([r.length?gh(r):Of,n.length?gh(n):Of],!0)}),[o]);return{getGeometries:o,getGeometry:s}}(t,o),g=lf((e=>e.draggingId)),m=lf((e=>e.edgeMeshes)),v=lf((e=>e.setEdgeMeshes)),y=lf((e=>e.actives||[])),b=lf((e=>e.selections||[])),[_,w,x,S]=(0,a.useMemo)((()=>{const e=[],t=[],n=[],r=[];return i.forEach((i=>{g!==i.source&&g!==i.target?b.includes(i.id)||y.includes(i.id)?e.push(i):t.push(i):b.includes(i.id)||y.includes(i.id)?n.push(i):r.push(i)})),[e,t,n,r]}),[i,y,b,g]),E=!!b.length,k=(0,a.useMemo)((()=>p(_,w)),[p,_,w]),{activeOpacity:T,inactiveOpacity:A}=function(e,t,n){const[{activeOpacity:r,inactiveOpacity:i}]=td((()=>({from:{activeOpacity:0,inactiveOpacity:0},to:{activeOpacity:t?n.edge.selectedOpacity:n.edge.opacity,inactiveOpacity:t?n.edge.inactiveOpacity:n.edge.opacity},config:{...Kh,duration:e?void 0:0}})),[e,t,n]);return{activeOpacity:r,inactiveOpacity:i}}(e,E,l);!function(e,t){const n=(0,a.useRef)(e);(0,a.useEffect)((()=>{n.current=e}),[e]);const r=(0,a.useCallback)((()=>{const e=n.current.getAttribute("position");return{from:Array.from({length:e.array.length}).fill(0),to:Array.from(e.array)}}),[]),i=(0,a.useCallback)((e=>{const t=new Float32Array(e),r=new M.BufferAttribute(t,3,!1);n.current.setAttribute("position",r),r.needsUpdate=!0}),[]);td((()=>{if(!t)return null;const e=r();return{from:{positions:e.from},to:{positions:e.to},onChange:e=>{i(e.value.positions)},config:{...Kh,duration:t?void 0:0}}}),[t])}(k,e),(0,a.useEffect)((()=>{if(null===g){const e=f(i).map((e=>new M.Mesh(e)));v(e)}}),[f,v,i,g]);const P=(0,a.useRef)(new M.Mesh),O=(0,a.useRef)(new M.Mesh),U=(0,a.useCallback)((e=>{if(!e.camera)return[];const t=e.intersectObjects(m);return t.length?t.map((e=>i[m.indexOf(e.object)])):[]}),[m,i]),{handleClick:z,handleContextMenu:D,handleIntersections:L}=function(e,t,n){const{onClick:r,onContextMenu:i,onPointerOut:o,onPointerOver:s}=e,l=lf((e=>e.edgeContextMenus)),u=lf((e=>e.setEdgeContextMenus)),c=(0,a.useRef)(!1),d=(0,a.useCallback)((()=>{c.current=!0}),[]),h=(0,a.useRef)(!1),f=(0,a.useCallback)((()=>{h.current=!0}),[]),p=(0,a.useCallback)(((e,a)=>{if(r&&c.current&&(c.current=!1,n||a.forEach((e=>{r(e)}))),(t||i)&&h.current&&(h.current=!1,n||a.forEach((e=>{l.has(e.id)||(u(new Set([...l,e.id])),null==i||i(e))}))),s){const t=a.filter((t=>!e.includes(t)));t.forEach((e=>{s(e)}))}if(o){const t=e.filter((e=>!a.includes(e)));t.forEach((e=>{o(e)}))}}),[t,n,l,u,r,i,s,o]);return{handleClick:d,handleContextMenu:f,handleIntersections:p}}({onClick:u,onContextMenu:c,onPointerOut:d,onPointerOver:h},n,r),N=(0,a.useRef)(null),I=(0,a.useRef)([]);return Oe((e=>{if(P.current.geometry=k,r)return;const t=N.current;if((g||null===g&&null!==t)&&(O.current.geometry=p(x,S)),N.current=g,g)return;const n=I.current,i=U(e.raycaster);L(n,i),i.join()!==n.join()&&(O.current.geometry=p(i,[])),I.current=i})),(0,C.jsxs)("group",{onClick:z,onContextMenu:D,children:[(0,C.jsxs)("mesh",{ref:P,children:[(0,C.jsx)(ld.meshBasicMaterial,{attach:"material-0",color:l.edge.fill,depthTest:!1,fog:!0,opacity:A,side:M.DoubleSide,transparent:!0}),(0,C.jsx)(ld.meshBasicMaterial,{attach:"material-1",color:l.edge.activeFill,depthTest:!1,fog:!0,opacity:T,side:M.DoubleSide,transparent:!0})]}),(0,C.jsxs)("mesh",{ref:O,children:[(0,C.jsx)(ld.meshBasicMaterial,{attach:"material-0",color:l.edge.fill,depthTest:!1,fog:!0,opacity:A,side:M.DoubleSide,transparent:!0}),(0,C.jsx)(ld.meshBasicMaterial,{attach:"material-1",color:l.edge.activeFill,depthTest:!1,fog:!0,opacity:T,side:M.DoubleSide,transparent:!0})]}),i.map((t=>(0,C.jsx)(Uf,{animated:e,contextMenu:n,color:l.edge.label.color,disabled:r,edge:t,labelPlacement:s,theme:l},t.id)))]})},Df=({animated:e,opacity:t,position:n,padding:r,labelFontUrl:i,radius:o,label:s})=>{var l;const u=lf((e=>e.theme)),c=Math.max(n.width,n.height)/2,d=c-o+r,{circleOpacity:h,circlePosition:f,labelPosition:p}=td({from:{circlePosition:[0,0,-1],circleOpacity:0,labelPosition:[0,0,2]},to:{labelPosition:[0,-d,2],circlePosition:n?[n.x,n.y,-1]:[0,0,-1],circleOpacity:t},config:{...Kh,duration:e?void 0:0}}),g=(0,a.useMemo)((()=>new M.Color(u.cluster.stroke)),[u.cluster.stroke]);return(0,C.jsx)(C.Fragment,{children:u.cluster&&(0,C.jsxs)(ld.group,{position:f,children:[(0,C.jsxs)("mesh",{children:[(0,C.jsx)("ringGeometry",{attach:"geometry",args:[d,c+r,128]}),(0,C.jsx)(ld.meshBasicMaterial,{attach:"material",color:g,transparent:!0,depthTest:!1,opacity:h,side:M.DoubleSide,fog:!0})]}),(null==(l=u.cluster)?void 0:l.label)&&(0,C.jsx)(ld.group,{position:p,children:(0,C.jsx)(hf,{text:s,opacity:1,labelFontUrl:i,stroke:u.cluster.label.stroke,active:!1,color:u.cluster.label.color,fontSize:12})})]})})};Df.defaultProps={opacity:1,radius:2,padding:40};const Lf=(0,a.forwardRef)((({onNodeClick:e,onNodeContextMenu:t,onEdgeContextMenu:n,onEdgeClick:r,onEdgePointerOver:i,onEdgePointerOut:o,onNodePointerOver:s,onNodePointerOut:l,contextMenu:u,theme:c,animated:d,disabled:h,draggable:f,edgeLabelPosition:p,edgeArrowPosition:g,edgeInterpolation:m,labelFontUrl:v,renderNode:y,...b},_)=>{const{mounted:w}=df(b),x=lf((e=>e.graph)),S=lf((e=>e.nodes)),E=lf((e=>e.edges)),k=lf((e=>[...e.clusters.values()])),T=(0,a.useMemo)((()=>S.map((e=>e.id))),[S]),A=(0,a.useMemo)((()=>E.map((e=>e.id))),[E]),{centerNodesById:P}=(({animated:e})=>{const t=lf((e=>e.nodes)),n=Pe((e=>e.invalidate)),{controls:r}=mf(),i=(0,a.useMemo)((()=>{const{maxX:e,maxY:n}=Fh(t);return Math.max(e,n)}),[t]),o=(0,a.useCallback)(((t,i=50,o=!1)=>{const{minX:a,maxX:s,minY:l,maxY:u,minZ:c,maxZ:d}=Fh(t);null==r||r.fitToBox(new M.Box3(new M.Vector3(a,l,c),new M.Vector3(s,u,d)),e,{cover:o,paddingLeft:i,paddingRight:i,paddingBottom:i,paddingTop:i}),n()}),[n,r,e]),s=(0,a.useCallback)((e=>{let n=null,r=50;(null==e?void 0:e.length)&&(r=i+50,n=e.reduce(((e,n)=>{const r=t.find((e=>e.id===n));if(!r)throw new Error(`Attempted to center ${n} but it was not found in the nodes`);return e.push(r),e}),[])),o(n||t,r,!!n)}),[o,t,i]),l=(0,a.useRef)(!1);return(0,a.useLayoutEffect)((()=>{r&&(null==t?void 0:t.length)&&!l.current&&(o(t),l.current=!0)}),[r,o,t]),uh([{name:"Center",category:"Graph",keys:["command+shift+c"],callback:()=>o(t)}]),{centerNodes:o,centerNodesById:s}})({animated:d});return(0,a.useImperativeHandle)(_,(()=>({centerGraph:P,graph:x})),[P,x]),(0,C.jsx)(a.Fragment,{children:w&&(0,C.jsxs)(a.Fragment,{children:[T.map((n=>(0,C.jsx)(Cf,{id:n,labelFontUrl:v,draggable:f,disabled:h,animated:d,contextMenu:u,onClick:e,onContextMenu:t,onPointerOver:s,onPointerOut:l,renderNode:y},n))),d?A.map((e=>(0,C.jsx)(Pf,{id:e,disabled:h,animated:d,labelFontUrl:v,labelPlacement:p,arrowPlacement:g,interpolation:m,contextMenu:u,onClick:r,onContextMenu:n,onPointerOver:i,onPointerOut:o},e))):(0,C.jsx)(zf,{theme:c,edges:E,disabled:h,animated:d,labelPlacement:p,arrowPlacement:g,interpolation:m,contextMenu:u,onClick:r,onContextMenu:n,onPointerOver:i,onPointerOut:o}),k.map((e=>(0,C.jsx)(Df,{animated:d,labelFontUrl:v,...e},e.label)))]})})}));Lf.defaultProps={edgeInterpolation:"linear"};const Nf={canvas:{background:"#1E2026"},node:{fill:"#7A8C9E",activeFill:"#1DE9AC",opacity:1,selectedOpacity:1,inactiveOpacity:.2,label:{stroke:"#1E2026",color:"#ACBAC7",activeColor:"#1DE9AC"}},lasso:{border:"1px solid #55aaff",background:"rgba(75, 160, 255, 0.1)"},ring:{fill:"#54616D",activeFill:"#1DE9AC"},edge:{fill:"#474B56",activeFill:"#1DE9AC",opacity:1,selectedOpacity:1,inactiveOpacity:.1,label:{stroke:"#1E2026",color:"#ACBAC7",activeColor:"#1DE9AC"}},arrow:{fill:"#474B56",activeFill:"#1DE9AC"},cluster:{stroke:"#474B56",label:{stroke:"#1E2026",color:"#ACBAC7"}}},If={canvas:{background:"#fff"},node:{fill:"#7CA0AB",activeFill:"#1DE9AC",opacity:1,selectedOpacity:1,inactiveOpacity:.2,label:{color:"#2A6475",stroke:"#fff",activeColor:"#1DE9AC"}},lasso:{border:"1px solid #55aaff",background:"rgba(75, 160, 255, 0.1)"},ring:{fill:"#D8E6EA",activeFill:"#1DE9AC"},edge:{fill:"#D8E6EA",activeFill:"#1DE9AC",opacity:1,selectedOpacity:1,inactiveOpacity:.1,label:{stroke:"#fff",color:"#2A6475",activeColor:"#1DE9AC"}},arrow:{fill:"#D8E6EA",activeFill:"#1DE9AC"},cluster:{stroke:"#D8E6EA",label:{stroke:"#fff",color:"#2A6475"}}};function Rf(e,t,n){t=Array.isArray(t)?t:[t];const r=[],i=[];for(const o of t){const t=[...e.inEdgeEntries(o)??[],...e.outEdgeEntries(o)??[]];if(t)for(const e of t){const t=e.attributes.id;if("in"===n?e.target!==o||i.includes(t)||i.push(t):"out"===n?e.source!==o||i.includes(t)||i.push(t):i.includes(t)||i.push(t),"out"===n||"all"===n){const t=e.target;r.includes(t)||r.push(t)}"in"!==n&&"all"!==n||r.includes(e.source)||r.push(e.source)}}return{nodes:r,edges:i}}function Ff(e,t,n){const{offsetX:r,offsetY:i}=e,{width:o,height:a}=n;t.set(r/o*2-1,-i/a*2+1)}const Gf=({children:e,theme:t,type:n="none",onLasso:r,onLassoEnd:i,disabled:o})=>{var s;const l=Pe((e=>e.camera)),u=Pe((e=>e.gl)),c=Pe((e=>e.setEvents)),d=Pe((e=>e.size)),h=Pe((e=>e.get)),f=Pe((e=>e.scene)),p=mf(),g=lf((e=>e.actives)),m=lf((e=>e.setActives)),v=lf((e=>e.edges)),y=lf((e=>e.edgeMeshes)),b=(0,a.useRef)(!1),_=(0,a.useRef)(null),w=(0,a.useRef)(null),x=(0,a.useRef)(function(e){const t=document.createElement("div");return t.style.pointerEvents="none",t.style.border=e.lasso.border,t.style.backgroundColor=e.lasso.background,t.style.position="fixed",t}(t)),S=(0,a.useRef)(null),E=(0,a.useRef)(!1),k=(0,a.useRef)(h().events.enabled),T=(0,a.useRef)(null==(s=p.controls)?void 0:s.enabled);(0,a.useEffect)((()=>{b.current&&(null==r||r(g)),b.current=!0}),[g,r]);const A=(0,a.useCallback)((e=>{if(E.current){const[t,r,i]=S.current;i.x=Math.max(t.x,e.clientX),i.y=Math.max(t.y,e.clientY),r.x=Math.min(t.x,e.clientX),r.y=Math.min(t.y,e.clientY),x.current.style.left=`${r.x}px`,x.current.style.top=`${r.y}px`,x.current.style.width=i.x-r.x+"px",x.current.style.height=i.y-r.y+"px",Ff(e,_.current.endPoint,d),Ff(e,w.current.endPoint,d);const o=[],a=w.current.select().sort((e=>e.uuid)).map((e=>v[y.indexOf(e)].id));o.push(...a);const s=_.current.select().sort((e=>e.uuid)).filter((e=>{var t,r;return e.isMesh&&(null==(t=e.userData)?void 0:t.id)&&((null==(r=e.userData)?void 0:r.type)===n||"all"===n)})).map((e=>e.userData.id));o.push(...s),requestAnimationFrame((()=>{m(o)})),document.addEventListener("pointermove",A,{passive:!0,capture:!0,once:!0})}}),[v,y,m,d,n]),P=(0,a.useCallback)((()=>{var e;E.current&&(c({enabled:k.current}),E.current=!1,null==(e=x.current.parentElement)||e.removeChild(x.current),p.controls.enabled=T.current,null==i||i(g),document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",P))}),[c,p.controls,i,g,A]),O=(0,a.useCallback)((e=>{var t,n;if(e.shiftKey){k.current=h().events.enabled,T.current=null==(t=p.controls)?void 0:t.enabled,_.current=new Uh(l,f);const r=new M.Scene;y.length&&r.add(...y),w.current=new Uh(l,r),S.current=[new M.Vector2,new M.Vector2,new M.Vector2];const[i]=S.current;p.controls.enabled=!1,c({enabled:!1}),E.current=!0,null==(n=u.domElement.parentElement)||n.appendChild(x.current),x.current.style.left=`${e.clientX}px`,x.current.style.top=`${e.clientY}px`,x.current.style.width="0px",x.current.style.height="0px",i.x=e.clientX,i.y=e.clientY,Ff(e,_.current.startPoint,d),Ff(e,w.current.startPoint,d),document.addEventListener("pointermove",A,{passive:!0,capture:!0,once:!0}),document.addEventListener("pointerup",P,{passive:!0})}}),[l,p.controls,y,h,u.domElement.parentElement,A,P,f,c,d]);return(0,a.useEffect)((()=>{if(!o&&"none"!==n)return document.addEventListener("pointerdown",O,{passive:!0}),document.addEventListener("pointermove",A,{passive:!0}),document.addEventListener("pointerup",P,{passive:!0}),()=>{document.removeEventListener("pointerdown",O),document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",P)}}),[n,o,O,A,P]),(0,C.jsx)("group",{children:e})},jf=({selections:e=[],nodes:t=[],actives:n=[],focusOnSelect:r=!0,type:i="single",pathHoverType:o="out",pathSelectionType:s="direct",ref:l,hotkeys:u=["selectAll","deselect","delete"],disabled:c,onSelection:d})=>{const[h,f]=(0,a.useState)([]),[p,g]=(0,a.useState)(n),[m,v]=(0,a.useState)(e),[y,b]=(0,a.useState)(!1),_="multi"===i||"multiModifier"===i,w=(0,a.useCallback)((e=>{if(!c&&e){const t=(e=Array.isArray(e)?e:[e]).filter((e=>!m.includes(e)));if(t.length){const e=[...m,...t];null==d||d(e),v(e)}}}),[c,m,d]),x=(0,a.useCallback)((e=>{if(!c&&e){e=Array.isArray(e)?e:[e];const t=m.filter((t=>!e.includes(t)));null==d||d(t),v(t)}}),[c,m,d]),S=(0,a.useCallback)(((e=[])=>{c||(e=Array.isArray(e)?e:[e],g([]),v(e),null==d||d(e))}),[c,d]),E=(0,a.useCallback)((e=>{m.includes(e)?x(e):_?w(e):S(e)}),[w,S,m,_,x]),k=(0,a.useCallback)((e=>{var t;if(_?"multiModifier"===i?y?w(e.id):S(e.id):w(e.id):S(e.id),!0===r||"singleOnly"===r&&!y){if(!l.current)throw new Error("No ref found for the graph canvas.");const n=l.current.getGraph(),{nodes:r}=Rf(n,[e.id],s);null==(t=l.current)||t.centerGraph([e.id,...r])}}),[w,S,r,_,y,s,l,i]),T=(0,a.useCallback)(((e,t)=>{const n=l.current.getGraph();if(!n)throw new Error("Graph is not initialized");const r=function(e,t,n){return(0,Xo.Ar)(e,t,n)}(n,e,t);S([e,t]);const i=[];for(let o=0;o<r.length-1;o++){const e=r[o],t=r[o+1],a=n.getEdgeAttributes(e,t);a&&i.push(a.id)}g([...r.map((e=>e)),...i])}),[S,l]),C=(0,a.useCallback)((e=>{const t=e.target,n="INPUT"!==t.tagName&&"SELECT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable,r=e.metaKey||e.ctrlKey;n&&r&&(e.preventDefault(),b(!0))}),[]);(0,a.useEffect)((()=>(window.addEventListener("keydown",C),()=>{window.removeEventListener("keydown",C)})),[C]);const M=(0,a.useCallback)((e=>{var t;if(2!==e.button&&(m.length||p.length)&&(S(),b(!1),r&&1===m.length)){if(!l.current)throw new Error("No ref found for the graph canvas.");null==(t=l.current)||t.centerGraph()}}),[S,r,p.length,m.length,l]),A=(0,a.useCallback)((e=>{g(e)}),[]),P=(0,a.useCallback)((e=>{S(e)}),[S]),O=(0,a.useCallback)((e=>{if(o){const t=l.current.getGraph();if(!t)throw new Error("No ref found for the graph canvas.");const{nodes:n,edges:r}=Rf(t,[e.id],o);f([...n,...r])}}),[o,l]),U=(0,a.useCallback)((()=>{o&&f([])}),[o]);(0,a.useEffect)((()=>{var e;if("direct"!==s&&m.length>0){const t=null==(e=l.current)?void 0:e.getGraph();if(t){const{nodes:e,edges:n}=Rf(t,m,s);g([...e,...n])}}}),[m,s,l]),uh([{name:"Select All",keys:"mod+a",disabled:!u.includes("selectAll"),category:"Graph",description:"Select all nodes and edges",callback:e=>{if(e.preventDefault(),!c&&"single"!==i){const e=t.map((e=>e.id));null==d||d(e),v(e)}}},{name:"Deselect Selections",category:"Graph",disabled:!u.includes("deselect"),description:"Deselect selected nodes and edges",keys:"escape",callback:e=>{c||(e.preventDefault(),null==d||d([]),v([]))}}]);return{actives:(0,a.useMemo)((()=>[...p,...h]),[p,h]),onNodeClick:k,onNodePointerOver:O,onNodePointerOut:U,onLasso:A,onLassoEnd:P,selectNodePaths:T,onCanvasClick:M,selections:m,clearSelections:S,addSelection:w,removeSelection:x,toggleSelection:E,setSelections:v}},Bf="_canvas_670zp_1",Vf={alpha:!0,antialias:!0},Hf={position:[0,0,1e3],near:5,far:5e4,fov:10},Wf=(0,a.forwardRef)((({cameraMode:e,edges:t,children:n,nodes:r,theme:i,onCanvasClick:o,animated:s,disabled:l,lassoType:u,onLasso:c,onLassoEnd:d,...h},f)=>{const p=(0,a.useRef)(null),g=(0,a.useRef)(null);(0,a.useImperativeHandle)(f,(()=>({centerGraph:e=>{var t;return null==(t=p.current)?void 0:t.centerGraph(e)},zoomIn:()=>{var e;return null==(e=g.current)?void 0:e.zoomIn()},zoomOut:()=>{var e;return null==(e=g.current)?void 0:e.zoomOut()},panLeft:()=>{var e;return null==(e=g.current)?void 0:e.panLeft()},panRight:()=>{var e;return null==(e=g.current)?void 0:e.panRight()},panDown:()=>{var e;return null==(e=g.current)?void 0:e.panDown()},panUp:()=>{var e;return null==(e=g.current)?void 0:e.panUp()},getControls:()=>{var e;return null==(e=g.current)?void 0:e.controls},getGraph:()=>{var e;return null==(e=p.current)?void 0:e.graph}})));const{selections:m,actives:v,collapsedNodeIds:y}=h,b=!(t.length+r.length>400)&&s;return(0,C.jsx)("div",{className:Bf,children:(0,C.jsx)(tt,{legacy:!0,linear:!0,flat:!0,gl:Vf,camera:Hf,onPointerMissed:o,children:(0,C.jsxs)(sf,{createStore:()=>(({actives:e=[],selections:t=[],collapsedNodeIds:n=[],theme:r})=>Oi((i=>({theme:r,edges:[],nodes:[],collapsedNodeIds:n,clusters:new Map,panning:!1,draggingId:null,actives:e,edgeContextMenus:new Set,edgeMeshes:[],selections:t,drags:{},graph:new Zo,setTheme:e=>i((t=>({...t,theme:e}))),setClusters:e=>i((t=>({...t,clusters:e}))),setEdgeContextMenus:e=>i((t=>({...t,edgeContextMenus:e}))),setEdgeMeshes:e=>i((t=>({...t,edgeMeshes:e}))),setPanning:e=>i((t=>({...t,panning:e}))),setDrags:e=>i((t=>({...t,drags:e}))),setDraggingId:e=>i((t=>({...t,draggingId:e}))),setActives:e=>i((t=>({...t,actives:e}))),setSelections:e=>i((t=>({...t,selections:e}))),setNodes:e=>i((t=>({...t,nodes:e}))),setEdges:e=>i((t=>({...t,edges:e}))),setNodePosition:(e,t)=>i((n=>{var r,i;const o=n.nodes.find((t=>t.id===e)),a=nf(o),s=new M.Vector3(t.x,t.y,t.z).sub(a),l=[...n.nodes];if(null==(r=n.selections)?void 0:r.includes(e))null==(i=n.selections)||i.forEach((e=>{const t=n.nodes.find((t=>t.id===e));if(t){const e=n.nodes.indexOf(t);l[e]=of(t,s)}}));else{const e=n.nodes.indexOf(o);l[e]=of(o,s)}return{...n,drags:{...n.drags,[e]:o},nodes:l}})),setCollapsedNodeIds:(e=[])=>i((t=>({...t,collapsedNodeIds:e})))}))))({selections:m,actives:v,theme:i,collapsedNodeIds:y}),children:[(0,C.jsx)("color",{attach:"background",args:[i.canvas.background]}),(0,C.jsx)("ambientLight",{intensity:1}),n,i.canvas.fog&&(0,C.jsx)("fog",{attach:"fog",args:[i.canvas.fog,4e3,9e3]}),(0,C.jsx)(Ef,{mode:e,ref:g,animated:s,disabled:l,children:(0,C.jsx)(Gf,{theme:i,disabled:l,type:u,onLasso:c,onLassoEnd:d,children:(0,C.jsx)(a.Suspense,{children:(0,C.jsx)(Lf,{ref:p,theme:i,disabled:l,animated:b,edges:t,nodes:r,...h})})})})]})})})}));Wf.defaultProps={cameraMode:"pan",layoutType:"forceDirected2d",sizingType:"default",labelType:"auto",theme:If,animated:!0,defaultNodeSize:7,minNodeSize:5,maxNodeSize:15,lassoType:"none"};const qf=e=>{let{tree:t,selection:n,onSelect:r}=e;const i=function(e){const t=[],n=[];function r(e){t.push({id:e.id,label:e.label});for(const t of e.children)n.push({id:e.id+"->"+t.id,source:e.id,target:t.id,label:""}),r(t)}for(const i of e)r(i);return{nodes:t,edges:n}}(t),o=(0,a.useRef)(null),{selections:s,actives:l,onNodeClick:u,onCanvasClick:c,onNodePointerOver:d,onNodePointerOut:h,setSelections:f}=jf({ref:o,nodes:i.nodes,edges:i.edges,pathHoverType:"out",pathSelectionType:"out",focusOnSelect:!0,onSelection:e=>{const t=e[0];r(t||"")}});(0,a.useEffect)((()=>{f(n?[n]:[])}),[n]);const[p]=(0,T.dQ)("colors",["brand.500"]),g=(0,w.ff)({...If,node:{...If.node,activeFill:p,label:{...If.node.label,activeColor:p}},ring:{...If.ring,activeFill:p},edge:{...If.edge,activeFill:p,label:{...If.edge.label,stroke:If.canvas.background,activeColor:p}},arrow:{...If.arrow,activeFill:p},cluster:{...If.cluster}},{...Nf,node:{...Nf.node,activeFill:p,label:{...Nf.node.label,stroke:Nf.canvas.background,activeColor:p}},ring:{...Nf.ring,activeFill:p},edge:{...Nf.edge,activeFill:p,label:{...Nf.edge.label,activeColor:p}},arrow:{...Nf.arrow,activeFill:p},cluster:{...Nf.cluster}});return(0,S.tZ)(Wf,{ref:o,theme:g,nodes:i.nodes,edges:i.edges,selections:s,actives:l,onNodePointerOver:d,onNodePointerOut:h,onCanvasClick:c,onNodeClick:u},g.canvas.background)},$f=e=>{const{0:t,1:n}=(0,a.useState)(!1);return(0,a.useEffect)((()=>{n(!0)}),[]),(0,S.tZ)(k.xu,{h:"md",p:"4",w:"full",border:"solid 1px",borderColor:"border.emphasized",borderRadius:"lg",children:(0,S.tZ)(k.xu,{boxSize:"full",pos:"relative",children:t?(0,S.tZ)(qf,{tree:e.tree,selection:e.selection,onSelect:e.onSelect}):null})})};var Yf=n(8290),Xf=n(9334),Zf=n(5668);const Kf=e=>{const{0:t,1:n}=(0,a.useState)([]);return(0,a.useEffect)((()=>{const t=[],r=(e,n)=>{for(const i of e){if(i.id===n)return t.push({id:i.id,label:i.label}),!0;if(i.children&&r(i.children,n))return t.push({id:i.id,label:i.label}),!0}return!1};r(e.tree,e.activePageId),t.reverse(),n(t)}),[e.tree,e.activePageId]),(0,S.tZ)(Yf.a,{color:"fg.muted",separator:"/",children:t.map(((e,n)=>{const r=n===t.length-1;return(0,S.tZ)(Xf.g,{isCurrentPage:r,children:(0,S.tZ)(Zf.A,{as:r?void 0:_.r,to:"#"+btoa(e.id),children:e.label})},e.id)}))})};var Qf=n(2719);const Jf=e=>(0,S.BX)(l.K,{id:"coco",flexDir:"column",spacing:"14",children:[(0,S.BX)(l.K,{spacing:"4",divider:(0,S.tZ)(u.c,{}),children:[(0,S.BX)(l.K,{spacing:"4",children:[(0,S.tZ)(Kf,{tree:e.tree,activePageId:e.pageId}),(0,S.tZ)(Qf.s,{mode:"edit",...e.form})]}),(0,S.tZ)($f,{tree:e.tree,selection:e.pageId,onSelect:e.onTreeSelect})]}),(0,S.BX)(l.K,{spacing:"4",divider:(0,S.tZ)(u.c,{}),children:[(0,S.BX)(c.U,{justifyContent:"space-between",children:[(0,S.tZ)(d.X,{as:"h2",size:"sm",children:"Subpages"}),(0,S.tZ)(_.r,{isDisabled:e.disableNewButton,as:h.z,to:"./new/#"+btoa(e.pageId),leftIcon:(0,S.tZ)(s.FaPlus,{}),variant:"outline",children:"New page"})]}),(0,S.BX)(f.i,{children:[(0,S.tZ)(p.h,{children:(0,S.BX)(g.Tr,{children:[(0,S.tZ)(m.Th,{children:"Title"}),(0,S.tZ)(m.Th,{children:"Description"}),(0,S.tZ)(m.Th,{children:"Date"})]})}),(0,S.BX)(v.p,{children:[e.children.map(((e,t)=>(0,S.BX)(g.Tr,{children:[(0,S.tZ)(y.Td,{children:(0,S.tZ)(_.r,{to:"#"+btoa(e.id),children:e.title})}),(0,S.tZ)(y.Td,{children:e.description}),(0,S.tZ)(y.Td,{whiteSpace:"break-spaces",children:e.createdAt||e.modifiedAt?e.modifiedAt&&e.modifiedAt!==e.createdAt?"Last modified "+new Date(e.modifiedAt).toLocaleDateString("en-US")+" at "+new Date(e.modifiedAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"Created "+new Date(e.createdAt).toLocaleDateString("en-US")+" at "+new Date(e.createdAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"-"})]},t))),0===e.children.length&&(0,S.tZ)(g.Tr,{children:(0,S.tZ)(y.Td,{colSpan:4,children:(0,S.BX)(c.U,{children:[(0,S.tZ)(b.x,{children:"This page doesn't have any subpages yet. "}),(0,S.tZ)(_.r,{to:"./new/#"+btoa(e.pageId),children:"Create a new page"})]})})})]})]})]}),(0,S.BX)(l.K,{spacing:"4",divider:(0,S.tZ)(u.c,{}),children:[(0,S.tZ)(d.X,{as:"h2",size:"sm",children:"Danger zone"}),(0,S.tZ)(E,{actions:e.dangerZoneActions||[]})]})]});var ep=n(421);const tp=()=>{var e,t,n;const{toast:l,prompt:u,confirm:c}=(0,o.lR)(),d=(0,ep.FK)(),{0:h,1:f}=(0,a.useState)(void 0);(0,a.useEffect)((()=>{window.scrollTo(0,0)}),[h]);const p=(0,r.useLocation)();(0,a.useEffect)((()=>{try{const e=atob(p.hash.replace("#",""));f(e||void 0)}catch(ip){f(void 0)}}),[p.hash]);const g=(0,a.useMemo)((()=>{try{return d.page(h)}catch{return d.page()}}),[h,d.page]),m=(0,a.useMemo)((()=>d.pages(g.id).map((e=>({id:e.id,title:e.jaenPageMetadata.title||"No title",description:e.jaenPageMetadata.description||"No description",createdAt:e.createdAt,modifiedAt:e.modifiedAt})))),[g.id,d.pages]),v=(0,a.useCallback)((e=>{f(e||void 0),e?(0,i.c4)("#"+btoa(e)):(0,i.c4)("#")}),[d]),y=(0,a.useMemo)((()=>{const e=d.pages(),t=[],n=e=>{if(!e)return;const r=d.page(e);if(r)for(const i of r.childPages)t.push(i.id),n(i.id)};n(g.id);const r={};for(const i of e){if(i.id===g.id)continue;if(t.includes(i.id))continue;const e=d.templatesForPage(i.id);if(e.length>0){if(!e.find((e=>e.id===g.template)))continue;r[i.id]={label:i.jaenPageMetadata.title||i.slug,templates:e.reduce(((e,t)=>(e[t.id]={label:t.label},e)),{})}}}return r}),[d,g]);return(0,S.tZ)(Jf,{pageId:g.id,form:{disableSlug:!0,values:{title:(null===(e=g.jaenPageMetadata)||void 0===e?void 0:e.title)||"No title",image:{src:null===(t=g.jaenPageMetadata)||void 0===t?void 0:t.image},slug:g.slug,template:g.template,description:g.jaenPageMetadata.description||"No description",parentPage:null===(n=g.parentPage)||void 0===n?void 0:n.id,isExcludedFromIndex:g.excludedFromIndex,blogPost:g.jaenPageMetadata.blogPost},parentPages:y,onSubmit:e=>{var t;d.updatePage(g.id,{slug:e.slug,template:e.template,parentPage:{id:e.parentPage},excludedFromIndex:e.isExcludedFromIndex,jaenPageMetadata:{title:e.title,image:null===(t=e.image)||void 0===t?void 0:t.src,description:e.description,blogPost:e.blogPost}}),l({title:"Page updated",description:"Page "+e.title+" has been updated",status:"success"})},path:d.pagePath(g.id),jaenTemplates:d.templates},children:m,tree:d.tree,onTreeSelect:v,disableNewButton:0===d.templatesForPage(g.id).length,dangerZoneActions:[{title:"Move page",description:"This will move the page and all its subpages.",buttonText:"Move page",icon:s.FaArrowRight,onClick:()=>{},isDisabled:!g.template},{title:"Update slug",description:"This will rename the slug and thus affects the path of the page and all its subpages.",buttonText:"Rename slug",icon:s.FaEdit,onClick:async()=>{const e=await u({title:"Rename slug",message:"Please enter a new slug. This will affect the path.",confirmText:"Rename",cancelText:"Cancel",placeholder:g.slug});e&&(d.updatePage(g.id,{slug:e}),l({title:"Slug updated",description:"Slug has been updated to "+e,status:"success"}))},isDisabled:!g.template},{title:"Delete this page",description:"This will delete the page and all its subpages.",buttonText:"Delete page",icon:s.FaTrash,onClick:async()=>{var e;await c({title:"Delete page",message:"Are you sure you want to delete this page and all its subpages?"})&&(d.removePage(g.id),l({title:"Page deleted",description:"Page "+g.slug+" has been deleted",status:"success"})),f(null===(e=g.parentPage)||void 0===e?void 0:e.id)},isDisabled:!g.template}]})};var np=()=>(0,S.tZ)(ep.kN,{children:(0,S.tZ)(tp,{})});const rp={label:"Jaen CMS | Pages",icon:"FaSitemap",menu:{label:"Pages",type:"app",group:"cms",order:200},breadcrumbs:[{label:"CMS",path:"/cms/"},{label:"Pages",path:"/cms/pages/"}],withoutJaenFrameStickyHeader:!0,auth:{isAdminRequired:!0},layout:{name:"jaen"}}},988:function(e,t,n){var r=n(670),i=n(2590).Q6;function o(e,t){return"outbound"===e||"inbound"===e?t.directedSize+2*t.undirectedSize:"in"===e||"out"===e||"directed"===e?t.directedSize:2*t.undirectedSize}function a(e,t){var n=e[(t=t||"outbound")+"Neighbors"].bind(e),i=o(t,e),a=r.getPointerArray(i),s=r.getPointerArray(e.order);this.graph=e,this.neighborhood=new s(i),this.starts=new a(e.order+1),this.nodes=e.nodes();var l,u,c,d,h,f={},p=0;for(l=0,u=e.order;l<u;l++)f[this.nodes[l]]=l;for(l=0,u=e.order;l<u;l++)for(h=n(this.nodes[l]),this.starts[l]=p,c=0,d=h.length;c<d;c++)this.neighborhood[p++]=f[h[c]];this.starts[l]=i}function s(e,t,n){var a=e[(n=n||"outbound")+"Edges"].bind(e),s=o(n,e),l=r.getPointerArray(s),u=r.getPointerArray(e.order),c=i(t).fromMinimalEntry;this.graph=e,this.neighborhood=new u(s),this.weights=new Float64Array(s),this.outDegrees=new Float64Array(e.order),this.starts=new l(e.order+1),this.nodes=e.nodes();var d,h,f,p,g,m,v,y,b,_={},w=0;for(d=0,h=e.order;d<h;d++)_[this.nodes[d]]=d;for(d=0,h=e.order;d<h;d++)for(v=a(g=this.nodes[d]),this.starts[d]=w,f=0,p=v.length;f<p;f++)y=v[f],m=e.opposite(g,y),b=c(y,e.getEdgeAttributes(y)),this.neighborhood[w]=_[m],this.weights[w++]=b,this.outDegrees[d]+=b;this.starts[d]=s}a.prototype.bounds=function(e){return[this.starts[e],this.starts[e+1]]},a.prototype.project=function(){var e=this,t={};return e.nodes.forEach((function(n,r){t[n]=Array.from(e.neighborhood.slice(e.starts[r],e.starts[r+1])).map((function(t){return e.nodes[t]}))})),t},a.prototype.collect=function(e){var t,n,r={};for(t=0,n=e.length;t<n;t++)r[this.nodes[t]]=e[t];return r},a.prototype.assign=function(e,t){var n=0;this.graph.updateEachNodeAttributes((function(r,i){return i[e]=t[n++],i}),{attributes:[e]})},s.prototype.bounds=a.prototype.bounds,s.prototype.project=a.prototype.project,s.prototype.collect=a.prototype.collect,s.prototype.assign=a.prototype.assign,t.F=s},4738:function(e){e.exports={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}},6981:function(e,t){t.assign=function(e){e=e||{};var t,n,r,i=Array.prototype.slice.call(arguments).slice(1);for(t=0,r=i.length;t<r;t++)if(i[t])for(n in i[t])e[n]=i[t][n];return e},t.validateSettings=function(e){return"linLogMode"in e&&"boolean"!=typeof e.linLogMode?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in e&&"boolean"!=typeof e.outboundAttractionDistribution?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in e&&"boolean"!=typeof e.adjustSizes?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in e&&"number"!=typeof e.edgeWeightInfluence?{message:"the `edgeWeightInfluence` setting should be a number."}:!("scalingRatio"in e)||"number"==typeof e.scalingRatio&&e.scalingRatio>=0?"strongGravityMode"in e&&"boolean"!=typeof e.strongGravityMode?{message:"the `strongGravityMode` setting should be a boolean."}:!("gravity"in e)||"number"==typeof e.gravity&&e.gravity>=0?"slowDown"in e&&!("number"==typeof e.slowDown||e.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in e&&"boolean"!=typeof e.barnesHutOptimize?{message:"the `barnesHutOptimize` setting should be a boolean."}:!("barnesHutTheta"in e)||"number"==typeof e.barnesHutTheta&&e.barnesHutTheta>=0?null:{message:"the `barnesHutTheta` setting should be a number >= 0."}:{message:"the `gravity` setting should be a number >= 0."}:{message:"the `scalingRatio` setting should be a number >= 0."}},t.graphToByteArrays=function(e,t){var n,r=e.order,i=e.size,o={},a=new Float32Array(10*r),s=new Float32Array(3*i);return n=0,e.forEachNode((function(e,t){o[e]=n,a[n]=t.x,a[n+1]=t.y,a[n+2]=0,a[n+3]=0,a[n+4]=0,a[n+5]=0,a[n+6]=1,a[n+7]=1,a[n+8]=t.size||1,a[n+9]=t.fixed?1:0,n+=10})),n=0,e.forEachEdge((function(e,r,i,l,u,c,d){var h=o[i],f=o[l],p=t(e,r,i,l,u,c,d);a[h+6]+=p,a[f+6]+=p,s[n]=h,s[n+1]=f,s[n+2]=p,n+=3})),{nodes:a,edges:s}},t.assignLayoutChanges=function(e,t,n){var r=0;e.updateEachNodeAttributes((function(e,i){return i.x=t[r],i.y=t[r+1],r+=10,n?n(e,i):i}))},t.readGraphPositions=function(e,t){var n=0;e.forEachNode((function(e,r){t[n]=r.x,t[n+1]=r.y,n+=10}))},t.collectLayoutChanges=function(e,t,n){for(var r=e.nodes(),i={},o=0,a=0,s=t.length;o<s;o+=10){if(n){var l=Object.assign({},e.getNodeAttributes(r[a]));l.x=t[o],l.y=t[o+1],l=n(r[a],l),i[r[a]]={x:l.x,y:l.y}}else i[r[a]]={x:t[o],y:t[o+1]};a++}return i},t.createWorker=function(e){var t=window.URL||window.webkitURL,n=e.toString(),r=t.createObjectURL(new Blob(["("+n+").call(this);"],{type:"text/javascript"})),i=new Worker(r);return t.revokeObjectURL(r),i}},8311:function(e,t,n){var r=n(227),i=n(2590).Q6,o=n(9909),a=n(6981),s=n(4738);function l(e,t,n){if(!r(t))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");"number"==typeof n&&(n={iterations:n});var l=n.iterations;if("number"!=typeof l)throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(l<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var u=i("getEdgeWeight"in n?n.getEdgeWeight:"weight").fromEntry,c="function"==typeof n.outputReducer?n.outputReducer:null,d=a.assign({},s,n.settings),h=a.validateSettings(d);if(h)throw new Error("graphology-layout-forceatlas2: "+h.message);var f,p=a.graphToByteArrays(t,u);for(f=0;f<l;f++)o(d,p.nodes,p.edges);if(!e)return a.collectLayoutChanges(t,p.nodes);a.assignLayoutChanges(t,p.nodes,c)}var u=l.bind(null,!1);u.assign=l.bind(null,!0),u.inferSettings=function(e){var t="number"==typeof e?e:e.order;return{barnesHutOptimize:t>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(t)}},e.exports=u},9909:function(e){var t=10;e.exports=function(e,n,r){var i,o,a,s,l,u,c,d,h,f,p,g,m,v,y,b,_,w,x,S,E,k,T,C=n.length,M=r.length,A=e.adjustSizes,P=e.barnesHutTheta*e.barnesHutTheta,O=[];for(a=0;a<C;a+=t)n[a+4]=n[a+2],n[a+5]=n[a+3],n[a+2]=0,n[a+3]=0;if(e.outboundAttractionDistribution){for(p=0,a=0;a<C;a+=t)p+=n[a+6];p/=C/t}if(e.barnesHutOptimize){var U,z,D,L=1/0,N=-1/0,I=1/0,R=-1/0;for(a=0;a<C;a+=t)L=Math.min(L,n[a+0]),N=Math.max(N,n[a+0]),I=Math.min(I,n[a+1]),R=Math.max(R,n[a+1]);var F=N-L,G=R-I;for(F>G?R=(I-=(F-G)/2)+F:N=(L-=(G-F)/2)+G,O[0]=-1,O[1]=(L+N)/2,O[2]=(I+R)/2,O[3]=Math.max(N-L,R-I),O[4]=-1,O[5]=-1,O[6]=0,O[7]=0,O[8]=0,i=1,a=0;a<C;a+=t)for(o=0,D=3;;){if(!(O[o+5]>=0)){if(O[o+0]<0){O[o+0]=a;break}if(O[o+5]=9*i,d=O[o+3]/2,O[(h=O[o+5])+0]=-1,O[h+1]=O[o+1]-d,O[h+2]=O[o+2]-d,O[h+3]=d,O[h+4]=h+9,O[h+5]=-1,O[h+6]=0,O[h+7]=0,O[h+8]=0,O[(h+=9)+0]=-1,O[h+1]=O[o+1]-d,O[h+2]=O[o+2]+d,O[h+3]=d,O[h+4]=h+9,O[h+5]=-1,O[h+6]=0,O[h+7]=0,O[h+8]=0,O[(h+=9)+0]=-1,O[h+1]=O[o+1]+d,O[h+2]=O[o+2]-d,O[h+3]=d,O[h+4]=h+9,O[h+5]=-1,O[h+6]=0,O[h+7]=0,O[h+8]=0,O[(h+=9)+0]=-1,O[h+1]=O[o+1]+d,O[h+2]=O[o+2]+d,O[h+3]=d,O[h+4]=O[o+4],O[h+5]=-1,O[h+6]=0,O[h+7]=0,O[h+8]=0,i+=4,U=n[O[o+0]+0]<O[o+1]?n[O[o+0]+1]<O[o+2]?O[o+5]:O[o+5]+9:n[O[o+0]+1]<O[o+2]?O[o+5]+18:O[o+5]+27,O[o+6]=n[O[o+0]+6],O[o+7]=n[O[o+0]+0],O[o+8]=n[O[o+0]+1],O[U+0]=O[o+0],O[o+0]=-1,U===(z=n[a+0]<O[o+1]?n[a+1]<O[o+2]?O[o+5]:O[o+5]+9:n[a+1]<O[o+2]?O[o+5]+18:O[o+5]+27)){if(D--){o=U;continue}D=3;break}O[z+0]=a;break}U=n[a+0]<O[o+1]?n[a+1]<O[o+2]?O[o+5]:O[o+5]+9:n[a+1]<O[o+2]?O[o+5]+18:O[o+5]+27,O[o+7]=(O[o+7]*O[o+6]+n[a+0]*n[a+6])/(O[o+6]+n[a+6]),O[o+8]=(O[o+8]*O[o+6]+n[a+1]*n[a+6])/(O[o+6]+n[a+6]),O[o+6]+=n[a+6],o=U}}if(e.barnesHutOptimize){for(g=e.scalingRatio,a=0;a<C;a+=t)for(o=0;;)if(O[o+5]>=0){if(b=Math.pow(n[a+0]-O[o+7],2)+Math.pow(n[a+1]-O[o+8],2),4*(f=O[o+3])*f/b<P){if(m=n[a+0]-O[o+7],v=n[a+1]-O[o+8],!0===A?b>0?(_=g*n[a+6]*O[o+6]/b,n[a+2]+=m*_,n[a+3]+=v*_):b<0&&(_=-g*n[a+6]*O[o+6]/Math.sqrt(b),n[a+2]+=m*_,n[a+3]+=v*_):b>0&&(_=g*n[a+6]*O[o+6]/b,n[a+2]+=m*_,n[a+3]+=v*_),(o=O[o+4])<0)break;continue}o=O[o+5]}else if((u=O[o+0])>=0&&u!==a&&(b=(m=n[a+0]-n[u+0])*m+(v=n[a+1]-n[u+1])*v,!0===A?b>0?(_=g*n[a+6]*n[u+6]/b,n[a+2]+=m*_,n[a+3]+=v*_):b<0&&(_=-g*n[a+6]*n[u+6]/Math.sqrt(b),n[a+2]+=m*_,n[a+3]+=v*_):b>0&&(_=g*n[a+6]*n[u+6]/b,n[a+2]+=m*_,n[a+3]+=v*_)),(o=O[o+4])<0)break}else for(g=e.scalingRatio,s=0;s<C;s+=t)for(l=0;l<s;l+=t)m=n[s+0]-n[l+0],v=n[s+1]-n[l+1],!0===A?(b=Math.sqrt(m*m+v*v)-n[s+8]-n[l+8])>0?(_=g*n[s+6]*n[l+6]/b/b,n[s+2]+=m*_,n[s+3]+=v*_,n[l+2]-=m*_,n[l+3]-=v*_):b<0&&(_=100*g*n[s+6]*n[l+6],n[s+2]+=m*_,n[s+3]+=v*_,n[l+2]-=m*_,n[l+3]-=v*_):(b=Math.sqrt(m*m+v*v))>0&&(_=g*n[s+6]*n[l+6]/b/b,n[s+2]+=m*_,n[s+3]+=v*_,n[l+2]-=m*_,n[l+3]-=v*_);for(h=e.gravity/e.scalingRatio,g=e.scalingRatio,a=0;a<C;a+=t)_=0,m=n[a+0],v=n[a+1],b=Math.sqrt(Math.pow(m,2)+Math.pow(v,2)),e.strongGravityMode?b>0&&(_=g*n[a+6]*h):b>0&&(_=g*n[a+6]*h/b),n[a+2]-=m*_,n[a+3]-=v*_;for(g=1*(e.outboundAttractionDistribution?p:1),c=0;c<M;c+=3)s=r[c+0],l=r[c+1],d=r[c+2],y=Math.pow(d,e.edgeWeightInfluence),m=n[s+0]-n[l+0],v=n[s+1]-n[l+1],!0===A?(b=Math.sqrt(m*m+v*v)-n[s+8]-n[l+8],e.linLogMode?e.outboundAttractionDistribution?b>0&&(_=-g*y*Math.log(1+b)/b/n[s+6]):b>0&&(_=-g*y*Math.log(1+b)/b):e.outboundAttractionDistribution?b>0&&(_=-g*y/n[s+6]):b>0&&(_=-g*y)):(b=Math.sqrt(Math.pow(m,2)+Math.pow(v,2)),e.linLogMode?e.outboundAttractionDistribution?b>0&&(_=-g*y*Math.log(1+b)/b/n[s+6]):b>0&&(_=-g*y*Math.log(1+b)/b):e.outboundAttractionDistribution?(b=1,_=-g*y/n[s+6]):(b=1,_=-g*y)),b>0&&(n[s+2]+=m*_,n[s+3]+=v*_,n[l+2]-=m*_,n[l+3]-=v*_);if(!0===A)for(a=0;a<C;a+=t)1!==n[a+9]&&((w=Math.sqrt(Math.pow(n[a+2],2)+Math.pow(n[a+3],2)))>10&&(n[a+2]=10*n[a+2]/w,n[a+3]=10*n[a+3]/w),x=n[a+6]*Math.sqrt((n[a+4]-n[a+2])*(n[a+4]-n[a+2])+(n[a+5]-n[a+3])*(n[a+5]-n[a+3])),S=Math.sqrt((n[a+4]+n[a+2])*(n[a+4]+n[a+2])+(n[a+5]+n[a+3])*(n[a+5]+n[a+3]))/2,E=.1*Math.log(1+S)/(1+Math.sqrt(x)),k=n[a+0]+n[a+2]*(E/e.slowDown),n[a+0]=k,T=n[a+1]+n[a+3]*(E/e.slowDown),n[a+1]=T);else for(a=0;a<C;a+=t)1!==n[a+9]&&(x=n[a+6]*Math.sqrt((n[a+4]-n[a+2])*(n[a+4]-n[a+2])+(n[a+5]-n[a+3])*(n[a+5]-n[a+3])),S=Math.sqrt((n[a+4]+n[a+2])*(n[a+4]+n[a+2])+(n[a+5]+n[a+3])*(n[a+5]+n[a+3]))/2,E=n[a+7]*Math.log(1+S)/(1+Math.sqrt(x)),n[a+7]=Math.min(1,Math.sqrt(E*(Math.pow(n[a+2],2)+Math.pow(n[a+3],2))/(1+Math.sqrt(x)))),k=n[a+0]+n[a+2]*(E/e.slowDown),n[a+0]=k,T=n[a+1]+n[a+3]*(E/e.slowDown),n[a+1]=T);return{}}},4495:function(e){e.exports={gridSize:20,margin:5,expansion:1.1,ratio:1,speed:3}},9654:function(e,t){t.validateSettings=function(e){return"gridSize"in e&&"number"!=typeof e.gridSize||e.gridSize<=0?{message:"the `gridSize` setting should be a positive number."}:"margin"in e&&"number"!=typeof e.margin||e.margin<0?{message:"the `margin` setting should be 0 or a positive number."}:"expansion"in e&&"number"!=typeof e.expansion||e.expansion<=0?{message:"the `expansion` setting should be a positive number."}:"ratio"in e&&"number"!=typeof e.ratio||e.ratio<=0?{message:"the `ratio` setting should be a positive number."}:"speed"in e&&"number"!=typeof e.speed||e.speed<=0?{message:"the `speed` setting should be a positive number."}:null},t.graphToByteArray=function(e,t){var n=e.order,r=new Float32Array(3*n),i=0;return e.forEachNode((function(e,n){"function"==typeof t&&(n=t(e,n)),r[i]=n.x,r[i+1]=n.y,r[i+2]=n.size||1,i+=3})),r},t.assignLayoutChanges=function(e,t,n){var r=0;e.forEachNode((function(i){var o={x:t[r],y:t[r+1]};"function"==typeof n&&(o=n(i,o)),e.mergeNodeAttributes(i,o),r+=3}))},t.collectLayoutChanges=function(e,t,n){var r={},i=0;return e.forEachNode((function(e){var o={x:t[i],y:t[i+1]};"function"==typeof n&&(o=n(e,o)),r[e]=o,i+=3})),r},t.createWorker=function(e){var t=window.URL||window.webkitURL,n=e.toString(),r=t.createObjectURL(new Blob(["("+n+").call(this);"],{type:"text/javascript"})),i=new Worker(r);return t.revokeObjectURL(r),i}},2977:function(e,t,n){var r=n(227),i=n(1338),o=n(9654),a=n(4495);function s(e,t,n){if(!r(t))throw new Error("graphology-layout-noverlap: the given graph is not a valid graphology instance.");var s=(n="number"==typeof n?{maxIterations:n}:n||{}).maxIterations||500;if("number"!=typeof s||s<=0)throw new Error("graphology-layout-force: you should provide a positive number of maximum iterations.");var l=Object.assign({},a,n.settings),u=o.validateSettings(l);if(u)throw new Error("graphology-layout-noverlap: "+u.message);var c,d=o.graphToByteArray(t,n.inputReducer),h=!1;for(c=0;c<s&&!h;c++)h=i(l,d).converged;if(!e)return o.collectLayoutChanges(t,d,n.outputReducer);o.assignLayoutChanges(t,d,n.outputReducer)}var l=s.bind(null,!1);l.assign=s.bind(null,!0),e.exports=l},1338:function(e){function t(){return.01*(.5-Math.random())}e.exports=function(e,n){var r,i,o,a,s,l,u=e.margin,c=e.ratio,d=e.expansion,h=e.gridSize,f=e.speed,p=!0,g=n.length,m=g/3|0,v=new Float32Array(m),y=new Float32Array(m),b=1/0,_=1/0,w=-1/0,x=-1/0;for(r=0;r<g;r+=3)o=n[r+0],a=n[r+1],l=n[r+2]*c+u,b=Math.min(b,o-l),w=Math.max(w,o+l),_=Math.min(_,a-l),x=Math.max(x,a+l);var S=w-b,E=x-_,k=(b+w)/2,T=(_+x)/2;b=k-d*S/2,w=k+d*S/2,_=T-d*E/2,x=T+d*E/2;var C,M,A,P,O,U,z,D,L,N,I,R,F=new Array(h*h),G=F.length;for(C=0;C<G;C++)F[C]=[];for(r=0;r<g;r+=3)for(o=n[r+0],a=n[r+1],M=o-(l=n[r+2]*c+u),A=o+l,P=a-l,O=a+l,U=Math.floor(h*(M-b)/(w-b)),z=Math.floor(h*(A-b)/(w-b)),D=Math.floor(h*(P-_)/(x-_)),L=Math.floor(h*(O-_)/(x-_)),N=U;N<=z;N++)for(I=D;I<=L;I++)F[N*h+I].push(r);var j,B,V,H,W,q,$,Y,X,Z,K,Q,J=new Set;for(C=0;C<G;C++)for(r=0,s=(R=F[C]).length;r<s;r++)for(V=n[(j=R[r])+0],W=n[j+1],$=n[j+2],i=r+1;i<s;i++)B=R[i],X=j+"§"+B,G>1&&J.has(X)||(G>1&&J.add(X),H=n[B+0],q=n[B+1],Y=n[B+2],Z=H-V,K=q-W,(Q=Math.sqrt(Z*Z+K*K))<$*c+u+(Y*c+u)&&(p=!1,B=B/3|0,Q>0?(v[B]+=Z/Q*(1+$),y[B]+=K/Q*(1+$)):(v[B]+=S*t(),y[B]+=E*t())));for(r=0,i=0;r<g;r+=3,i++)n[r+0]+=.1*v[i]*f,n[r+1]+=.1*y[i]*f;return{converged:p}}},6276:function(e,t,n){var r=n(2945),i=n(227),o={dimensions:["x","y"],center:.5,scale:1};function a(e,t,n){if(!i(t))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");var a=(n=r(n,o)).dimensions;if(!Array.isArray(a)||2!==a.length)throw new Error("graphology-layout/random: given dimensions are invalid.");var s=n.center,l=n.scale,u=2*Math.PI,c=(s-.5)*l,d=t.order,h=a[0],f=a[1];function p(e,t){return t[h]=l*Math.cos(e*u/d)+c,t[f]=l*Math.sin(e*u/d)+c,t}var g=0;if(!e){var m={};return t.forEachNode((function(e){m[e]=p(g++,{})})),m}t.updateEachNodeAttributes((function(e,t){return p(g++,t),t}),{attributes:a})}var s=a.bind(null,!1);s.assign=a.bind(null,!0),e.exports=s},5656:function(e,t,n){var r=n(2945),i=n(227),o={dimensions:["x","y"],center:.5,rng:Math.random,scale:1};function a(e,t,n){if(!i(t))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");var a=(n=r(n,o)).dimensions;if(!Array.isArray(a)||a.length<1)throw new Error("graphology-layout/random: given dimensions are invalid.");var s=a.length,l=n.center,u=n.rng,c=n.scale,d=(l-.5)*c;function h(e){for(var t=0;t<s;t++)e[a[t]]=u()*c+d;return e}if(!e){var f={};return t.forEachNode((function(e){f[e]=h({})})),f}t.updateEachNodeAttributes((function(e,t){return h(t),t}),{attributes:a})}var s=a.bind(null,!1);s.assign=a.bind(null,!0),e.exports=s},9255:function(e,t,n){var r=n(227);function i(e,t,n,i){var o=t+"Centrality";if(!r(n))throw new Error("graphology-centrality/"+o+": the given graph is not a valid graphology instance.");if("degree"!==t&&"undirected"===n.type)throw new Error("graphology-centrality/"+o+": cannot compute "+t+" centrality on an undirected graph.");var a=(i=i||{}).nodeCentralityAttribute||o,s=n.order-1,l=n[t].bind(n);if(!e){var u={};return n.forEachNode((function(e){u[e]=l(e)/s})),u}n.updateEachNodeAttributes((function(e,t){return t[a]=l(e)/s,t}),{attributes:[a]})}var o=i.bind(null,!1,"degree"),a=i.bind(null,!1,"inDegree"),s=i.bind(null,!1,"outDegree");o.assign=i.bind(null,!0,"degree"),a.assign=i.bind(null,!0,"inDegree"),s.assign=i.bind(null,!0,"outDegree"),t.Nk=o},770:function(e,t,n){var r=n(227),i=n(2945),o=n(988).F,a={nodePagerankAttribute:"pagerank",getEdgeWeight:"weight",alpha:.85,maxIterations:100,tolerance:1e-6};function s(e,t,n){if(!r(t))throw new Error("graphology-metrics/centrality/pagerank: the given graph is not a valid graphology instance.");var s,l,u,c,d=(n=i(n,a)).alpha,h=n.maxIterations,f=n.tolerance,p=n.nodePagerankAttribute,g=t.order,m=1/g,v=new o(t,n.getEdgeWeight),y=new Float64Array(t.order),b=new Float64Array(v.weights.length),_=[];for(s=0;s<g;s++)for(y[s]=m,u=v.starts[s+1],0===(c=v.outDegrees[s])&&_.push(s),l=v.starts[s];l<u;l++)b[l]=v.weights[l]/c;for(var w,x,S=0,E=0,k=!1;S<h;){for(x=y,y=new Float64Array(t.order),w=0,s=0,u=_.length;s<u;s++)w+=x[_[s]];for(w*=d,s=0;s<g;s++){for(u=v.starts[s+1],l=v.starts[s];l<u;l++)y[v.neighborhood[l]]+=d*x[s]*b[l];y[s]+=w*m+(1-d)*m}for(E=0,s=0;s<g;s++)E+=Math.abs(y[s]-x[s]);if(E<g*f){k=!0;break}S++}if(!k)throw Error("graphology-metrics/centrality/pagerank: failed to converge.");if(!e)return v.collect(y);v.assign(p,y)}var l=s.bind(null,!1);l.assign=s.bind(null,!0),e.exports=l},2232:function(e,t,n){var r=n(227),i=n(2590).Q6,o=n(7213),a="weight";function s(e,t){return e[0]>t[0]?1:e[0]<t[0]?-1:e[1]>t[1]?1:e[1]<t[1]?-1:e[2]>t[2]?1:e[2]<t[2]?-1:0}function l(e,t){return e[0]>t[0]?1:e[0]<t[0]?-1:e[1]>t[1]?1:e[1]<t[1]?-1:e[2]>t[2]?1:e[2]<t[2]?-1:e[3]>t[3]?1:e[3]<t[3]?-1:0}},8497:function(e,t,n){var r=n(1037),i=n(1148);n(2232),t.Ar=r.bidirectional,r.singleSource,r.singleSourceLength,r.undirectedSingleSourceLength,r.brandes,i.edgePathFromNodePath},1037:function(e,t,n){var r=n(227),i=n(2285),o=n(9239);function a(e,t,n){if(!r(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,a={},s=0;a[n]=0;for(var l,u,c,d=[n];0!==d.length;){var h=[];for(l=0,u=d.length;l<u;l++)c=d[l],i.has(c)||(i.add(c),o(h,t[e](c)),a[c]=s);s++,d=h}return a}var s=a.bind(null,"outboundNeighbors"),l=a.bind(null,"neighbors");t.bidirectional=function(e,t,n){if(!r(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!e.hasNode(t))throw new Error('graphology-shortest-path: the "'+t+'" source node does not exist in the given graph.');if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if((t=""+t)===(n=""+n))return[t];var i=e.inboundNeighbors.bind(e),o=e.outboundNeighbors.bind(e),a={},s={};a[t]=null,s[n]=null;var l,u,c,d,h,f,p,g,m=[t],v=[n],y=!1;e:for(;m.length&&v.length;)if(m.length<=v.length){for(l=m,m=[],h=0,p=l.length;h<p;h++)for(f=0,g=(c=o(u=l[h])).length;f<g;f++)if((d=c[f])in a||(m.push(d),a[d]=u),d in s){y=!0;break e}}else for(l=v,v=[],h=0,p=l.length;h<p;h++)for(f=0,g=(c=i(u=l[h])).length;f<g;f++)if((d=c[f])in s||(v.push(d),s[d]=u),d in a){y=!0;break e}if(!y)return null;for(var b=[];d;)b.unshift(d),d=a[d];for(d=s[b[b.length-1]];d;)b.push(d),d=s[d];return b.length?b:null},t.singleSource=function(e,t){if(!r(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!e.hasNode(t))throw new Error('graphology-shortest-path: the "'+t+'" source node does not exist in the given graph.');var n,i,o,a,s,l,u={},c={};for(u[t=""+t]=!0,c[t]=[t];Object.keys(u).length;)for(o in n=u,u={},n)for(s=0,l=(i=e.outboundNeighbors(o)).length;s<l;s++)c[a=i[s]]||(c[a]=c[o].concat(a),u[a]=!0);return c},t.singleSourceLength=s,t.undirectedSingleSourceLength=l,t.brandes=function(e,t){t=""+t;var n,r,o,a,s,l,u,c,d,h=[],f={},p={},g=e.nodes();for(l=0,c=g.length;l<c;l++)f[a=g[l]]=[],p[a]=0;var m={};p[t]=1,m[t]=0;for(var v=i.of(t);v.size;)for(a=v.dequeue(),h.push(a),n=m[a],r=p[a],u=0,d=(o=e.outboundNeighbors(a)).length;u<d;u++)(s=o[u])in m||(v.enqueue(s),m[s]=n+1),m[s]===n+1&&(p[s]+=r,f[s].push(a));return[h,f,p]}},1148:function(e,t){var n=function(){return!0};t.edgePathFromNodePath=function(e,t){var r,i,o,a,s=t.length;if(s<2)return i=t[0],(a=e.multi?e.findEdge(i,i,n):e.edge(i,i))?[a]:[];s--;var l=new Array(s);for(r=0;r<s;r++){if(i=t[r],o=t[r+1],void 0===(a=e.multi?e.findOutboundEdge(i,o,n):e.edge(i,o)))throw new Error("graphology-shortest-path: given path is impossible in given graph.");l[r]=a}return l}},2945:function(e){e.exports=function e(t,n){t=t||{};var r,i={};for(var o in n){var a=t[o],s=n[o];!(r=s)||"object"!=typeof r||"function"==typeof r||Array.isArray(r)||r instanceof Set||r instanceof Map||r instanceof RegExp||r instanceof Date?i[o]=void 0===a?s:a:i[o]=e(a,s)}return i}},2590:function(e,t){function n(e){return"number"!=typeof e||isNaN(e)?1:e}function r(e,t){var n={},r=function(e){return void 0===e?t:e};"function"==typeof t&&(r=t);var i=function(t){return r(t[e])},o=function(){return r(void 0)};return"string"==typeof e?(n.fromAttributes=i,n.fromGraph=function(e,t){return i(e.getEdgeAttributes(t))},n.fromEntry=function(e,t){return i(t)},n.fromPartialEntry=n.fromEntry,n.fromMinimalEntry=n.fromEntry):"function"==typeof e?(n.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},n.fromGraph=function(t,n){var i=t.extremities(n);return r(e(n,t.getEdgeAttributes(n),i[0],i[1],t.getNodeAttributes(i[0]),t.getNodeAttributes(i[1]),t.isUndirected(n)))},n.fromEntry=function(t,n,i,o,a,s,l){return r(e(t,n,i,o,a,s,l))},n.fromPartialEntry=function(t,n,i,o){return r(e(t,n,i,o))},n.fromMinimalEntry=function(t,n){return r(e(t,n))}):(n.fromAttributes=o,n.fromGraph=o,n.fromEntry=o,n.fromMinimalEntry=o),n}t.Q6=function(e){return r(e,n)}},227:function(e){e.exports=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.addUndirectedEdgeWithKey&&"function"==typeof e.dropNode&&"boolean"==typeof e.multi}},9807:function(e){e.exports=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function o(e,t,n){return o=i()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o},o.apply(null,arguments)}function a(e){var t="function"==typeof Map?new Map:void 0;return a=function(e){if(null===e||(i=e,-1===Function.toString.call(i).indexOf("[native code]")))return e;var i;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,a)}function a(){return o(e,arguments,n(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),r(a,e)},a(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var l=function(){for(var e=arguments[0],t=1,n=arguments.length;t<n;t++)if(arguments[t])for(var r in arguments[t])e[r]=arguments[t][r];return e};function u(e,t,n,r){var i=e._nodes.get(t),o=null;return i?o="mixed"===r?i.out&&i.out[n]||i.undirected&&i.undirected[n]:"directed"===r?i.out&&i.out[n]:i.undirected&&i.undirected[n]:o}function c(t){return"object"===e(t)&&null!==t&&t.constructor===Object}function d(e){var t;for(t in e)return!1;return!0}function h(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!0,value:n})}function f(e,t,n){var r={enumerable:!0,configurable:!0};"function"==typeof n?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(e,t,r)}function p(e){return!(!c(e)||e.attributes&&!Array.isArray(e.attributes))}"function"==typeof Object.assign&&(l=Object.assign);var g,m={exports:{}},v="object"==typeof Reflect?Reflect:null,y=v&&"function"==typeof v.apply?v.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};g=v&&"function"==typeof v.ownKeys?v.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var b=Number.isNaN||function(e){return e!=e};function _(){_.init.call(this)}m.exports=_,m.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}P(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&P(e,"error",t,n)}(e,i,{once:!0})}))},_.EventEmitter=_,_.prototype._events=void 0,_.prototype._eventsCount=0,_.prototype._maxListeners=void 0;var w=10;function x(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function S(e){return void 0===e._maxListeners?_.defaultMaxListeners:e._maxListeners}function E(e,t,n,r){var i,o,a,s;if(x(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=S(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,s=l,console&&console.warn&&console.warn(s)}return e}function k(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function T(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=k.bind(r);return i.listener=n,r.wrapFn=i,i}function C(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):A(i,i.length)}function M(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function A(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function P(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}function O(e){if("function"!=typeof e)throw new Error("obliterator/iterator: expecting a function!");this.next=e}Object.defineProperty(_,"defaultMaxListeners",{enumerable:!0,get:function(){return w},set:function(e){if("number"!=typeof e||e<0||b(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");w=e}}),_.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},_.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||b(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},_.prototype.getMaxListeners=function(){return S(this)},_.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=i[e];if(void 0===s)return!1;if("function"==typeof s)y(s,this,t);else{var l=s.length,u=A(s,l);for(n=0;n<l;++n)y(u[n],this,t)}return!0},_.prototype.addListener=function(e,t){return E(this,e,t,!1)},_.prototype.on=_.prototype.addListener,_.prototype.prependListener=function(e,t){return E(this,e,t,!0)},_.prototype.once=function(e,t){return x(t),this.on(e,T(this,e,t)),this},_.prototype.prependOnceListener=function(e,t){return x(t),this.prependListener(e,T(this,e,t)),this},_.prototype.removeListener=function(e,t){var n,r,i,o,a;if(x(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},_.prototype.off=_.prototype.removeListener,_.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},_.prototype.listeners=function(e){return C(this,e,!0)},_.prototype.rawListeners=function(e){return C(this,e,!1)},_.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):M.call(e,t)},_.prototype.listenerCount=M,_.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]},"undefined"!=typeof Symbol&&(O.prototype[Symbol.iterator]=function(){return this}),O.of=function(){var e=arguments,t=e.length,n=0;return new O((function(){return n>=t?{done:!0}:{done:!1,value:e[n++]}}))},O.empty=function(){return new O((function(){return{done:!0}}))},O.fromSequence=function(e){var t=0,n=e.length;return new O((function(){return t>=n?{done:!0}:{done:!1,value:e[t++]}}))},O.is=function(e){return e instanceof O||"object"==typeof e&&null!==e&&"function"==typeof e.next};var U=O,z={};z.ARRAY_BUFFER_SUPPORT="undefined"!=typeof ArrayBuffer,z.SYMBOL_SUPPORT="undefined"!=typeof Symbol;var D=U,L=z,N=L.ARRAY_BUFFER_SUPPORT,I=L.SYMBOL_SUPPORT,R=function(e){var t=function(e){return"string"==typeof e||Array.isArray(e)||N&&ArrayBuffer.isView(e)?D.fromSequence(e):"object"!=typeof e||null===e?null:I&&"function"==typeof e[Symbol.iterator]?e[Symbol.iterator]():"function"==typeof e.next?e:null}(e);if(!t)throw new Error("obliterator: target is not iterable nor a valid iterator.");return t},F=R,G=function(e,t){for(var n,r=arguments.length>1?t:1/0,i=r!==1/0?new Array(r):[],o=0,a=F(e);;){if(o===r)return i;if((n=a.next()).done)return o!==t&&(i.length=o),i;i[o++]=n.value}},j=function(e){function n(t){var n;return(n=e.call(this)||this).name="GraphError",n.message=t,n}return t(n,e),n}(a(Error)),B=function(e){function n(t){var r;return(r=e.call(this,t)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(r),n.prototype.constructor),r}return t(n,e),n}(j),V=function(e){function n(t){var r;return(r=e.call(this,t)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(r),n.prototype.constructor),r}return t(n,e),n}(j),H=function(e){function n(t){var r;return(r=e.call(this,t)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(r),n.prototype.constructor),r}return t(n,e),n}(j);function W(e,t){this.key=e,this.attributes=t,this.clear()}function q(e,t){this.key=e,this.attributes=t,this.clear()}function $(e,t){this.key=e,this.attributes=t,this.clear()}function Y(e,t,n,r,i){this.key=t,this.attributes=i,this.undirected=e,this.source=n,this.target=r}function X(e,t,n,r,i,o,a){var s,l,u,c;if(r=""+r,0===n){if(!(s=e._nodes.get(r)))throw new V("Graph.".concat(t,': could not find the "').concat(r,'" node in the graph.'));u=i,c=o}else if(3===n){if(i=""+i,!(l=e._edges.get(i)))throw new V("Graph.".concat(t,': could not find the "').concat(i,'" edge in the graph.'));var d=l.source.key,h=l.target.key;if(r===d)s=l.target;else{if(r!==h)throw new V("Graph.".concat(t,': the "').concat(r,'" node is not attached to the "').concat(i,'" edge (').concat(d,", ").concat(h,")."));s=l.source}u=o,c=a}else{if(!(l=e._edges.get(r)))throw new V("Graph.".concat(t,': could not find the "').concat(r,'" edge in the graph.'));s=1===n?l.source:l.target,u=i,c=o}return[s,u,c]}W.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}},q.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}},$.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}},Y.prototype.attach=function(){var e="out",t="in";this.undirected&&(e=t="undirected");var n=this.source.key,r=this.target.key;this.source[e][r]=this,this.undirected&&n===r||(this.target[t][n]=this)},Y.prototype.attachMulti=function(){var e="out",t="in",n=this.source.key,r=this.target.key;this.undirected&&(e=t="undirected");var i=this.source[e],o=i[r];if(void 0===o)return i[r]=this,void(this.undirected&&n===r||(this.target[t][n]=this));o.previous=this,this.next=o,i[r]=this,this.target[t][n]=this},Y.prototype.detach=function(){var e=this.source.key,t=this.target.key,n="out",r="in";this.undirected&&(n=r="undirected"),delete this.source[n][t],delete this.target[r][e]},Y.prototype.detachMulti=function(){var e=this.source.key,t=this.target.key,n="out",r="in";this.undirected&&(n=r="undirected"),void 0===this.previous?void 0===this.next?(delete this.source[n][t],delete this.target[r][e]):(this.next.previous=void 0,this.source[n][t]=this.next,this.target[r][e]=this.next):(this.previous.next=this.next,void 0!==this.next&&(this.next.previous=this.previous))};var Z=[{name:function(e){return"get".concat(e,"Attribute")},attacher:function(e,t,n){e.prototype[t]=function(e,r,i){var o=X(this,t,n,e,r,i),a=o[0],s=o[1];return a.attributes[s]}}},{name:function(e){return"get".concat(e,"Attributes")},attacher:function(e,t,n){e.prototype[t]=function(e,r){return X(this,t,n,e,r)[0].attributes}}},{name:function(e){return"has".concat(e,"Attribute")},attacher:function(e,t,n){e.prototype[t]=function(e,r,i){var o=X(this,t,n,e,r,i),a=o[0],s=o[1];return a.attributes.hasOwnProperty(s)}}},{name:function(e){return"set".concat(e,"Attribute")},attacher:function(e,t,n){e.prototype[t]=function(e,r,i,o){var a=X(this,t,n,e,r,i,o),s=a[0],l=a[1],u=a[2];return s.attributes[l]=u,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:l}),this}}},{name:function(e){return"update".concat(e,"Attribute")},attacher:function(e,t,n){e.prototype[t]=function(e,r,i,o){var a=X(this,t,n,e,r,i,o),s=a[0],l=a[1],u=a[2];if("function"!=typeof u)throw new B("Graph.".concat(t,": updater should be a function."));var c=s.attributes,d=u(c[l]);return c[l]=d,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:l}),this}}},{name:function(e){return"remove".concat(e,"Attribute")},attacher:function(e,t,n){e.prototype[t]=function(e,r,i){var o=X(this,t,n,e,r,i),a=o[0],s=o[1];return delete a.attributes[s],this.emit("nodeAttributesUpdated",{key:a.key,type:"remove",attributes:a.attributes,name:s}),this}}},{name:function(e){return"replace".concat(e,"Attributes")},attacher:function(e,t,n){e.prototype[t]=function(e,r,i){var o=X(this,t,n,e,r,i),a=o[0],s=o[1];if(!c(s))throw new B("Graph.".concat(t,": provided attributes are not a plain object."));return a.attributes=s,this.emit("nodeAttributesUpdated",{key:a.key,type:"replace",attributes:a.attributes}),this}}},{name:function(e){return"merge".concat(e,"Attributes")},attacher:function(e,t,n){e.prototype[t]=function(e,r,i){var o=X(this,t,n,e,r,i),a=o[0],s=o[1];if(!c(s))throw new B("Graph.".concat(t,": provided attributes are not a plain object."));return l(a.attributes,s),this.emit("nodeAttributesUpdated",{key:a.key,type:"merge",attributes:a.attributes,data:s}),this}}},{name:function(e){return"update".concat(e,"Attributes")},attacher:function(e,t,n){e.prototype[t]=function(e,r,i){var o=X(this,t,n,e,r,i),a=o[0],s=o[1];if("function"!=typeof s)throw new B("Graph.".concat(t,": provided updater is not a function."));return a.attributes=s(a.attributes),this.emit("nodeAttributesUpdated",{key:a.key,type:"update",attributes:a.attributes}),this}}}],K=[{name:function(e){return"get".concat(e,"Attribute")},attacher:function(e,t,n){e.prototype[t]=function(e,r){var i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new H("Graph.".concat(t,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new H("Graph.".concat(t,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+e,a=""+r;if(r=arguments[2],!(i=u(this,o,a,n)))throw new V("Graph.".concat(t,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new H("Graph.".concat(t,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(e=""+e,!(i=this._edges.get(e)))throw new V("Graph.".concat(t,': could not find the "').concat(e,'" edge in the graph.'))}return i.attributes[r]}}},{name:function(e){return"get".concat(e,"Attributes")},attacher:function(e,t,n){e.prototype[t]=function(e){var r;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new H("Graph.".concat(t,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new H("Graph.".concat(t,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var i=""+e,o=""+arguments[1];if(!(r=u(this,i,o,n)))throw new V("Graph.".concat(t,': could not find an edge for the given path ("').concat(i,'" - "').concat(o,'").'))}else{if("mixed"!==n)throw new H("Graph.".concat(t,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(e=""+e,!(r=this._edges.get(e)))throw new V("Graph.".concat(t,': could not find the "').concat(e,'" edge in the graph.'))}return r.attributes}}},{name:function(e){return"has".concat(e,"Attribute")},attacher:function(e,t,n){e.prototype[t]=function(e,r){var i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new H("Graph.".concat(t,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new H("Graph.".concat(t,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+e,a=""+r;if(r=arguments[2],!(i=u(this,o,a,n)))throw new V("Graph.".concat(t,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new H("Graph.".concat(t,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(e=""+e,!(i=this._edges.get(e)))throw new V("Graph.".concat(t,': could not find the "').concat(e,'" edge in the graph.'))}return i.attributes.hasOwnProperty(r)}}},{name:function(e){return"set".concat(e,"Attribute")},attacher:function(e,t,n){e.prototype[t]=function(e,r,i){var o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new H("Graph.".concat(t,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new H("Graph.".concat(t,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var a=""+e,s=""+r;if(r=arguments[2],i=arguments[3],!(o=u(this,a,s,n)))throw new V("Graph.".concat(t,': could not find an edge for the given path ("').concat(a,'" - "').concat(s,'").'))}else{if("mixed"!==n)throw new H("Graph.".concat(t,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(e=""+e,!(o=this._edges.get(e)))throw new V("Graph.".concat(t,': could not find the "').concat(e,'" edge in the graph.'))}return o.attributes[r]=i,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}},{name:function(e){return"update".concat(e,"Attribute")},attacher:function(e,t,n){e.prototype[t]=function(e,r,i){var o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new H("Graph.".concat(t,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new H("Graph.".concat(t,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var a=""+e,s=""+r;if(r=arguments[2],i=arguments[3],!(o=u(this,a,s,n)))throw new V("Graph.".concat(t,': could not find an edge for the given path ("').concat(a,'" - "').concat(s,'").'))}else{if("mixed"!==n)throw new H("Graph.".concat(t,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(e=""+e,!(o=this._edges.get(e)))throw new V("Graph.".concat(t,': could not find the "').concat(e,'" edge in the graph.'))}if("function"!=typeof i)throw new B("Graph.".concat(t,": updater should be a function."));return o.attributes[r]=i(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}},{name:function(e){return"remove".concat(e,"Attribute")},attacher:function(e,t,n){e.prototype[t]=function(e,r){var i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new H("Graph.".concat(t,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new H("Graph.".concat(t,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+e,a=""+r;if(r=arguments[2],!(i=u(this,o,a,n)))throw new V("Graph.".concat(t,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new H("Graph.".concat(t,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(e=""+e,!(i=this._edges.get(e)))throw new V("Graph.".concat(t,': could not find the "').concat(e,'" edge in the graph.'))}return delete i.attributes[r],this.emit("edgeAttributesUpdated",{key:i.key,type:"remove",attributes:i.attributes,name:r}),this}}},{name:function(e){return"replace".concat(e,"Attributes")},attacher:function(e,t,n){e.prototype[t]=function(e,r){var i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new H("Graph.".concat(t,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new H("Graph.".concat(t,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+e,a=""+r;if(r=arguments[2],!(i=u(this,o,a,n)))throw new V("Graph.".concat(t,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new H("Graph.".concat(t,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(e=""+e,!(i=this._edges.get(e)))throw new V("Graph.".concat(t,': could not find the "').concat(e,'" edge in the graph.'))}if(!c(r))throw new B("Graph.".concat(t,": provided attributes are not a plain object."));return i.attributes=r,this.emit("edgeAttributesUpdated",{key:i.key,type:"replace",attributes:i.attributes}),this}}},{name:function(e){return"merge".concat(e,"Attributes")},attacher:function(e,t,n){e.prototype[t]=function(e,r){var i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new H("Graph.".concat(t,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new H("Graph.".concat(t,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+e,a=""+r;if(r=arguments[2],!(i=u(this,o,a,n)))throw new V("Graph.".concat(t,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new H("Graph.".concat(t,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(e=""+e,!(i=this._edges.get(e)))throw new V("Graph.".concat(t,': could not find the "').concat(e,'" edge in the graph.'))}if(!c(r))throw new B("Graph.".concat(t,": provided attributes are not a plain object."));return l(i.attributes,r),this.emit("edgeAttributesUpdated",{key:i.key,type:"merge",attributes:i.attributes,data:r}),this}}},{name:function(e){return"update".concat(e,"Attributes")},attacher:function(e,t,n){e.prototype[t]=function(e,r){var i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new H("Graph.".concat(t,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new H("Graph.".concat(t,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+e,a=""+r;if(r=arguments[2],!(i=u(this,o,a,n)))throw new V("Graph.".concat(t,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new H("Graph.".concat(t,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(e=""+e,!(i=this._edges.get(e)))throw new V("Graph.".concat(t,': could not find the "').concat(e,'" edge in the graph.'))}if("function"!=typeof r)throw new B("Graph.".concat(t,": provided updater is not a function."));return i.attributes=r(i.attributes),this.emit("edgeAttributesUpdated",{key:i.key,type:"update",attributes:i.attributes}),this}}}],Q=U,J=R,ee=function(){var e=arguments,t=null,n=-1;return new Q((function(){for(var r=null;;){if(null===t){if(++n>=e.length)return{done:!0};t=J(e[n])}if(!0!==(r=t.next()).done)break;t=null}return r}))},te=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function ne(e,t,n,r){var i=!1;for(var o in t)if(o!==r){var a=t[o];if(i=n(a.key,a.attributes,a.source.key,a.target.key,a.source.attributes,a.target.attributes,a.undirected),e&&i)return a.key}}function re(e,t,n,r){var i,o,a,s=!1;for(var l in t)if(l!==r){i=t[l];do{if(o=i.source,a=i.target,s=n(i.key,i.attributes,o.key,a.key,o.attributes,a.attributes,i.undirected),e&&s)return i.key;i=i.next}while(void 0!==i)}}function ie(e,t){var n,r=Object.keys(e),i=r.length,o=0;return new U((function(){do{if(n)n=n.next;else{if(o>=i)return{done:!0};var a=r[o++];if(a===t){n=void 0;continue}n=e[a]}}while(!n);return{done:!1,value:{edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected}}}))}function oe(e,t,n,r){var i=t[n];if(i){var o=i.source,a=i.target;return r(i.key,i.attributes,o.key,a.key,o.attributes,a.attributes,i.undirected)&&e?i.key:void 0}}function ae(e,t,n,r){var i=t[n];if(i){var o=!1;do{if(o=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),e&&o)return i.key;i=i.next}while(void 0!==i)}}function se(e,t){var n=e[t];return void 0!==n.next?new U((function(){if(!n)return{done:!0};var e={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:e}})):U.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function le(e,t){if(0===e.size)return[];if("mixed"===t||t===e.type)return"function"==typeof Array.from?Array.from(e._edges.keys()):G(e._edges.keys(),e._edges.size);for(var n,r,i="undirected"===t?e.undirectedSize:e.directedSize,o=new Array(i),a="undirected"===t,s=e._edges.values(),l=0;!0!==(n=s.next()).done;)(r=n.value).undirected===a&&(o[l++]=r.key);return o}function ue(e,t,n,r){if(0!==t.size)for(var i,o,a="mixed"!==n&&n!==t.type,s="undirected"===n,l=!1,u=t._edges.values();!0!==(i=u.next()).done;)if(o=i.value,!a||o.undirected===s){var c=o,d=c.key,h=c.attributes,f=c.source,p=c.target;if(l=r(d,h,f.key,p.key,f.attributes,p.attributes,o.undirected),e&&l)return d}}function ce(e,t){if(0===e.size)return U.empty();var n="mixed"!==t&&t!==e.type,r="undirected"===t,i=e._edges.values();return new U((function(){for(var e,t;;){if((e=i.next()).done)return e;if(t=e.value,!n||t.undirected===r)break}return{value:{edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected},done:!1}}))}function de(e,t,n,r,i,o){var a,s=t?re:ne;if("undirected"!==n){if("out"!==r&&(a=s(e,i.in,o),e&&a))return a;if("in"!==r&&(a=s(e,i.out,o,r?void 0:i.key),e&&a))return a}if("directed"!==n&&(a=s(e,i.undirected,o),e&&a))return a}function he(e,t,n,r){var i=[];return de(!1,e,t,n,r,(function(e){i.push(e)})),i}function fe(e,t,n){var r=U.empty();return"undirected"!==e&&("out"!==t&&void 0!==n.in&&(r=ee(r,ie(n.in))),"in"!==t&&void 0!==n.out&&(r=ee(r,ie(n.out,t?void 0:n.key)))),"directed"!==e&&void 0!==n.undirected&&(r=ee(r,ie(n.undirected))),r}function pe(e,t,n,r,i,o,a){var s,l=n?ae:oe;if("undirected"!==t){if(void 0!==i.in&&"out"!==r&&(s=l(e,i.in,o,a),e&&s))return s;if(void 0!==i.out&&"in"!==r&&(r||i.key!==o)&&(s=l(e,i.out,o,a),e&&s))return s}if("directed"!==t&&void 0!==i.undirected&&(s=l(e,i.undirected,o,a),e&&s))return s}function ge(e,t,n,r,i){var o=[];return pe(!1,e,t,n,r,i,(function(e){o.push(e)})),o}function me(e,t,n,r){var i=U.empty();return"undirected"!==e&&(void 0!==n.in&&"out"!==t&&r in n.in&&(i=ee(i,se(n.in,r))),void 0!==n.out&&"in"!==t&&r in n.out&&(t||n.key!==r)&&(i=ee(i,se(n.out,r)))),"directed"!==e&&void 0!==n.undirected&&r in n.undirected&&(i=ee(i,se(n.undirected,r))),i}var ve=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function ye(){this.A=null,this.B=null}function be(e,t,n,r,i){for(var o in r){var a=r[o],s=a.source,l=a.target,u=s===n?l:s;if(!t||!t.has(u.key)){var c=i(u.key,u.attributes);if(e&&c)return u.key}}}function _e(e,t,n,r,i){if("mixed"!==t){if("undirected"===t)return be(e,null,r,r.undirected,i);if("string"==typeof n)return be(e,null,r,r[n],i)}var o,a=new ye;if("undirected"!==t){if("out"!==n){if(o=be(e,null,r,r.in,i),e&&o)return o;a.wrap(r.in)}if("in"!==n){if(o=be(e,a,r,r.out,i),e&&o)return o;a.wrap(r.out)}}if("directed"!==t&&(o=be(e,a,r,r.undirected,i),e&&o))return o}function we(e,t,n){var r=Object.keys(n),i=r.length,o=0;return new U((function(){var a=null;do{if(o>=i)return e&&e.wrap(n),{done:!0};var s=n[r[o++]],l=s.source,u=s.target;a=l===t?u:l,e&&e.has(a.key)&&(a=null)}while(null===a);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}}))}function xe(e,t){var n=t.name,r=t.type,i=t.direction;e.prototype[n]=function(e){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return[];e=""+e;var t=this._nodes.get(e);if(void 0===t)throw new V("Graph.".concat(n,': could not find the "').concat(e,'" node in the graph.'));return function(e,t,n){if("mixed"!==e){if("undirected"===e)return Object.keys(n.undirected);if("string"==typeof t)return Object.keys(n[t])}var r=[];return _e(!1,e,t,n,(function(e){r.push(e)})),r}("mixed"===r?this.type:r,i,t)}}function Se(e,t){var n=t.name,r=t.type,i=t.direction,o=n.slice(0,-1)+"Entries";e.prototype[o]=function(e){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return U.empty();e=""+e;var t=this._nodes.get(e);if(void 0===t)throw new V("Graph.".concat(o,': could not find the "').concat(e,'" node in the graph.'));return function(e,t,n){if("mixed"!==e){if("undirected"===e)return we(null,n,n.undirected);if("string"==typeof t)return we(null,n,n[t])}var r=U.empty(),i=new ye;return"undirected"!==e&&("out"!==t&&(r=ee(r,we(i,n,n.in))),"in"!==t&&(r=ee(r,we(i,n,n.out)))),"directed"!==e&&(r=ee(r,we(i,n,n.undirected))),r}("mixed"===r?this.type:r,i,t)}}function Ee(e,t,n,r,i){for(var o,a,s,l,u,c,d,h=r._nodes.values(),f=r.type;!0!==(o=h.next()).done;){var p=!1;if(a=o.value,"undirected"!==f)for(s in l=a.out){u=l[s];do{if(c=u.target,p=!0,d=i(a.key,c.key,a.attributes,c.attributes,u.key,u.attributes,u.undirected),e&&d)return u;u=u.next}while(u)}if("directed"!==f)for(s in l=a.undirected)if(!(t&&a.key>s)){u=l[s];do{if((c=u.target).key!==s&&(c=u.source),p=!0,d=i(a.key,c.key,a.attributes,c.attributes,u.key,u.attributes,u.undirected),e&&d)return u;u=u.next}while(u)}if(n&&!p&&(d=i(a.key,null,a.attributes,null,null,null,null),e&&d))return null}}function ke(e){if(!c(e))throw new B('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in e))throw new B("Graph.import: serialized node is missing its key.");if("attributes"in e&&(!c(e.attributes)||null===e.attributes))throw new B("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Te(e){if(!c(e))throw new B('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in e))throw new B("Graph.import: serialized edge is missing its source.");if(!("target"in e))throw new B("Graph.import: serialized edge is missing its target.");if("attributes"in e&&(!c(e.attributes)||null===e.attributes))throw new B("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in e&&"boolean"!=typeof e.undirected)throw new B("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}ye.prototype.wrap=function(e){null===this.A?this.A=e:null===this.B&&(this.B=e)},ye.prototype.has=function(e){return null!==this.A&&e in this.A||null!==this.B&&e in this.B};var Ce,Me=(Ce=255&Math.floor(256*Math.random()),function(){return Ce++}),Ae=new Set(["directed","undirected","mixed"]),Pe=new Set(["domain","_events","_eventsCount","_maxListeners"]),Oe={allowSelfLoops:!0,multi:!1,type:"mixed"};function Ue(e,t,n){var r=new e.NodeDataClass(t,n);return e._nodes.set(t,r),e.emit("nodeAdded",{key:t,attributes:n}),r}function ze(e,t,n,r,i,o,a,s){if(!r&&"undirected"===e.type)throw new H("Graph.".concat(t,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(r&&"directed"===e.type)throw new H("Graph.".concat(t,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(s&&!c(s))throw new B("Graph.".concat(t,': invalid attributes. Expecting an object but got "').concat(s,'"'));if(o=""+o,a=""+a,s=s||{},!e.allowSelfLoops&&o===a)throw new H("Graph.".concat(t,': source & target are the same ("').concat(o,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var l=e._nodes.get(o),u=e._nodes.get(a);if(!l)throw new V("Graph.".concat(t,': source node "').concat(o,'" not found.'));if(!u)throw new V("Graph.".concat(t,': target node "').concat(a,'" not found.'));var d={key:null,undirected:r,source:o,target:a,attributes:s};if(n)i=e._edgeKeyGenerator();else if(i=""+i,e._edges.has(i))throw new H("Graph.".concat(t,': the "').concat(i,'" edge already exists in the graph.'));if(!e.multi&&(r?void 0!==l.undirected[a]:void 0!==l.out[a]))throw new H("Graph.".concat(t,': an edge linking "').concat(o,'" to "').concat(a,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var h=new Y(r,i,l,u,s);e._edges.set(i,h);var f=o===a;return r?(l.undirectedDegree++,u.undirectedDegree++,f&&(l.undirectedLoops++,e._undirectedSelfLoopCount++)):(l.outDegree++,u.inDegree++,f&&(l.directedLoops++,e._directedSelfLoopCount++)),e.multi?h.attachMulti():h.attach(),r?e._undirectedSize++:e._directedSize++,d.key=i,e.emit("edgeAdded",d),i}function De(e,t,n,r,i,o,a,s,u){if(!r&&"undirected"===e.type)throw new H("Graph.".concat(t,": you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead."));if(r&&"directed"===e.type)throw new H("Graph.".concat(t,": you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead."));if(s)if(u){if("function"!=typeof s)throw new B("Graph.".concat(t,': invalid updater function. Expecting a function but got "').concat(s,'"'))}else if(!c(s))throw new B("Graph.".concat(t,': invalid attributes. Expecting an object but got "').concat(s,'"'));var d;if(o=""+o,a=""+a,u&&(d=s,s=void 0),!e.allowSelfLoops&&o===a)throw new H("Graph.".concat(t,': source & target are the same ("').concat(o,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var h,f,p=e._nodes.get(o),g=e._nodes.get(a);if(!n&&(h=e._edges.get(i))){if(!(h.source.key===o&&h.target.key===a||r&&h.source.key===a&&h.target.key===o))throw new H("Graph.".concat(t,': inconsistency detected when attempting to merge the "').concat(i,'" edge with "').concat(o,'" source & "').concat(a,'" target vs. ("').concat(h.source.key,'", "').concat(h.target.key,'").'));f=h}if(f||e.multi||!p||(f=r?p.undirected[a]:p.out[a]),f){var m=[f.key,!1,!1,!1];if(u?!d:!s)return m;if(u){var v=f.attributes;f.attributes=d(v),e.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else l(f.attributes,s),e.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:s});return m}s=s||{},u&&d&&(s=d(s));var y={key:null,undirected:r,source:o,target:a,attributes:s};if(n)i=e._edgeKeyGenerator();else if(i=""+i,e._edges.has(i))throw new H("Graph.".concat(t,': the "').concat(i,'" edge already exists in the graph.'));var b=!1,_=!1;p||(p=Ue(e,o,{}),b=!0,o===a&&(g=p,_=!0)),g||(g=Ue(e,a,{}),_=!0),h=new Y(r,i,p,g,s),e._edges.set(i,h);var w=o===a;return r?(p.undirectedDegree++,g.undirectedDegree++,w&&(p.undirectedLoops++,e._undirectedSelfLoopCount++)):(p.outDegree++,g.inDegree++,w&&(p.directedLoops++,e._directedSelfLoopCount++)),e.multi?h.attachMulti():h.attach(),r?e._undirectedSize++:e._directedSize++,y.key=i,e.emit("edgeAdded",y),[i,!0,b,_]}function Le(e,t){e._edges.delete(t.key);var n=t.source,r=t.target,i=t.attributes,o=t.undirected,a=n===r;o?(n.undirectedDegree--,r.undirectedDegree--,a&&(n.undirectedLoops--,e._undirectedSelfLoopCount--)):(n.outDegree--,r.inDegree--,a&&(n.directedLoops--,e._directedSelfLoopCount--)),e.multi?t.detachMulti():t.detach(),o?e._undirectedSize--:e._directedSize--,e.emit("edgeDropped",{key:t.key,attributes:i,source:n.key,target:r.key,undirected:o})}var Ne=function(n){function r(e){var t;if(t=n.call(this)||this,"boolean"!=typeof(e=l({},Oe,e)).multi)throw new B("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(e.multi,'".'));if(!Ae.has(e.type))throw new B('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(e.type,'".'));if("boolean"!=typeof e.allowSelfLoops)throw new B("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(e.allowSelfLoops,'".'));var r="mixed"===e.type?W:"directed"===e.type?q:$;h(s(t),"NodeDataClass",r);var i="geid_"+Me()+"_",o=0;return h(s(t),"_attributes",{}),h(s(t),"_nodes",new Map),h(s(t),"_edges",new Map),h(s(t),"_directedSize",0),h(s(t),"_undirectedSize",0),h(s(t),"_directedSelfLoopCount",0),h(s(t),"_undirectedSelfLoopCount",0),h(s(t),"_edgeKeyGenerator",(function(){var e;do{e=i+o++}while(t._edges.has(e));return e})),h(s(t),"_options",e),Pe.forEach((function(e){return h(s(t),e,t[e])})),f(s(t),"order",(function(){return t._nodes.size})),f(s(t),"size",(function(){return t._edges.size})),f(s(t),"directedSize",(function(){return t._directedSize})),f(s(t),"undirectedSize",(function(){return t._undirectedSize})),f(s(t),"selfLoopCount",(function(){return t._directedSelfLoopCount+t._undirectedSelfLoopCount})),f(s(t),"directedSelfLoopCount",(function(){return t._directedSelfLoopCount})),f(s(t),"undirectedSelfLoopCount",(function(){return t._undirectedSelfLoopCount})),f(s(t),"multi",t._options.multi),f(s(t),"type",t._options.type),f(s(t),"allowSelfLoops",t._options.allowSelfLoops),f(s(t),"implementation",(function(){return"graphology"})),t}t(r,n);var i=r.prototype;return i._resetInstanceCounters=function(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0},i.hasNode=function(e){return this._nodes.has(""+e)},i.hasDirectedEdge=function(e,t){if("undirected"===this.type)return!1;if(1===arguments.length){var n=""+e,r=this._edges.get(n);return!!r&&!r.undirected}if(2===arguments.length){e=""+e,t=""+t;var i=this._nodes.get(e);return!!i&&i.out.hasOwnProperty(t)}throw new B("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},i.hasUndirectedEdge=function(e,t){if("directed"===this.type)return!1;if(1===arguments.length){var n=""+e,r=this._edges.get(n);return!!r&&r.undirected}if(2===arguments.length){e=""+e,t=""+t;var i=this._nodes.get(e);return!!i&&i.undirected.hasOwnProperty(t)}throw new B("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},i.hasEdge=function(e,t){if(1===arguments.length){var n=""+e;return this._edges.has(n)}if(2===arguments.length){e=""+e,t=""+t;var r=this._nodes.get(e);return!!r&&(void 0!==r.out&&r.out.hasOwnProperty(t)||void 0!==r.undirected&&r.undirected.hasOwnProperty(t))}throw new B("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},i.directedEdge=function(e,t){if("undirected"!==this.type){if(e=""+e,t=""+t,this.multi)throw new H("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var n=this._nodes.get(e);if(!n)throw new V('Graph.directedEdge: could not find the "'.concat(e,'" source node in the graph.'));if(!this._nodes.has(t))throw new V('Graph.directedEdge: could not find the "'.concat(t,'" target node in the graph.'));var r=n.out&&n.out[t]||void 0;return r?r.key:void 0}},i.undirectedEdge=function(e,t){if("directed"!==this.type){if(e=""+e,t=""+t,this.multi)throw new H("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var n=this._nodes.get(e);if(!n)throw new V('Graph.undirectedEdge: could not find the "'.concat(e,'" source node in the graph.'));if(!this._nodes.has(t))throw new V('Graph.undirectedEdge: could not find the "'.concat(t,'" target node in the graph.'));var r=n.undirected&&n.undirected[t]||void 0;return r?r.key:void 0}},i.edge=function(e,t){if(this.multi)throw new H("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,t=""+t;var n=this._nodes.get(e);if(!n)throw new V('Graph.edge: could not find the "'.concat(e,'" source node in the graph.'));if(!this._nodes.has(t))throw new V('Graph.edge: could not find the "'.concat(t,'" target node in the graph.'));var r=n.out&&n.out[t]||n.undirected&&n.undirected[t]||void 0;if(r)return r.key},i.areDirectedNeighbors=function(e,t){e=""+e,t=""+t;var n=this._nodes.get(e);if(!n)throw new V('Graph.areDirectedNeighbors: could not find the "'.concat(e,'" node in the graph.'));return"undirected"!==this.type&&(t in n.in||t in n.out)},i.areOutNeighbors=function(e,t){e=""+e,t=""+t;var n=this._nodes.get(e);if(!n)throw new V('Graph.areOutNeighbors: could not find the "'.concat(e,'" node in the graph.'));return"undirected"!==this.type&&t in n.out},i.areInNeighbors=function(e,t){e=""+e,t=""+t;var n=this._nodes.get(e);if(!n)throw new V('Graph.areInNeighbors: could not find the "'.concat(e,'" node in the graph.'));return"undirected"!==this.type&&t in n.in},i.areUndirectedNeighbors=function(e,t){e=""+e,t=""+t;var n=this._nodes.get(e);if(!n)throw new V('Graph.areUndirectedNeighbors: could not find the "'.concat(e,'" node in the graph.'));return"directed"!==this.type&&t in n.undirected},i.areNeighbors=function(e,t){e=""+e,t=""+t;var n=this._nodes.get(e);if(!n)throw new V('Graph.areNeighbors: could not find the "'.concat(e,'" node in the graph.'));return"undirected"!==this.type&&(t in n.in||t in n.out)||"directed"!==this.type&&t in n.undirected},i.areInboundNeighbors=function(e,t){e=""+e,t=""+t;var n=this._nodes.get(e);if(!n)throw new V('Graph.areInboundNeighbors: could not find the "'.concat(e,'" node in the graph.'));return"undirected"!==this.type&&t in n.in||"directed"!==this.type&&t in n.undirected},i.areOutboundNeighbors=function(e,t){e=""+e,t=""+t;var n=this._nodes.get(e);if(!n)throw new V('Graph.areOutboundNeighbors: could not find the "'.concat(e,'" node in the graph.'));return"undirected"!==this.type&&t in n.out||"directed"!==this.type&&t in n.undirected},i.inDegree=function(e){e=""+e;var t=this._nodes.get(e);if(!t)throw new V('Graph.inDegree: could not find the "'.concat(e,'" node in the graph.'));return"undirected"===this.type?0:t.inDegree},i.outDegree=function(e){e=""+e;var t=this._nodes.get(e);if(!t)throw new V('Graph.outDegree: could not find the "'.concat(e,'" node in the graph.'));return"undirected"===this.type?0:t.outDegree},i.directedDegree=function(e){e=""+e;var t=this._nodes.get(e);if(!t)throw new V('Graph.directedDegree: could not find the "'.concat(e,'" node in the graph.'));return"undirected"===this.type?0:t.inDegree+t.outDegree},i.undirectedDegree=function(e){e=""+e;var t=this._nodes.get(e);if(!t)throw new V('Graph.undirectedDegree: could not find the "'.concat(e,'" node in the graph.'));return"directed"===this.type?0:t.undirectedDegree},i.inboundDegree=function(e){e=""+e;var t=this._nodes.get(e);if(!t)throw new V('Graph.inboundDegree: could not find the "'.concat(e,'" node in the graph.'));var n=0;return"directed"!==this.type&&(n+=t.undirectedDegree),"undirected"!==this.type&&(n+=t.inDegree),n},i.outboundDegree=function(e){e=""+e;var t=this._nodes.get(e);if(!t)throw new V('Graph.outboundDegree: could not find the "'.concat(e,'" node in the graph.'));var n=0;return"directed"!==this.type&&(n+=t.undirectedDegree),"undirected"!==this.type&&(n+=t.outDegree),n},i.degree=function(e){e=""+e;var t=this._nodes.get(e);if(!t)throw new V('Graph.degree: could not find the "'.concat(e,'" node in the graph.'));var n=0;return"directed"!==this.type&&(n+=t.undirectedDegree),"undirected"!==this.type&&(n+=t.inDegree+t.outDegree),n},i.inDegreeWithoutSelfLoops=function(e){e=""+e;var t=this._nodes.get(e);if(!t)throw new V('Graph.inDegreeWithoutSelfLoops: could not find the "'.concat(e,'" node in the graph.'));return"undirected"===this.type?0:t.inDegree-t.directedLoops},i.outDegreeWithoutSelfLoops=function(e){e=""+e;var t=this._nodes.get(e);if(!t)throw new V('Graph.outDegreeWithoutSelfLoops: could not find the "'.concat(e,'" node in the graph.'));return"undirected"===this.type?0:t.outDegree-t.directedLoops},i.directedDegreeWithoutSelfLoops=function(e){e=""+e;var t=this._nodes.get(e);if(!t)throw new V('Graph.directedDegreeWithoutSelfLoops: could not find the "'.concat(e,'" node in the graph.'));return"undirected"===this.type?0:t.inDegree+t.outDegree-2*t.directedLoops},i.undirectedDegreeWithoutSelfLoops=function(e){e=""+e;var t=this._nodes.get(e);if(!t)throw new V('Graph.undirectedDegreeWithoutSelfLoops: could not find the "'.concat(e,'" node in the graph.'));return"directed"===this.type?0:t.undirectedDegree-2*t.undirectedLoops},i.inboundDegreeWithoutSelfLoops=function(e){e=""+e;var t=this._nodes.get(e);if(!t)throw new V('Graph.inboundDegreeWithoutSelfLoops: could not find the "'.concat(e,'" node in the graph.'));var n=0,r=0;return"directed"!==this.type&&(n+=t.undirectedDegree,r+=2*t.undirectedLoops),"undirected"!==this.type&&(n+=t.inDegree,r+=t.directedLoops),n-r},i.outboundDegreeWithoutSelfLoops=function(e){e=""+e;var t=this._nodes.get(e);if(!t)throw new V('Graph.outboundDegreeWithoutSelfLoops: could not find the "'.concat(e,'" node in the graph.'));var n=0,r=0;return"directed"!==this.type&&(n+=t.undirectedDegree,r+=2*t.undirectedLoops),"undirected"!==this.type&&(n+=t.outDegree,r+=t.directedLoops),n-r},i.degreeWithoutSelfLoops=function(e){e=""+e;var t=this._nodes.get(e);if(!t)throw new V('Graph.degreeWithoutSelfLoops: could not find the "'.concat(e,'" node in the graph.'));var n=0,r=0;return"directed"!==this.type&&(n+=t.undirectedDegree,r+=2*t.undirectedLoops),"undirected"!==this.type&&(n+=t.inDegree+t.outDegree,r+=2*t.directedLoops),n-r},i.source=function(e){e=""+e;var t=this._edges.get(e);if(!t)throw new V('Graph.source: could not find the "'.concat(e,'" edge in the graph.'));return t.source.key},i.target=function(e){e=""+e;var t=this._edges.get(e);if(!t)throw new V('Graph.target: could not find the "'.concat(e,'" edge in the graph.'));return t.target.key},i.extremities=function(e){e=""+e;var t=this._edges.get(e);if(!t)throw new V('Graph.extremities: could not find the "'.concat(e,'" edge in the graph.'));return[t.source.key,t.target.key]},i.opposite=function(e,t){e=""+e,t=""+t;var n=this._edges.get(t);if(!n)throw new V('Graph.opposite: could not find the "'.concat(t,'" edge in the graph.'));var r=n.source.key,i=n.target.key;if(e===r)return i;if(e===i)return r;throw new V('Graph.opposite: the "'.concat(e,'" node is not attached to the "').concat(t,'" edge (').concat(r,", ").concat(i,")."))},i.hasExtremity=function(e,t){e=""+e,t=""+t;var n=this._edges.get(e);if(!n)throw new V('Graph.hasExtremity: could not find the "'.concat(e,'" edge in the graph.'));return n.source.key===t||n.target.key===t},i.isUndirected=function(e){e=""+e;var t=this._edges.get(e);if(!t)throw new V('Graph.isUndirected: could not find the "'.concat(e,'" edge in the graph.'));return t.undirected},i.isDirected=function(e){e=""+e;var t=this._edges.get(e);if(!t)throw new V('Graph.isDirected: could not find the "'.concat(e,'" edge in the graph.'));return!t.undirected},i.isSelfLoop=function(e){e=""+e;var t=this._edges.get(e);if(!t)throw new V('Graph.isSelfLoop: could not find the "'.concat(e,'" edge in the graph.'));return t.source===t.target},i.addNode=function(e,t){var n=function(e,t,n){if(n&&!c(n))throw new B('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(n,'"'));if(t=""+t,n=n||{},e._nodes.has(t))throw new H('Graph.addNode: the "'.concat(t,'" node already exist in the graph.'));var r=new e.NodeDataClass(t,n);return e._nodes.set(t,r),e.emit("nodeAdded",{key:t,attributes:n}),r}(this,e,t);return n.key},i.mergeNode=function(e,t){if(t&&!c(t))throw new B('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(t,'"'));e=""+e,t=t||{};var n=this._nodes.get(e);return n?(t&&(l(n.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:n.attributes,data:t})),[e,!1]):(n=new this.NodeDataClass(e,t),this._nodes.set(e,n),this.emit("nodeAdded",{key:e,attributes:t}),[e,!0])},i.updateNode=function(e,t){if(t&&"function"!=typeof t)throw new B('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(t,'"'));e=""+e;var n=this._nodes.get(e);if(n){if(t){var r=n.attributes;n.attributes=t(r),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:n.attributes})}return[e,!1]}var i=t?t({}):{};return n=new this.NodeDataClass(e,i),this._nodes.set(e,n),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]},i.dropNode=function(e){e=""+e;var t,n=this._nodes.get(e);if(!n)throw new V('Graph.dropNode: could not find the "'.concat(e,'" node in the graph.'));if("undirected"!==this.type){for(var r in n.out){t=n.out[r];do{Le(this,t),t=t.next}while(t)}for(var i in n.in){t=n.in[i];do{Le(this,t),t=t.next}while(t)}}if("directed"!==this.type)for(var o in n.undirected){t=n.undirected[o];do{Le(this,t),t=t.next}while(t)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})},i.dropEdge=function(e){var t;if(arguments.length>1){var n=""+arguments[0],r=""+arguments[1];if(!(t=u(this,n,r,this.type)))throw new V('Graph.dropEdge: could not find the "'.concat(n,'" -> "').concat(r,'" edge in the graph.'))}else if(e=""+e,!(t=this._edges.get(e)))throw new V('Graph.dropEdge: could not find the "'.concat(e,'" edge in the graph.'));return Le(this,t),this},i.dropDirectedEdge=function(e,t){if(arguments.length<2)throw new H("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new H("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var n=u(this,e=""+e,t=""+t,"directed");if(!n)throw new V('Graph.dropDirectedEdge: could not find a "'.concat(e,'" -> "').concat(t,'" edge in the graph.'));return Le(this,n),this},i.dropUndirectedEdge=function(e,t){if(arguments.length<2)throw new H("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new H("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var n=u(this,e,t,"undirected");if(!n)throw new V('Graph.dropUndirectedEdge: could not find a "'.concat(e,'" -> "').concat(t,'" edge in the graph.'));return Le(this,n),this},i.clear=function(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")},i.clearEdges=function(){for(var e,t=this._nodes.values();!0!==(e=t.next()).done;)e.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")},i.getAttribute=function(e){return this._attributes[e]},i.getAttributes=function(){return this._attributes},i.hasAttribute=function(e){return this._attributes.hasOwnProperty(e)},i.setAttribute=function(e,t){return this._attributes[e]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this},i.updateAttribute=function(e,t){if("function"!=typeof t)throw new B("Graph.updateAttribute: updater should be a function.");var n=this._attributes[e];return this._attributes[e]=t(n),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this},i.removeAttribute=function(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this},i.replaceAttributes=function(e){if(!c(e))throw new B("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},i.mergeAttributes=function(e){if(!c(e))throw new B("Graph.mergeAttributes: provided attributes are not a plain object.");return l(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this},i.updateAttributes=function(e){if("function"!=typeof e)throw new B("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this},i.updateEachNodeAttributes=function(e,t){if("function"!=typeof e)throw new B("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!p(t))throw new B("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var n,r,i=this._nodes.values();!0!==(n=i.next()).done;)(r=n.value).attributes=e(r.key,r.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})},i.updateEachEdgeAttributes=function(e,t){if("function"!=typeof e)throw new B("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!p(t))throw new B("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var n,r,i,o,a=this._edges.values();!0!==(n=a.next()).done;)i=(r=n.value).source,o=r.target,r.attributes=e(r.key,r.attributes,i.key,o.key,i.attributes,o.attributes,r.undirected);this.emit("eachEdgeAttributesUpdated",{hints:t||null})},i.forEachAdjacencyEntry=function(e){if("function"!=typeof e)throw new B("Graph.forEachAdjacencyEntry: expecting a callback.");Ee(!1,!1,!1,this,e)},i.forEachAdjacencyEntryWithOrphans=function(e){if("function"!=typeof e)throw new B("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Ee(!1,!1,!0,this,e)},i.forEachAssymetricAdjacencyEntry=function(e){if("function"!=typeof e)throw new B("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Ee(!1,!0,!1,this,e)},i.forEachAssymetricAdjacencyEntryWithOrphans=function(e){if("function"!=typeof e)throw new B("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Ee(!1,!0,!0,this,e)},i.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):G(this._nodes.keys(),this._nodes.size)},i.forEachNode=function(e){if("function"!=typeof e)throw new B("Graph.forEachNode: expecting a callback.");for(var t,n,r=this._nodes.values();!0!==(t=r.next()).done;)e((n=t.value).key,n.attributes)},i.findNode=function(e){if("function"!=typeof e)throw new B("Graph.findNode: expecting a callback.");for(var t,n,r=this._nodes.values();!0!==(t=r.next()).done;)if(e((n=t.value).key,n.attributes))return n.key},i.mapNodes=function(e){if("function"!=typeof e)throw new B("Graph.mapNode: expecting a callback.");for(var t,n,r=this._nodes.values(),i=new Array(this.order),o=0;!0!==(t=r.next()).done;)n=t.value,i[o++]=e(n.key,n.attributes);return i},i.someNode=function(e){if("function"!=typeof e)throw new B("Graph.someNode: expecting a callback.");for(var t,n,r=this._nodes.values();!0!==(t=r.next()).done;)if(e((n=t.value).key,n.attributes))return!0;return!1},i.everyNode=function(e){if("function"!=typeof e)throw new B("Graph.everyNode: expecting a callback.");for(var t,n,r=this._nodes.values();!0!==(t=r.next()).done;)if(!e((n=t.value).key,n.attributes))return!1;return!0},i.filterNodes=function(e){if("function"!=typeof e)throw new B("Graph.filterNodes: expecting a callback.");for(var t,n,r=this._nodes.values(),i=[];!0!==(t=r.next()).done;)e((n=t.value).key,n.attributes)&&i.push(n.key);return i},i.reduceNodes=function(e,t){if("function"!=typeof e)throw new B("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new B("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");for(var n,r,i=t,o=this._nodes.values();!0!==(n=o.next()).done;)i=e(i,(r=n.value).key,r.attributes);return i},i.nodeEntries=function(){var e=this._nodes.values();return new U((function(){var t=e.next();if(t.done)return t;var n=t.value;return{value:{node:n.key,attributes:n.attributes},done:!1}}))},i.export=function(){var e=this,t=new Array(this._nodes.size),n=0;this._nodes.forEach((function(e,r){t[n++]=function(e,t){var n={key:e};return d(t.attributes)||(n.attributes=l({},t.attributes)),n}(r,e)}));var r=new Array(this._edges.size);return n=0,this._edges.forEach((function(t,i){r[n++]=function(e,t,n){var r={key:t,source:n.source.key,target:n.target.key};return d(n.attributes)||(r.attributes=l({},n.attributes)),"mixed"===e&&n.undirected&&(r.undirected=!0),r}(e.type,i,t)})),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:t,edges:r}},i.import=function(e){var t,n,i,o,a,s=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof r)return e.forEachNode((function(e,t){l?s.mergeNode(e,t):s.addNode(e,t)})),e.forEachEdge((function(e,t,n,r,i,o,a){l?a?s.mergeUndirectedEdgeWithKey(e,n,r,t):s.mergeDirectedEdgeWithKey(e,n,r,t):a?s.addUndirectedEdgeWithKey(e,n,r,t):s.addDirectedEdgeWithKey(e,n,r,t)})),this;if(!c(e))throw new B("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!c(e.attributes))throw new B("Graph.import: invalid attributes. Expecting a plain object.");l?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}if(e.nodes){if(i=e.nodes,!Array.isArray(i))throw new B("Graph.import: invalid nodes. Expecting an array.");for(t=0,n=i.length;t<n;t++){ke(o=i[t]);var u=o,d=u.key,h=u.attributes;l?this.mergeNode(d,h):this.addNode(d,h)}}if(e.edges){var f=!1;if("undirected"===this.type&&(f=!0),i=e.edges,!Array.isArray(i))throw new B("Graph.import: invalid edges. Expecting an array.");for(t=0,n=i.length;t<n;t++){Te(a=i[t]);var p=a,g=p.source,m=p.target,v=p.attributes,y=p.undirected,b=void 0===y?f:y;"key"in a?(l?b?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:b?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,a.key,g,m,v):(l?b?this.mergeUndirectedEdge:this.mergeDirectedEdge:b?this.addUndirectedEdge:this.addDirectedEdge).call(this,g,m,v)}}return this},i.nullCopy=function(e){var t=new r(l({},this._options,e));return t.replaceAttributes(l({},this.getAttributes())),t},i.emptyCopy=function(e){var t=this.nullCopy(e);return this._nodes.forEach((function(e,n){var r=l({},e.attributes);e=new t.NodeDataClass(n,r),t._nodes.set(n,e)})),t},i.copy=function(e){if("string"==typeof(e=e||{}).type&&e.type!==this.type&&"mixed"!==e.type)throw new H('Graph.copy: cannot create an incompatible copy from "'.concat(this.type,'" type to "').concat(e.type,'" because this would mean losing information about the current graph.'));if("boolean"==typeof e.multi&&e.multi!==this.multi&&!0!==e.multi)throw new H("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if("boolean"==typeof e.allowSelfLoops&&e.allowSelfLoops!==this.allowSelfLoops&&!0!==e.allowSelfLoops)throw new H("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");for(var t,n,r=this.emptyCopy(e),i=this._edges.values();!0!==(t=i.next()).done;)ze(r,"copy",!1,(n=t.value).undirected,n.key,n.source.key,n.target.key,l({},n.attributes));return r},i.toJSON=function(){return this.export()},i.toString=function(){return"[object Graph]"},i.inspect=function(){var t=this,n={};this._nodes.forEach((function(e,t){n[t]=e.attributes}));var r={},i={};this._edges.forEach((function(e,n){var o,a=e.undirected?"--":"->",s="",l=e.source.key,u=e.target.key;e.undirected&&l>u&&(o=l,l=u,u=o);var c="(".concat(l,")").concat(a,"(").concat(u,")");n.startsWith("geid_")?t.multi&&(void 0===i[c]?i[c]=0:i[c]++,s+="".concat(i[c],". ")):s+="[".concat(n,"]: "),r[s+=c]=e.attributes}));var o={};for(var a in this)this.hasOwnProperty(a)&&!Pe.has(a)&&"function"!=typeof this[a]&&"symbol"!==e(a)&&(o[a]=this[a]);return o.attributes=this._attributes,o.nodes=n,o.edges=r,h(o,"constructor",this.constructor),o},r}(m.exports.EventEmitter);"undefined"!=typeof Symbol&&(Ne.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ne.prototype.inspect),[{name:function(e){return"".concat(e,"Edge")},generateKey:!0},{name:function(e){return"".concat(e,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(e){return"".concat(e,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(e){return"".concat(e,"EdgeWithKey")}},{name:function(e){return"".concat(e,"DirectedEdgeWithKey")},type:"directed"},{name:function(e){return"".concat(e,"UndirectedEdgeWithKey")},type:"undirected"}].forEach((function(e){["add","merge","update"].forEach((function(t){var n=e.name(t),r="add"===t?ze:De;e.generateKey?Ne.prototype[n]=function(i,o,a){return r(this,n,!0,"undirected"===(e.type||this.type),null,i,o,a,"update"===t)}:Ne.prototype[n]=function(i,o,a,s){return r(this,n,!1,"undirected"===(e.type||this.type),i,o,a,s,"update"===t)}}))})),function(e){Z.forEach((function(t){var n=t.name,r=t.attacher;r(e,n("Node"),0),r(e,n("Source"),1),r(e,n("Target"),2),r(e,n("Opposite"),3)}))}(Ne),function(e){K.forEach((function(t){var n=t.name,r=t.attacher;r(e,n("Edge"),"mixed"),r(e,n("DirectedEdge"),"directed"),r(e,n("UndirectedEdge"),"undirected")}))}(Ne),function(e){te.forEach((function(t){!function(e,t){var n=t.name,r=t.type,i=t.direction;e.prototype[n]=function(e,t){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return[];if(!arguments.length)return le(this,r);if(1===arguments.length){e=""+e;var o=this._nodes.get(e);if(void 0===o)throw new V("Graph.".concat(n,': could not find the "').concat(e,'" node in the graph.'));return he(this.multi,"mixed"===r?this.type:r,i,o)}if(2===arguments.length){e=""+e,t=""+t;var a=this._nodes.get(e);if(!a)throw new V("Graph.".concat(n,':  could not find the "').concat(e,'" source node in the graph.'));if(!this._nodes.has(t))throw new V("Graph.".concat(n,':  could not find the "').concat(t,'" target node in the graph.'));return ge(r,this.multi,i,a,t)}throw new B("Graph.".concat(n,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(e,t),function(e,t){var n=t.name,r=t.type,i=t.direction,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[o]=function(e,t,n){if("mixed"===r||"mixed"===this.type||r===this.type){if(1===arguments.length)return ue(!1,this,r,n=e);if(2===arguments.length){e=""+e,n=t;var a=this._nodes.get(e);if(void 0===a)throw new V("Graph.".concat(o,': could not find the "').concat(e,'" node in the graph.'));return de(!1,this.multi,"mixed"===r?this.type:r,i,a,n)}if(3===arguments.length){e=""+e,t=""+t;var s=this._nodes.get(e);if(!s)throw new V("Graph.".concat(o,':  could not find the "').concat(e,'" source node in the graph.'));if(!this._nodes.has(t))throw new V("Graph.".concat(o,':  could not find the "').concat(t,'" target node in the graph.'));return pe(!1,r,this.multi,i,s,t,n)}throw new B("Graph.".concat(o,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}};var a="map"+n[0].toUpperCase()+n.slice(1);e.prototype[a]=function(){var e,t=Array.prototype.slice.call(arguments),n=t.pop();if(0===t.length){var i=0;"directed"!==r&&(i+=this.undirectedSize),"undirected"!==r&&(i+=this.directedSize),e=new Array(i);var a=0;t.push((function(t,r,i,o,s,l,u){e[a++]=n(t,r,i,o,s,l,u)}))}else e=[],t.push((function(t,r,i,o,a,s,l){e.push(n(t,r,i,o,a,s,l))}));return this[o].apply(this,t),e};var s="filter"+n[0].toUpperCase()+n.slice(1);e.prototype[s]=function(){var e=Array.prototype.slice.call(arguments),t=e.pop(),n=[];return e.push((function(e,r,i,o,a,s,l){t(e,r,i,o,a,s,l)&&n.push(e)})),this[o].apply(this,e),n};var l="reduce"+n[0].toUpperCase()+n.slice(1);e.prototype[l]=function(){var e,t,n=Array.prototype.slice.call(arguments);if(n.length<2||n.length>4)throw new B("Graph.".concat(l,": invalid number of arguments (expecting 2, 3 or 4 and got ").concat(n.length,")."));if("function"==typeof n[n.length-1]&&"function"!=typeof n[n.length-2])throw new B("Graph.".concat(l,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));2===n.length?(e=n[0],t=n[1],n=[]):3===n.length?(e=n[1],t=n[2],n=[n[0]]):4===n.length&&(e=n[2],t=n[3],n=[n[0],n[1]]);var r=t;return n.push((function(t,n,i,o,a,s,l){r=e(r,t,n,i,o,a,s,l)})),this[o].apply(this,n),r}}(e,t),function(e,t){var n=t.name,r=t.type,i=t.direction,o="find"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[o]=function(e,t,n){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return!1;if(1===arguments.length)return ue(!0,this,r,n=e);if(2===arguments.length){e=""+e,n=t;var a=this._nodes.get(e);if(void 0===a)throw new V("Graph.".concat(o,': could not find the "').concat(e,'" node in the graph.'));return de(!0,this.multi,"mixed"===r?this.type:r,i,a,n)}if(3===arguments.length){e=""+e,t=""+t;var s=this._nodes.get(e);if(!s)throw new V("Graph.".concat(o,':  could not find the "').concat(e,'" source node in the graph.'));if(!this._nodes.has(t))throw new V("Graph.".concat(o,':  could not find the "').concat(t,'" target node in the graph.'));return pe(!0,r,this.multi,i,s,t,n)}throw new B("Graph.".concat(o,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))};var a="some"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[a]=function(){var e=Array.prototype.slice.call(arguments),t=e.pop();return e.push((function(e,n,r,i,o,a,s){return t(e,n,r,i,o,a,s)})),!!this[o].apply(this,e)};var s="every"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[s]=function(){var e=Array.prototype.slice.call(arguments),t=e.pop();return e.push((function(e,n,r,i,o,a,s){return!t(e,n,r,i,o,a,s)})),!this[o].apply(this,e)}}(e,t),function(e,t){var n=t.name,r=t.type,i=t.direction,o=n.slice(0,-1)+"Entries";e.prototype[o]=function(e,t){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return U.empty();if(!arguments.length)return ce(this,r);if(1===arguments.length){e=""+e;var n=this._nodes.get(e);if(!n)throw new V("Graph.".concat(o,': could not find the "').concat(e,'" node in the graph.'));return fe(r,i,n)}if(2===arguments.length){e=""+e,t=""+t;var a=this._nodes.get(e);if(!a)throw new V("Graph.".concat(o,':  could not find the "').concat(e,'" source node in the graph.'));if(!this._nodes.has(t))throw new V("Graph.".concat(o,':  could not find the "').concat(t,'" target node in the graph.'));return me(r,i,a,t)}throw new B("Graph.".concat(o,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(e,t)}))}(Ne),function(e){ve.forEach((function(t){xe(e,t),function(e,t){var n=t.name,r=t.type,i=t.direction,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[o]=function(e,t){if("mixed"===r||"mixed"===this.type||r===this.type){e=""+e;var n=this._nodes.get(e);if(void 0===n)throw new V("Graph.".concat(o,': could not find the "').concat(e,'" node in the graph.'));_e(!1,"mixed"===r?this.type:r,i,n,t)}};var a="map"+n[0].toUpperCase()+n.slice(1);e.prototype[a]=function(e,t){var n=[];return this[o](e,(function(e,r){n.push(t(e,r))})),n};var s="filter"+n[0].toUpperCase()+n.slice(1);e.prototype[s]=function(e,t){var n=[];return this[o](e,(function(e,r){t(e,r)&&n.push(e)})),n};var l="reduce"+n[0].toUpperCase()+n.slice(1);e.prototype[l]=function(e,t,n){if(arguments.length<3)throw new B("Graph.".concat(l,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));var r=n;return this[o](e,(function(e,n){r=t(r,e,n)})),r}}(e,t),function(e,t){var n=t.name,r=t.type,i=t.direction,o=n[0].toUpperCase()+n.slice(1,-1),a="find"+o;e.prototype[a]=function(e,t){if("mixed"===r||"mixed"===this.type||r===this.type){e=""+e;var n=this._nodes.get(e);if(void 0===n)throw new V("Graph.".concat(a,': could not find the "').concat(e,'" node in the graph.'));return _e(!0,"mixed"===r?this.type:r,i,n,t)}};var s="some"+o;e.prototype[s]=function(e,t){return!!this[a](e,t)};var l="every"+o;e.prototype[l]=function(e,t){return!this[a](e,(function(e,n){return!t(e,n)}))}}(e,t),Se(e,t)}))}(Ne);var Ie=function(e){function n(t){var n=l({type:"directed"},t);if("multi"in n&&!1!==n.multi)throw new B("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==n.type)throw new B('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');return e.call(this,n)||this}return t(n,e),n}(Ne),Re=function(e){function n(t){var n=l({type:"undirected"},t);if("multi"in n&&!1!==n.multi)throw new B("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==n.type)throw new B('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');return e.call(this,n)||this}return t(n,e),n}(Ne),Fe=function(e){function n(t){var n=l({multi:!0},t);if("multi"in n&&!0!==n.multi)throw new B("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return e.call(this,n)||this}return t(n,e),n}(Ne),Ge=function(e){function n(t){var n=l({type:"directed",multi:!0},t);if("multi"in n&&!0!==n.multi)throw new B("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==n.type)throw new B('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');return e.call(this,n)||this}return t(n,e),n}(Ne),je=function(e){function n(t){var n=l({type:"undirected",multi:!0},t);if("multi"in n&&!0!==n.multi)throw new B("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==n.type)throw new B('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');return e.call(this,n)||this}return t(n,e),n}(Ne);function Be(e){e.from=function(t,n){var r=l({},t.options,n),i=new e(r);return i.import(t),i}}return Be(Ne),Be(Ie),Be(Re),Be(Fe),Be(Ge),Be(je),Ne.Graph=Ne,Ne.DirectedGraph=Ie,Ne.UndirectedGraph=Re,Ne.MultiGraph=Fe,Ne.MultiDirectedGraph=Ge,Ne.MultiUndirectedGraph=je,Ne.InvalidArgumentsGraphError=B,Ne.NotFoundGraphError=V,Ne.UsageGraphError=H,Ne}()},7213:function(e,t,n){var r=n(8210),i=n(8579),o=n(3118),a=i.DEFAULT_COMPARATOR,s=i.reverseComparator;function l(e,t,n,r){for(var i,o,a=t[r];r>n&&e(a,o=t[i=r-1>>1])<0;)t[r]=o,r=i;t[r]=a}function u(e,t,n){for(var r,i=t.length,o=n,a=t[n],s=2*n+1;s<i;)(r=s+1)<i&&e(t[s],t[r])>=0&&(s=r),t[n]=t[s],s=2*(n=s)+1;t[n]=a,l(e,t,o,n)}function c(e,t,n){t.push(n),l(e,t,0,t.length-1)}function d(e,t){var n=t.pop();if(0!==t.length){var r=t[0];return t[0]=n,u(e,t,0),r}return n}function h(e,t,n){if(0===t.length)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var r=t[0];return t[0]=n,u(e,t,0),r}function f(e,t,n){var r;return 0!==t.length&&e(t[0],n)<0&&(r=t[0],t[0]=n,n=r,u(e,t,0)),n}function p(e,t){for(var n=t.length>>1;--n>=0;)u(e,t,n)}function g(e,t){for(var n=t.length,r=0,i=new Array(n);r<n;)i[r++]=d(e,t);return i}function m(e){if(this.clear(),this.comparator=e||a,"function"!=typeof this.comparator)throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}function v(e){if(this.clear(),this.comparator=e||a,"function"!=typeof this.comparator)throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=s(this.comparator)}m.prototype.clear=function(){this.items=[],this.size=0},m.prototype.push=function(e){return c(this.comparator,this.items,e),++this.size},m.prototype.peek=function(){return this.items[0]},m.prototype.pop=function(){return 0!==this.size&&this.size--,d(this.comparator,this.items)},m.prototype.replace=function(e){return h(this.comparator,this.items,e)},m.prototype.pushpop=function(e){return f(this.comparator,this.items,e)},m.prototype.consume=function(){return this.size=0,g(this.comparator,this.items)},m.prototype.toArray=function(){return g(this.comparator,this.items.slice())},m.prototype.inspect=function(){var e=this.toArray();return Object.defineProperty(e,"constructor",{value:m,enumerable:!1}),e},"undefined"!=typeof Symbol&&(m.prototype[Symbol.for("nodejs.util.inspect.custom")]=m.prototype.inspect),v.prototype=m.prototype,m.from=function(e,t){var n,r=new m(t);return n=o.isArrayLike(e)?e.slice():o.toArray(e),p(r.comparator,n),r.items=n,r.size=n.length,r},v.from=function(e,t){var n,r=new v(t);return n=o.isArrayLike(e)?e.slice():o.toArray(e),p(r.comparator,n),r.items=n,r.size=n.length,r},m.siftUp=u,m.siftDown=l,m.push=c,m.pop=d,m.replace=h,m.pushpop=f,m.heapify=p,m.consume=g,m.nsmallest=function(e,t,n){2===arguments.length&&(n=t,t=e,e=a);var i,l,u,c,d=s(e),f=1/0;if(1===t){if(o.isArrayLike(n)){for(i=0,l=n.length;i<l;i++)u=n[i],(f===1/0||e(u,f)<0)&&(f=u);return(c=new n.constructor(1))[0]=f,c}return r(n,(function(t){(f===1/0||e(t,f)<0)&&(f=t)})),[f]}if(o.isArrayLike(n)){if(t>=n.length)return n.slice().sort(e);for(c=n.slice(0,t),p(d,c),i=t,l=n.length;i<l;i++)d(n[i],c[0])>0&&h(d,c,n[i]);return c.sort(e)}var g=o.guessLength(n);return null!==g&&g<t&&(t=g),c=new Array(t),i=0,r(n,(function(e){i<t?c[i]=e:(i===t&&p(d,c),d(e,c[0])>0&&h(d,c,e)),i++})),c.length>i&&(c.length=i),c.sort(e)},m.nlargest=function(e,t,n){2===arguments.length&&(n=t,t=e,e=a);var i,l,u,c,d=s(e),f=-1/0;if(1===t){if(o.isArrayLike(n)){for(i=0,l=n.length;i<l;i++)u=n[i],(f===-1/0||e(u,f)>0)&&(f=u);return(c=new n.constructor(1))[0]=f,c}return r(n,(function(t){(f===-1/0||e(t,f)>0)&&(f=t)})),[f]}if(o.isArrayLike(n)){if(t>=n.length)return n.slice().sort(d);for(c=n.slice(0,t),p(e,c),i=t,l=n.length;i<l;i++)e(n[i],c[0])>0&&h(e,c,n[i]);return c.sort(d)}var g=o.guessLength(n);return null!==g&&g<t&&(t=g),c=new Array(t),i=0,r(n,(function(n){i<t?c[i]=n:(i===t&&p(e,c),e(n,c[0])>0&&h(e,c,n)),i++})),c.length>i&&(c.length=i),c.sort(d)},m.MinHeap=m,m.MaxHeap=v,e.exports=m},2285:function(e,t,n){var r=n(8217),i=n(8210);function o(){this.clear()}o.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},o.prototype.enqueue=function(e){return this.items.push(e),++this.size},o.prototype.dequeue=function(){if(this.size){var e=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,e}},o.prototype.peek=function(){if(this.size)return this.items[this.offset]},o.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var n=this.offset,r=0,i=this.items.length;n<i;n++,r++)e.call(t,this.items[n],r,this)},o.prototype.toArray=function(){return this.items.slice(this.offset)},o.prototype.values=function(){var e=this.items,t=this.offset;return new r((function(){if(t>=e.length)return{done:!0};var n=e[t];return t++,{value:n,done:!1}}))},o.prototype.entries=function(){var e=this.items,t=this.offset,n=0;return new r((function(){if(t>=e.length)return{done:!0};var r=e[t];return t++,{value:[n++,r],done:!1}}))},"undefined"!=typeof Symbol&&(o.prototype[Symbol.iterator]=o.prototype.values),o.prototype.toString=function(){return this.toArray().join(",")},o.prototype.toJSON=function(){return this.toArray()},o.prototype.inspect=function(){var e=this.toArray();return Object.defineProperty(e,"constructor",{value:o,enumerable:!1}),e},"undefined"!=typeof Symbol&&(o.prototype[Symbol.for("nodejs.util.inspect.custom")]=o.prototype.inspect),o.from=function(e){var t=new o;return i(e,(function(e){t.enqueue(e)})),t},o.of=function(){return o.from(arguments)},e.exports=o},8579:function(e,t){t.DEFAULT_COMPARATOR=function(e,t){return e<t?-1:e>t?1:0},t.DEFAULT_REVERSE_COMPARATOR=function(e,t){return e<t?1:e>t?-1:0},t.reverseComparator=function(e){return function(t,n){return e(n,t)}},t.createTupleComparator=function(e){return 2===e?function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:e[1]<t[1]?-1:e[1]>t[1]?1:0}:function(t,n){for(var r=0;r<e;){if(t[r]<n[r])return-1;if(t[r]>n[r])return 1;r++}return 0}}},3118:function(e,t,n){var r=n(8210),i=n(670);function o(e){return"number"==typeof e.length?e.length:"number"==typeof e.size?e.size:void 0}t.isArrayLike=function(e){return Array.isArray(e)||i.isTypedArray(e)},t.guessLength=o,t.toArray=function(e){var t=o(e),n="number"==typeof t?new Array(t):[],i=0;return r(e,(function(e){n[i++]=e})),n},t.toArrayWithIndices=function(e){var t=o(e),n="number"==typeof t?i.getPointerArray(t):Array,a="number"==typeof t?new Array(t):[],s="number"==typeof t?new n(t):[],l=0;return r(e,(function(e){a[l]=e,s[l]=l++})),[a,s]}},670:function(e,t){var n=Math.pow(2,8)-1,r=Math.pow(2,16)-1,i=Math.pow(2,32)-1,o=Math.pow(2,7)-1,a=Math.pow(2,15)-1,s=Math.pow(2,31)-1;t.getPointerArray=function(e){var t=e-1;if(t<=n)return Uint8Array;if(t<=r)return Uint16Array;if(t<=i)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},t.getSignedPointerArray=function(e){var t=e-1;return t<=o?Int8Array:t<=a?Int16Array:t<=s?Int32Array:Float64Array},t.getNumberType=function(e){return e===(0|e)?-1===Math.sign(e)?e<=127&&e>=-128?Int8Array:e<=32767&&e>=-32768?Int16Array:Int32Array:e<=255?Uint8Array:e<=65535?Uint16Array:Uint32Array:Float64Array};var l={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};t.getMinimalRepresentation=function(e,n){var r,i,o,a,s,u=null,c=0;for(a=0,s=e.length;a<s;a++)o=n?n(e[a]):e[a],i=t.getNumberType(o),(r=l[i.name])>c&&(c=r,u=i);return u},t.isTypedArray=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView(e)},t.concat=function(){var e,t,n,r=0;for(e=0,n=arguments.length;e<n;e++)r+=arguments[e].length;var i=new arguments[0].constructor(r);for(e=0,t=0;e<n;e++)i.set(arguments[e],t),t+=arguments[e].length;return i},t.indices=function(e){for(var n=new(t.getPointerArray(e))(e),r=0;r<e;r++)n[r]=r;return n}},3345:function(e,t,n){var r;!function(i,o,a){if(i){for(var s,l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},u={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},c={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},d={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},h=1;h<20;++h)l[111+h]="f"+h;for(h=0;h<=9;++h)l[h+96]=h.toString();b.prototype.bind=function(e,t,n){var r=this;return e=e instanceof Array?e:[e],r._bindMultiple.call(r,e,t,n),r},b.prototype.unbind=function(e,t){return this.bind.call(this,e,(function(){}),t)},b.prototype.trigger=function(e,t){var n=this;return n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e),n},b.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},b.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1)return!1;if(y(t,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var n=e.composedPath()[0];n!==e.target&&(t=n)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},b.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},b.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(l[t]=e[t]);s=null},b.init=function(){var e=b(o);for(var t in e)"_"!==t.charAt(0)&&(b[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},b.init(),i.Mousetrap=b,e.exports&&(e.exports=b),void 0===(r=function(){return b}.call(t,n,t,e))||(e.exports=r)}function f(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function p(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return l[e.which]?l[e.which]:u[e.which]?u[e.which]:String.fromCharCode(e.which).toLowerCase()}function g(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function m(e,t,n){return n||(n=function(){if(!s)for(var e in s={},l)e>95&&e<112||l.hasOwnProperty(e)&&(s[l[e]]=e);return s}()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function v(e,t){var n,r,i,o=[];for(n=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),i=0;i<n.length;++i)r=n[i],d[r]&&(r=d[r]),t&&"keypress"!=t&&c[r]&&(r=c[r],o.push("shift")),g(r)&&o.push(r);return{key:r,modifiers:o,action:t=m(r,o,t)}}function y(e,t){return null!==e&&e!==o&&(e===t||y(e.parentNode,t))}function b(e){var t=this;if(e=e||o,!(t instanceof b))return new b(e);t.target=e,t._callbacks={},t._directMap={};var n,r={},i=!1,a=!1,s=!1;function l(e){e=e||{};var t,n=!1;for(t in r)e[t]?n=!0:r[t]=0;n||(s=!1)}function u(e,n,i,o,a,s){var l,u,c,d,h=[],f=i.type;if(!t._callbacks[e])return[];for("keyup"==f&&g(e)&&(n=[e]),l=0;l<t._callbacks[e].length;++l)if(u=t._callbacks[e][l],(o||!u.seq||r[u.seq]==u.level)&&f==u.action&&("keypress"==f&&!i.metaKey&&!i.ctrlKey||(c=n,d=u.modifiers,c.sort().join(",")===d.sort().join(",")))){var p=!o&&u.combo==a,m=o&&u.seq==o&&u.level==s;(p||m)&&t._callbacks[e].splice(l,1),h.push(u)}return h}function c(e,n,r,i){t.stopCallback(n,n.target||n.srcElement,r,i)||!1===e(n,r)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(n),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(n))}function d(e){"number"!=typeof e.which&&(e.which=e.keyCode);var n=p(e);n&&("keyup"!=e.type||i!==n?t.handleKey(n,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):i=!1)}function h(e,t,o,a){function u(t){return function(){s=t,++r[e],clearTimeout(n),n=setTimeout(l,1e3)}}function d(t){c(o,t,e),"keyup"!==a&&(i=p(t)),setTimeout(l,10)}r[e]=0;for(var h=0;h<t.length;++h){var f=h+1===t.length?d:u(a||v(t[h+1]).action);m(t[h],f,a,e,h)}}function m(e,n,r,i,o){t._directMap[e+":"+r]=n;var a,s=(e=e.replace(/\s+/g," ")).split(" ");s.length>1?h(e,s,n,r):(a=v(e,r),t._callbacks[a.key]=t._callbacks[a.key]||[],u(a.key,a.modifiers,{type:a.action},i,e,o),t._callbacks[a.key][i?"unshift":"push"]({callback:n,modifiers:a.modifiers,action:a.action,seq:i,level:o,combo:e}))}t._handleKey=function(e,t,n){var r,i=u(e,t,n),o={},d=0,h=!1;for(r=0;r<i.length;++r)i[r].seq&&(d=Math.max(d,i[r].level));for(r=0;r<i.length;++r)if(i[r].seq){if(i[r].level!=d)continue;h=!0,o[i[r].seq]=1,c(i[r].callback,n,i[r].combo,i[r].seq)}else h||c(i[r].callback,n,i[r].combo);var f="keypress"==n.type&&a;n.type!=s||g(e)||f||l(o),a=h&&"keydown"==n.type},t._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)m(e[r],t,n)},f(e,"keypress",d),f(e,"keydown",d),f(e,"keyup",d)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},8210:function(e,t,n){var r=n(1694),i=r.ARRAY_BUFFER_SUPPORT,o=r.SYMBOL_SUPPORT;e.exports=function(e,t){var n,r,a,s,l;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof t)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||i&&ArrayBuffer.isView(e)||"string"==typeof e||"[object Arguments]"===e.toString())for(a=0,s=e.length;a<s;a++)t(e[a],a);else if("function"!=typeof e.forEach)if(o&&Symbol.iterator in e&&"function"!=typeof e.next&&(e=e[Symbol.iterator]()),"function"!=typeof e.next)for(r in e)e.hasOwnProperty(r)&&t(e[r],r);else for(n=e,a=0;!0!==(l=n.next()).done;)t(l.value,a),a++;else e.forEach(t)}},8217:function(e){function t(e){if("function"!=typeof e)throw new Error("obliterator/iterator: expecting a function!");this.next=e}"undefined"!=typeof Symbol&&(t.prototype[Symbol.iterator]=function(){return this}),t.of=function(){var e=arguments,n=e.length,r=0;return new t((function(){return r>=n?{done:!0}:{done:!1,value:e[r++]}}))},t.empty=function(){return new t((function(){return{done:!0}}))},t.fromSequence=function(e){var n=0,r=e.length;return new t((function(){return n>=r?{done:!0}:{done:!1,value:e[n++]}}))},t.is=function(e){return e instanceof t||"object"==typeof e&&null!==e&&"function"==typeof e.next},e.exports=t},1694:function(e,t){t.ARRAY_BUFFER_SUPPORT="undefined"!=typeof ArrayBuffer,t.SYMBOL_SUPPORT="undefined"!=typeof Symbol},8671:function(e,t,n){"use strict";n.d(t,{HC:function(){return g},QI:function(){return p},aV:function(){return f}});var r=n(3013),i=n(7493),o=n(1837),a=n(6470),s=n(8742),l=n(3739),u=n(7147),c=n(4246),[d,h]=(0,i.k)({name:"ListStylesContext",errorMessage:"useListStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<List />\" "}),f=(0,a.G)((function(e,t){const n=(0,s.jC)("List",e),{children:r,styleType:i="none",stylePosition:a,spacing:h,...f}=(0,l.Lr)(e),p=(0,o.W)(r),g=h?{"& > *:not(style) ~ *:not(style)":{mt:h}}:{};return(0,c.jsx)(d,{value:n,children:(0,c.jsx)(u.m.ul,{ref:t,listStyleType:i,listStylePosition:a,role:"list",__css:{...n.container,...g},...f,children:p})})}));f.displayName="List",(0,a.G)(((e,t)=>{const{as:n,...r}=e;return(0,c.jsx)(f,{ref:t,as:"ol",styleType:"decimal",marginStart:"1em",...r})})).displayName="OrderedList";var p=(0,a.G)((function(e,t){const{as:n,...r}=e;return(0,c.jsx)(f,{ref:t,as:"ul",styleType:"initial",marginStart:"1em",...r})}));p.displayName="UnorderedList";var g=(0,a.G)((function(e,t){const n=h();return(0,c.jsx)(u.m.li,{ref:t,...e,__css:n.item})}));g.displayName="ListItem",(0,a.G)((function(e,t){const n=h();return(0,c.jsx)(r.J,{ref:t,role:"presentation",...e,__css:n.icon})})).displayName="ListIcon"},4771:function(e,t,n){"use strict";n.d(t,{h:function(){return s}});var r=n(3793),i=n(6470),o=n(7147),a=n(4246),s=(0,i.G)(((e,t)=>{const n=(0,r.p)();return(0,a.jsx)(o.m.thead,{...e,ref:t,__css:n.thead})}))},3793:function(e,t,n){"use strict";n.d(t,{i:function(){return h},p:function(){return d}});var r=n(6470),i=n(8742),o=n(3739),a=n(7147),s=n(613),l=n(7493),u=n(4246),[c,d]=(0,l.k)({name:"TableStylesContext",errorMessage:"useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Table />\" "}),h=(0,r.G)(((e,t)=>{const n=(0,i.jC)("Table",e),{className:r,layout:l,...d}=(0,o.Lr)(e);return(0,u.jsx)(c,{value:n,children:(0,u.jsx)(a.m.table,{ref:t,__css:{tableLayout:l,...n.table},className:(0,s.cx)("chakra-table",r),...d})})}));h.displayName="Table"},3242:function(e,t,n){"use strict";n.d(t,{Tr:function(){return s}});var r=n(3793),i=n(6470),o=n(7147),a=n(4246),s=(0,i.G)(((e,t)=>{const n=(0,r.p)();return(0,a.jsx)(o.m.tr,{...e,ref:t,__css:n.tr})}))},3177:function(e,t,n){"use strict";n.d(t,{p:function(){return s}});var r=n(3793),i=n(6470),o=n(7147),a=n(4246),s=(0,i.G)(((e,t)=>{const n=(0,r.p)();return(0,a.jsx)(o.m.tbody,{...e,ref:t,__css:n.tbody})}))},9981:function(e,t,n){"use strict";n.d(t,{Th:function(){return s}});var r=n(3793),i=n(6470),o=n(7147),a=n(4246),s=(0,i.G)((({isNumeric:e,...t},n)=>{const i=(0,r.p)();return(0,a.jsx)(o.m.th,{...t,ref:n,__css:i.th,"data-is-numeric":e})}))},3863:function(e,t,n){"use strict";n.d(t,{Td:function(){return s}});var r=n(3793),i=n(6470),o=n(7147),a=n(4246),s=(0,i.G)((({isNumeric:e,...t},n)=>{const i=(0,r.p)();return(0,a.jsx)(o.m.td,{...t,ref:n,__css:i.td,"data-is-numeric":e})}))},8283:function(e,t,n){"use strict";n.d(t,{Hn:function(){return m},jn:function(){return _}});var r=n(7378),i=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,c=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&c(e,n,t[n]);if(s)for(var n of s(t))u.call(t,n)&&c(e,n,t[n]);return e},h=(e,t)=>o(e,a(t));function f(e,t,n){if(!e)return;if(!0===n(e))return e;let r=t?e.return:e.child;for(;r;){const e=f(r,t,n);if(e)return e;r=t?null:r.sibling}}function p(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch(t){return e}}const g=p(r.createContext(null));class m extends r.Component{render(){return r.createElement(g.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:v,ReactCurrentDispatcher:y}=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function b(){const e=r.useContext(g);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=r.useId();return r.useMemo((()=>{for(const n of[null==v?void 0:v.current,e,null==e?void 0:e.alternate]){if(!n)continue;const e=f(n,!1,(e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}}));if(e)return e}}),[e,t])}function _(){const e=function(){var e,t;const n=b(),[i]=r.useState((()=>new Map));i.clear();let o=n;for(;o;){const n=null==(e=o.type)?void 0:e._context;n&&n!==g&&!i.has(n)&&i.set(n,null==(t=null==y?void 0:y.current)?void 0:t.readContext(p(n))),o=o.return}return i}();return r.useMemo((()=>Array.from(e.keys()).reduce(((t,n)=>i=>r.createElement(t,null,r.createElement(n.Provider,h(d({},i),{value:e.get(n)})))),(e=>r.createElement(m,d({},e))))),[e])}}}]);
//# sourceMappingURL=component---packages-gatsby-plugin-jaen-src-pages-cms-pages-index-tsx-6cd108d8b80f7f48e6f8.js.map